(function(){$(document).ready(function(){return $("a.btn-facebook").click(function(e){var t,o,n,r,a;return e.preventDefault(),t=e.data,a=600,o=350,n=screen.width/2-a/2,r=screen.height/2-o/2,_gaq.push(["_trackPageview","/loginpage/facebook/"]),window.login_callback=function(){return location.reload()},window.open("/hackers/auth/facebook?display=popup","facebook_login","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+a+", height="+o+", top="+r+", left="+n)}),$("a.btn-google").click(function(e){var t,o,n,r,a;return e.preventDefault(),t=e.data,a=600,o=500,n=screen.width/2-a/2,r=screen.height/2-o/2,_gaq.push(["_trackPageview","/loginpage/google/"]),window.login_callback=function(){return location.reload()},window.open("/hackers/auth/google_oauth2?display=popup","google_login","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+a+", height="+o+", top="+r+", left="+n)}),$("a.btn-github").click(function(e){var t,o,n,r,a;return e.preventDefault(),t=e.data,a=960,o=500,n=screen.width/2-a/2,r=screen.height/2-o/2,_gaq.push(["_trackPageview","/loginpage/github/"]),window.login_callback=function(){return location.reload()},window.open("/hackers/auth/github?display=popup","facebook_login","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+a+", height="+o+", top="+r+", left="+n)}),$("#fbshare").click(function(e){var t,o,n,r,a;return e.preventDefault(),a=600,t=350,o=screen.width/2-a/2,n=screen.height/2-t/2,r="https://www.facebook.com/dialog/feed?app_id=347499128655783&"+$(e.currentTarget).attr("href"),window.open(r,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+a+", height="+t+", top="+n+", left="+o),window.focus()}),$(".homepage_category-single").click(function(e){return $(".homepage_category-single").removeClass("active"),$(e.currentTarget).addClass("active"),window.tabs_smallified?void 0:($(".homepage_categories-nav").removeClass("large").addClass("small"),window.tabs_smallified=!0)})})}).call(this),function(){$(document).ready(function(){return function(){var e;return $.fn.getVars=function(e){return(e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(location.search))?decodeURIComponent(e[1]):void 0},$.fn.redirectPage=function(e){var t;return t=$(document).getVars("continue"),t?document.location.href=document.location.protocol+"//"+document.location.host+t:"reload"===e?document.location.reload():document.location.href=e},e=function(){var e,t;return $("[data-toggle=tooltip]").tooltip({trigger:"manual",animation:!1}),$("a.password-retrieve").click(function(){return"none"===$(".js-password-retrieve-area.forgot").css("display")?(setTimeout(function(){return $("html body").animate({scrollTop:$(".js-password-retrieve-area.forgot input").offset().top},300),setTimeout(function(){return $(".js-password-retrieve-area.forgot input").focus()},300)},600),$(".js-password-retrieve-area.forgot").slideToggle()):void 0}),t=function(e,t){return $("#legacy-signup input#"+e).parent().children("i").css("color","#f65039"),$("#legacy-signup input#"+e).attr("data-original-title",t),$("#legacy-signup input#"+e).tooltip("show")},e=function(e){return $("#legacy-signup input#"+e).parent().children("i").css("color","#2BC56D"),$("#legacy-signup input#"+e).attr("data-original-title",""),$("#legacy-signup input#"+e).tooltip("hide")},$("#legacy-signup input").keydown(function(e){var t,o;return t=e.keyCode||e.which,o=$(this).val(),""!==$.trim(o)?($(this).data("tab","true"),$(this).trigger("keyup")):void 0}),$("#legacy-signup input#username").keyup(function(){var o,n,r;return r=$(this).val(),void 0===$(this).data("tab")||(o=(new Date).getTime(),n=$(this).attr("data-time")||0,100>o-n)?void 0:($(this).attr("data-time",(new Date).getTime()),$.ajax({url:"/auth/valid_username",type:"POST",data:{username:r},success:function(o){return o.errors.length>0?t("username",o.errors):e("username")}}))}),$("#legacy-signup input#email").keyup(function(){var o,n;if(void 0!==$(this).data("tab"))return n=$(this).val(),o=/^[\w\.\+]+@[\S]+?\.[a-zA-Z+\.]{2,}$/,n.match(o)?e("email"):t("email","Invalid email address.")}),$("#legacy-signup input#password").keyup(function(){var o,n;if(void 0!==$(this).data("tab"))return n=$(this).val(),o=/.{6,}/,n.match(o)?e("password"):t("password","Password should be at least 6 characters long.")}),$(".signup-button").click(function(o){var n,r,a;return o.preventDefault(),$(o.currentTarget).hasClass("disabled")?void 0:($("form#legacy-signup .alert.error").hide().html(""),a=$("#legacy-signup input#username").val(),n=$("#legacy-signup input#email").val(),r=$("#legacy-signup input#password").val(),$(o.currentTarget).addClass("disabled"),$(o.currentTarget).html("Signing you up..."),$.ajax({url:"/auth/signup"+window.contest_path,type:"POST",data:{username:a,email:n,password:r,confirm_password:r,contest_crp:$.cookie(""+window.contest_slug+"_crp")},success:function(n){var r,a;return $(o.currentTarget).removeClass("disabled"),n.status?n.contest_started?($(o.currentTarget).html("Logging you in..."),$(document).redirectPage("reload")):$(document).redirectPage(document.location.href.replace("/login","/not_started").replace("/signup","/not_started")):($(o.currentTarget).html("Sign Up & Start Coding"),0===n.errors.length?r="Unknown Error":(window.data=n,a=["username","email","password"],$(a).each(function(o,r){return n.fields[r].length>0?t(r,n.fields[r].join(",")):e(r)})))}}))}),$("button.login-button").click(function(e){var t,o,n,r;return e.preventDefault(),$(e.currentTarget).hasClass("disabled")?void 0:($("form#legacy-signup .alert.error").hide().html(""),o=$("#legacy-login input#login").val(),n=$("#legacy-login input#password").val(),r=$("#legacy-login input#remember_me").is(":checked"),t="true"===$("input#fallback").val(),$(e.currentTarget).addClass("disabled"),$(e.currentTarget).html("Verifying.."),$.ajax({url:"/auth/login"+window.contest_path,type:"POST",data:{login:o,password:n,remember_me:r,contest_crp:$.cookie(""+window.contest_slug+"_crp"),fallback:t},success:function(r){var a,i,s,l,c,u,g;if($(e.currentTarget).removeClass("disabled"),t&&r.hrx_user&&"master"===r.contest_slug)return $(e.currentTarget).html("Log In"),$(".homepage_admin").hide(),$(".looking-for-hrx-auth").hide(),$("#both-accounts").show(),r.hacker_exists?$("#hr-auth-action").html("Login"):$("#hr-auth-action").html("Signup"),$("#homepage_notify").fadeIn(),a=function(){return $("#homepage_notify").hide(),$("#both-accounts").hide(),$(".homepage_admin").show(),$(".looking-for-hrx-auth").show()},$("#homepage_notify #back-button").off("click").on("click",a),u=function(){return $("#homepage_notify #yes-button").html("Redirecting..."),$.ajax({type:"POST",url:"/x/login",data:{email:o,password:n,dual_login:!0},success:function(e){var t,n;return e.status?$(document).redirectPage(document.location.protocol+"//"+document.location.host+"/x/login?utm_source=hr_login"):(t=null,e&&e.errors&&e.errors.length>0&&(t=e.errors[0]),n="",n=t?"&signup_error="+encodeURI(t):"",$(document).redirectPage(document.location.protocol+"//"+document.location.host+"/x/login?utm_source=hr_login&email="+encodeURI(o)+n))},error:function(){return $(document).redirectPage(document.location.protocol+"//"+document.location.host+"/x/login?utm_source=hr_login&email="+encodeURI(o)+"&signup_error="+encodeURI("Unknown Error!"))}})},$("#homepage_notify #yes-button").off("click").on("click",u),c=function(){return mixpanel.push(["track","DualLogin_HRRedirect",{login:o,status:r.status,hr_user:r.hacker_exists,hrx_user:r.hrx_user}]),$("#homepage_notify").hide(),$("#both-accounts").hide(),$(".homepage_admin").show(),$(".looking-for-hrx-auth").show(),setTimeout(function(){return r.hacker_exists?($("input#fallback").val("false"),$("button.login-button").click()):$("li.signup-toggle a").click()},0)},$("#homepage_notify #no-button").off("click").on("click",c);if(r.status)return $(e.currentTarget).html("Logging you in..."),r.contest_started?$(document).redirectPage("reload"):$(document).redirectPage(document.location.href.replace("/login","/not_started").replace("/signup","/not_started"));if($(e.currentTarget).html("Log In"),0===r.errors.length)i="Unknown Error";else if(1===r.errors.length)i=r.errors[0];else{for(i="<ul style='text-align: left;'>",l=r.errors.length-1,s=g=0;l>=0?l>=g:g>=l;s=l>=0?++g:--g)i+="<li>"+r.errors[s]+"</li>";i+="</ul>"}return $("form#legacy-login .alert.error").show().html(i)}}))}),$(".reset-button").click(function(e){var t;return e.preventDefault(),$(e.currentTarget).hasClass("disabled")?void 0:($("form#legacy-reset .message").hide().html(""),t=$("#legacy-reset input#login").val(),$(e.currentTarget).addClass("disabled"),$(e.currentTarget).html("Verifying details.."),$.ajax({url:"/auth/forgot_password",type:"POST",data:{login:t},success:function(t){var o;return $(e.currentTarget).html("Send Password Reset Instructions"),$(e.currentTarget).removeClass("disabled"),t.status?$("form#legacy-reset .message").show().removeClass("error").addClass("success").html("Password reset instructions have been mailed to you"):(o=0===t.errors.length?"Unknown Error":t.errors[0],$("form#legacy-reset .message").removeClass("success").addClass("error").show().html(o))}}))}),$(".new-password-button").click(function(e){var t,o;return e.preventDefault(),$(e.currentTarget).hasClass("disabled")?void 0:($("form#legacy-new-password .alert.error").hide().html(""),o=$("#legacy-new-password input#password").val(),t=$("#legacy-new-password input#confirm-password").val(),$(e.currentTarget).addClass("disabled"),$(e.currentTarget).html("Verifying details.."),$.ajax({url:"/auth/reset_password",type:"POST",data:{password:o,confirm_password:t,reset_password_token:document.URL.split("=")[1]},success:function(t){var o,n,r,a;if($(e.currentTarget).html("Logging you in.."),$(e.currentTarget).removeClass("disabled"),t.status)return $("form#legacy-new-password .alert.error").show().removeClass("error alert").addClass("message success").html("Password successfully reset. Logging you in.."),$(document).redirectPage("reload");if(0===t.errors.length)o="Unknown Error";else{for(o="<ul style='text-align: left;'>",r=t.errors.length-1,n=a=0;r>=0?r>=a:a>=r;n=r>=0?++a:--a)o+="<li>"+t.errors[n]+"</li>";o+="</ul>"}return $("form#legacy-new-password .alert.error").show().html(o)}}))}),$("form#legacy-reset input#Login").keypress(function(e){return 13===e.which?(e.preventDefault(),$("form#legacy-reset a.reset-button").click()):void 0}),$(".create-account-button").click(function(e){var t;return e.preventDefault(),$(e.currentTarget).hasClass("disabled")?void 0:($(".alert").html("").hide(),$(e.currentTarget).addClass("disabled"),$(e.currentTarget).html("Logging in.."),t={username:$("input[name=username]").val(),password:$("input[name=password]").val()},$.ajax({type:"POST",beforeSend:function(e){return e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:t,url:document.location.href,success:function(t){var o,n;if(t.status)return t.login_token?$.getJSON(document.location.protocol+"//"+document.location.host+"/auth/login_with_token/"+t.contest,{token:t.login_token},function(e){var t,o;return o=void 0,t=void 0,e.status?(o="/auth/login",t="master"===e.contest?"":"/"+e.contest):(o="",t="master"===e.contest?"":"/contests/"+e.contest),$(document).redirectPage(document.location.protocol+"//"+document.location.host+o+t)}):$(document).redirectPage(document.location.href);for($(e.currentTarget).html("Log In"),$(e.currentTarget).removeClass("disabled"),o="<ul>",n=0;n<t.errors.length;)o+="<li>"+t.errors[n]+"</li>",n++;return o+="</ul>",$(".alert").html(o).show()}}))})},e(),window.detach_DOM=null,window.loginDOMaction=function(){return window.detach_DOM&&$("form#legacy-login").prepend(window.detach_DOM),e(),window.detach_DOM="<div class='homepage_signupgroup--legacy'>"+$("form#legacy-signup .homepage_signupgroup--legacy").html()+"</div>",$("form#legacy-signup .homepage_signupgroup--legacy").remove()},window.signupDOMaction=function(){return window.detach_DOM&&$("form#legacy-signup").prepend(window.detach_DOM),e(),window.detach_DOM="<div class='homepage_signupgroup--legacy'>"+$("form#legacy-login .homepage_signupgroup--legacy").html()+"</div>",$("form#legacy-login .homepage_signupgroup--legacy").remove()},$(".login-toggle").click(function(e){return e.preventDefault(),!$(this).hasClass("active")&&($("[data-toggle=tooltip]").tooltip("hide"),window.loginDOMaction(),$(".signup").hide(),$(".login ").fadeIn(),$(".login-message").show(),$(".signup-message").hide(),$(this).addClass("active"),$(".signup-toggle").removeClass("active"),window.history&&history.pushState)?window.history.pushState(null,document.title,window.document.location.href.replace("/signup","/login")):void 0}),$(".signup-toggle").click(function(e){return e.preventDefault(),!$(this).hasClass("active")&&(window.signupDOMaction(),$(".signup").fadeIn(),$(".login ").hide(),$(".signup-message").show(),$(".login-message").hide(),$(this).addClass("active"),$(".login-toggle").removeClass("active"),$("[data-toggle=tooltip]").tooltip("show"),window.history&&history.pushState)?window.history.pushState(null,document.title,window.document.location.href.replace("/login","/signup")):void 0}),-1!==document.location.pathname.indexOf("/signup")?window.signupDOMaction():window.loginDOMaction()}}(this))}.call(this);
//# sourceMappingURL=auth-9d2946f11bd53b15e02b17e78ba2506b.js.map