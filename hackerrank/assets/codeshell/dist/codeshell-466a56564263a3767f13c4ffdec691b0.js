(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};!function(e){"function"==typeof define&&define.amd?define("codeshell",["jquery","underscore","codemirror/lib/codemirror","select2","json2","jstorage","jstree"],function(t,n,i){e(window.jQuery,window,n,i)}):e(window.jQuery,window,window._,window.CodeMirror)}(function(t,n,i,o){return t.widget("hr.codeshell",{options:{},_options:{showFileTree:!1,enableIntellisense:!1,showSave:!1,showCustomInput:!0,showCompileTest:!0,showSubmit:!1,showUploadCode:!1,showFullScreen:!1,statusText:"",showTheme:!1,showNonEditableHeadTail:!1,enableVersioning:!1,versionIds:[],versioningRestUrl:"",foldCode:!1,dynamicMode:!1,languages:["c","cpp","java","csharp","haskell","php","python","perl","ruby","bash","oracle","mysql","sql","clojure","scala","code","text","brainfuck","javascript","d","go","lua","erlang","sbcl","ocaml","pascal","python3","groovy","text_pseudo","objectivec","fsharp","visualbasic","cobol","tsql","lolcode","smalltalk","tcl","html","css","java8","db2","octave","r"],language:"c",showTemplate:!0,autoSaveNamespace:null,onSave:null,autoSave:null,firstLineNumber:1,initialCode:"",compile_button_text:"Run Code",submit_button_text:"Submit Code",lang_line_nos:{},lang_head_template:{},lang_body_template:{},lang_tail_template:{},lang_template:{},lang_mime_mapping:{c:"text/x-csrc",cpp:"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp",haskell:"text/x-haskell",php:"text/x-php",python:"text/x-python",perl:"text/x-perl",ruby:"text/x-ruby",bash:"text/x-bash",oracle:"text/x-plsql",mysql:"text/x-plsql",tsql:"text/x-plsql",sql:"text/x-plsql",clojure:"text/x-scheme",scala:"text/x-scala",code:"text/plain",text:"text/plain",brainfuck:"text/plain",javascript:"text/javascript",d:"text/x-d",go:"text/x-go",lua:"text/x-lua",erlang:"text/x-erlang",sbcl:"text/x-common-lisp",ocaml:"text/x-ocaml",pascal:"text/x-pascal",python3:"text/x-python",groovy:"text/x-groovy",text_pseudo:"text/plain",objectivec:"text/x-csrc",fsharp:"text/x-fsharp",visualbasic:"text/x-vb",cobol:"text/x-cobol",smalltalk:"text/x-stsrc",tcl:"text/x-tcl",html:"text/html",css:"text/css",java8:"text/x-java",db2:"text/x-plsql",octave:"text/x-octave",r:"text/x-rsrc"},lang_display_mapping:{c:"C",cpp:"C++",java:"Java",csharp:"C#",haskell:"Haskell",php:"PHP",python:"Python 2",ruby:"Ruby",perl:"Perl",bash:"BASH",oracle:"Oracle",mysql:"MySQL",sql:"SQL",clojure:"Clojure",scala:"Scala",code:"Generic",text:"Plain Text",brainfuck:"Brainfuck",javascript:"Javascript",lua:"Lua",sbcl:"Lisp",erlang:"Erlang",go:"Go",d:"D",ocaml:"OCaml",pascal:"Pascal",python3:"Python 3",groovy:"Groovy",objectivec:"Objective C",text_pseudo:"Plain Text",fsharp:"F#",visualbasic:"VB.NET",cobol:"COBOL",tsql:"T-SQL",lolcode:"LOLCODE",smalltalk:"Smalltalk",tcl:"Tcl",whitespace:"Whitespace",css:"CSS",html:"HTML",java8:"Java 8",db2:"DB2",octave:"Octave",r:"R"},default_head_end:{c:"/* Head ends here */",cpp:"/* Head ends here */",java:"/* Head ends here */",csharp:"/* Head ends here */",haskell:"-- Head ends here",php:"/* Head ends here */",python:"# Head ends here",perl:"# Head ends here",ruby:"# Head ends here",bash:"# Head ends here",clojure:"; Head ends here",scala:"/* Head ends here */",sbcl:"; Head ends here",lua:"-- Head ends here",javascript:"/* Head ends here */",pascal:"{ Head ends here }",python3:"# Head ends here",groovy:"// Head ends here",objectivec:"// Head ends here",fsharp:"// Head ends here",visualbasic:"' Head ends here",cobol:"* Head ends here",lolcode:"BTW Head ends here",smalltalk:'" Head ends here"',tcl:"# Head ends here",whitespace:"Head ends here",html:"<!-- Head ends here -->",css:"/* Head ends here */",java8:"/* Head ends here */",db2:"/* Head ends here */",octave:"# Head ends here",r:"# Head ends here"},lang_fold_mapping:{c:"brace",cpp:"brace",java:"brace",csharp:"brace",haskell:"indent",php:"brace",python:"indent",ruby:"indent",perl:"brace",bash:"brace",oracle:"indent",mysql:"indent",sql:"indent",clojure:"indent",scala:"brace",code:"brace",text:"indent",brainfuck:"indent",javascript:"brace",lua:"indent",sbcl:"indent",erlang:"indent",go:"brace",d:"brace",ocaml:"indent",pascal:"indent",python3:"indent",groovy:"brace",objectivec:"brace",text_pseudo:"indent",fsharp:"indent",visualbasic:"indent",cobol:"indent",lolcode:"indent",smalltalk:"indent",tcl:"brace",whitespace:"indent",html:"tag",css:"brace",java8:"brace",db2:"indent",octave:"indent",r:"brace"},default_tail_start:{c:"/* Tail starts here */",cpp:"/* Tail starts here */",java:"/* Tail starts here */",csharp:"/* Tail starts here */",haskell:"-- Tail starts here",php:"/* Tail starts here */",python:"# Tail starts here",perl:"# Tail starts here",ruby:"# Tail starts here",bash:"# Tail starts here",clojure:"; Tail starts here",scala:"/* Tail starts here */",sbcl:"; Tail starts here",lua:"-- Tail starts here",javascript:"/* Tail starts here */",pascal:"{ Tail starts here }",python3:"# Tail starts here",groovy:"// Tail starts here",objectivec:"// Tail starts here",fsharp:"// Tail starts here",visualbasic:"' Tail starts here",cobol:"* Tail starts here",lolcode:"BTW Tail starts here",smalltalk:'" Tail starts here"',tcl:"# Tail starts here",whitespace:"Tail starts here",html:"<!-- Tail starts here -->",css:"/* Tails starts here */",java8:"/* Tail starts here */",db2:"/* Tail starts here */",octave:"# Tail starts here ",r:"# Tail starts here "},lang_default_text:{c:"#include <stdio.h>\n#include <string.h>\n#include <math.h>\n#include <stdlib.h>\n\nint main() {\n\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */    \n    return 0;\n}\n",cpp:"#include <cmath>\n#include <cstdio>\n#include <vector>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\n\nint main() {\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   \n    return 0;\n}\n",java:"import java.io.*;\nimport java.util.*;\nimport java.text.*;\nimport java.math.*;\nimport java.util.regex.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n    }\n}",csharp:"using System;\nusing System.Collections.Generic;\nusing System.IO;\nclass Solution {\n    static void Main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution */\n    }\n}",php:'<?php\n$_fp = fopen("php://stdin", "r");\n/* Enter your code here. Read input from STDIN. Print output to STDOUT */\n\n?>',ruby:"# Enter your code here. Read input from STDIN. Print output to STDOUT",python:"# Enter your code here. Read input from STDIN. Print output to STDOUT",perl:"# Enter your code here. Read input from STDIN. Print output to STDOUT",haskell:"-- Enter your code here. Read input from STDIN. Print output to STDOUT",clojure:"; Enter your code here. Read input from STDIN. Print output to STDOUT\n;",lua:"-- Enter your code here. Read input from STDIN. Print output to STDOUT",sbcl:";; Enter your code here. Read input from STDIN. Print output to STDOUT",erlang:"% Enter your code here. Read input from STDIN. Print output to STDOUT\n% Your class should be named solution\n\n-module(solution).\n-export([main/0]).\n\nmain() ->\n	.\n",scala:"object Solution {\n\n    def main(args: Array[String]) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution\n*/\n    }\n}",go:'package main\nimport "fmt"\n\nfunc main() {\n //Enter your code here. Read input from STDIN. Print output to STDOUT\n}',javascript:'function processData(input) {\n    //Enter your code here\n} \n\nprocess.stdin.resume();\nprocess.stdin.setEncoding("ascii");\n_input = "";\nprocess.stdin.on("data", function (input) {\n    _input += input;\n});\n\nprocess.stdin.on("end", function () {\n   processData(_input);\n});\n',d:"/* Enter your code here. Read input from STDIN. Print output to STDOUT */",ocaml:"(* Enter your code here. Read input from STDIN. Print output to STDOUT *)",pascal:"(* Enter your code here. Read input from STDIN. Print output to STDOUT *)",groovy:"//Enter your code here. Read input from STDIN. Print output to STDOUT",text:"",objectivec:"//Enter your code here. Read input from STDIN. Print output to STDOUT",fsharp:"//Enter your code here. Read input from STDIN. Print output to STDOUT",visualbasic:"'Enter your code here. Read input from STDIN. Print output to STDOUT",cobol:"*Enter your code here. Read input from STDIN. Print output to STDOUT",lolcode:"BTW Enter your code here. Read input from STDIN. Print output to STDOUT",smalltalk:'"Enter your code here. Read input from STDIN. Print output to STDOUT"',tcl:"# Enter your code here. Read input from STDIN. Print output to STDOUT",whitespace:"Enter your code here. Read input from STDIN. Print output to STDOUT",html:"<!-- Enter your code here -->",css:"/* Enter your code here*/",java8:"import java.io.*;\nimport java.util.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n    }\n}",octave:"# Enter your code here. Read input from STDIN. Print output to STDOUT",r:"# Enter your code here. Read input from STDIN. Print output to STDOUT"}},headerTemplate:'<div class="clearfix grey-header cap plL plR psT psB" style="position: relative;">\n  <% if (enableVersioning) { %>\n  <div class="fork-dialog cs-dialog hide">\n    <div class="header">Fork <span class="version-seq"></span></div>\n    <div class="body">\n      <p class="grey-msg">past buffers are marked read only, you wont be able to edit your current buffer without forking it</p>\n      <div class="m msT">\n        <button class="btn close-fork-dialog">Cancel</button>&nbsp;&nbsp;\n        <button class="btn btn-primary fork-version" data-action="fork">Fork <span class="version-seq"></span></button>&nbsp;&nbsp;\n        <button class="btn btn-primary fork-version" data-action="orphan">Create New Buffer</button>\n      </div>\n    </div>\n  </div>\n  <div class="fork-limit-reached-dialog cs-dialog hide">\n    <div class="header">Fork Limit Reached</div>\n    <div class="body">\n      <p class="grey-msg">You can&rsquo;t create more than 20 buffers, please delete one of your old bufferes to create a new buffer.</p>\n      <div class="m msT">\n        <button class="btn close-fork-limit-reached-dialog">OK</button>&nbsp;&nbsp;\n      </div>\n    </div>\n  </div>\n  <div class="delete-version-dialog cs-dialog hide">\n    <div class="header">Delete <span class="version-seq"></span></div>\n    <div class="body">\n      <p class="grey-msg">Are you sure you want to delete <strong><span class="version-seq"></span></strong>? This action can&rsquo;t be undone.</p>\n      <div class="m msT">\n        <button class="btn delete-version-button">Yes</button>&nbsp;&nbsp;\n      </div>\n    </div>\n  </div>\n  <div class="pull-left no-select">\n    <p style="padding-top: 8px;">\n      <strong class="version-name">Current Buffer</strong>\n      <span class="gray-text version-meta">(saved locally, editable)</span>\n      &nbsp;&nbsp;\n      <a class="fork-this-version"><i class="icon--grey cursor icon-flow-branch"></i></a>\n      <a class="show-version-timeline"><i class="icon--grey cursor icon-back-in-time"></i></a>\n      <a class="delete-active-version hide"><i class="icon--grey cursor icon-trash"></i></a>\n    </p>\n  </div>\n  <% } %>\n  <div class="pull-right">\n    <div class="inline large lines inverse pull-right msT msL">\n      <% if (showSave) { %>\n      <a href="javascript:;" class="cursor save-code no-select" id="save-code"><i class="icon-floppy icon--grey no-select"></i></a>\n      <% } %>\n      <% if (showFullScreen) { %>\n      <a class="restorefullscreen force-hide active-link no-select">\n          <i class="icon-resize-small-alt icon--grey no-select"></i></a>\n      <a class="fullscreen active-link no-select"\n         data-analytics="Switch to fullscreen"><i class="icon-resize-full-alt icon--grey no-select"></i></a>\n      <% } %>\n      <a class="hide" style="display:none;"></a>\n      <div style="position:relative; margin-left: 0px;">\n        <a class="cursor no-select" id="show-preferences"><i class="icon-cog icon--grey no-select"></i></a>\n        <div id="pref-pane"\n          style="position: absolute;right: -0.5em;top: 2em;z-index: 9;background: #fff;border: 1px solid #ddd;border-radius: 5px;padding: 10px;  width: 16em; display: none;">\n          <div style="position: absolute;width: 0;right: 0.8em;height: 0;border-left: 7px solid transparent;border-right: 7px solid transparent;border-bottom: 7px solid #ddd;top: -0.4em;"></div>\n          <label>Editor Mode</label>\n          <div class="btn-group msB no-select">\n            <a class="cursor emacs btn btn-white editor-mode-button no-select" data-editor="emacs">Emacs</a>\n            <a class="cursor default btn btn-white editor-mode-button no-select" data-editor="default">Normal</a>\n            <a class="cursor vim btn btn-white editor-mode-button no-select" data-editor="vim">Vim</a>\n          </div>\n          <% if (showTheme) { %>\n          <label>Editor Theme</label>\n          <select id="editor-theme">\n            <option value="light">Light</option>\n            <option value="dark">Dark</option>\n          </select>\n          <% } %>\n          <label>Tab Spaces</label>\n          <input id="tab-spaces" type="text" style="width: 4em;">\n          <% if (enableIntellisense) { %>\n            <label for="auto-complete">\n              <input id="auto-complete" type="checkbox" checked>\n              Auto Complete\n            </label>\n          <% } %>\n        </div>\n      </div>\n    </div>\n    <div class="pull-right">\n      <div class="dummy-lang-container hide"></div>\n      <select id="select-lang">\n       <% _.each(languages, function(l){ %>\n        <option value="<%=l%>"><%=lang_display_mapping[l]%></option>\n       <% }); %>\n      </select>\n    </div>\n    <div class="clearfix"></div>\n  </div>\n</div>\n<% if (enableVersioning) { %>\n<div class="version-timeline">\n  <div class="version-timeline-inner">\n    <div class="cross-line"></div>\n    <div class="start-slab pull-left"></div>\n    <% _.each (versionIds, function (version_id) { %>\n      <div class="version-ball pull-left cursor" data-version-id="<%= version_id %>"></div>\n    <% }); %>\n    <div class="current-version-ball green-bkg pull-left cursor"></div>\n  </div>\n</div>\n<% } %>',bodyTemplate:'<div class="hr_tour-code-solution flex-row" style="display: flex;">\n  <% if (showFileTree) { %>\n  <div class="code-filetree">\n    <div id="filetree">\n    </div>\n  </div>\n  <% } %>\n  <div class="code-checker">\n    <div class="code-editors">\n      <% if (showNonEditableHeadTail){ %> <div class="code-head"> <textarea id="codeheadview" style="width:100%"/> </div> <%}%>\n      <% if (dynamicMode) { %> <div class="loading-mode" style="display:none">Loading Editor... </div> <% } %>\n      <div class="code-body"> <textarea id="codeview" style="width:100%"></textarea> </div>\n      <% if (showNonEditableHeadTail){ %> <div class="code-tail"> <textarea id="codetailview" style="width:100%"/> </div> <%}%>\n      <div class="clearfix"></div>\n    </div>\n    <div id="codeeditor-statusbar" class="clearfix psA codeeditor_statusbar">\n      <span id="statusbar-mode"></span>\n      <span><em id="status-text"><%-statusText%></em></span>\n      <div class="pull-right">\n        <span id="statusbar-line"></span>\n        <span id="statusbar-col"></span>\n        <span id="statusbar-count"></span>\n      </div>\n    </div>\n  </div>\n</div>',footerTemplate:'<div class="clearfix mlT">\n  <div class="pull-right">\n    <% if (showCompileTest) { %>\n    <button class="btn bb-compile msR" data-analytics="Compile and Test"><%= compile_button_text %></button>\n    <% } %>\n    <% if (showSubmit) { %>\n    <button class="btn btn-primary bb-submit ans-submit" data-analytics="Submit Code"><%= submit_button_text %></button>\n    <% } %>\n  </div>\n  <div class="pull-left inline">\n      <% if(showUploadCode) { %>\n      <button class="btn btn-text upload_file" data-analytics="Upload File"><i class="icon-upload"></i>Upload Code as File</button>\n      <% } %>\n      <% if (showCustomInput) { %>\n      <div class="mlL mmT">\n          <label for="customtestcase"><input type="checkbox" id="customtestcase"><span class="lmT msL">Use a custom test case</span></label>\n          <textarea rows="5" id="custominput" style="display:none"></textarea>\n      </div>\n      <% } %>\n  </div>\n</div>',_create:function(){var e,o;return this.ele_name=this.element.context.id,e=t(this.element),this.options=t.extend(this._options,this.options),this.current_code=e.html(),e.empty(),e.append(i.template(this.headerTemplate,this.options)),e.append(i.template(this.bodyTemplate,this.options)),e.append(i.template(this.footerTemplate,this.options)),o=this,this.codeEditor=this._initCodeEditor(e.find("textarea#codeview")[0]),this.options.showNonEditableHeadTail&&(this.codeEditorHead=this._initCodeEditor(e.find("textarea#codeheadview")[0],!0),this.codeEditorTail=this._initCodeEditor(e.find("textarea#codetailview")[0],!0)),this.codeEditor.on("update",function(){return o._updateStatusBar(o)}),this.codeEditor.on("cursorActivity",function(e){return o._updateStatusPosition(e)}),this.options.showNonEditableHeadTail&&(this.codeEditorHead.on("cursorActivity",function(e){return o._updateStatusPosition(e)}),this.codeEditorTail.on("cursorActivity",function(e){return o._updateStatusPosition(e)})),this.codeEditor.on("change",function(){return o._saveLangCode(o),o.options.showNonEditableHeadTail?o._updateTailEditorLineNumber():void 0}),this.codeEditor.on("viewportChange",function(){return o._growEditor()}),this.changeLanguage("cpp"),this.changeLanguage(e.find("#select-lang").select2("val")),this._shiftPressed=!1,this.options.enableIntellisense&&this.codeEditor.on("keyup",function(e,t){16===t.keyCode&&(o._shiftPressed=!1),190===t.keyCode&&o._shiftPressed===!1&&o._enableIntellisenseFunc(e)}),this.options.enableIntellisense&&this.codeEditor.on("keydown",function(e,t){16===t.keyCode&&(o._shiftPressed=!0),o._autoCompleteReqestStatus===!0&&(o._autoCompleteReqestStatus=!1)}),this.codeEditor.on("blur",function(){return o._autoCompleteReqestStatus===!0?o._autoCompleteReqestStatus=!1:void 0}),e.find("#select-lang").change(function(e){return o._changeLanguage(e,o)}),e.find("#save-code").click(function(e){return o._saveCode(e,o)}),e.find("#select-lang").on("select2-close",function(){return setTimeout(function(){return o._focusEditor(o)},100)}),e.find(".editor-mode-button").click(function(e){return o._setEditorMode(e,o),o._updateStatusBar(o)}),e.find("button.bb-compile").click(function(){var e;return o.options.showFileTree?(o._checkAndSave(null,null,o),e={}):(e={code:o.codeEditor.getValue(),language:o.options.language},o.options.showCustomInput&&t(o.element).find("#customtestcase").attr("checked")&&(e.custominput=t(o.element).find("#custominput").val())),o._trigger("compile",{},e)}),e.find("button.bb-submit").click(function(){var e;return o.options.showFileTree?(o._checkAndSave(null,null,o),e={}):(e={code:o.codeEditor.getValue(),language:o.options.language},o.options.showCustomInput&&t(o.element).find("#customtestcase").attr("checked")&&(e.custominput=t(o.element).find("#custominput").val())),o._trigger("submit",{},e)}),e.find("#customtestcase").click(function(){return t(o.element).find("#custominput").toggle(this.checked)}),e.find("#show-preferences").click(function(n){return function(i){var o;return o=e.find("#pref-pane"),"none"===o.css("display")?(t(i.currentTarget).find("i").addClass("green-color"),o.show(),n.element.find("#tab-spaces").val(n.codeEditor.options.tabSize)):(t(i.currentTarget).find("i").removeClass("green-color"),o.hide())}}(this)),e.find("#editor-theme").change(function(e){return function(n){return e._changeTheme(t(n.currentTarget).val())}}(this)),e.find("#tab-spaces").keyup(function(e){return function(n){return e._setTabSize(t(n.currentTarget).val())}}(this)),e.find(".fork-this-version").click(function(n){return function(o){var s;return n.options.versionIds&&n.options.versionIds.length<20?(s=".fork-dialog",void 0===n.ActiveVersionId||null===n.ActiveVersionId?e.find(".fork-dialog .version-seq").html("Current Buffer"):e.find(".fork-dialog .version-seq").html("Buffer #"+(i.indexOf(n.options.versionIds,n.ActiveVersionId)+1))):s=".fork-limit-reached-dialog","none"===n.element.find(s).css("display")?(n.element.find(s).show(),t(o.currentTarget).find("i").addClass("green-color")):(n.element.find(s).hide(),t(o.currentTarget).find("i").removeClass("green-color"))}}(this)),e.find(".show-version-timeline").click(function(e){return function(n){return"none"===e.element.find(".version-timeline").css("display")?(e.element.find(".version-timeline").show(),t(n.currentTarget).find("i").addClass("green-color")):(e.element.find(".version-timeline").hide(),t(n.currentTarget).find("i").removeClass("green-color"))}}(this)),this.options.enableIntellisense&&this._initializeAutoComplete(),this._suggestionBoxDisplayStatus=!1,this._autoCompleteReqestStatus=!1,this._supportedLanguages=["java","c","cpp","csharp","ruby"],this._bindVersionBall(),this._bindCurrentVersionBall(),e.find(".fork-version").click(function(e){return function(n){var i;return i="orphan"===t(n.currentTarget).attr("data-action")?{code:o._getDefaultLangCode(o.options.language),language:o.options.language}:{code:e.codeEditor.getValue(),language:e.options.language},e._forkNewBuffer(i)}}(this)),e.find(".close-fork-dialog").click(function(e){return function(){return e.element.find(".fork-dialog").hide(),e.element.find(".fork-this-version").find("i").removeClass("green-color")}}(this)),e.find(".close-fork-limit-reached-dialog").click(function(e){return function(){return e.element.find(".fork-limit-reached-dialog").hide(),e.element.find(".fork-this-version").find("i").removeClass("green-color")}}(this)),e.find(".delete-active-version").click(function(n){return function(o){return t(o.currentTarget).find("i").hasClass("green-color")?(t(o.currentTarget).find("i").removeClass("green-color"),e.find(".delete-version-dialog").hide()):null!==n.ActiveVersionId?(t(o.currentTarget).find("i").addClass("green-color"),e.find(".delete-version-dialog").find(".version-seq").html("Buffer #"+(i.indexOf(n.options.versionIds,n.ActiveVersionId)+1)),e.find(".delete-version-dialog").show(),e.find(".delete-version-dialog").find(".delete-version-button").attr("data-version-id",n.ActiveVersionId)):void 0}}(this)),e.find(".delete-version-button").click(function(n){return function(){var s,r;return r=parseInt(e.find(".delete-version-button").attr("data-version-id")),s=i.indexOf(n.options.versionIds,r),o=n,t.ajax({url:n.options.versioningRestUrl,type:"DELETE",data:{version_id:r},success:function(){var t;return o.options.versionIds=i.reject(o.options.versionIds,function(e){return e===r}),o.element.find(".version-ball[data-version-id="+r+"]").remove(),t=s<o.options.versionIds.length?o.element.find(".version-ball[data-version-id="+o.options.versionIds[s]+"]"):o.element.find(".current-version-ball"),t.click(),e.find(".delete-active-version").find("i").removeClass("green-color"),e.find(".delete-version-dialog").hide()}})}}(this)),null===e.find("#select-lang").val()&&e.find("#select-lang").select2("val",this.options.languages[0]),e.find("#select-lang").trigger("change"),this._trigger("compile",{},{}),this._changeTheme(),this._setTabSize(this.codeEditor.options.tabSize),this.options.showFileTree&&(o.options.mime_lang_mapping={},i.each(o.options.lang_mime_mapping,function(e,t){return o.options.mime_lang_mapping[e]=t}),o=this,this.currentFile=null,this.fileTree=e.find("#filetree").jstree({core:{multiple:!1,data:this.options.showFileTree.data,check_callback:function(e,n,i,s){var r;switch(r=function(e,n){var i;return null==n&&(n=null),e?(i=t.jstree.reference("#filetree"),n&&e.id!==n&&i.set_id(e,n),i.refresh_node(e)):void 0},e){case"create_node":o.options.showFileTree.onCreate&&o.options.showFileTree.onCreate(n,i,r);break;case"rename_node":n.text!==s&&o.options.showFileTree.onRename&&o.options.showFileTree.onRename(n,i,s,r);break;case"delete_node":o.options.showFileTree.onDelete&&o.options.showFileTree.onDelete(n,i,r)}return!0}},types:{file:{icon:"jstree-file"}},contextmenu:{items:function(e){var n;return n=t.jstree.defaults.contextmenu.items(),delete n.ccp,o.options.showFileTree.onRename||delete n.rename,o.options.showFileTree.onDelete||delete n.remove,o.options.showFileTree.onCreate?(delete n.create.action,n.create.label="New",n.create.submenu={create_folder:{separator_after:!0,label:"Folder",action:function(e){var n,i;return n=t.jstree.reference(e.reference),i=n.get_node(e.reference),"file"===i.type&&(i=n.get_node(i.parent)),n.create_node(i,{id:Date.now().toString(36),text:"New_Folder",type:"default"},"last",function(e){return setTimeout(function(){return n.edit(e)},0)})}},create_file:{label:"File",action:function(e){var n,i;return n=t.jstree.reference(e.reference),i=n.get_node(e.reference),"file"===i.type&&(i=n.get_node(i.parent)),n.create_node(i,{id:Date.now().toString(36),text:"New_File",type:"file"},"last",function(e){return setTimeout(function(){return n.edit(e)},0)})}}},this.get_type("file"===e)&&delete n.create):delete n.create,n}},plugins:["wholerow","types","contextmenu"]}).on("activate_node.jstree",function(e,t){return o._checkAndSave(e,t,o)})),n.codeEditor=this.codeEditor},_checkAndSave:function(e){return function(n,i,o){var s;return n=t(e.element),i?"file"===i.node.type?(o._showLoading(),o.currentFile&&!o.currentFile.original.readOnly&&(s=o.value(),o.currentFile.original.fileContents.code!==s.code&&(o.currentFile.original.fileContents=s,o.options.showFileTree.onSave(o.currentFile))),i.node.original.fileContents?(o.currentFile=i.node,o.setValue(i.node.original.fileContents)):o.options.showFileTree.fetch(i,function(e){var n;return n=o.options.mime_lang_mapping[e.node.original.fileContents.mime_type],e.node.original.fileContents.language=n?n:"text",e.node.id!==t("#filetree").jstree("get_selected")[0]&&o.currentFile?void 0:(o.currentFile=e.node,o.setValue(e.node.original.fileContents))}),i.node.original.readOnly?o.codeEditor.setOption("readOnly",!0):o.codeEditor.setOption("readOnly",!1)):void 0:(o.currentFile&&!o.currentFile.original.readOnly&&(s=o.value(),o.currentFile.original.fileContents.code!==s.code&&(o.currentFile.original.fileContents=s,o.options.showFileTree.onSave(o.currentFile))),void 0)}}(this),_initializeAutoComplete:function(){var e;return e=t(this.element),"undefined"==typeof t.cookie("enableIntellisenseUserPref")?(e.find("#auto-complete").prop("checked",!0),t.cookie("enableIntellisenseUserPref","true")):"true"===t.cookie("enableIntellisenseUserPref")?e.find("#auto-complete").prop("checked",!0):"false"===t.cookie("enableIntellisenseUserPref")?e.find("#auto-complete").prop("checked",!1):(e.find("#auto-complete").prop("checked",!0),t.cookie("enableIntellisenseUserPref","true")),e.find("#auto-complete").click(function(){return function(){e.find("#auto-complete").is(":checked")?t.cookie("enableIntellisenseUserPref","true"):t.cookie("enableIntellisenseUserPref","false")}}(this))},_copyToCurrentBuffer:function(e){var n,i;return n=t(this.element),n.find(".version-ball").removeClass("green-bkg"),n.find(".version-name").html("Current Buffer"),n.find(".version-meta").html("(saved locally, editable)"),n.find(".current-version-ball").hasClass("green-bkg")||n.find(".current-version-ball").addClass("green-bkg"),this.versionGetXhr&&void 0===this.versionGetXhr.status&&this.versionGetXhr.abort(),this._showLoading("Loading current buffer... "),this.codeEditor.setOption("readOnly",!1),this.setValue(e),this.ActiveVersionId=null,this.saveLangCode(),i=this,setTimeout(function(){return i._hideLoading(),t(i.element).find(".dummy-lang-container").hide(),t(i.element).find("#select-lang").siblings(".select2-container").show(),i.element.find(".delete-active-version").hide(),i.ActiveVersionId=null},100)},_forkNewBuffer:function(e){var n,i,o;return null==e&&(e=null),i=t(this.element),n=void 0===this.ActiveVersionId||null===this.ActiveVersionId?{code:this.codeEditor.getValue(),language:this.options.language}:{code:this._getLangCode(this.currentBufferLang),language:this.currentBufferLang},this._showLoading("Saving previous buffer on cloud... "),this.element.find(".close-fork-dialog").click(),o=this,t.ajax({url:this.options.versioningRestUrl,type:"POST",data:n,success:function(t){return e&&o._copyToCurrentBuffer(e),o._hideLoading(),"none"===i.find(".version-timeline").css("display")&&i.find(".show-version-timeline").click(),i.find(".version-ball").removeClass("green-bkg"),i.find(".version-ball").hasClass("green-bkg")||i.find(".current-version-ball").addClass("green-bkg"),o._addNewVersion(t.id)}})},forkNewBuffer:function(e){var t,n;return this.options.enableVersioning?this.options.versionIds&&this.options.versionIds.length<20?(this._forkNewBuffer(e),n=this,setTimeout(function(){return n.saveLangCode()},0)):(t=".fork-limit-reached-dialog","none"===this.element.find(t).css("display")?(this.element.find(t).show(),this.element.find(".fork-this-version i").addClass("green-color")):(this.element.find(t).hide(),this.element.find(".fork-this-version i").removeClass("green-color"))):this.setValue(e)},_bindCurrentVersionBall:function(){var e;return e=t(this.element),e.find(".current-version-ball").click(function(e){return function(){var t;return t={code:e._getLangCode(e.currentBufferLang||e.options.language),language:e.currentBufferLang||e.options.language},e._copyToCurrentBuffer(t)}}(this))},_bindVersionBall:function(){var e;return e=t(this.element),e.find(".version-ball").unbind("click").click(function(n){return function(o){var s,r,a;return r=parseInt(t(o.currentTarget).attr("data-version-id")),a=i.indexOf(n.options.versionIds,r)+1,e.find(".current-version-ball").hasClass("green-bkg")&&(n.currentBufferLang=n.options.language,n.saveLangCode()),n.element.find(".delete-active-version").hide(),e.find(".version-name").html("Buffer #"+a),e.find(".version-meta").html("(saved on cloud, read-only)"),e.find(".version-ball").removeClass("green-bkg"),e.find(".current-version-ball").removeClass("green-bkg"),t(o.currentTarget).hasClass("green-bkg")||t(o.currentTarget).addClass("green-bkg"),s=n,n._showLoading("Looking up cloud for buffer #"+a+"... "),n.versionGetXhr&&void 0===n.versionGetXhr.status&&n.versionGetXhr.abort(),n.versionGetXhr=t.ajax({url:n.options.versioningRestUrl,type:"GET",data:{version_id:r},success:function(e){return s.setValue({code:e.source,language:e.language}),s.codeEditor.setOption("readOnly",!0),t(s.element).find(".dummy-lang-container").html(s.options.lang_display_mapping[e.language]).show(),t(s.element).find("#select-lang").siblings(".select2-container").hide(),s._hideLoading(),s.ActiveVersionId=r,s.element.find(".delete-active-version").show()}})}}(this))},_addNewVersion:function(e){var t;return-1===i.indexOf(this.options.versionIds,e)?(this.options.versionIds.push(e),this.options.versionIds=i.sortBy(this.options.versionIds,function(e){return e}),t=null,i.each(this.options.versionIds,function(e){var n;return 0===this.element.find(".version-ball[data-version-id="+e+"]").length&&(n=null!==t?this.element.find(".version-ball[data-version-id="+t+"]"):this.element.find(".start-slab"),n.after("<div class='version-ball pull-left cursor' data-version-id='"+e+"'></div>"),this._bindVersionBall()),t=e},this)):void 0},_updateStatusBar:function(){var e;return e=function(){switch(this.codeEditor.options.keyMap){case"vim":return"--VIM--";case"vim-insert":return"-- INSERT --";case"emacs":return"EMACS";case"emacs-Ctrl-X":return"C-x-";default:return""}}.call(this),t(this.element).find("#statusbar-mode").text(e)},_updateStatusPosition:function(e){var n,i;return n=e.doc.getCursor(),i=e.getOption("firstLineNumber"),e=t(this.element),e.find("#statusbar-line").text("Line: "+(n.line+i)),e.find("#statusbar-col").text("Col: "+(n.ch+1))},_getThemeName:function(e){return"dark"===e?"ambiance":"default"},_changeTheme:function(e){return null==e&&(e=null),e||(e=t.cookie("hacker_editor_theme")),"dark"!==e&&"light"!==e&&(e="light"),t.cookie("hacker_editor_theme",e),this.element.find("select#editor-theme option[value="+e+"]").attr("selected",!0),this.codeEditor.setOption("theme",this._getThemeName(e)),this.codeEditor.refresh()},_setTabSize:function(e){return e=parseInt(e),i.isNumber(e)&&!i.isNaN(e)&&this.codeEditor.options.tabSize!==e?(this._saveUserOpts({tabSize:e,indentUnit:e}),this.codeEditor.setOption("tabSize",e),this.codeEditor.setOption("indentUnit",e)):void 0
},_parseJson:function(e,n){var i,o;return i=[],o=this,t.each(e,function(e,t){var o;o={},o.text=t.completion,""===t.type&&(t.type=" "),o.displayText=t.menu,o.type=t.type,o.completion=t.completion,o.menu=t.menu,o.info=t.info,n===!0&&(o.render=function(e,t,n){var i,o,s;(" "===n.type||""===n.type)&&(n.type="("===n.completion[n.completion.length-1]||")"===n.completion[n.completion.length-1]?"f":"v"),"("===n.completion[n.completion.length-1]&&(n.completion+=")"),s=document.createElement("DIV"),s.className="CodeMirror-hint-divTypeText",s.appendChild(document.createTextNode(n.type)),i=document.createElement("DIV"),i.className="CodeMirror-hint-divCompletionText",i.appendChild(document.createTextNode(" "+n.completion+" ")),o=document.createElement("DIV"),o.className="CodeMirror-hint-divMenuText",o.appendChild(document.createTextNode(n.menu+" ")),e.appendChild(s),e.appendChild(i),e.appendChild(o),e.style.display="table-row"}),i.push(o)}),i},_updateLoadingMessage:function(e,t){var n,i;n=!0,i={completeSingle:!1,hint:function(e){var i;return n===!0?n=!1:t=[],i={from:e.getCursor(),to:e.getCursor(),list:[]},i.list=t,i}},o.showHint(e,i.hint,i)},_cleanToken:function(e){var t,n;for(n=0;n<e.length&&(t=e.charCodeAt(n),!(t>47&&58>t||t>64&&91>t||t>96&&123>t||"_"===e[n]));)n++;return e=e.substr(n)},_filterSuggestions:function(e,t){var n,i,o,s,r,a;for(t=t.toLowerCase(),n=[],i=0;i<e.length;){for(a=e[i].text.toLowerCase(),o=1,r=0,s=0;s<t.length;){for(;a[r]!==t[s]&&r<a.length;)r++;if(r===a.length){o=0;break}s++}1===o&&n.push(e[i]),i++}return n},_adjustHeightSuggestionBox:function(e){var i,o,s,r,a,l,d,c,u,h;s=this.codeEditor,c=s.cursorCoords(s.getCursor()),h=n.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),u=n.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),o=e.getBoundingClientRect(),r=t("#CodeMirror-hint-infoDiv")[0],i=r.offsetHeight,a=o.bottom+i-o.top,a>u?(e.style.height=u-5-i+"px",d=parseInt(e.style.top.substr(0,e.style.top.length-2),10),d+=u-5-i,t(r).css("top",d+"px")):(l=parseInt(e.style.top.substr(0,e.style.top.length-2),10),l<c.top&&l+(o.bottom-o.top)+i!==c.top&&(e.style.top=c.top-i-(o.bottom-o.top)+"px",d=c.top-i,t(r).css("top",d+"px")))},_adjustWidthSuggestionBox:function(e){var n,i,o,s,r;i=this.codeEditor,r=i.cursorCoords(i.getCursor()),n=e.getBoundingClientRect(),o=t(i.display.wrapper),s=o.offset(),o.width()>n.width?s.left+o.width()>=n.right?e.style.width=n.width:(e.style.width=n.width,e.style.left=r.left-(n.right-(s.left+o.width()))-5+"px"):(e.style.left=s.left+"px",e.style.width=o.width()+"px")},_setMaxWidthCompletionText:function(e){var t,n,i,o,s,r;if(n=e.getElementsByClassName("CodeMirror-hint-divCompletionText"),n.length>0)for(i=n.length-1;i>=0;)s=n[i],o=void 0,r=void 0,o=e.style.width,o=parseInt(o.substr(0,o.length-2)),t=s.offsetWidth,t>o&&(t=o-40,s.style.maxWidth=t+"px",s.style.textOverflow="ellipsis"),i--},_setMaxWidthMenuText:function(e){var t,n,i,o,s;if(t=e.getElementsByClassName("CodeMirror-hint-divMenuText"),t.length>0)for(n=t.length-1;n>=0;)i=t[n],o=e.style.width,o=parseInt(o.substr(0,o.length-2)),s=i.offsetLeft,o-=s,i.style.maxWidth=o-20+"px",n--},_removeShowHintWidget:function(e){this._updateSuggestions(e,[])},_updateSuggestions:function(e,n){var i,s,r;s=n,r=this,i={completeSingle:!1,hint:function(e){var i,a;return n=s,a=e.getTokenAt(e.getCursor()).string,a=r._cleanToken(a),a.length>0&&(n=r._filterSuggestions(n,a)),i={from:e.getCursor(),to:e.getCursor(),list:[]},i.list=n,o.on(i,"shown",function(){r._suggestionBoxDisplayStatus=!0}),o.on(i,"close",function(){t("#CodeMirror-hint-infoDiv").remove(),r._suggestionBoxDisplayStatus=!1}),o.on(i,"select",function(e,n){var i,o,s,a;r._adjustWidthSuggestionBox(t(".CodeMirror-hints")[0]),r._setMaxWidthMenuText(t(".CodeMirror-hints")[0]),r._setMaxWidthCompletionText(t(".CodeMirror-hints")[0]),(e.menu.length>0||e.info.length>0)&&(e.info===e.menu&&(e.info=""),t("#CodeMirror-hint-infoDiv").length>0?(t("#CodeMirror-hint-infoDivMenu").text(e.menu),t("#CodeMirror-hint-infoDivInfo").text(e.info),t("#CodeMirror-hint-infoDiv").css("width",t(n).parent().css("width")),t("#CodeMirror-hint-infoDiv").css("left",t(n).parent().css("left")),i=parseInt(t(n).parent().css("top").substr(0,t(n).parent().css("top").length-2),10),i+=parseInt(t(n).parent().css("height").substr(0,t(n).parent().css("height").length-2),10),t("#CodeMirror-hint-infoDiv").css("top",i+"px")):(o=document.createElement("ul"),o.id="CodeMirror-hint-infoDiv",t(n.parentNode.parentNode).append(t(o)),t(o).css("width",t(n).parent().css("width")),t(o).css("left",t(n).parent().css("left")),i=parseInt(t(n).parent().css("top").substr(0,t(n).parent().css("top").length-2),10),i+=parseInt(t(n).parent().css("height").substr(0,t(n).parent().css("height").length-2),10),t(o).css("top",i+"px"),a=document.createElement("span"),a.id="CodeMirror-hint-infoDivMenu",t(a).css("color","blue"),t(a).text(e.menu),s=document.createElement("span"),s.id="CodeMirror-hint-infoDivInfo",t(s).css("color","#D757FA"),t(s).css("margin-left","10px"),t(s).text(e.info),t(o).append(t(a)),t(o).append(t(s)))),r._adjustHeightSuggestionBox(t(".CodeMirror-hints")[0])}),o.on(i,"pick",function(){var t,n,o;t=i.to.ch-a.length,o={},o.line=i.from.line,o.ch=t,n={},n.line=i.to.line,n.ch=i.to.ch,e.replaceRange("",o,n)}),i}},o.showHint(e,i.hint,i)},_getLoadingData:function(){var e;return e=[],e.push({type:"",completion:"",menu:"Loading hints...   ",info:""}),e},_showAutoCompleteLoadingMsg:function(e){var t,n;t=this._getLoadingData(),n=this._parseJson(t,!1),this._updateLoadingMessage(e,n)},_enableIntellisenseFunc:function(n){var i,o,s,r,a;return o=t(this.element),o.find("#auto-complete").prop("checked")!==!1?(s=this.options.language,e.call(this._supportedLanguages,s)>=0?(this._autoCompleteReqestStatus=!0,i=this._getFullCodeOffsetLanguage(n),r=[],a=this,t.ajax({type:"POST",url:"https://autocomplete.hackerrank.com/autocomplete",data:i,dataType:"json",success:function(e){return e.msg?(console.log("No suggestions obtained - error"),a._removeShowHintWidget(n),void 0):(a._autoCompleteReqestStatus===!0&&(r=a._parseJson(e,!0),a._updateSuggestions(n,r)),void 0)}})):(this._removeShowHintWidget(n),void 0)):void 0},_getFullCodeOffsetLanguage:function(e){var t,n,i,o,s,r,a,l,d,c;for(o=this.options.language,n="",this.options.showNonEditableHeadTail===!0&&(i=this._getLangHeadCode(o),0!==i.length&&(n+=i)),n+="\n",a=n.split("\n").length,a-=1,l=n.length,s=e.getCursor(),r=0;r<s.line;)l+=e.getLine(r).length+1,r++;return l+=s.ch,n+=e.getValue(),n+="\n",this.options.showNonEditableHeadTail===!0&&(d=this._getLangTailCode(o),0!==d.length&&(n+=d)),n+="\n",c=e.getTokenAt(s).string,c=this._cleanToken(c),t={column:s.ch+1,WantDocumentationForEveryCompletionResult:"false",line:s.line+1+a,wordToComplete:c,code:n,offset:l,fileType:o}},_initCodeEditor:function(n,i){var s,r,a,l,d;return null==i&&(i=!1),r=this._getUserOpts(),s=t(this.element),s.find(".editor-mode-button[data-editor="+r.keyMap+"]").addClass("disabled"),a=s.find("#select-lang"),a.select2({width:"off"}),this._initAutoSave(),r.userPreferredLang&&(d=r.userPreferredLang,e.call(this.options.languages,d)>=0)?(a.select2("val",r.userPreferredLang),r.mode=this.options.lang_mime_mapping[r.userPreferredLang]):(a.select2("val",this.options.language),r.mode=this.options.lang_mime_mapping[this.options.language]),l=this,this.options.enableIntellisense&&"emacs"!==r.keyMap&&(r.extraKeys["Ctrl-Space"]=function(e){l._showAutoCompleteLoadingMsg(e),l._enableIntellisenseFunc(e)}),r.readOnly=i,o.fromTextArea(n,r)},_changeLanguage:function(e){return this.changeLanguage(t(e.currentTarget).select2("val"))},changeLanguage:function(e,t){return null==t&&(t=null),null!==e?(this.newLanguage=e,this.options.dynamicMode?(this._showLoading(),this._trigger("loadmode",{},{lang:e,callback:function(e){return function(){return e._changeMode(t)}}(this)})):this._changeMode(t)):void 0},_showLoading:function(e){return null==e&&(e="Loading Editor... "),t(this.element).find(".code-body, .code-head, .code-tail").hide(),t(this.element).find(".loading-mode").html(e).show()},_hideLoading:function(){return t(this.element).find(".code-body, .code-head, .code-tail").show(),t(this.element).find(".loading-mode").hide()},_changeMode:function(e){var n,i,o;return null==e&&(e=null),this._hideLoading(),i=this.newLanguage,n=this.options.language,this.options.language=i,this.options.showFileTree||this.codeEditor.setValue(this._getLangCode(i)),this._foldCode(),this.options.showNonEditableHeadTail&&this._displayHeadAndTail(i),this._saveUserOpts({userPreferredLang:i}),this.codeEditor.setOption("mode",this.options.lang_mime_mapping[i]),this.options.showNonEditableHeadTail===!1&&this._setMainEditorLineNumber(i),o=t(this.element).find("#select-lang"),o.select2("val",i),this.codeEditor.clearHistory(),this._trigger("languagechange",{},{from:n,to:i}),null!==e?e():void 0},_saveCode:function(e){return e.preventDefault(),this.options.onSave?this.options.onSave():void 0},_initAutoSave:function(){var e,t;return this.options.autoSave&&this.options.onSave?(t=parseInt(this.options.autoSave,10),e=this.options.onSave,this._autoSaveCode(t,e)):void 0},_autoSaveCode:function(e,t){return t(),setInterval(this._autoSaveCode,e,e,t)},_setEditorMode:function(e){var n,i;return n=t(e.currentTarget).attr("data-editor"),t(e.currentTarget).parent().find(".editor-mode-button").removeClass("disabled"),t(e.currentTarget).addClass("disabled"),this.codeEditor.setOption("keyMap",n),i=this,"emacs"===n?delete this.codeEditor.options.extraKeys["Ctrl-Space"]:this.codeEditor.options.extraKeys["Ctrl-Space"]=function(e){i._showAutoCompleteLoadingMsg(e),i._enableIntellisenseFunc(e)},this._focusEditor(e),this._saveUserOpts({keyMap:n})},_focusEditor:function(){return this.codeEditor.focus()},_getDefaultLangCode:function(e){var t,n,i,o,s;if(this.options.showTemplate&&!this.options.showNonEditableHeadTail){if(void 0!==this.options.lang_head_template[e]||void 0!==this.options.lang_body_template[e]||void 0!==this.options.lang_tail_template[e]||void 0!==this.options.lang_template[e])return o=function(e){var t,n;return t=new Array(4).join(" "),n="	",void 0===e?"":e.split(n).join(t)},s=function(e){return e&&-1===e.indexOf("\n",e.length-1)?""+e+"\n":e},n=s(o(this.options.lang_head_template[e]||"")),t=s(o(this.options.lang_template[e]||this.options.lang_body_template[e]||"")),i=s(o(this.options.lang_tail_template[e]||"")),""+n+t+i}else if(this.options.lang_template[e]||this.options.lang_body_template[e]||this.options.lang_default_text[e])return this.options.lang_template[e]||this.options.lang_body_template[e]||this.options.lang_default_text[e];return""},_getLangCode:function(e){var n;return this.options.autoSaveNamespace&&(n=t.jStorage.get(this.getCurrentAutosavekey(e)),n&&!t.jStorage.get(""+this.getCurrentAutosavekey(e)+"-default_template"))?n:this._getDefaultLangCode(e)},_getLangHeadCode:function(e){return this.options.lang_head_template[e]?this.options.lang_head_template[e]:""},_getLangTailCode:function(e){return this.options.lang_tail_template[e]?this.options.lang_tail_template[e]:""},_displayHeadAndTail:function(e){var n,i,o;return n=t(this.element),0!==this._getLangHeadCode(e).length?(this.codeEditorHead.setValue(this._getLangHeadCode(e)),i=this.codeEditorHead.getValue().split("\n").length,this.codeEditor.setOption("firstLineNumber",i+1),this.codeEditorHead.setOption("mode",this.options.lang_mime_mapping[e])):n.find(".code-head").hide(),0!==this._getLangTailCode(e).length?(this.codeEditorTail.setValue(this._getLangTailCode(e)),this._updateTailEditorLineNumber(),this.codeEditorTail.setOption("mode",this.options.lang_mime_mapping[e])):n.find(".code-tail").hide(),o=n.find(".code-head").height(),n.find(".code-editors").scrollTop(o-60)},_updateTailEditorLineNumber:function(){var e,t;return e=this.codeEditorHead.getValue().split("\n").length,t=this.codeEditor.getValue().split("\n").length,this.codeEditorTail.setOption("firstLineNumber",e+t+1)},_setMainEditorLineNumber:function(e){return this.options.lang_line_nos&&this.options.lang_line_nos[e]?this.codeEditor.setOption("firstLineNumber",this.options.lang_line_nos[e]):this.codeEditor.setOption("firstLineNumber",1)},_growEditor:function(){var e;return e=this.element.find(".code-body").height(),300>e&&(e=300),this.element.find(".code-editors, #filetree").css("max-height",""+(e+110)+"px"),this.options.showFileTree?this.element.find("#filetree").css("max-height",""+e+"px"):void 0},_saveLangCode:function(){var e,t,i;return void 0===this.ActiveVersionId||null===this.ActiveVersionId?(e=new Date,t=""+this.options.language+e.getHours()+e.getMinutes(),n[t]&&clearTimeout(n[t]),i=this,n[t]=setTimeout(function(){return i.saveLangCode()},3e3)):void 0},saveLangCode:function(){var e,n,i;return void 0!==this.ActiveVersionId&&null!==this.ActiveVersionId||(i=this.options,!i.autoSaveNamespace||i.lang_mime_mapping[i.language]!==this.codeEditor.options.mode)?void 0:(n=this.getCurrentAutosavekey(),e=this.codeEditor.getValue(),t.jStorage.set(""+n+"-default_template",this._getDefaultLangCode(i.language)===e||this.options.lang_default_text[i.language]===e),t.jStorage.set(n,e))},getCurrentAutosavekey:function(e){var t;return null==e&&(e=null),t=this.options,null===e&&(e=t.language),t.autoSaveNamespace&&t.language?""+t.autoSaveNamespace+"-"+e:""},_getUserOpts:function(){var e,n;return e={lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,autoCloseBrackets:!0,autoCloseTags:!0,indentWithTabs:!1,matchBrackets:!0,keyMap:"default",userPreferredLang:null,indentUnit:4},n={extraKeys:{Tab:function(e){var t,n,i;return t=e.coordsChar(e.cursorCoords()).ch,n=t%e.getOption("indentUnit"),i=Array(e.getOption("indentUnit")+1-n).join(" "),e.replaceSelection(i,"end","+input")}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]},t.extend(t.extend(e,t.parseJSON(t.jStorage.get("codeshellUserOpts"))),n)},_saveUserOpts:function(e){var n;return n=t.extend(this._getUserOpts(),e),t.jStorage.set("codeshellUserOpts",JSON.stringify(n))},value:function(e){var t;return null==e&&(e=!1),e?this.options.showFileTree?(this._checkAndSave(null,null,this),{}):(t=[],i.each(this.options.languages,function(e){return function(n){return n===e.options.language?t.push(e.value()):t.push({code:e._getLangCode(n),language:n})}}(this)),t):{code:this.codeEditor.getValue(),language:this.options.language}},_foldCode:function(){var e,t,n,i,s,r,a,l,d,c,u;if(this.options.foldCode){for(s=this.codeEditor.getValue(),a=0,e=!1,t=!1,l=(s||"").split("\n"),u=[],d=0,c=l.length;c>d;d++)r=l[d],a+=1,e||t||-1===r.indexOf("Head ends")||(n=function(){return{from:{ch:0,line:0},to:{ch:0,line:a}}},o.newFoldFunction(n)(this.codeEditor,{}),e=!0),t||-1===r.indexOf("Tail starts")?u.push(void 0):(i=function(){return{from:{ch:0,line:a-1},to:{ch:0,line:l.length}}},o.newFoldFunction(i)(this.codeEditor,{}),u.push(t=!0));return u}},setValue:function(e){return e.language?this.changeLanguage(e.language,function(t){return function(){return e.code?(t.codeEditor.setValue(e.code),t._foldCode()):void 0}}(this)):void 0},setValueorFork:function(e){var i;return i=this,e.language&&n.HR.forkable===!0?this.changeLanguage(e.language,function(){var o;return e.code?(t.jStorage.get(""+i.getCurrentAutosavekey(e.language))&&(o=i.value().code)!==e.code&&""!==o&&o!==i._getDefaultLangCode(e.language)&&o!==i.options.lang_default_text[e.language]&&n.HR.forkable===!0&&(n.HR.forkable=!1,i._forkNewBuffer(e)),i.setValue(e),i._foldCode()):void 0}):void 0},refresh:function(){return setTimeout(function(e){return function(){return e.codeEditor.refresh()}}(this),25),this.options.showNonEditableHeadTail?(setTimeout(function(e){return function(){return e.codeEditorHead.refresh()}}(this),25),setTimeout(function(e){return function(){return e.codeEditorTail.refresh()}}(this),25)):void 0},onChange:function(e){return null!==e?this.codeEditor.on("change",e):void 0},setOption:function(e,t){return this.codeEditor.setOption(e,t)},getOptions:function(){return this.options},setStatusText:function(e){return null==e&&(e=""),this.options.statusText=e,t(this.element).find("#status-text").html(i.escape(e))},deleteLangCode:function(){var e,n;return n=this.options,n.autoSaveNamespace&&n.lang_mime_mapping[n.language]===this.codeEditor.options.mode?(e=""+n.autoSaveNamespace+"-"+n.language,t.jStorage.deleteKey(e)):void 0},enableCompileBtn:function(){var e;return e=t(this.element).find("button.bb-compile"),e.removeAttr("btn-disabled").removeClass("disabled")},getEditor:function(){return this.codeEditor},destroy:function(){return this._saveLangCode(this),t.Widget.prototype.destroy.call(this)}})})}).call(this);
//# sourceMappingURL=codeshell-fec06de2b81d2d78db58945f7d96119b.js.map