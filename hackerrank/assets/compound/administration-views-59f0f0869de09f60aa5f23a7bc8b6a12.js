(function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-add-testcase-dialog",e.prototype.className="administration-challenge-edit-add-testcase-dialog",e.prototype.ten_kb=10240,e.prototype.initialize=function(a){return a==null&&(a={}),this.e=a.e,this.parent=a.parent,this.test_case_id=a.test_case_id,this.test_case_index=a.test_case_index,this.el="#"+this.className+"-"+this.cid,c.util.scrollToTop()},e.prototype.render=function(){var a,b,d,e;$(this.e.currentTarget).removeAttr("disabled"),$(this.el).length===0&&(this.test_case_index?(a=(this.test_case_index/100).toFixed(2).split(".")[1],b="Update Testcase: (input"+a+".txt | output"+a+".txt)"):b="Add Testcase",$("body").append("<div class='on-the-fly-dialog-container'></div>          <div class='"+this.className+" on-the-fly-dialog position-absolute' id='"+this.className+"-"+this.cid+"'>              <div class='dlg-header'>                <p class='pull-left'><b>"+b+"</b></p>                <a class='pull-right close-button'><b>&#215;</b></a>                <div class='clearfix'></div>              </div>              <div class='dlg-content'>                "+c.appController.viewLoader(64)+"</div>              </div>          </div>        "),this.$el=$(this.el)),this.test_case_index&&!this.test_case&&(this.test_case=c.model("administration-test_case"),this.test_case.set("id",this.test_case_id),this.test_case.set("challenge_id",this.model.get("id")),this.listenTo(this.test_case,"sync",this.render),this.test_case.fetch());if(!this.test_case_index||this.test_case.sync_status)$(this.el).find(".dlg-content").html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),test_case_index:this.test_case_index})),this.editorOptions={lineNumbers:!0,lineWrapping:!0,mode:"text/plain"},this.render_input_editor(),this.render_output_editor(),this.test_case&&((d=this.test_case.get("tag"))!==void 0&&d!==null&&$("input#tag").val(this.test_case.get("tag")),(e=this.test_case.get("score"))!==void 0&&e!==null&&$("input#strength").val(this.test_case.get("score")),this.test_case.get("sample")===!0?$("input#sample").prop("checked",!0):$("input#sample").prop("checked",!1)),this.$("p.sample .help-prompt .help-text").css("right","8px"),this.$("p.sample .help-prompt .help-text").css("bottom","16px"),this.$("p.sample .help-prompt .help-text").css("top","initial"),this.$("p.sample .help-prompt .help-text").css("left","initial"),this.delegateEvents();return this},e.prototype.events={"click a.close-button":"closeDialog","click input.change-value-method":"changeValueMethod","click button.save-testcase":"saveTestcase","click button.cancel-update":"closeDialog","click button.update-testcase":"saveTestcase"},e.prototype.render_input_editor=function(a){var b,c;a==null&&(a=!0);if(!this.test_case_index||this.test_case.get("input_size")<=this.ten_kb){b=this.$("#input_textarea").get(0);if(b){this.input_editor=CodeMirror.fromTextArea(b,this.editorOptions),this.input_editor.on("beforeChange",this.editorBeforeChange),this.input_editor.on("change",this.editorAfterChange);if(this.test_case&&this.test_case.get("input_size")<=this.ten_kb)return this.input_editor.setValue(this.test_case.get("input_data"))}}else{b=this.$("#input_textarea").hide(),this.$(".input-testcase-row").append("<div class='gray no-edit'>you can't edit testcases larger than 10 KiB<div>"),this.$(".input-testcase-row").find(".editor_status_bar").remove();if(a)return c=this,setTimeout(function(){return c.$("#input_radio-upload").click()},100)}},e.prototype.render_output_editor=function(a){var b,c;a==null&&(a=!0);if(!this.test_case_index||this.test_case.get("output_size")<=this.ten_kb){b=this.$("#output_textarea").get(0);if(b){this.output_editor=CodeMirror.fromTextArea(b,this.editorOptions),this.output_editor.on("beforeChange",this.editorBeforeChange),this.output_editor.on("change",this.editorAfterChange);if(this.test_case&&this.test_case.get("output_size")<=this.ten_kb)return this.output_editor.setValue(this.test_case.get("output_data"))}}else{b=this.$("#output_textarea").hide(),this.$(".output-testcase-row").append("<div class='gray no-edit'>you can't edit testcases larger than 10 KiB<div>"),this.$(".output-testcase-row").find(".editor_status_bar").remove();if(a)return c=this,setTimeout(function(){return c.$("#output_radio-upload").click()},100)}},e.prototype.editorBeforeChange=function(a,b){var c,d,e;e=10240,c=_.reduce(b.text,function(a,b){return a+b.length},0),d=a.getValue().length;if((c+d>2*e||c>e||d>e)&&b.origin!=="+delete")return b.cancel(),alert("You can't edit a testcase in the editor which is greater than 10 KiB! Please use 'upload' option.")},e.prototype.editorAfterChange=function(a,b){var c,d;return d=a.getValue().length,d>1023?c=""+(d/1024).toFixed(3)+" KiB":c=""+d+" B",this.$("#"+a.display.wrapper.nextElementSibling.id).html(c)},e.prototype.closeDialog=function(a){return a&&a.preventDefault(),$(".on-the-fly-dialog-container").remove(),this.destroy(),$(this.el).remove()},e.prototype.changeValueMethod=function(a){var b,c;b=$(a.currentTarget).attr("data-field"),c=$(a.currentTarget).val();if(c==="editor"){if(!this.$("#"+b+"_textarea").length>0)return this.$("."+b+"-testcase-row").append("<textarea id='"+b+"_textarea'></textarea><div class='editor_status_bar' id='"+b+"_editor_status_bar'>Size: 0 B</div>"),this["render_"+b+"_editor"](!1),this.$("#"+b+"_testcase_upload_container").remove()}else if(c==="upload"&&!this.$("#"+b+"_testcase_upload").length>0)return this.$("."+b+"-testcase-row").append("<div id='"+b+"_testcase_upload_container'><input id='"+b+"_testcase_upload' type='file'/></div>"),this.$("."+b+"-testcase-row").find("#"+b+"_textarea").remove(),this.$("."+b+"-testcase-row").find(".no-edit").remove(),this.$("."+b+"-testcase-row").find(".CodeMirror").unbind().die().remove(),this.$("."+b+"-testcase-row").find(".editor_status_bar").remove()},e.prototype.saveTestcase=function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;a.preventDefault();if($(a.currentTarget).attr("disabled")==="disabled")return;$(a.currentTarget).attr("disabled","disabled"),this.test_case_index?$(a.currentTarget).html("Updating..."):$(a.currentTarget).html("Saving..."),e=[],d={},q=$("input#tag").val();if(q&&q.length>18)e.push({message:"Length of tag can't be more than 18 characters long",priority:"high"});else if(!this.test_case_index||this.test_case.get("tag")!==q)d.tag=q;p=$("input#strength").val();if(p&&(_.isNaN(parseInt(p))||parseInt(p)<0))e.push({message:"Strength should be a positive integer",priority:"high"});else if(!this.test_case_index||this.test_case.get("score")!==parseInt(p))d.strength=parseInt(p);o=$("input#sample").is(":checked");if(!this.test_case_index||this.test_case.get("sample")!==o)d.sample=o;if(this.$("#input_radio-editor").is(":checked")){if(this.input_editor){k=this.input_editor.getValue(),j="editor";if(!this.test_case_index||this.test_case.get("input_data")!==k)k||e.push({message:"input testcase is empty",priority:"low"}),d.input_value=k,d.input_type=j}}else this.$("#input_radio-upload").is(":checked")&&(k=this.$("input#input_testcase_upload").get(0).files[0],j="upload",!k&&!this.test_case_index?e.push({message:"file not selected for input testcase",priority:"high"}):k&&(d.input_value=k,d.input_type=j));if(this.$("#output_radio-editor").is(":checked")){if(this.output_editor){n=this.output_editor.getValue(),m="editor";if(!this.test_case_index||this.test_case.get("output_data")!==n)n||e.push({message:"output testcase is empty",priority:"low"}),d.output_value=n,d.output_type=m}}else this.$("#output_radio-upload").is(":checked")&&(n=this.$("input#output_testcase_upload").get(0).files[0],m="upload",!n&&!this.test_case_index?e.push({message:"file not selected for output testcase",priority:"high"}):n&&(d.output_value=n,d.output_type=m));e.length>0?(h=_.filter(e,function(a){return a.priority==="high"}),l=_.filter(e,function(a){return a.priority==="low"}),h.length===0&&l.length>0?(f="Following erros happened:\n",_.each(l,function(a){return f+="\t• "+a.message+"\n"}),f+="Would you like to continue?",b=confirm(f)):h.length===0&&l.length===0?b=!0:h.length>0&&(b=!1,f="Following errors happened:\n",_.each(e,function(a){return f+="\t• "+a.message+"\n"}),alert(f))):b=!0;if(b){r=this;if(this.test_case_index&&_.size(d)===0){$(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Updated"),setTimeout(function(){return r.closeDialog()},150);return}return this.test_case_index?(i="PUT",s="/"+this.test_case_id):(i="POST",s=""),g=new FormData,_.each(d,function(a,b){return g.append(b,a)}),$.ajax("/rest/administration/challenges/"+this.model.get("id")+"/test_cases"+s,{data:g,type:i,processData:!1,contentType:!1,success:function(b){var d;return $(a.currentTarget).removeAttr("disabled"),b.status?(r.test_case_index?($(a.currentTarget).html("Updated"),d=r.parent.collection.get(b.model.id),d.set(b.model)):($(a.currentTarget).html("Saved"),d=c.model("administration-test_case",b.model),r.parent.collection.add(d)),setTimeout(function(){return r.closeDialog()},300)):(f="Following errors happened:\n",_.each(b.errors,function(a){return f+="\t• "+a+"\n"}),alert(f),r.test_case_index?$(a.currentTarget).html("Upload"):$(a.currentTarget).html("Save"))},error:function(b){return $(a.currentTarget).removeAttr("disabled"),r.test_case_index?$(a.currentTarget).html("Upload"):$(a.currentTarget).html("Save"),b.status===413?alert("You exceeded the maximum allowed filesize limit for the zip file. Please either try individual testcase upload or contact hackers@hackerrank.com."):alert("There was a error. Please try again.")}})}return $(a.currentTarget).removeAttr("disabled"),this.test_case_index?$(a.currentTarget).html("Upload"):$(a.currentTarget).html("Save")},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditAddTestCaseDialog=a})}).call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-testcases",e.prototype.className="administration-challenge-edit-testcases",e.prototype.initialize=function(a){return a==null&&(a={}),this.collection=c.collection("administration-test_cases"),this.collection.challenge_id=this.model.get("id"),this.collection.cached(),this.listenTo(this.model,"reset",this.render),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"destroy",this.render),this.listenTo(this.collection,"sync",this.render)},e.prototype.events={"click button.add-testcase":"showAddTestCaseDialog","click a.remove-test-case":"deleteTestCase","click button.upload-zip":"uploadAsZip","click a.edit-test-case":"editTestCase"},e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),collection:this.collection,_collection:this.collection.toJSON()})),this},e.prototype.showAddTestCaseDialog=function(a){a.preventDefault();if($(a.currentTarget).attr("disabled")==="disabled")return;return $(a.currentTarget).attr("disabled","disabled"),this.add_testcase_dialog&&($(".on-the-fly-dialog-container").remove(),this.add_testcase_dialog.destroy(),$(this.add_testcase_dialog.el).remove()),this.add_testcase_dialog=new c.Administration_ChallengeEditAddTestCaseDialog({model:this.model,parent:this,e:a}),this.add_testcase_dialog.render()},e.prototype.editTestCase=function(a){var b,d;a.preventDefault();if($(a.currentTarget).attr("disabled")==="disabled")return;return $(a.currentTarget).attr("disabled","disabled"),b=$(a.currentTarget).attr("data-id"),d=$(a.currentTarget).attr("data-index"),this.edit_testcase_dialogs||(this.edit_testcase_dialogs={}),this.edit_testcase_dialogs[b]&&($(".on-the-fly-dialog-container").remove(),this.edit_testcase_dialogs[b].destroy(),$(this.edit_testcase_dialogs[b].el).remove()),this.edit_testcase_dialogs[b]=new c.Administration_ChallengeEditAddTestCaseDialog({model:this.model,test_case_id:b,test_case_index:d,parent:this,e:a}),this.edit_testcase_dialogs[b].render()},e.prototype.deleteTestCase=function(a){var b,d,e;a.preventDefault();if($(a.currentTarget).attr("disabled")==="disabled")return;return $(a.currentTarget).attr("disabled","disabled"),d=$(a.currentTarget).attr("data-id"),b=this.collection.get(d),e=$(a.currentTarget).attr("data-index"),this.delete_testcase_dialogs||(this.delete_testcase_dialogs={}),this.delete_testcase_dialogs[d]&&($(".on-the-fly-dialog-container").remove(),this.delete_testcase_dialogs[d].destroy(),$(this.delete_testcase_dialogs[d].el).remove()),this.delete_testcase_dialogs[d]=new c.Administration_ChallengeEditRemoveTestCaseDialog({model:this.model,test_case:b,test_case_index:e,parent:this,e:a}),this.delete_testcase_dialogs[d].render()},e.prototype.uploadAsZip=function(a){a.preventDefault();if($(a.currentTarget).attr("disabled")==="disabled")return;return $(a.currentTarget).attr("disabled","disabled"),this.upload_zip_dialog&&($(".on-the-fly-dialog-container").remove(),this.upload_zip_dialog.destroy(),$(this.upload_zip_dialog.el).remove()),this.upload_zip_dialog=new c.Administration_ChallengeEditUploadZipDialog({model:this.model,collection:this.collection,parent:this,e:a}),this.upload_zip_dialog.render()},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditTestcasesView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-languages-list-dropdown",e.prototype.className="administration-challenge-edit-languages-list-dropdown",e.prototype.initialize=function(a){return a==null&&(a={}),this.parent=a.parent,this.language_key=a.language_key,this.language_data=a.language_data,this.time_final_value=this.model.get_checker_limit("time",this.language_key)||this.language_data.def_time,this.mem_final_value=this.model.get_checker_limit("mem",this.language_key)||this.language_data.def_mem},e.prototype.render=function(){var a,b,d,e;return $(this.el).html(c.appController.template(this.template,this)({language_key:this.language_key,language_data:this.language_data,time_period:this.language_data.max_time-this.language_data.min_time+1,mem_period:this.language_data.max_mem-this.language_data.min_mem+1})),e=this,this.$(".timelimit-slider").slider({min:this.language_data.min_time,max:this.language_data.max_time,value:this.time_final_value,slide:function(a,b){return e.parent.$("span.time-value").html(b.value)},change:function(a,b){return e.time_final_value=b.value}}),this.$(".memlimit-slider").slider({min:this.language_data.min_mem,max:this.language_data.max_mem,value:this.mem_final_value,slide:function(a,b){return e.parent.$("span.mem-value").html(b.value)},change:function(a,b){return e.mem_final_value=b.value}}),this.editorOptions={lineNumbers:!1,lineWrapping:!0,mode:lang_mime_mapping[this.language_key]||"text/plain"},b=this.$("textarea.template_head").get(0),b&&(this.thead_editor=CodeMirror.fromTextArea(b,this.editorOptions),this.thead_editor.setValue(this.model.get(""+this.language_key+"_template_head")||lang_default_text[this.language_key]||""),this.thead_editor.focus()),a=this.$("textarea.template_body").get(0),a&&(this.tbody_editor=CodeMirror.fromTextArea(a,this.editorOptions),this.tbody_editor.setValue(this.model.get(""+this.language_key+"_template")||this.model.get(""+this.language_key+"_template_body")||"")),d=this.$("textarea.template_tail").get(0),d&&(this.ttail_editor=CodeMirror.fromTextArea(d,this.editorOptions),this.ttail_editor.setValue(this.model.get(""+this.language_key+"_template_tail")||"")),e=this,setTimeout(function(){return e.thead_editor.refresh(),e.tbody_editor.refresh(),e.ttail_editor.refresh()},300),this},e.prototype.getFinalValues=function(){var a,b,c,d;return c=this.getData(),d={},_.each(c,function(a,b){if(a!==null&&a!==void 0)return d[b]=a}),a={},d.time_limit!==void 0&&d.time_limit!==this.model.get_checker_limit("time",this.language_key)&&(d.time_limit===this.language_data.def_time?this.model.get_checker_limit("time",this.language_key)&&(a.time_limit=d.time_limit):a.time_limit=d.time_limit),d.mem_limit!==void 0&&d.mem_limit!==this.model.get_checker_limit("mem",this.language_key)&&(d.mem_limit===this.language_data.def_mem?this.model.get_checker_limit("mem",this.language_key)&&(a.mem_limit=d.mem_limit):a.mem_limit=d.mem_limit),d.template_head!==void 0&&(lang_default_text[this.language_key]===d.template_head?this.model.get(""+this.language_key+"_template_head")&&(a.template_head=null):d.template_head===""?this.model.get(""+this.language_key+"_template_head")&&(a.template_head=d.template_head):d.template_head!==this.model.get(""+this.language_key+"_template_head")&&(a.template_head=d.template_head)),d.template_body!==void 0&&(b=this.model.get(""+this.language_key+"_template")||this.model.get(""+this.language_key+"_template_body"),d.template_body!==b&&(d.template_body===""?b&&(a.template_body=d.template_body):a.template_body=d.template_body)),d.template_tail!==void 0&&d.template_tail!==this.model.get(""+this.language_key+"_template_tail")&&(d.template_tail===""?this.model.get(""+this.language_key+"_template_tail")&&(a.template_tail=d.template_tail):a.template_tail=d.template_tail),a},e.prototype.getData=function(){return{time_limit:this.time_final_value,mem_limit:this.mem_final_value,template_head:this.thead_editor?this.thead_editor.getValue():null,template_body:this.tbody_editor?this.tbody_editor.getValue():null,template_tail:this.ttail_editor?this.ttail_editor.getValue():null}},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditLanguagesListDropdownView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-languages-list",e.prototype.className="administration-challenge-edit-languages-list",e.prototype.initialize=function(a){return a==null&&(a={}),this.language_key=a.language_key,this.language_data=a.language_data},e.prototype.events={"click .edit-lang":"openIt","click .cancel":"closeIt","click .save-lang":"saveIt"},e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({language_data:this.language_data,model:this.model,language_key:this.language_key})),this.delegateEvents(),this},e.prototype.openDropdown=function(){return this.closeDropdown(),this.$(".language-card-dropdown").html("<div class='language-card-dropdown-inner'></div>"),this.dropdown_view=new c.Administration_ChallengeEditLanguagesListDropdownView({language_key:this.language_key,language_data:this.language_data,parent:this,model:this.model}),this.dropdown_view.setElement(this.$(".language-card-dropdown-inner")).render()},e.prototype.closeDropdown=function(){if(this.dropdown_view)return this.dropdown_view.unbind().remove()},e.prototype.openIt=function(a){return $(a.currentTarget).removeClass("edit-lang").addClass("save-lang"),$(a.currentTarget).find("i").removeClass("icon-pencil").addClass("icon-floppy"),this.$(".language-card .cancel").removeClass("hide"),this.$(".language-card").addClass("language-card-expand"),this.openDropdown()},e.prototype.closeIt=function(a){return this.$(".save-lang").removeClass("save-lang").addClass("edit-lang"),this.$(".edit-lang").find("i").removeClass("icon-floppy").addClass("icon-pencil"),this.$(".language-card .cancel").addClass("hide"),this.$(".language-card span.time-value").html(this.model.get_checker_limit("time",this.language_key)||this.language_data.def_time),this.$(".language-card span.mem-value").html(this.model.get_checker_limit("mem",this.language_key)||this.language_data.def_mem),this.$(".language-card").removeClass("language-card-expand"),this.closeDropdown()},e.prototype.saveIt=function(a){var b;return this.$(a.currentTarget).removeClass("save-lang").addClass("edit-lang"),this.$(a.currentTarget).find("i").removeClass("icon-floppy").addClass("icon-pencil"),this.$(".language-card .cancel").addClass("hide"),this.$(".language-card").removeClass("language-card-expand"),b=this.dropdown_view.getFinalValues(),_.size(b)>0&&(this.model.update_language_data(b,this.language_key),b.challenge_id=this.model.get("id"),b.language_key=this.language_key,(new c.Administration_ChallengeLanguageModel(b)).save()),this.closeDropdown()},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditLanguagesListView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-languages",e.prototype.className="administration-challenge-edit-languages",e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this.renderLanguages(),this},e.prototype.renderLanguages=function(){if(this.$(".language-cards-list-container").length>0&&!this.$(".language-cards-list-container").html())return(!this._subviews||this._subviews.length===0)&&_.each(codechecker_resource_limits,function(a,b){var d;return d=new c.Administration_ChallengeEditLanguagesListView({language_key:b,language_data:a,parent:this,model:this.model}),this.add_subview(d)},this),_.each(this._subviews,function(a){return this.$(".language-cards-list-container").append(a.render().el)},this)},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditLanguagesView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-overview",e.prototype.className="administration-challenge-edit-overview",e.prototype.initialize=function(a){var b=this;return this.action=a.action,this.parent=a.parent,this.listenTo(this.model,"reset",this.render),this.saveChallenge=function(){if(b.data_rendered&&b.changed())return b.parent.$("button.save-challenge").click()},this.throttledSave=_.throttle(this.saveChallenge,1e3)},e.prototype.events={"focusout input.auto-save":"autoSave","focusout textarea.auto-save":"autoSave","click a.edit-slug":"editSlug","click a.cancel-update-slug":"cancelUpdateSlug","click a.update-slug":"updateSlug","keypress input.edit-slug":"editSlugEnterKeyBinding","keyup textarea.description":"updateDescriptionMessage","keypress input#moderator":"addModEnterKeyBinding","click button.moderator-save":"addMod","click a.remove-moderator":"removeMod"},e.prototype.render=function(){var a,b;return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action})),a={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,autoCloseBrackets:!0,cursorScrollMargin:2,mode:"text/x-markdown",indentUnit:4,tabSize:4,lineWrapping:!0},this.$("textarea.problem-statement").get(0)&&(this.problem_statement_editor=CodeMirror.fromTextArea(this.$("textarea.problem-statement").get(0),a),this.problem_statement_editor.on("change",this.throttledSave)),b=this,this.$("input.tags").length>0&&this.$("input.tags").tagsInput({width:"98%",autocomplete_url:"/rest/tags/autocomplete?f=autocomplete",onChange:function(){return b.autoSave()}}),this.action!=="create"&&this.$("#moderator").length>0&&(b=this,this.$("#moderator").autocomplete({minLength:2,source:function(a,b){return $.ajax({url:"/rest/hackers/autocomplete?limit=4",data:{q:a.term},success:function(a){return b(a)}})},select:function(a,c){return b.$("input#moderator").val(c.item.value),b.$("button.moderator-save").click(),setTimeout(function(){return b.$("input#moderator").val("")},100)}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append($("<a></a>").append($("<div class='hacker-container'>                  <div class='hacker-avatar'>                    <img height='50' width='50' class='pull-left avatar profile_avatar' src='/rest/hackers/"+c.util.trim(b.value)+"/avatar'>                  </div>                  <div class='hacker-details'>                    <p class='hacker-username'>"+b.value+"</p>                  </div>                </div>"))).appendTo(a)}),this.setData(this.model.toJSON()),this},e.prototype.setData=function(a){if(this.action==="create")return;return a.name&&this.$("input#name").val(a.name),a.preview&&(this.$("textarea.description").val(a.preview),a.preview.length>this.model.max_limit.description?this.$("small.description").html("Characters left: -"+(a.preview.length-this.model.max_limit.description)).addClass("error").removeClass("hint"):this.$("small.description").html("Characters left: "+(this.model.max_limit.description-a.preview.length)).addClass("hint").removeClass("error")),a.body&&this.problem_statement_editor&&this.problem_statement_editor.setValue(a.body),a.tags&&a.tags.length>0&&this.$("input.tags").silentImportTags(a.tags.join()),this.checkRenderedData()},e.prototype.checkRenderedData=function(a){if(this.rendered()&&!this.changed())return this.data_rendered=!0},e.prototype.rendered=function(a){return this.$("input#name").length>0&&this.$("textarea.description").length>0&&this.problem_statement_editor?!0:!1},e.prototype.changed=function(){return this.model.get("name")!==this.$("input#name").val()?!0:this.model.get("preview")!==this.$("textarea.description").val()?!0:this.model.get("body")!==this.problem_statement_editor.getValue()?!0:_.difference(this.model.getTags(),this.getTags()).length>0||_.difference(this.getTags(),this.model.getTags()).length>0?!0:!1},e.prototype.validate=function(){return this.$(".error").html("").hide(),this.$("input#name").val()!==""&&this.$("textarea.description").val().length<=this.model.max_limit.description&&this.problem_statement_editor.getValue().length>0?!0:(this.$("input#name").val()===""&&this.$(".error.name").html(c.util.getErrorList(["Challenge name can't be empty"])).show(),this.problem_statement_editor.getValue().length===0&&this.$(".error.problem-statement").html(c.util.getErrorList(["Problem statement can't be empty"])).show(),!1)},e.prototype.getData=function(){var a;return a={},a.name=this.$("input#name").val(),a.preview=this.$("textarea.description").val(),a.preview===""&&(a.preview=null),a.body=this.problem_statement_editor?this.problem_statement_editor.getValue():null,a.tags=this.getTags(),a.body===""&&(a.body=null),a},e.prototype.getTags=function(){return _.reject(_.uniq((this.$("input.tags").val()||"").split(",")),function(a){return a===""})},e.prototype.autoSave=function(a){if(this.action!=="create")return this.saveChallenge()},e.prototype.editSlug=function(a){return a.preventDefault(),$(a.currentTarget).hide(),this.$("p.slug").hide(),this.$("a.update-slug").show(),this.$("a.cancel-update-slug").show(),this.$("input.edit-slug").show().focus().val(this.$("input.edit-slug").val())},e.prototype.cancelUpdateSlug=function(a){return a.preventDefault(),$(a.currentTarget).hide(),this.$("p.slug").show(),this.$("a.update-slug").hide(),this.$("input.edit-slug").hide(),this.$("a.edit-slug").show()},e.prototype.updateSlug=function(a){var b;return a.preventDefault(),this.$(".slug.error").html("").hide(),b=this.$("input.edit-slug").val(),b!==this.model.get("slug")?_.isEmpty(b)?this.$(".slug.error").html("slug can't be empty").show():(this.model.set("slug",b),this.model.save(null,{silent:!0,success:function(a){if(a.status)return this.$("p.slug").html(b),this.$("a.cancel-update-slug").click()}})):this.$("a.cancel-update-slug").click()},e.prototype.editSlugEnterKeyBinding=function(a){if(a.which===13)return this.$("a.update-slug").click()},e.prototype.updateDescriptionMessage=function(a){var b;return a.preventDefault(),b=this.$(a.currentTarget).val(),b.length>this.model.max_limit.description?this.$("small.description").html("Characters left: -"+(b.length-this.model.max_limit.description)).addClass("error").removeClass("hint"):this.$("small.description").html("Characters left: "+(this.model.max_limit.description-b.length)).addClass("hint").removeClass("error")},e.prototype.addModEnterKeyBinding=function(a){if(a.which===13)return this.$("button.moderator-save").click()},e.prototype.addMod=function(a){var b;return b=$("input#moderator").val(),this.addModContainer(b)&&this.addUserAsMod(b),this.$("input#moderator").val("")},e.prototype.addModContainer=function(a){return this.$(".moderator-container[data-username="+a+"]").length===0?(this.$(".moderators-list").append(c.util.genModContainer({name:$("input#moderator").val(),avatar:"/rest/hackers/"+a+"/avatar",role:"moderator",close:!0})),this.$(".moderators-list remove-moderator[data-username="+a+"]").bind("click",this.removeMod),!0):!1},e.prototype.removeMod=function(a){var b;return b=$(a.currentTarget).attr("data-username"),this.$(".moderator-container[data-username="+b+"]").remove(),this.removeUserAsMod(b)},e.prototype.addUserAsMod=function(a){var b;return b=this,$.ajax({url:this.model.mod_url(a),type:"POST",success:function(c){if(!c.status)return b.$(".moderator-container[data-username="+a+"]").remove()}})},e.prototype.removeUserAsMod=function(a){var b;return b=this,$.ajax({url:this.model.mod_url(a),type:"DELETE",success:function(c){if(!c.status)return b.addModContainer(a)}})},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditOverviewView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-delete-testcase-dialog",e.prototype.className="administration-challenge-edit-delete-testcase-dialog",e.prototype.initialize=function(a){return a==null&&(a={}),this.e=a.e,this.parent=a.parent,this.test_case=a.test_case,this.test_case_index=a.test_case_index,this.el="#"+this.className+"-"+this.cid},e.prototype.render=function(){return $(this.e.currentTarget).removeAttr("disabled"),$(this.el).length===0&&($("body").append("<div class='on-the-fly-dialog-container'></div>          <div class='"+this.className+" on-the-fly-dialog position-fixed' id='"+this.className+"-"+this.cid+"'>              <div class='dlg-header'>                <p class='pull-left'><b>Remove Testcase</b></p>                <a class='pull-right close-button'><b>&#215;</b></a>                <div class='clearfix'></div>              </div>              <div class='dlg-content'>                "+c.appController.viewLoader(64)+"</div>              </div>          </div>        "),this.$el=$(this.el)),$(this.el).find(".dlg-content").html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),test_case:this.test_case,_test_case:this.test_case.toJSON(),test_case_index:this.test_case_index})),this.delegateEvents()},e.prototype.events={"click a.close-button":"closeDialog","click button.dont-delete":"closeDialog","click .delete-testcase":"deleteTestcase"},e.prototype.closeDialog=function(a){return $(".on-the-fly-dialog-container").remove(),this.destroy(),$(this.el).remove()},e.prototype.deleteTestcase=function(a){var b
;a.preventDefault();if($(a.currentTarget).attr("disabled")==="disabled")return;return $(a.currentTarget).attr("disabled","disabled"),$(a.currentTarget).html("Deleting"),this.$("span.nb-spacing").remove(),this.$("button.dont-delete").remove(),this.$("a.close-button").remove(),b=this,this.test_case.destroy({success:function(a){return b.parent.collection.remove(this.test_case),b.closeDialog()}})},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditRemoveTestCaseDialog=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-upload-zip-dialog",e.prototype.className="administration-challenge-edit-upload-zip-dialog",e.prototype.initialize=function(a){return a==null&&(a={}),this.e=a.e,this.parent=a.parent,this.el="#"+this.className+"-"+this.cid},e.prototype.render=function(){return $(this.e.currentTarget).removeAttr("disabled"),$(this.el).length===0&&($("body").append("<div class='on-the-fly-dialog-container'></div>          <div class='"+this.className+" on-the-fly-dialog position-fixed' id='"+this.className+"-"+this.cid+"'>              <div class='dlg-header'>                <p class='pull-left'><b>Upload Zip</b></p>                <a class='pull-right close-button'><b>&#215;</b></a>                <div class='clearfix'></div>              </div>              <div class='dlg-content'>                "+c.appController.viewLoader(64)+"</div>              </div>          </div>        "),this.$el=$(this.el)),$(this.el).find(".dlg-content").html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),collection:this.collection,_collection:this.collection.toJSON()})),this.delegateEvents()},e.prototype.events={"click a.close-button":"closeDialog","click button.dont-delete":"closeDialog","click button.continue-delete-and-upload":"showUploadZipForm","click button.upload-zip-button":"uploadZip"},e.prototype.closeDialog=function(a){return $(".on-the-fly-dialog-container").remove(),this.destroy(),$(this.el).remove()},e.prototype.showUploadZipForm=function(a){var b;return b=this,this.$(".warning-dialog").fadeOut(300,function(){return b.$(".upload-zip-form").show()})},e.prototype.uploadZip=function(a){var b,c,d,e;return c=this,d=$("input.upload-zip").get(0).files[0],console.log(d),!d||(e=d.type)!=="application/zip"&&e!=="application/x-zip"&&e!=="application/octet-stream"&&e!=="application/x-zip-compressed"?d?alert("Invalid file type. Please select a zip file to upload."):alert("Please select a zip file to upload."):(b=new FormData,b.append("zip_file",d),$(a.currentTarget).attr("disabled","disabled"),$(a.currentTarget).html("Uploading..."),$.ajax("/rest/administration/challenges/"+this.model.get("id")+"/test_cases/upload_zip",{data:b,type:"POST",processData:!1,contentType:!1,success:function(b){return $(a.currentTarget).removeAttr("disabled"),b.status?(c.parent.collection.reset(b.models),$(a.currentTarget).html("Uploaded"),setTimeout(function(){return c.closeDialog()},300)):(alert(b.errors[0]),$(a.currentTarget).html("Upload"))},error:function(b){return $(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Upload"),b.status===413?alert("You exceeded the maximum allowed filesize limit for the zip file. Please either try individual testcase upload or contact hackers@hackerrank.com."):alert("There was a error. Please try again.")}}))},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditUploadZipDialog=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit",e.prototype.className="administration-challenge-edit",e.prototype.initialize=function(a){return this.action=a.action,this.tab=a.tab,this.challenge_id=a.challenge_id,this.contest_id=a.contest_id,this.listenTo(this.model,"reset",this.render)},e.prototype.events={"click a.change-tab":"changeTab","click button.save-challenge":"saveChallenge"},e.prototype.render=function(){if(this.action!=="create"&&!this.model.sync_status)return this;$(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action,tab:this.tab,contest_id:this.contest_id})),this.action==="create"?this.$("li[data-tab=overview]").addClass("active"):this.$("li[data-tab="+this.tab+"]").addClass("active");if(!this.prev_tab||this.tab!==this.prev_tab)this.prev_tab&&(this.tab_view.destroy(),this._subviews=[],this.$(".tab-body").html("<div class='tabs-body-inner'></div>")),this.tab==="languages"?(this.tab_view=new c.Administration_ChallengeEditLanguagesView({model:this.model}),this.add_subview(this.tab_view)):this.tab==="testcases"?(this.tab_view=new c.Administration_ChallengeEditTestcasesView({model:this.model}),this.add_subview(this.tab_view)):(this.tab_view=new c.Administration_ChallengeEditOverviewView({model:this.model,action:this.action,parent:this}),this.add_subview(this.tab_view));return this.prev_tab=this.tab,this.tab_view.setElement(this.$(".tabs-body-inner")).render(),this},e.prototype.changeTab=function(a){var b,d;a.preventDefault();if(!$(a.currentTarget).parent().hasClass("active"))return b=$(a.currentTarget).parent().attr("data-tab"),d="/administration/",this.contest_id&&(d+="contests/edit/"+this.contest_id+"/"),d+="challenges/"+this.action,this.challenge_id&&(d+="/"+this.challenge_id),b&&(d+="/"+b),c.router.navigate(d,!1),this.tab=b,this.render()},e.prototype.saveChallenge=function(a){var b,d;a.preventDefault();if(!$(a.currentTarget).is(":disabled"))return $(a.currentTarget).html("Saving..."),$(a.currentTarget).attr("disabled","disabled"),this.action==="create"?this.tab_view.validate&&this.tab_view.validate()?(b=new c.Administration_ChallengeModel(this.tab_view.getData()),this.contest_id&&b.set("contest_id",this.contest_id),d=this,b.save(null,{success:function(b){var e;return e=d.contest_id?"/administration/contests/edit/"+d.contest_id+"/challenges/edit/"+b.get("id"):"/administration/challenges/edit/"+b.get("id"),c.router.navigate(e,{trigger:!0,replace:!0}),$(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Challenge")}})):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Challenge")):this.tab_view?this.tab_view.validate&&this.tab_view.validate()?(d=this,this.model.save(this.tab_view.getData(),{silent:!0,success:function(a){return d.$("button.save-challenge").removeAttr("disabled"),d.$("button.save-challenge").html("Save Challenge")}})):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Challenge")):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Challenge"))},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/contest-edit-challenges",e.prototype.className="administration-contest-edit-challenges",e.prototype.events={"click button.add-challenge":"showAddChallengeDialog","dragstart div.split-table-body":"challengeDragStart","dragend div.split-table-body":"challengeDragEnd","dragover div.split-table-body":"challengeDragOver","dragleave div.split-table-body":"challengeDragLeave","drop div.split-table-body":"challengeDrop","click .change-weights":"changeWeight","keypress input.weight":"keypressInputWeight","click input.binary":"changeBinaryScoring","click input.dynamic":"changeDynamic","click .remove-challenge":"removeChallenge"},e.prototype.initialize=function(a){var b,d;return this.contest_id=a.contest_id,this.page=a.page,this.listenTo(this.model,"reset",this.render),b=this,d=function(a){return a.page=b.page,a.setContestId(b.model.get("id"))},this.collection=c.appController.getCollection("administration-challenges","page-"+this.page,d),this.listenTo(this.collection,"reset",this.render)},e.prototype.render=function(){return this.collection.sync_status?($(this.el).html(c.appController.template(this.template,this)({collection:this.collection,_collection:this.collection.toJSON(),contest_id:this.contest_id})),this.$(".help-me").length>0&&this.$(".help-me").popover({placement:"top"}),this):this},e.prototype.showAddChallengeDialog=function(a){var b,d;return d=this,b=c.util.ShowDialog({title:"Add Challenge",body:"          <div class='add-challenge-modal'>            <input type='text' class='add-challenge-input left-half'><button class='btn add-challenge-button right-half'>Add</button>          </div>        ",events:{"click button.add-challenge-button":function(a){var c;return b=a.data.that,c=b.$el().find("input.add-challenge-input").val(),b.destroy(),$.ajax({url:d.model.challenge_url(c),type:"POST",success:function(a){if(a.status)return d.collection.fetch({success:function(){return d.render()}})}})},"keypress input.add-challenge-input":function(a){if(a.which===13)return b=a.data.that,b.$el().find("button.add-challenge-button").click()}}}),b.render(),b.$el().find("input.add-challenge-input").autocomplete({minLength:2,source:function(a,b){return $.ajax({url:"/rest/administration/challenges/autocomplete?limit=4",data:{term:a.term},success:function(a){return b(a)}})},select:function(a,c){return b.$el().find("input.add-challenge-input").val(c.item.value),b.$el().find("button.add-challenge-button").click(),setTimeout(function(){return b.$el().find("input.add-challenge-input").val("")},100)}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append($("<a></a>").append($("<div class='challenge-autocomplete-container'>              <p class='challenge-autocomplete-name'>"+b.label+"</p>              <p class='challenge-autocomplete-slug'>"+b.value+"</p>            </div>"))).appendTo(a)},b.$el().find("input.add-challenge-input").focus()},e.prototype.challengeDragStart=function(a){return $(a.currentTarget).css("opacity","0.5")},e.prototype.challengeDragEnd=function(a){var b,c,d,e,f;return $(a.currentTarget).css("opacity","1"),f=parseInt($(a.currentTarget).attr("data-index")),d=parseInt($(".split-table-body[selected=selected]").attr("data-index")),b=!1,f!==d&&(c=$(".split-table-body[selected=selected]"),c.length===1&&(e=$(a.currentTarget).detach(),c.before(e),b=!0)),$(".split-table-body[selected=selected]").css("border-top","1px solid #e1e1e1"),$(".split-table-body[selected=selected]").removeAttr("selected"),this.updateIndexes(b)},e.prototype.updateIndexes=function(a){var b;_.each(this.$(".split-table-body"),function(a,b){return $(a).attr("data-index",b),$(a).find(".challenge-serial").html(b+1)});if(a)return b=_.map(_.reject(this.$(".split-table-body"),function(a){return $(a).hasClass("dummy")}),function(a,b){return parseInt($(a).attr("data-id"))}),$.ajax({url:this.model.update_challenges_order_url(),data:{order:b},type:"PUT"})},e.prototype.challengeDragOver=function(a){return a.preventDefault(),$(a.currentTarget).css("border-top","1px solid #999"),$(a.currentTarget).attr("selected","selected"),!1},e.prototype.challengeDragLeave=function(a){return $(a.currentTarget).css("border-top","1px solid #e1e1e1"),$(a.currentTarget).removeAttr("selected")},e.prototype.changeWeight=function(a){var b;return $(a.currentTarget).find("img").attr("src")!=="/assets/save.png"?($(a.currentTarget).find("img").attr("src","/assets/save.png"),this.$("span.weight").hide(),this.$("input.weight").show()):(b={},_.each(_.reject(this.$(".split-table-body"),function(a){return $(a).hasClass("dummy")}),function(a,c){return b[parseInt($(a).attr("data-id"))]=parseInt($(a).find("input.weight").val()),$(a).find("span.weight").html($(a).find("input.weight").val())}),$.ajax({url:this.model.update_challenge_weights_url(),data:{weights:b},type:"PUT"}),$(a.currentTarget).find("img").attr("src","/assets/write.png"),this.$("span.weight").show(),this.$("input.weight").hide())},e.prototype.keypressInputWeight=function(a){if(a.which===13)return $(".change-weights").click()},e.prototype.changeBinaryScoring=function(a){var b,c;return b=$(a.currentTarget).is(":checked"),c=$(a.currentTarget).attr("data-id"),$.ajax({url:this.model.update_flags_url(c),data:{binary_scoring:b},type:"PUT"})},e.prototype.changeDynamic=function(a){var b,c;return c=$(a.currentTarget).is(":checked"),b=$(a.currentTarget).attr("data-id"),$.ajax({url:this.model.update_flags_url(b),data:{dynamic:c},type:"PUT"})},e.prototype.removeChallenge=function(a){var b;return b=$(a.currentTarget).attr("data-id"),this.$(".split-table-body[data-id="+b+"]").remove(),this.updateIndexes(!1),$.ajax({url:this.model.association_url(b),type:"DELETE"})},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ContestEditChallengesView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/contest-edit-options",e.prototype.className="administration-contest-edit-options",e.prototype.initialize=function(a){return this.listenTo(this.model,"reset",this.render)},e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()}))},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ContestEditOptionsView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/contest-edit-overview",e.prototype.className="administration-contest-edit-overview",e.prototype.initialize=function(a){var b=this;return this.action=a.action,this.parent=a.parent,this.listenTo(this.model,"reset",this.render),this.saveContest=function(){if(b.data_rendered&&b.changed())return b.parent.$("button.save-contest").click()},this.throttledSave=_.throttle(this.saveContest,1e3)},e.prototype.events={"focusout input.auto-save":"autoSave","focusout textarea.auto-save":"autoSave","keyup input#name":"updateSlug","click input#noendtime":"disableEndtime","click a.edit-slug":"editSlug","click a.cancel-update-slug":"cancelUpdateSlug","click a.update-slug":"updateSlug","keyup textarea.tagline":"updateTaglineMessage","keypress input.edit-slug":"editSlugEnterKeyBinding","keypress input#moderator":"addModEnterKeyBinding","click button.moderator-save":"addMod","click a.remove-moderator":"removeMod"},e.prototype.render=function(){var a,b;return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action})),a={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,autoCloseBrackets:!0,cursorScrollMargin:2,mode:"text/x-markdown",indentUnit:4,tabSize:4,lineWrapping:!0},this.$("textarea.description").get(0)&&(this.description_editor=CodeMirror.fromTextArea(this.$("textarea.description").get(0),a),this.description_editor.on("change",this.throttledSave)),this.action!=="create"&&this.$("#moderator").length>0&&(b=this,this.$("#moderator").autocomplete({minLength:2,source:function(a,b){return $.ajax({url:"/rest/hackers/autocomplete?limit=4",data:{q:a.term},success:function(a){return b(a)}})},select:function(a,c){return b.$("input#moderator").val(c.item.value),b.$("button.moderator-save").click(),setTimeout(function(){return b.$("input#moderator").val("")},100)}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append($("<a></a>").append($("<div class='hacker-container'>                  <div class='hacker-avatar'>                    <img height='50' width='50' class='pull-left avatar profile_avatar' src='/rest/hackers/"+c.util.trim(b.value)+"/avatar'>                  </div>                  <div class='hacker-details'>                    <p class='hacker-username'>"+b.value+"</p>                  </div>                </div>"))).appendTo(a)}),this.setData(this.model.toJSON()),this.setUpEvents()},e.prototype.autoSave=function(a){if(this.action!=="create")return this.saveContest()},e.prototype.setUpEvents=function(a){return this.$("input#startdate").datepicker(),this.$("input#enddate").datepicker(),this.$("input#starttime").timepicker({step:15,timeFormat:"H:i"}),this.$("input#endtime").timepicker({step:15,timeFormat:"H:i"})},e.prototype.disableEndtime=function(a){return $(a.currentTarget).is(":checked")?(this.cache_disabled_enddate=this.$("input#enddate").val(),this.cache_disabled_endtime=this.$("input#endtime").val(),this.$("input#enddate").val(""),this.$("input#endtime").val(""),this.$("input#enddate").attr("disabled","disabled"),this.$("input#endtime").attr("disabled","disabled"),this.$("input#enddate").addClass("disabled"),this.$("input#endtime").addClass("disabled")):(this.$("input#enddate").removeAttr("disabled"),this.$("input#endtime").removeAttr("disabled"),this.$("input#enddate").removeClass("disabled"),this.$("input#endtime").removeClass("disabled"),this.cache_disabled_enddate&&this.$("input#enddate").val(this.cache_disabled_enddate),this.cache_disabled_endtime&&this.$("input#endtime").val(this.cache_disabled_endtime)),this.autoSave()},e.prototype.getTimeStamps=function(a){var b,d,e,f,g,h,i,j;return h={},h.errors={},g=$("input#noendtime").is(":checked"),g?(d=null,h.valid_endtime=!0,h.valid_enddate=!0,h._endtime=null):(e=this.$("input#enddate").val(),f=this.$("input#endtime").val(),h.valid_endtime=c.util.validate_time(f),h.valid_enddate=c.util.validate_date(e),h.valid_enddate&&h.valid_endtime?h._endtime=c.util.getEpochTimeStampFromDateTime(e,f):h._endtime=!1),i=this.$("input#startdate").val(),j=this.$("input#starttime").val(),h.valid_starttime=c.util.validate_time(j),h.valid_startdate=c.util.validate_date(i),h.valid_startdate&&h.valid_starttime?h._starttime=c.util.getEpochTimeStampFromDateTime(i,j):h._starttime=!1,h.valid_starttime&&h.valid_enddate&&h.valid_endtime&&h.valid_enddate?h.valid_timestamps=!0:h.valid_timestamps=!1,h.valid_values=!1,h.valid_timestamps&&(h.valid_values=!0,b=Math.floor((new Date).getTime()/1e3),this.action==="create"&&h._starttime+3600<b&&(h.valid_values=!1,h.errors.values="Value of Start Date and Time should lie in future"),g||(this.action==="create"&&h._endtime<b&&h._endtime>h._starttime?(h.valid_values=!1,h.errors.values="Value of End Date and Time should lie in future"):h._endtime<h._starttime&&(h.valid_values=!1,h.errors.values="End Date & Time cannot be before Start Date & Time"))),h.valid_starttime||(h.errors.starttime="Start time is not valid"),h.valid_startdate||(h.errors.startdate="Start date is not valid"),h.valid_endtime||(h.errors.endtime="End time is not valid"),h.valid_enddate||(h.errors.enddate="End date is not valid"),h},e.prototype.validate=function(){var a,b,d;this.$(".error").html("").hide(),a=this.getTimeStamps();if(_.size(a.errors)===0&&this.$("input#name").val()!==""&&this.$("textarea.tagline").val().length<=this.model.max_limit.tagline)return!0;if(a.errors.starttime||a.errors.startdate)d=[],a.errors.starttime&&d.push(a.errors.starttime),a.errors.startdate&&d.push(a.errors.startdate),this.$(".error.starttime").html(c.util.getErrorList(d)).show();a.errors.values&&this.$(".error.starttime").html(c.util.getErrorList([a.errors.values])).show();if(a.errors.endtime||a.errors.enddate)b=[],a.errors.endtime&&b.push(a.errors.endtime),a.errors.enddate&&b.push(a.errors.enddate),this.$(".error.endtime").html(c.util.getErrorList(b)).show();return this.$("input#name").val()===""&&this.$(".error.name").html(c.util.getErrorList(["Name can't be empty"])).show(),!1},e.prototype.changed=function(){var a;return a=this.getTimeStamps(),this.model.get("starttime")!==a._starttime?!0:this.model.get("endtime")!==a._endtime?!0:this.$("input#name").val()!==this.model.get("name")?!0:this.$("textarea.tagline").val()!==this.model.get("tagline")?!0:this.description_editor.getValue()!==this.model.get("description")?!0:!1},e.prototype.getData=function(){var a,b;return a={},a.name=this.$("input#name").val(),b=this.getTimeStamps(),a.starttime=b._starttime,a.endtime=b._endtime,a.tagline=this.$("textarea.tagline").val(),a.tagline===""&&(a.tagline=null),a.description=this.description_editor?this.description_editor.getValue():null,a.description===""&&(a.description=null),a},e.prototype.setData=function(a){var b;if(this.action==="create")return;return a.name&&this.$("input#name").val(a.name),a.slug&&this.$("span.slug").html(a.slug),a.starttime&&(b=c.util.splitDate(c.util.getDateFromEpoch(a.starttime)),this.$("input#startdate").val(""+b.MM+"/"+b.dd+"/"+b.yyyy),this.$("input#starttime").val(""+b.hh+":"+b.mm)),a.endtime?(b=c.util.splitDate(c.util.getDateFromEpoch(a.endtime)),this.$("input#enddate").val(""+b.MM+"/"+b.dd+"/"+b.yyyy),this.$("input#endtime").val(""+b.hh+":"+b.mm)):(this.$("input#noendtime").prop("checked",!0),this.$("input#enddate").attr("disabled","disabled"),this.$("input#endtime").attr("disabled","disabled")),a.description&&this.description_editor&&this.description_editor.setValue(a.description),a.tagline&&(this.$("textarea.tagline").val(a.tagline),this.$("small.tagline").html(""+(this.model.max_limit.tagline-a.tagline.length)+" characters left")),this.checkRenderedData()},e.prototype.checkRenderedData=function(a){if(this.rendered()&&!this.changed())return this.data_rendered=!0},e.prototype.rendered=function(a){return this.$("input#name").length>0&&this.$("input#endtime").length>0&&this.$("input#enddate").length>0&&this.$("input#starttime").length>0&&this.$("input#startdate").length>0&&this.$("textarea.tagline").length>0&&this.description_editor?!0:!1},e.prototype.editSlug=function(a){return a.preventDefault(),$(a.currentTarget).hide(),this.$("p.slug").hide(),this.$("a.update-slug").show(),this.$("a.cancel-update-slug").show(),this.$("input.edit-slug").show().focus().val(this.$("input.edit-slug").val())},e.prototype.cancelUpdateSlug=function(a){return a.preventDefault(),$(a.currentTarget).hide(),this.$("p.slug").show(),this.$("a.update-slug").hide(),this.$("input.edit-slug").hide(),this.$("a.edit-slug").show()},e.prototype.updateSlug=function(a){var b;return a.preventDefault(),this.$(".slug.error").html("").hide(),b=this.$("input.edit-slug").val(),b!==this.model.get("slug")?_.isEmpty(b)?this.$(".slug.error").html("slug can't be empty").show():(this.model.set("slug",b),this.model.save(null,{silent:!0,success:function(a){if(a.status)return this.$("p.slug").html(b),this.$("a.cancel-update-slug").click()}})):this.$("a.cancel-update-slug").click()},e.prototype.editSlugEnterKeyBinding=function(a){if(a.which===13)return this.$("a.update-slug").click()},e.prototype.updateTaglineMessage=function(a){var b;return a.preventDefault(),b=this.$(a.currentTarget).val(),b.length>this.model.max_limit.tagline?this.$("small.tagline").html("Characters left: -"+(b.length-this.model.max_limit.tagline)).addClass("error").removeClass("hint"):this.$("small.tagline").html("Characters left: "+(this.model.max_limit.tagline-b.length)).addClass("hint").removeClass("error")},e.prototype.addModEnterKeyBinding=function(a){if(a.which===13)return this.$("button.moderator-save").click()},e.prototype.addMod=function(a){var b;return b=$("input#moderator").val(),this.addModContainer(b)&&this.addUserAsMod(b),this.$("input#moderator").val("")},e.prototype.addModContainer=function(a){return this.$(".moderator-container[data-username="+a+"]").length===0?(this.$(".moderators-list").append(c.util.genModContainer({name:$("input#moderator").val(),avatar:"/rest/hackers/"+a+"/avatar",role:"moderator",close:!0})),this.$(".moderators-list remove-moderator[data-username="+a+"]").bind("click",this.removeMod),!0):!1},e.prototype.removeMod=function(a){var b;return b=$(a.currentTarget).attr("data-username"),this.$(".moderator-container[data-username="+b+"]").remove(),this.removeUserAsMod(b)},e.prototype.addUserAsMod=function(a){var b;return b=this,$.ajax({url:this.model.mod_url(a),type:"POST",success:function(c){if(!c.status)return b.$(".moderator-container[data-username="+a+"]").remove()}})},e.prototype.removeUserAsMod=function(a){var b;return b=this,$.ajax({url:this.model.mod_url(a),type:"DELETE",success:function(c){if(!c.status)return b.addModContainer(a)}})},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ContestEditOverviewView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/contest-edit",e.prototype.className="administration-contest-edit",e.prototype.initialize=function(a){return this.action=a.action,this.tab=a.tab,this.contest_id=a.contest_id,this.page=a.page,this.listenTo(this.model,"reset",this.render)},e.prototype.events={"click a.change-tab":"changeTab","click button.save-contest":"saveContest"},e.prototype.render=function(){if(!this.model.sync_status)return this;$(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action,tab:this.tab})),this.action==="create"?this.$("li[data-tab=overview]").addClass("active"):this.$("li[data-tab="+this.tab+"]").addClass("active");if(!this.prev_tab||this.tab!==this.prev_tab)this.prev_tab&&(this.tab_view.destroy(),this._subviews=[],this.$(".tab-body").html("<div class='tabs-body-inner'></div>")),this.tab==="options"?(this.tab_view=new c.Administration_ContestEditOptionsView({model:this.model,parent:this}),this.add_subview(this.tab_view)):this.tab==="challenges"?(this.tab_view=new c.Administration_ContestEditChallengesView({model:this.model,contest_id:this.contest_id,page:this.page,parent:this}),this.add_subview(this.tab_view)):(this.tab_view=new c.Administration_ContestEditOverviewView({model:this.model,action:this.action,parent:this}),this.add_subview(this.tab_view));return this.prev_tab=this.tab,this.tab_view.setElement(this.$(".tabs-body-inner")).render(),this},e.prototype.changeTab=function(a){var b,d;a.preventDefault();if(!$(a.currentTarget).parent().hasClass("active"))return b=$(a.currentTarget).parent().attr("data-tab"),d="/administration/contests/"+this.action,this.contest_id&&(d+="/"+this.contest_id),b&&(d+="/"+b),c.router.navigate(d,!1),this.tab=b,this.render()},e.prototype.saveContest=function(a){var b,d;a.preventDefault();if(!$(a.currentTarget).is(":disabled"))return $(a.currentTarget).html("Saving..."),$(a.currentTarget).attr("disabled","disabled"),this.action==="create"?this.tab_view.validate&&this.tab_view.validate()?(b=new c.Administration_ContestModel(this.tab_view.getData()),b.save(null,{success:function(b){return c.router.navigate("/administration/contests/edit/"+b.get("id"),{trigger:!0,replace:!0}),$(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Contest")}})):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Contest")):this.tab_view?this.tab_view.validate&&this.tab_view.validate()?(d=this,this.model.save(this.tab_view.getData(),{silent:!0,success:function(a){return d.$("button.save-contest").removeAttr("disabled"),d.$("button.save-contest").html("Save Contest")}})):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Contest")):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Contest"))},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ContestEditView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/resource-list",e.prototype.className="administration-resource-list",e.prototype.initialize=function(a){return this.page=a.page,this.resource=a.resource,this.listenTo(this.collection,"reset",this.render)},e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({collection:this.collection,_collection:this.collection.toJSON(),resource:this.resource})),c.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL(),this.collection.getCurrentPage()),this},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ResourceListView=a})}.call(this)