(function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-add-testcase-dialog",a.prototype.className="administration-challenge-edit-add-testcase-dialog",a.prototype.ten_kb=10240,a.prototype.initialize=function(t){return null==t&&(t={}),this.e=t.e,this.parent=t.parent,this.test_case_id=t.test_case_id,this.test_case_index=t.test_case_index,this.el="#"+this.className+"-"+this.cid,i.util.scrollToTop()},a.prototype.render=function(){var t,e,a,r;return $(this.e.currentTarget).removeAttr("disabled"),0===$(this.el).length&&(this.test_case_index?(t=(this.test_case_index/100).toFixed(2).split(".")[1],e="Update Testcase: (input"+t+".txt | output"+t+".txt)"):e="Add Testcase",$("body").append("<div class='on-the-fly-dialog-container'></div> <div class='"+this.className+" on-the-fly-dialog position-absolute' id='"+this.className+"-"+this.cid+"'> <div class='dlg-header'> <p class='pull-left'><b>"+e+"</b></p> <a class='pull-right close-button'>&#215;</a> <div class='clearfix'></div> </div> <div class='dlg-content'> "+i.appController.viewLoader(64)+"</div> </div> </div>"),this.$el=$(this.el)),this.test_case_index&&!this.test_case&&(this.test_case=i.model("administration-test_case"),this.test_case.set("id",this.test_case_id),this.test_case.set("challenge_id",this.model.get("id")),this.listenTo(this.test_case,"sync",this.render),this.test_case.fetch()),(!this.test_case_index||this.test_case.sync_status)&&($(this.el).find(".dlg-content").html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),test_case_index:this.test_case_index})),this.editorOptions={lineNumbers:!0,lineWrapping:!0,mode:"text/plain"},i.appController.loadCodeMirror(function(t){return function(){return t.render_input_editor(),t.render_output_editor()}}(this)),this.test_case&&(void 0!==(a=this.test_case.get("tag"))&&null!==a&&$("input#tag").val(this.test_case.get("tag")),void 0!==(r=this.test_case.get("score"))&&null!==r&&$("input#strength").val(this.test_case.get("score")),this.test_case.get("sample")===!0?$("input#sample").prop("checked",!0):$("input#sample").prop("checked",!1),this.test_case.get("additional")===!0?$("input#additional").prop("checked",!0):$("input#additional").prop("checked",!1)),$("input#strength").val()||$("input#strength").val(10),this.$("p.sample .help-prompt .help-text").css("right","8px"),this.$("p.sample .help-prompt .help-text").css("bottom","16px"),this.$("p.sample .help-prompt .help-text").css("top","initial"),this.$("p.sample .help-prompt .help-text").css("left","initial"),this.delegateEvents()),this},a.prototype.events={"click a.close-button":"closeDialog","click input.change-value-method":"changeValueMethod","click button.save-testcase":"saveTestcase","click button.cancel-update":"closeDialog","click button.update-testcase":"saveTestcase"},a.prototype.render_input_editor=function(t){var e,i;if(null==t&&(t=!0),!this.test_case_index||this.test_case.get("input_size")<=this.ten_kb){if(e=this.$("#input_textarea").get(0),e&&!this.input_editor&&(this.input_editor=CodeMirror.fromTextArea(e,this.editorOptions),this.input_editor.on("beforeChange",this.editorBeforeChange),this.input_editor.on("change",this.editorAfterChange),this.test_case&&this.test_case.get("input_size")<=this.ten_kb))return this.input_editor.setValue(this.test_case.get("input_data"))}else if(e=this.$("#input_textarea").hide(),this.$(".input-testcase-row").append("<div class='gray no-edit'>you can't edit testcases larger than 10 KiB<div>"),this.$(".input-testcase-row").find(".editor_status_bar").remove(),t)return i=this,setTimeout(function(){return i.$("#input_radio-upload").click()},100)},a.prototype.render_output_editor=function(t){var e,i;if(null==t&&(t=!0),!this.test_case_index||this.test_case.get("output_size")<=this.ten_kb){if(e=this.$("#output_textarea").get(0),e&&!this.output_editor&&(this.output_editor=CodeMirror.fromTextArea(e,this.editorOptions),this.output_editor.on("beforeChange",this.editorBeforeChange),this.output_editor.on("change",this.editorAfterChange),this.test_case&&this.test_case.get("output_size")<=this.ten_kb))return this.output_editor.setValue(this.test_case.get("output_data"))}else if(e=this.$("#output_textarea").hide(),this.$(".output-testcase-row").append("<div class='gray no-edit'>you can't edit testcases larger than 10 KiB<div>"),this.$(".output-testcase-row").find(".editor_status_bar").remove(),t)return i=this,setTimeout(function(){return i.$("#output_radio-upload").click()},100)},a.prototype.editorBeforeChange=function(t,e){var i,a,r;return r=10240,i=_.reduce(e.text,function(t,e){return t+e.length},0),a=t.getValue().length,(i+a>2*r||i>r||a>r)&&"+delete"!==e.origin?(e.cancel(),alert("You can't edit a testcase in the editor which is greater than 10 KiB! Please use 'upload' option.")):void 0},a.prototype.editorAfterChange=function(t){var e,i;return i=t.getValue().length,e=i>1023?""+(i/1024).toFixed(3)+" KiB":""+i+" B",this.$("#"+t.display.wrapper.nextElementSibling.id).html(e)},a.prototype.closeDialog=function(t){return t&&t.preventDefault(),$(".on-the-fly-dialog-container").remove(),this.destroy(),$(this.el).remove()},a.prototype.changeValueMethod=function(t){var e,i;if(e=$(t.currentTarget).attr("data-field"),i=$(t.currentTarget).val(),"editor"===i){if(!this.$("#"+e+"_textarea").length>0)return this.$("."+e+"-testcase-row").append("<textarea id='"+e+"_textarea'></textarea><div class='editor_status_bar' id='"+e+"_editor_status_bar'>Size: 0 B</div>"),this["render_"+e+"_editor"](!1),this.$("#"+e+"_testcase_upload_container").remove()}else if("upload"===i&&!this.$("#"+e+"_testcase_upload").length>0)return this.$("."+e+"-testcase-row").append("<div id='"+e+"_testcase_upload_container'><input id='"+e+"_testcase_upload' type='file'/></div>"),this.$("."+e+"-testcase-row").find("#"+e+"_textarea").remove(),this.$("."+e+"-testcase-row").find(".no-edit").remove(),this.$("."+e+"-testcase-row").find(".CodeMirror").unbind().die().remove(),this.$("."+e+"-testcase-row").find(".editor_status_bar").remove()},a.prototype.saveTestcase=function(t){var e,a,r,n,o,s,l,d,c,h,u,p,m,g,v,f,y,w;return t.preventDefault(),"disabled"!==$(t.currentTarget).attr("disabled")?($(t.currentTarget).attr("disabled","disabled"),this.test_case_index?$(t.currentTarget).html("Updating..."):$(t.currentTarget).html("Saving..."),n=[],r={},f=$("input#tag").val(),f&&f.length>18?n.push({message:"Length of tag can't be more than 18 characters long",priority:"high"}):this.test_case_index&&this.test_case.get("tag")===f||(r.tag=f),v=$("input#strength").val(),_.isNaN(parseInt(v))||parseInt(v)<0?n.push({message:"Strength should be a positive integer",priority:"high"}):this.test_case_index&&this.test_case.get("score")===parseInt(v)||(r.strength=parseInt(v)),g=$("input#sample").is(":checked"),this.test_case_index&&this.test_case.get("sample")===g||(r.sample=g),e=$("input#additional").is(":checked"),this.test_case_index&&this.test_case.get("additional")===e||(r.additional=e),this.$("#input_radio-editor").is(":checked")?this.input_editor&&(h=this.input_editor.getValue(),c="editor",this.test_case_index&&this.test_case.get("input_data")===h||(h||n.push({message:"input testcase is empty",priority:"low"}),r.input_value=h,r.input_type=c)):this.$("#input_radio-upload").is(":checked")&&(h=this.$("input#input_testcase_upload").get(0).files[0],c="upload",h||this.test_case_index?h&&(r.input_value=h,r.input_type=c):n.push({message:"file not selected for input testcase",priority:"high"})),this.$("#output_radio-editor").is(":checked")?this.output_editor&&(m=this.output_editor.getValue(),p="editor",this.test_case_index&&this.test_case.get("output_data")===m||(m||n.push({message:"output testcase is empty",priority:"low"}),r.output_value=m,r.output_type=p)):this.$("#output_radio-upload").is(":checked")&&(m=this.$("input#output_testcase_upload").get(0).files[0],p="upload",m||this.test_case_index?m&&(r.output_value=m,r.output_type=p):n.push({message:"file not selected for output testcase",priority:"high"})),n.length>0?(l=_.filter(n,function(t){return"high"===t.priority}),u=_.filter(n,function(t){return"low"===t.priority}),0===l.length&&u.length>0?(o="Following erros happened:\n",_.each(u,function(t){return o+="	• "+t.message+"\n"}),o+="Would you like to continue?",a=confirm(o)):0===l.length&&0===u.length?a=!0:l.length>0&&(a=!1,o="Following errors happened:\n",_.each(n,function(t){return o+="	• "+t.message+"\n"}),alert(o))):a=!0,a?(y=this,this.test_case_index&&0===_.size(r)?($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Updated"),setTimeout(function(){return y.closeDialog()},150),void 0):(this.test_case_index?(d="PUT",w="/"+this.test_case_id):(d="POST",w=""),s=new FormData,_.each(r,function(t,e){return s.append(e,t)}),$.ajax("/rest/administration/challenges/"+this.model.get("id")+"/test_cases"+w,{data:s,type:d,processData:!1,contentType:!1,success:function(e){var a;return $(t.currentTarget).removeAttr("disabled"),e.status?(y.test_case_index?($(t.currentTarget).html("Updated"),a=y.parent.collection.get(e.model.id),a.set(e.model)):($(t.currentTarget).html("Saved"),a=i.model("administration-test_case",e.model),y.parent.collection.add(a)),setTimeout(function(){return y.closeDialog()},300)):(o="Following errors happened:\n",_.each(e.errors,function(t){return o+="	• "+t+"\n"}),alert(o),y.test_case_index?$(t.currentTarget).html("Upload"):$(t.currentTarget).html("Save"))},error:function(e){return $(t.currentTarget).removeAttr("disabled"),y.test_case_index?$(t.currentTarget).html("Upload"):$(t.currentTarget).html("Save"),413===e.status?alert("You exceeded the maximum allowed filesize limit for the zip file. Please either try individual testcase upload or contact hackers@hackerrank.com."):alert("There was a error. Please try again.")}}))):($(t.currentTarget).removeAttr("disabled"),this.test_case_index?$(t.currentTarget).html("Upload"):$(t.currentTarget).html("Save"))):void 0},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditAddTestCaseDialog=t})}).call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-custom-checker",a.prototype.className="administration-challenge-edit-custom-checker",a.prototype.initialize=function(t){return null==t&&(t={}),this.listenTo(this.model,"reset",this.render)},a.prototype.events={"codeshellsubmit #codeeditor":"saveCustomLangCode"},a.prototype.render=function(){var t;return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this.$("input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"20%"}),t=this,this.$("input[type=checkbox]").on("ifChecked",function(e){var i;return i=$(e.currentTarget).attr("id"),t.saveIt(i,!0)}),this.$("input[type=checkbox]").on("ifUnchecked",function(e){var i;return i=$(e.currentTarget).attr("id"),t.saveIt(i,!1)}),i.appController.loadCodeMirror(function(t){return function(){return t.$("#codeeditor").codeshell({showCustomInput:!1,showCompileTest:!1,showSubmit:!0,submit_button_text:"Save",showUploadCode:!1,showFullScreen:!1,showTheme:!0})}}(this)),_.isString(this.model.get("checker_program"))&&_.isString(this.model.get("custom_language"))?i.appController.loadCodeMirror(function(t){return function(){return t.$("#codeeditor").codeshell("setValue",{code:t.model.get("checker_program"),language:t.model.get("custom_language")})}}(this)):i.appController.loadCodeMirror(function(t){return function(){return t.$("#codeeditor").codeshell("setValue",{code:"",language:"python"})}}(this))},a.prototype.saveCustomLangCode=function(t,e){var i;return i=$(t.currentTarget).find("button.bb-submit"),"disabled"!==i.attr("disabled")?(i.attr("disabled","disabled"),this.model.set("checker_program",e.code),this.model.set("custom_language",e.language),i.html("Saving..."),this.model.save(null,{silent:!0,success:function(t,e){return i.removeAttr("disabled"),e.status?(i.html("Saved"),setTimeout(function(){return i.html("Save")},2e3)):(i.html("Save"),alert("Error Occured"))}})):void 0},a.prototype.saveIt=function(t,e){var i;return i=this,this.model.set(t,e),this.$("div.state."+t).html("saving...").show(),this.model.save(null,{success:function(e,a){return a.status?(i.$("div.state."+t).html("saved").show(),setTimeout(function(){return i.$("div.state."+t).html("").hide()},2e3)):i.$("div.state."+t).html("error occured").show()}})},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditCustomCheckerView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-editorial",a.prototype.className="administration-challenge-edit-editorial",a.prototype.initialize=function(t){return this.parent=t.parent,this.listenTo(this.model,"reset",this.render),this.saveChallenge=function(t){return function(){return t.data_rendered&&t.changed()?t.parent.$("button.save-challenge").click():void 0}}(this),this.throttledSave=_.throttle(this.saveChallenge,1e3)},a.prototype.events={"focusout input.auto-save":"autoSave"},a.prototype.render=function(){return i.requires(["MathJax/MathJax","sanitize"],function(t){return function(){var e;return $(t.el).html(i.appController.template(t.template,t)({model:t.model,_model:t.model.toJSON(),action:t.action})),e=t,i.appController.loadCodeMirrorMode("markdown",function(){return t.applyCodeMirror()})}}(this)),this},a.prototype.applyCodeMirror=function(){var t,e;return t={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,autoCloseBrackets:!0,cursorScrollMargin:2,mode:"text/x-markdown",indentUnit:4,tabSize:4,lineWrapping:!0},e=this,this.$("textarea.approach").get(0)&&!this.approach_editor&&(this.approach_editor=CodeMirror.fromTextArea(this.$("textarea.approach").get(0),t),this.approach_editor.on("change",this.throttledSave),this.approach_editor.on("change",function(t){return function(){return e.updatePreview(t.approach_editor,".preview-wrap-approach","#approach-preview")}}(this))),this.$("textarea.setter_code").get(0)&&!this.setter_code_editor&&(this.setter_code_editor=CodeMirror.fromTextArea(this.$("textarea.setter_code").get(0),t),this.setter_code_editor.on("change",this.throttledSave),this.setter_code_editor.on("change",function(t){return function(){return e.updatePreview(t.setter_code_editor,".preview-wrap-setter_code","#setter_code-preview")}}(this))),this.$("textarea.tester_code").get(0)&&!this.tester_code_editor&&(this.tester_code_editor=CodeMirror.fromTextArea(this.$("textarea.tester_code").get(0),t),this.tester_code_editor.on("change",this.throttledSave),this.tester_code_editor.on("change",function(t){return function(){return e.updatePreview(t.tester_code_editor,".preview-wrap-tester_code","#tester_code-preview")}}(this))),this.setData(this.model.toJSON())},a.prototype.setData=function(t){var e;return e=t.editorial._data,e&&(e.difficulty&&this.$("input#difficulty").val(e.difficulty),e.required_knowledge&&this.$("input#required_knowledge").val(e.required_knowledge),e.time_complexity&&this.$("input#time_complexity").val(e.time_complexity),e.editorialist&&this.$("input#editorialist").val(e.editorialist),e.setter_name&&this.$("input#setter_name").val(e.setter_name),e.tester_name&&this.$("input#tester_name").val(e.tester_name),e.approach_markdown&&this.approach_editor&&this.approach_editor.setValue(e.approach_markdown),e.setter_code_markdown&&this.setter_code_editor&&this.setter_code_editor.setValue(e.setter_code_markdown),e.tester_code_markdown&&this.tester_code_editor&&this.tester_code_editor.setValue(e.tester_code_markdown)),this.checkRenderedData()},a.prototype.checkRenderedData=function(){return this.rendered()&&!this.changed()?this.data_rendered=!0:void 0},a.prototype.rendered=function(){return this.$("textarea.approach").length>0&&this.$("textarea.setter_code").length>0&&this.$("textarea.tester_code").length>0&&this.approach_editor&&this.setter_code_editor&&this.tester_code_editor?!0:!1},a.prototype.changed=function(){var t;return t=this.model.get("editorial")._data,t?t.difficulty!==this.$("input#difficulty").val()?!0:t.required_knowledge!==this.$("input#required_knowledge").val()?!0:t.time_complexity!==this.$("input#time_complexity").val()?!0:t.approach_markdown!==this.approach_editor.getValue()?!0:t.setter_code_markdown!==this.setter_code_editor.getValue()?!0:t.tester_code_markdown!==this.tester_code_editor.getValue()?!0:!1:!1},a.prototype.validate=function(){return!0},a.prototype.getData=function(){var t;return t={},t.approach=this.approach_editor?this.approach_editor.getValue():null,t.setter_code=this.setter_code_editor?this.setter_code_editor.getValue():null,t.tester_code=this.tester_code_editor?this.tester_code_editor.getValue():null,t.difficulty=this.$("input#difficulty").val(),t.required_knowledge=this.$("input#required_knowledge").val(),t.time_complexity=this.$("input#time_complexity").val(),t.editorialist=this.$("input#editorialist").val(),t.setter_name=this.$("input#setter_name").val(),t.tester_name=this.$("input#tester_name").val(),t.setter_code_markdown=t.setter_code,t.tester_code_markdown=t.tester_code,t.approach_markdown=t.approach,t},a.prototype.autoSave=function(){return this.saveChallenge()},a.prototype.updatePreview=function(t,e,a){return i.requires(["MathJax/MathJax","sanitize"],function(i){return function(){var r;return r=HackDown.processData(t.getValue()),""===r?i.$(e).hide():i.$(e).show(),i.$(a).html(r)}}(this))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditEditorialView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-flags",a.prototype.className="administration-challenge-edit-flags",a.prototype.initialize=function(t){return null==t&&(t={}),this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"sync",this.render)},a.prototype.render=function(){var t;return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this.$("input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"20%"}),t=this,this.$("input[type=checkbox]").on("ifChecked",function(e){var i;return i=$(e.currentTarget).attr("id"),t.saveIt(i,!0)}),this.$("input[type=checkbox]").on("ifUnchecked",function(e){var i;return i=$(e.currentTarget).attr("id"),t.saveIt(i,!1)}),this.$("#solved_score").val(this.model.get("solved_score"))},a.prototype.validate=function(){return!0},a.prototype.getData=function(){return{solved_score:this.$("#solved_score").val()}},a.prototype.saveIt=function(t,e){var i;return i=this,this.model.set(t,e),this.$("div.state."+t).html("saving...").show(),this.model.save(null,{success:function(e,a){return a.status?(i.$("div.state."+t).html("saved").show(),setTimeout(function(){return i.$("div.state."+t).html("").hide()},2e3)):i.$("div.state."+t).html("error occured").show()}})},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditFlagsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-testcases",a.prototype.className="administration-challenge-edit-testcases",a.prototype.initialize=function(t){return null==t&&(t={}),this.collection=i.collection("administration-test_cases"),this.collection.challenge_id=this.model.get("id"),this.collection.cached(),this.listenTo(this.model,"reset",this.render),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"destroy",this.render),this.listenTo(this.collection,"sync",this.render)},a.prototype.events={"click button.add-testcase":"showAddTestCaseDialog","click a.remove-test-case":"deleteTestCase","click button.upload-zip":"uploadAsZip","click a.edit-test-case":"editTestCase"},a.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),collection:this.collection,_collection:this.collection.toJSON()})),this},a.prototype.showAddTestCaseDialog=function(t){return t.preventDefault(),"disabled"!==$(t.currentTarget).attr("disabled")?($(t.currentTarget).attr("disabled","disabled"),this.add_testcase_dialog&&($(".on-the-fly-dialog-container").remove(),this.add_testcase_dialog.destroy(),$(this.add_testcase_dialog.el).remove()),this.add_testcase_dialog=new i.Administration_ChallengeEditAddTestCaseDialog({model:this.model,parent:this,e:t}),this.add_testcase_dialog.render()):void 0},a.prototype.editTestCase=function(t){var e,a;return t.preventDefault(),"disabled"!==$(t.currentTarget).attr("disabled")?($(t.currentTarget).attr("disabled","disabled"),e=$(t.currentTarget).attr("data-id"),a=$(t.currentTarget).attr("data-index"),this.edit_testcase_dialogs||(this.edit_testcase_dialogs={}),this.edit_testcase_dialogs[e]&&($(".on-the-fly-dialog-container").remove(),this.edit_testcase_dialogs[e].destroy(),$(this.edit_testcase_dialogs[e].el).remove()),this.edit_testcase_dialogs[e]=new i.Administration_ChallengeEditAddTestCaseDialog({model:this.model,test_case_id:e,test_case_index:a,parent:this,e:t}),this.edit_testcase_dialogs[e].render()):void 0},a.prototype.deleteTestCase=function(t){var e,a,r;return t.preventDefault(),"disabled"!==$(t.currentTarget).attr("disabled")?($(t.currentTarget).attr("disabled","disabled"),a=$(t.currentTarget).attr("data-id"),e=this.collection.get(a),r=$(t.currentTarget).attr("data-index"),this.delete_testcase_dialogs||(this.delete_testcase_dialogs={}),this.delete_testcase_dialogs[a]&&($(".on-the-fly-dialog-container").remove(),this.delete_testcase_dialogs[a].destroy(),$(this.delete_testcase_dialogs[a].el).remove()),this.delete_testcase_dialogs[a]=new i.Administration_ChallengeEditRemoveTestCaseDialog({model:this.model,test_case:e,test_case_index:r,parent:this,e:t}),this.delete_testcase_dialogs[a].render()):void 0},a.prototype.uploadAsZip=function(t){return t.preventDefault(),"disabled"!==$(t.currentTarget).attr("disabled")?($(t.currentTarget).attr("disabled","disabled"),this.upload_zip_dialog&&($(".on-the-fly-dialog-container").remove(),this.upload_zip_dialog.destroy(),$(this.upload_zip_dialog.el).remove()),this.upload_zip_dialog=new i.Administration_ChallengeEditUploadZipDialog({model:this.model,collection:this.collection,parent:this,e:t}),this.upload_zip_dialog.render()):void 0},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditTestcasesView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-languages-list-dropdown",a.prototype.className="administration-challenge-edit-languages-list-dropdown",a.prototype.initialize=function(t){return null==t&&(t={}),this.parent=t.parent,this.language_key=t.language_key,this.language_data=t.language_data,this.time_final_value=this.model.get_checker_limit("time",this.language_key)||this.language_data.def_time,this.mem_final_value=this.model.get_checker_limit("mem",this.language_key)||this.language_data.def_mem},a.prototype.render=function(){var t;return $(this.el).html(i.appController.template(this.template,this)({language_key:this.language_key,language_data:this.language_data,time_period:this.language_data.max_time-this.language_data.min_time+1,mem_period:this.language_data.max_mem-this.language_data.min_mem+1})),t=this,this.$(".timelimit-slider").slider({min:this.language_data.min_time,max:this.language_data.max_time,value:this.time_final_value,slide:function(e,i){return t.parent.$("span.time-value").html(i.value)},change:function(e,i){return t.time_final_value=i.value}}),this.$(".memlimit-slider").slider({min:this.language_data.min_mem,max:this.language_data.max_mem,value:this.mem_final_value,slide:function(e,i){return t.parent.$("span.mem-value").html(i.value)},change:function(e,i){return t.mem_final_value=i.value}}),this.editorOptions={lineNumbers:!1,lineWrapping:!0,mode:lang_mime_mapping[this.language_key]||"text/plain"},i.appController.loadCodeMirrorMode(this.language_key,function(e){return function(){var i,a,r;return a=e.$("textarea.template_head").get(0),a&&!e.thead_editor&&(e.thead_editor=CodeMirror.fromTextArea(a,e.editorOptions),e.thead_editor.setValue(e.model.get(""+e.language_key+"_template_head")||lang_default_text[e.language_key]||""),e.thead_editor.focus()),i=e.$("textarea.template_body").get(0),i&&!e.tbody_editor&&(e.tbody_editor=CodeMirror.fromTextArea(i,e.editorOptions),e.tbody_editor.setValue(e.model.get(""+e.language_key+"_template")||e.model.get(""+e.language_key+"_template_body")||"")),r=e.$("textarea.template_tail").get(0),r&&!e.ttail_editor&&(e.ttail_editor=CodeMirror.fromTextArea(r,e.editorOptions),e.ttail_editor.setValue(e.model.get(""+e.language_key+"_template_tail")||"")),t=e,setTimeout(function(){return t.thead_editor.refresh(),t.tbody_editor.refresh(),t.ttail_editor.refresh()},300)}}(this)),this},a.prototype.getFinalValues=function(){var t,e,i,a;return i=this.getData(),a={},_.each(i,function(t,e){return null!==t&&void 0!==t?a[e]=t:void 0}),t={},void 0!==a.time_limit&&a.time_limit!==this.model.get_checker_limit("time",this.language_key)&&(a.time_limit===this.language_data.def_time?this.model.get_checker_limit("time",this.language_key)&&(t.time_limit=a.time_limit):t.time_limit=a.time_limit),void 0!==a.mem_limit&&a.mem_limit!==this.model.get_checker_limit("mem",this.language_key)&&(a.mem_limit===this.language_data.def_mem?this.model.get_checker_limit("mem",this.language_key)&&(t.mem_limit=a.mem_limit):t.mem_limit=a.mem_limit),void 0!==a.template_head&&(lang_default_text[this.language_key]===a.template_head?this.model.get(""+this.language_key+"_template_head")&&(t.template_head=null):""===a.template_head?this.model.get(""+this.language_key+"_template_head")&&(t.template_head=a.template_head):a.template_head!==this.model.get(""+this.language_key+"_template_head")&&(t.template_head=a.template_head)),void 0!==a.template_body&&(e=this.model.get(""+this.language_key+"_template")||this.model.get(""+this.language_key+"_template_body"),a.template_body!==e&&(""===a.template_body?e&&(t.template_body=a.template_body):t.template_body=a.template_body)),void 0!==a.template_tail&&a.template_tail!==this.model.get(""+this.language_key+"_template_tail")&&(""===a.template_tail?this.model.get(""+this.language_key+"_template_tail")&&(t.template_tail=a.template_tail):t.template_tail=a.template_tail),t},a.prototype.getData=function(){return{time_limit:this.time_final_value,mem_limit:this.mem_final_value,template_head:this.thead_editor?this.thead_editor.getValue():null,template_body:this.tbody_editor?this.tbody_editor.getValue():null,template_tail:this.ttail_editor?this.ttail_editor.getValue():null}},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditLanguagesListDropdownView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-languages-list",a.prototype.className="administration-challenge-edit-languages-list",a.prototype.initialize=function(t){return null==t&&(t={}),this.language_key=t.language_key,this.language_data=t.language_data},a.prototype.events={"click .edit-lang":"openIt","click .cancel":"closeIt","click .save-lang":"saveIt"},a.prototype.render=function(){var t;return $(this.el).html(i.appController.template(this.template,this)({language_data:this.language_data,model:this.model,language_key:this.language_key,has_languages:_.indexOf(this.model.get("languages"),this.language_key)>-1})),this.$("input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"20%"}),t=this,this.$("input[type=checkbox]").on("ifChecked",function(){return t.model.toggleLanguage({language_key:t.language_key,state:"enable"})}),this.$("input[type=checkbox]").on("ifUnchecked",function(){return t.model.toggleLanguage({language_key:t.language_key,state:"disable"})}),this.delegateEvents(),this},a.prototype.openDropdown=function(){return this.closeDropdown(),this.$(".language-card-dropdown").html("<div class='language-card-dropdown-inner'></div>"),this.dropdown_view=new i.Administration_ChallengeEditLanguagesListDropdownView({language_key:this.language_key,language_data:this.language_data,parent:this,model:this.model}),this.dropdown_view.setElement(this.$(".language-card-dropdown-inner")).render()},a.prototype.closeDropdown=function(){return this.dropdown_view?this.dropdown_view.unbind().remove():void 0},a.prototype.openIt=function(t){return $(t.currentTarget).removeClass("edit-lang").addClass("save-lang"),$(t.currentTarget).find("i").removeClass("icon-pencil").addClass("icon-floppy"),this.$(".language-card .cancel").removeClass("hide"),this.$(".language-card").addClass("language-card-expand"),this.openDropdown()},a.prototype.closeIt=function(){return this.$(".save-lang").removeClass("save-lang").addClass("edit-lang"),this.$(".edit-lang").find("i").removeClass("icon-floppy").addClass("icon-pencil"),this.$(".language-card .cancel").addClass("hide"),this.$(".language-card span.time-value").html(this.model.get_checker_limit("time",this.language_key)||this.language_data.def_time),this.$(".language-card span.mem-value").html(this.model.get_checker_limit("mem",this.language_key)||this.language_data.def_mem),this.$(".language-card").removeClass("language-card-expand"),this.closeDropdown()},a.prototype.saveIt=function(t){var e;return this.$(t.currentTarget).removeClass("save-lang").addClass("edit-lang"),this.$(t.currentTarget).find("i").removeClass("icon-floppy").addClass("icon-pencil"),this.$(".language-card .cancel").addClass("hide"),this.$(".language-card").removeClass("language-card-expand"),e=this.dropdown_view.getFinalValues(),_.size(e)>0&&(this.model.update_language_data(e,this.language_key),e.challenge_id=this.model.get("id"),e.language_key=this.language_key,new i.Administration_ChallengeLanguageModel(e).save()),this.closeDropdown()},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditLanguagesListView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-languages",a.prototype.className="administration-challenge-edit-languages",a.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this.renderLanguages(),this
},a.prototype.renderLanguages=function(){return this.$(".language-cards-list-container").length>0&&!this.$(".language-cards-list-container").html()?(this._subviews&&0!==this._subviews.length||_.each(codechecker_resource_limits,function(t,e){var a;return a=new i.Administration_ChallengeEditLanguagesListView({language_key:e,language_data:t,parent:this,model:this.model}),this.add_subview(a)},this),_.each(this._subviews,function(t){return this.$(".language-cards-list-container").append(t.render().el)},this)):void 0},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditLanguagesView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-overview",a.prototype.className="administration-challenge-edit-overview",a.prototype.initialize=function(t){return this.action=t.action,this.parent=t.parent,this.listenTo(this.model,"reset",this.render),this.saveChallenge=function(t){return function(){return t.data_rendered&&t.changed()?t.parent.$("button.save-challenge").click():void 0}}(this),this.throttledSave=_.throttle(this.saveChallenge,1e3)},a.prototype.events={"focusout input.auto-save":"autoSave","focusout textarea.auto-save":"autoSave","click a.edit-slug":"editSlug","click a.cancel-update-slug":"cancelUpdateSlug","click a.update-slug":"updateSlug","keypress input.edit-slug":"editSlugEnterKeyBinding","keyup textarea.description":"updateDescriptionMessage","keypress input#moderator":"addModEnterKeyBinding","click button.moderator-save":"addMod","click a.remove-moderator":"removeMod","change input#translation_language":"changeLanguage","change input#challenge_difficulty":"changeDifficulty"},a.prototype.render=function(){var t;return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action})),this.setupTranslationLanguageSelect(),this.setupChallengeDifficulty(),t=this,this.$("input.tags").length>0&&this.$("input.tags").tagsInput({width:"98%",autocomplete_url:"/rest/tags/autocomplete?f=autocomplete",onChange:function(){return t.autoSave()}}),"create"!==this.action&&this.$("#moderator").length>0&&(t=this,this.$("#moderator").autocomplete({minLength:2,source:function(t,e){return $.ajax({url:"/rest/hackers/autocomplete?limit=4",data:{q:t.term},success:function(t){return e(t)}})},select:function(e,i){return t.$("input#moderator").val(i.item.value),t.$("button.moderator-save").click(),setTimeout(function(){return t.$("input#moderator").val("")},100)}}).data("autocomplete")._renderItem=function(t,e){return $("<li></li>").data("item.autocomplete",e).append($("<a></a>").append($("<div class='hacker-container'> <div class='hacker-avatar'> <img height='50' width='50' onerror=\"this.src='https://d3rpyts3de3lx8.cloudfront.net/hackerrank/assets/gravatar.jpg';\" class='pull-left avatar profile_avatar' src='/rest/hackers/"+i.util.trim(e.value)+"/avatar'> </div> <div class='hacker-details'> <p class='hacker-username'>"+e.value+"</p> </div> </div>"))).appendTo(t)}),i.appController.loadCodeMirrorMode("markdown",function(t){return function(){return t.applyCodeMirror()}}(this)),this},a.prototype.applyCodeMirror=function(){var t,e;return t={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,autoCloseBrackets:!0,cursorScrollMargin:2,mode:"text/x-markdown",indentUnit:4,tabSize:4,lineWrapping:!0},e=this,this.$("textarea.problem-statement").get(0)&&!this.problem_statement_editor&&(this.problem_statement_editor=CodeMirror.fromTextArea(this.$("textarea.problem-statement").get(0),t),this.updatePreview(),this.problem_statement_editor.on("change",this.throttledSave),this.problem_statement_editor.on("change",function(){return e.updatePreview()})),this.setData(this.model.toJSON())},a.prototype.setData=function(t){var e,i,a;if("create"!==this.action)return e=$("input#translation_language").val(),"English"!==e?(a=_.select(this.model.get("available_translations"),function(t){return t.language===e}),i=1===a.length?a[0]:{}):i=_.clone(t),i.name?this.$("input#name").val(i.name):this.$("input#name").val(""),i.preview?(this.$("textarea.description").val(i.preview),i.preview.length>this.model.max_limit.description?this.$("small.description").html("Characters left: -"+(i.preview.length-this.model.max_limit.description)).addClass("error").removeClass("hint"):this.$("small.description").html("Characters left: "+(this.model.max_limit.description-i.preview.length)).addClass("hint").removeClass("error")):(this.$("textarea.description").val(""),this.$("small.description").html("Characters left: "+this.model.max_limit.description).addClass("hint").removeClass("error")),i.body&&this.problem_statement_editor?this.problem_statement_editor.setValue(i.body):this.problem_statement_editor.setValue(""),t.tags&&t.tags.length>0&&this.$("input.tags").silentImportTags(t.tags.join()),this.checkRenderedData()},a.prototype.checkRenderedData=function(){return this.rendered()&&!this.changed()?this.data_rendered=!0:void 0},a.prototype.rendered=function(){return this.$("input#name").length>0&&this.$("textarea.description").length>0&&this.problem_statement_editor?!0:!1},a.prototype.changed=function(){var t,e,i;if(t=$("input#translation_language").val(),"English"!==t){if(i=_.select(this.model.get("available_translations"),function(e){return e.language===t}),1===i.length){if(e=i[0],e.name!==this.$("input#name").val())return!0;if(e.preview!==this.$("textarea.description").val())return!0;if(e.body!==this.problem_statement_editor.getValue())return!0}}else{if(this.model.get("name")!==this.$("input#name").val())return!0;if(this.model.get("preview")!==this.$("textarea.description").val())return!0;if(this.model.get("body")!==this.problem_statement_editor.getValue())return!0}return _.difference(this.model.getTags(),this.getTags()).length>0||_.difference(this.getTags(),this.model.getTags()).length>0?!0:this.model.get("difficulty")!==this.getDifficulty()&&this.difficultyChanged?!0:!1},a.prototype.validate=function(){return this.$(".error").html("").hide(),""!==this.$("input#name").val()&&this.$("textarea.description").val().length<=this.model.max_limit.description&&this.problem_statement_editor.getValue().length>0?!0:(""===this.$("input#name").val()&&this.$(".error.name").html(i.util.getErrorList(["Challenge name can't be empty"])).show(),0===this.problem_statement_editor.getValue().length&&this.$(".error.problem-statement").html(i.util.getErrorList(["Problem statement can't be empty"])).show(),!1)},a.prototype.getData=function(){var t;return t={},t.translation_language=this.$("input#translation_language").val(),t.name=this.$("input#name").val(),t.preview=this.$("textarea.description").val(),""===t.preview&&(t.preview=null),t.body=this.problem_statement_editor?this.problem_statement_editor.getValue():null,t.tags=this.getTags(),""===t.body&&(t.body=null),t.difficulty=this.getDifficulty(),t},a.prototype.getTags=function(){return _.reject(_.uniq((this.$("input.tags").val()||"").split(",")),function(t){return""===t})},a.prototype.getDifficulty=function(){return this.difficultyChanged?this.difficulty_data[this.$("#challenge_difficulty").val()||2].value:this.model.get("difficulty")},a.prototype.autoSave=function(){return"create"!==this.action?this.saveChallenge():void 0},a.prototype.editSlug=function(t){return t.preventDefault(),$(t.currentTarget).hide(),this.$("p.slug").hide(),this.$("a.update-slug").show(),this.$("a.cancel-update-slug").show(),this.$("input.edit-slug").show().focus().val(this.$("input.edit-slug").val())},a.prototype.cancelUpdateSlug=function(t){return t.preventDefault(),$(t.currentTarget).hide(),this.$("p.slug").show(),this.$("a.update-slug").hide(),this.$("input.edit-slug").hide(),this.$("a.edit-slug").show()},a.prototype.updateSlug=function(t){var e;return t.preventDefault(),this.$(".slug.error").html("").hide(),e=this.$("input.edit-slug").val(),e!==this.model.get("slug")?_.isEmpty(e)?this.$(".slug.error").html("slug can't be empty").show():(this.model.set("slug",e),this.model.save(null,{silent:!0,success:function(t){return t.status?(this.$("p.slug").html(e),this.$("a.cancel-update-slug").click()):void 0}})):this.$("a.cancel-update-slug").click()},a.prototype.editSlugEnterKeyBinding=function(t){return 13===t.which?this.$("a.update-slug").click():void 0},a.prototype.updateDescriptionMessage=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget).val(),e.length>this.model.max_limit.description?this.$("small.description").html("Characters left: -"+(e.length-this.model.max_limit.description)).addClass("error").removeClass("hint"):this.$("small.description").html("Characters left: "+(this.model.max_limit.description-e.length)).addClass("hint").removeClass("error")},a.prototype.addModEnterKeyBinding=function(t){return 13===t.which?this.$("button.moderator-save").click():void 0},a.prototype.addMod=function(){var t;return t=$("input#moderator").val(),this.addModContainer(t)&&this.addUserAsMod(t),this.$("input#moderator").val("")},a.prototype.addModContainer=function(t){return 0===this.$(".moderator-container[data-username="+t+"]").length?(this.$(".moderators-list").append(i.util.genModContainer({name:$("input#moderator").val(),avatar:"/rest/hackers/"+t+"/avatar",role:"moderator",close:!0})),this.$(".moderators-list remove-moderator[data-username="+t+"]").bind("click",this.removeMod),!0):!1},a.prototype.removeMod=function(t){var e;return e=$(t.currentTarget).attr("data-username"),this.$(".moderator-container[data-username="+e+"]").remove(),this.removeUserAsMod(e)},a.prototype.addUserAsMod=function(t){var e;return e=this,$.ajax({url:this.model.mod_url(t),type:"POST",success:function(i){return i.status?void 0:e.$(".moderator-container[data-username="+t+"]").remove()}})},a.prototype.removeUserAsMod=function(t){var e;return e=this,$.ajax({url:this.model.mod_url(t),type:"DELETE",success:function(i){return i.status?void 0:e.addModContainer(t)}})},a.prototype.updatePreview=function(){return i.requires(["MathJax/MathJax","sanitize"],function(t){return function(){var e;return e=HackDown.processData(t.problem_statement_editor.getValue()),""===e?t.$(".preview-wrap").hide():t.$(".preview-wrap").show(),t.$("#problem-statement-preview").html(e)}}(this))},a.prototype.setupTranslationLanguageSelect=function(){var t,e;return e=i.TRANSLATION_LANGUAGES,t=[],_.each(e,function(e){return function(i,a){return t.push({id:a,text:a}),$(e.el).find("#translation_language").select2({data:t,width:"copy"}),e.setLocalLanguage(e.model.get("local_language")||"English")}}(this))},a.prototype.setLocalLanguage=function(t){return $(this.el).find("#translation_language").val(t),$(this.el).find("#s2id_translation_language .select2-choice span").text(t)},a.prototype.changeLanguage=function(){return this.setData(this.model.toJSON())},a.prototype.changeDifficulty=function(){return this.difficultyChanged=!0},a.prototype.setupChallengeDifficulty=function(){var t,e,i,a;for(this.difficulty_data=[{id:0,value:.9,min:.8,text:"Easy"},{id:1,value:.7,min:.6,text:"Moderate"},{id:2,value:.5,min:.4,text:"Difficult"},{id:3,value:.3,min:.2,text:"Advanced"},{id:4,value:.1,min:0,text:"Expert"}],t=this.model.get("difficulty"),e=4,i=a=0;4>=a;i=++a)if(t>=this.difficulty_data[i].min){e=i;break}return $("#challenge_difficulty").select2({minimumResultsForSearch:-1,data:this.difficulty_data}).select2("val",""+e)},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditOverviewView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-delete-testcase-dialog",a.prototype.className="administration-challenge-edit-delete-testcase-dialog",a.prototype.initialize=function(t){return null==t&&(t={}),this.e=t.e,this.parent=t.parent,this.test_case=t.test_case,this.test_case_index=t.test_case_index,this.el="#"+this.className+"-"+this.cid},a.prototype.render=function(){return $(this.e.currentTarget).removeAttr("disabled"),0===$(this.el).length&&($("body").append("<div class='on-the-fly-dialog-container'></div> <div class='"+this.className+" on-the-fly-dialog position-fixed' id='"+this.className+"-"+this.cid+"'> <div class='dlg-header'> <p class='pull-left'><b>Remove Testcase</b></p> <a class='pull-right close-button'><b>&#215;</b></a> <div class='clearfix'></div> </div> <div class='dlg-content'> "+i.appController.viewLoader(64)+"</div> </div> </div>"),this.$el=$(this.el)),$(this.el).find(".dlg-content").html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),test_case:this.test_case,_test_case:this.test_case.toJSON(),test_case_index:this.test_case_index})),this.delegateEvents()},a.prototype.events={"click a.close-button":"closeDialog","click button.dont-delete":"closeDialog","click .delete-testcase":"deleteTestcase"},a.prototype.closeDialog=function(){return $(".on-the-fly-dialog-container").remove(),this.destroy(),$(this.el).remove()},a.prototype.deleteTestcase=function(t){var e;return t.preventDefault(),"disabled"!==$(t.currentTarget).attr("disabled")?($(t.currentTarget).attr("disabled","disabled"),$(t.currentTarget).html("Deleting"),this.$("span.nb-spacing").remove(),this.$("button.dont-delete").remove(),this.$("a.close-button").remove(),e=this,this.test_case.destroy({success:function(){return e.parent.collection.remove(this.test_case),e.closeDialog()}})):void 0},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditRemoveTestCaseDialog=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit-upload-zip-dialog",a.prototype.className="administration-challenge-edit-upload-zip-dialog",a.prototype.initialize=function(t){return null==t&&(t={}),this.e=t.e,this.parent=t.parent,this.el="#"+this.className+"-"+this.cid},a.prototype.render=function(){return $(this.e.currentTarget).removeAttr("disabled"),0===$(this.el).length&&($("body").append("<div class='on-the-fly-dialog-container'></div> <div class='"+this.className+" on-the-fly-dialog position-fixed' id='"+this.className+"-"+this.cid+"'> <div class='dlg-header'> <p class='pull-left'><b>Upload Zip</b></p> <a class='pull-right close-button'><b>&#215;</b></a> <div class='clearfix'></div> </div> <div class='dlg-content'> "+i.appController.viewLoader(64)+"</div> </div> </div>"),this.$el=$(this.el)),$(this.el).find(".dlg-content").html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),collection:this.collection,_collection:this.collection.toJSON()})),this.delegateEvents()},a.prototype.events={"click a.close-button":"closeDialog","click button.dont-delete":"closeDialog","click button.continue-delete-and-upload":"showUploadZipForm","click button.upload-zip-button":"uploadZip"},a.prototype.closeDialog=function(){return $(".on-the-fly-dialog-container").remove(),this.destroy(),$(this.el).remove()},a.prototype.showUploadZipForm=function(){var t;return t=this,this.$(".warning-dialog").fadeOut(300,function(){return t.$(".upload-zip-form").show()})},a.prototype.uploadZip=function(t){var e,i,a,r;return i=this,a=$("input.upload-zip").get(0).files[0],!a||"application/zip"!==(r=a.type)&&"application/x-zip"!==r&&"application/octet-stream"!==r&&"application/x-zip-compressed"!==r?a?alert("Invalid file type. Please select a zip file to upload."):alert("Please select a zip file to upload."):(e=new FormData,e.append("zip_file",a),$(t.currentTarget).attr("disabled","disabled"),$(t.currentTarget).html("Uploading..."),$.ajax("/rest/administration/challenges/"+this.model.get("id")+"/test_cases/upload_zip",{data:e,type:"POST",processData:!1,contentType:!1,success:function(e){return $(t.currentTarget).removeAttr("disabled"),e.status?(i.parent.collection.reset(e.models),$(t.currentTarget).html("Uploaded"),setTimeout(function(){return i.closeDialog()},300)):(alert(e.errors[0]),$(t.currentTarget).html("Upload"))},error:function(e){return $(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Upload"),413===e.status?alert("You exceeded the maximum allowed filesize limit for the zip file. Please either try individual testcase upload or contact hackers@hackerrank.com."):alert("There was a error. Please try again.")}}))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditUploadZipDialog=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/challenge-edit",a.prototype.className="administration-challenge-edit",a.prototype.initialize=function(t){return this.action=t.action,this.tab=t.tab,this.challenge_id=t.challenge_id,this.contest_id=t.contest_id,this.contest=i.model("contest",{id:t.contest_id}),this.contest.cached(),this.listenTo(this.model,"reset",this.render)},a.prototype.events={"click a.change-tab":"changeTab","click button.save-challenge":"saveChallenge"},a.prototype.render=function(){return"create"===this.action||this.model.sync_status?($(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action,tab:this.tab,contest_id:this.contest_id,contest:this.contest.toJSON()})),"create"===this.action?this.$("li[data-tab=overview]").addClass("active"):this.$("li[data-tab="+this.tab+"]").addClass("active"),this.prev_tab&&this.tab===this.prev_tab||(this.prev_tab&&(this.tab_view.destroy(),this._subviews=[],this.$(".tab-body").html("<div class='tabs-body-inner'></div>")),"languages"===this.tab?(this.tab_view=new i.Administration_ChallengeEditLanguagesView({model:this.model}),this.add_subview(this.tab_view)):"custom-checker"===this.tab?(this.tab_view=new i.Administration_ChallengeEditCustomCheckerView({model:this.model}),this.add_subview(this.tab_view)):"flags"===this.tab?(this.tab_view=new i.Administration_ChallengeEditFlagsView({model:this.model}),this.add_subview(this.tab_view)):"testcases"===this.tab?(this.tab_view=new i.Administration_ChallengeEditTestcasesView({model:this.model}),this.add_subview(this.tab_view)):"editorial"===this.tab?(this.tab_view=new i.Administration_ChallengeEditEditorialView({model:this.model,action:this.action,parent:this}),this.add_subview(this.tab_view)):(this.tab_view=new i.Administration_ChallengeEditOverviewView({model:this.model,action:this.action,parent:this}),this.add_subview(this.tab_view))),this.prev_tab=this.tab,this.tab_view.setElement(this.$(".tabs-body-inner")).render(),this):this},a.prototype.changeTab=function(t){var e,a;return t.preventDefault(),$(t.currentTarget).parent().hasClass("active")?void 0:(e=$(t.currentTarget).parent().attr("data-tab"),a="/administration/",this.contest_id&&(a+="contests/edit/"+this.contest_id+"/"),a+="challenges/"+this.action,this.challenge_id&&(a+="/"+this.challenge_id),e&&(a+="/"+e),i.router.navigate(a,!1),this.tab=e,this.render())},a.prototype.saveChallenge=function(t){var e,a;return t.preventDefault(),$(t.currentTarget).is(":disabled")?void 0:($(t.currentTarget).html("Saving..."),$(t.currentTarget).attr("disabled","disabled"),"create"===this.action?this.tab_view.validate&&this.tab_view.validate()?(e=new i.Administration_ChallengeModel(this.tab_view.getData()),this.contest_id&&e.set("contest_id",this.contest_id),a=this,e.save(null,{success:function(e){var r;return r=a.contest_id?"/administration/contests/edit/"+a.contest_id+"/challenges/edit/"+e.get("id"):"/administration/challenges/edit/"+e.get("id"),i.router.navigate(r,{trigger:!0,replace:!0}),$(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Challenge")}})):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Challenge")):this.tab_view?this.tab_view.validate&&this.tab_view.validate()?(a=this,this.model.save(this.tab_view.getData(),{silent:!0,success:function(){return a.$("button.save-challenge").removeAttr("disabled"),a.$("button.save-challenge").html("Save Challenge")}})):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Challenge")):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Challenge")))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ChallengeEditView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t;return t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="administration/company-edit-applicants",i.prototype.className="administration-company-edit-applicants",i.prototype.initialize=function(t){var e,i;return null==t&&(t={}),i=this,e=function(t){return t.company_id=i.model.get("id")},this.company_contests=HR.appController.getCollection("administration-company-contests","company-id-"+i.model.get("id"),e),this.listenTo(this.company_contests,"reset",this.render),this.listenTo(this.company_contests,"change",this.render)},i.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),collection:this.company_contests,_collection:this.company_contests.toJSON()})),this},i}(window.HR.GenericView),HR.Administration_CompanyEditApplicantsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/company-edit-hackerboard-submissions",a.prototype.className="administration-company-edit-hackerboard-submissions",a.prototype.initialize=function(t){var e,a;return this.leader=t.leader,this.company=t.company,this.contest_id=t.contest_id,a=this,e=function(t){return t.company_id=a.company.get("id"),t.contest_id=a.contest_id,t.hacker_id=a.leader.hacker_id},this.collection=i.appController.getCollection("administration-hackerboard-submissions","company-id-"+this.company.get("id")+"_contest-id"+this.contest_id+"_hacker-id"+this.leader.hacker_id,e),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render)},a.prototype.render=function(){var t;return $(this.el).html(i.appController.template(this.template,this)({collection:this.collection,_collection:this.collection.toJSON()})),t={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,readOnly:!0},$(this.el).find("textarea").each(function(e,a){var r;return r=$(a).attr("data-language"),t.mode=lang_mime_mapping[r],i.appController.loadCodeMirror(function(){return function(){return CodeMirror.fromTextArea(a,t)}}(this))})},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_CompanyEditHackerboardSubmissionsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/company-edit-hackerboard",a.prototype.className="administration-company-edit-hackerboard",a.prototype.initialize=function(t){var e,a;return this.tab_id=t.tab_id,this.page=t.page,this.contest_id=t.tab_id,this.hacker_id=t.hacker_id,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),e=this,a=function(t){return t.company_id=e.model.get("id"),t.contest_id=e.contest_id,t.page=e.page},this.hackerboard=i.appController.getCollection("administration-hackerboard","company-id-"+this.model.get("id")+"-contest-id-"+this.contest_id+"-page-"+this.page,a),this.listenTo(this.hackerboard,"reset",this.render),this.listenTo(this.hackerboard,"change",this.render)},a.prototype.events={"click .hacker-list-item":"changeDetails","click button.action-shortlist":"shortlistHacker","click button.action-undo":"unShortlistHacker"},a.prototype.render=function(){var t;return _.each(this.hackerboard.models,function(t){var e;return i.HackerboardStarredList||(i.HackerboardStarredList={}),i.HackerboardStarredList[t.get("hacker_id")]===!0?(e=this.hackerboard.get(t.get("id")),e.set("shortlisted",!0),this.hackerboard.set(e,{add:!1,remove:!1,merge:!0})):i.HackerboardStarredList[t.get("hacker_id")]===!1?(e=this.hackerboard.get(t.get("id")),e.set("shortlisted",!1),this.hackerboard.set(e,{add:!1,remove:!1,merge:!0})):void 0},this),t=this.hacker_id?this.getLeader():null,$(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),hackerboard:this.hackerboard,_hackerboard:this.hackerboard.toJSON(),hacker_id:this.hacker_id,leader:t})),i.util.pagination(this.$(".pagination-wrapper"),this.hackerboard.getTotal(),this.hackerboard.pageURL(),this.hackerboard.getCurrentPage(),null,null,3),t&&$(this.el).find(".submissions-inner").length>0?(this.submission_view=new i.Administration_CompanyEditHackerboardSubmissionsView({leader:t,company:this.model,contest_id:this.contest_id}),this.add_subview(this.submission_view),this.submission_view.setElement($(this.el).find(".submissions-inner")).render()):void 0},a.prototype.changeDetails=function(t){var e;return e=$(t.currentTarget).attr("data-id"),i.router.navigate("/administration/companies/edit/"+(""+this.model.get("id")+"/applicants/"+this.contest_id)+("/page/"+this.hackerboard.getCurrentPage()+"/hackers/"+e),!0)},a.prototype.shortlistHacker=function(t){var e,a,r;if(!$(t.currentTarget).is(":disabled"))return $(t.currentTarget).attr("disabled","disabled"),$(t.currentTarget).html("Shortlisting..."),e=$(t.currentTarget).attr("data-id"),r=this,a=new i.Administration_CompanyHackerShortlistModel,a.set("hacker_id",e),a.set("contest_id",this.contest_id),a.set("company_id",this.model.get("id")),a.save(null,{success:function(){return $(t.currentTarget).html("Shortlisted"),$(t.currentTarget).next().show(),r.updateStar(e,"add")}})},a.prototype.unShortlistHacker=function(t){var e,a,r;return e=$(t.currentTarget).attr("data-id"),$(t.currentTarget).is(":disabled")?void 0:($(t.currentTarget).attr("disabled","disabled"),$(t.currentTarget).html("undoing..."),a=new i.Administration_CompanyHackerShortlistModel,a.set("hacker_id",e),a.set("contest_id",this.contest_id),a.set("company_id",this.model.get("id")),r=this,$.ajax({url:a.url(),type:"DELETE",success:function(){return $(t.currentTarget).hide(),$(t.currentTarget).html("undo"),$(t.currentTarget).prev().removeAttr("disabled"),$(t.currentTarget).prev().html("Shortlist"),r.updateStar(e,"remove")}}))},a.prototype.updateStar=function(t,e){return _.each(this.hackerboard.models,function(a){var r;return parseInt(a.get("hacker_id"))===parseInt(t)?(r=this.hackerboard.get(a.get("id")),i.HackerboardStarredList||(i.HackerboardStarredList={}),"add"===e?(i.HackerboardStarredList[t]=!0,r.set("shortlisted",!0)):"remove"===e&&(i.HackerboardStarredList[t]=!1,r.set("shortlisted",!1)),this.hackerboard.set(r,{add:!1,remove:!1,merge:!0})):void 0},this),_.each(this.$("display-starred"),function(i){var a;if(a=$(i).attr("data-id"),parseInt(t)===parseInt(a)){if("add"===e)return $(i).removeClass("hide");if("remove"===e)return $(i).addClass("hide")}},this)},a.prototype.getLeader=function(){var t;return t=this,_.first(_.filter(this.hackerboard.toJSON(),function(e){return e.hacker_id===parseInt(t.hacker_id)}))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_CompanyEditHackerboardView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t;return t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="administration/company-edit-offices-add-office",i.prototype.className="administration-company-edit-offices-add-office",i.prototype.initialize=function(t){return null==t&&(t={}),this.company=t.company},i.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this.setData(this.model.toJSON()),this},i.prototype.setData=function(){var t;return this.setUpCountrySelector(),t=this.model.get("city"),t?this.$("input#city").val(t.name):void 0},i.prototype.setUpCountrySelector=function(){var t,e,i;return t=window.countries_mapping,i=[],_.each(t,function(){return function(t,e){return i.push({id:e,text:e})}}(this)),$(this.el).find("#country").select2({data:i,width:"copy"}),e=this.model.get("country"),e?this.setCountry(e.name):this.model.get("id")?void 0:this.setCountry("United States")},i.prototype.setCountry=function(t){return $(this.el).find("#country").val(t),$(this.el).find("#s2id_country .select2-choice span").text(t)},i.prototype.getCountry=function(){return $(this.el).find("#country").val()},i.prototype.persist=function(t,e){var i;return t.setInactive(),i=this,this.model.save({city_name:this.$("input#city").val(),country_name:this.getCountry()},{success:function(a){return a.status?(i.company.fetch(),e.destroy(),t.setActive()):void 0}})},i}(window.HR.GenericView),HR.Administration_CompanyEditOfficesAddOfficeView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/company-edit-offices",a.prototype.className="administration-company-edit-offices",a.prototype.initialize=function(t){return this.model=t.model,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render)},a.prototype.events={"click .add-office":"addOffice","click .edit-office":"addOffice","click .remove-office":"removeOffice"},a.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this},a.prototype.addOffice=function(t){var e,a,r,n,o,s;return o=$(t.currentTarget).attr("data-id"),o?(s=_.first(_.filter(this.model.get("company_offices"),function(t){return t.id===parseInt(o)})),n=new i.Administration_CompanyOfficeModel(s),e="Edit",a="Save"):(n=new i.Administration_CompanyOfficeModel,n.set("company_id",this.model.get("id")),e="New",a="Create"),r=new i.Administration_CompanyEditOfficesAddOfficeView({model:n,company:this.model}),new i.util.ShowDialog({title:""+e+" Office",body_view:r,width:500,buttons:[{name:a,"class":"btn-primary",callback:function(t){return r.persist(this,t)}},{name:"Cancel",callback:function(t){return t.destroy()}}]}).render()},a.prototype.removeOffice=function(t){var e,a,r,n;return a=$(t.currentTarget).attr("data-id"),n=_.first(_.filter(this.model.get("company_offices"),function(t){return t.id===parseInt(a)})),e=new i.Administration_CompanyOfficeModel(n),r=this,new i.util.ShowConfirmationDialog({title:"Delete Office",body:"Are you sure you want to delete this location?",buttons:[{name:"Yes! Delete it!","class":"btn-primary",callback:function(t){return this.setInactive(),e.destroy({success:function(){return r.model.fetch(),t.destroy()}})}},{name:"Cancel",callback:function(t){return t.destroy()}}]}).render()},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_CompanyEditOfficesView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e
}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/company-edit-overview",a.prototype.className="administration-company-edit-overview",a.prototype.initialize=function(t){return this.action=t.action,this.parent=t.parent,this.listenTo(this.model,"reset",this.render),this.saveCompany=function(t){return function(){return t.data_rendered&&t.changed()?t.parent.$("button.save-company").click():void 0}}(this),this.throttledSave=_.throttle(this.saveCompany,1e3)},a.prototype.events={"focusout input.auto-save":"autoSave","focusout textarea.auto-save":"autoSave","keyup textarea.pitch":"updatePitchMessage"},a.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action})),this.setData(this.model.toJSON()),this},a.prototype.setData=function(t){return"create"!==this.action?(t.name&&this.$("input#name").val(t.name),t.website&&this.$("input#website").val(t.website),t.pitch&&(this.$("textarea#pitch").val(t.pitch),t.pitch.length>this.model.max_limit.pitch?this.$("small.pitch").html("Characters left: -"+(t.pitch.length-this.model.max_limit.pitch)).addClass("error").removeClass("hint"):this.$("small.pitch").html("Characters left: "+(this.model.max_limit.pitch-t.pitch.length)).addClass("hint").removeClass("error")),this.checkRenderedData()):void 0},a.prototype.getData=function(){return{name:this.$("input#name").val(),website:this.$("input#website").val(),pitch:this.$("textarea#pitch").val()}},a.prototype.checkRenderedData=function(){return this.rendered()&&!this.changed()?this.data_rendered=!0:void 0},a.prototype.rendered=function(){return this.$("input#name").length>0&&this.$("textarea.pitch").length>0?!0:!1},a.prototype.changed=function(){return this.model.get("name")!==this.$("input#name").val()?!0:this.model.get("website")!==this.$("input#website").val()?!0:this.model.get("pitch")!==this.$("input#pitch").val()?!0:!1},a.prototype.validate=function(){return this.$(".error").html("").hide(),""!==this.$("input#name").val()&&this.$("textarea.pitch").val().length<=this.model.max_limit.pitch?!0:(""===this.$("input#name").val()&&this.$(".error.name").html(i.util.getErrorList(["Company name can't be empty"])).show(),""===this.$("input#website").val()&&this.$(".error.website").html(i.util.getErrorList(["Company website can't be empty"])).show(),""===this.$("textarea#pitch").val()&&this.$(".error.pitch").html(i.util.getErrorList(["Company pitch can't be empty"])).show(),!1)},a.prototype.autoSave=function(){return"create"!==this.action?this.saveCompany():void 0},a.prototype.updatePitchMessage=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget).val(),e.length>this.model.max_limit.pitch?this.$("small.pitch").html("Characters left: -"+(e.length-this.model.max_limit.pitch)).addClass("error").removeClass("hint"):this.$("small.pitch").html("Characters left: "+(this.model.max_limit.pitch-e.length)).addClass("hint").removeClass("error")},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_CompanyEditOverviewView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t;return t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="administration/company-edit-positions-add-position",i.prototype.className="administration-company-edit-positions-add-position",i.prototype.initialize=function(t){return null==t&&(t={}),this.company=t.company},i.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this.setData(this.model.toJSON()),this},i.prototype.setData=function(){return this.model.get("name")&&this.$("input#name").val(this.model.get("name")),this.model.get("description")?this.$("textarea#description").val(this.model.get("description")):void 0},i.prototype.getData=function(){return{name:this.$("input#name").val(),description:this.$("textarea#description").val()}},i.prototype.persist=function(t,e){var i;return t.setInactive(),i=this,this.model.save(this.getData(),{success:function(a){return a.status?(i.company.fetch(),e.destroy(),t.setActive()):void 0}})},i}(window.HR.GenericView),HR.Administration_CompanyEditPositionsAddPositionView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/company-edit-positions",a.prototype.className="administration-company-edit-positions",a.prototype.initialize=function(t){return this.model=t.model},a.prototype.events={"click .add-position":"addPosition","click .edit-position":"addPosition","click .remove-position":"removePosition"},a.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this},a.prototype.addPosition=function(t){var e,a,r,n,o,s;return o=$(t.currentTarget).attr("data-id"),o?(s=_.first(_.filter(this.model.get("company_positions"),function(t){return t.id===parseInt(o)})),n=new i.Administration_CompanyPositionModel(s),e="Edit",a="Save"):(n=new i.Administration_CompanyPositionModel,n.set("company_id",this.model.get("id")),e="New",a="Create"),r=new i.Administration_CompanyEditPositionsAddPositionView({model:n,company:this.model}),new i.util.ShowDialog({title:""+e+" Position",body_view:r,width:500,buttons:[{name:a,"class":"btn-primary",callback:function(t){return r.persist(this,t)}},{name:"Cancel",callback:function(t){return t.destroy()}}]}).render()},a.prototype.removePosition=function(t){var e,a,r,n;return a=$(t.currentTarget).attr("data-id"),n=_.first(_.filter(this.model.get("company_positions"),function(t){return t.id===parseInt(a)})),e=new i.Administration_CompanyPositionModel(n),r=this,new i.util.ShowConfirmationDialog({title:"Delete Position",body:"Are you sure you want to delete this location?",buttons:[{name:"Yes! Delete it!","class":"btn-primary",callback:function(t){return this.setInactive(),e.destroy({success:function(){return r.model.fetch(),t.destroy()}})}},{name:"Cancel",callback:function(t){return t.destroy()}}]}).render()},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_CompanyEditPositionsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/company-edit",a.prototype.className="administration-company-edit",a.prototype.initialize=function(t){return this.action=t.action,this.tab=t.tab,this.company_id=t.company_id,this.tab_id=t.tab_id,this.page=t.page,this.hacker_id=t.hacker_id,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render)},a.prototype.events={"click a.change-tab":"changeTab","click button.save-company":"saveCompany"},a.prototype.render=function(){return"create"===this.action||this.model.sync_status?($(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action,tab:this.tab})),"create"===this.action?this.$("li[data-tab=overview]").addClass("active"):this.$("li[data-tab="+this.tab+"]").addClass("active"),(!this.prev_tab||this.tab!==this.prev_tab||"applicants"===this.tab&&this.page!==this.prev_page&&this.hacker_id!==this.prev_hacker_id)&&(this.prev_tab&&(this.tab_view.destroy(),this._subviews=[],this.$(".tab-body").html("<div class='tabs-body-inner'></div>")),"offices"===this.tab?(this.tab_view=new i.Administration_CompanyEditOfficesView({model:this.model}),this.add_subview(this.tab_view)):"positions"===this.tab?(this.tab_view=new i.Administration_CompanyEditPositionsView({model:this.model}),this.add_subview(this.tab_view)):"applicants"===this.tab?this.tab_id?(this.tab_view=new i.Administration_CompanyEditHackerboardView({model:this.model,tab_id:this.tab_id,page:this.page,hacker_id:this.hacker_id}),this.add_subview(this.tab_view)):(this.tab_view=new i.Administration_CompanyEditApplicantsView({model:this.model}),this.add_subview(this.tab_view)):(this.tab_view=new i.Administration_CompanyEditOverviewView({model:this.model,action:this.action,parent:this}),this.add_subview(this.tab_view))),this.prev_tab=this.tab,this.prev_tab_id=this.tab_id,this.prev_page=this.page,this.prev_hacker_id=this.hacker_id,this.tab_view.setElement(this.$(".tabs-body-inner")).render(),this):this},a.prototype.changeTab=function(t){var e,a;return t.preventDefault(),$(t.currentTarget).parent().hasClass("active")?void 0:(e=$(t.currentTarget).parent().attr("data-tab"),a="/administration/",a+="companies/"+this.action,this.company_id&&(a+="/"+this.company_id),e&&(a+="/"+e),i.router.navigate(a,!1),this.tab=e,this.tab_id=null,this.page=null,this.hacker_id=null,this.render())},a.prototype.saveCompany=function(t){var e,a;return t.preventDefault(),$(t.currentTarget).is(":disabled")?void 0:($(t.currentTarget).html("Saving..."),$(t.currentTarget).attr("disabled","disabled"),"create"===this.action?this.tab_view.validate&&this.tab_view.validate()?(e=new i.Administration_CompanyModel(this.tab_view.getData()),a=this,e.save(null,{success:function(e){var a;return a="/administration/companies/edit/"+e.get("id"),i.router.navigate(a,{trigger:!0,replace:!0}),$(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Company")}})):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Company")):this.tab_view?this.tab_view.validate&&this.tab_view.validate()?(a=this,this.model.save(this.tab_view.getData(),{silent:!0,success:function(){return a.$("button.save-company").removeAttr("disabled"),a.$("button.save-company").html("Save Company")}})):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Company")):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Company")))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_CompanyEditView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/contest-edit-acm-prefs",a.prototype.className="administration-contest-edit-acm-prefs",a.prototype.initialize=function(){return this.listenTo(this.model,"reset",this.render)},a.prototype.events={"focusout input[type=text]":"saveField"},a.prototype.render=function(){var t;return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this.$("input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"20%"}),t=this,this.$("input[type=checkbox]").on("ifChecked",function(e){var i;return i=$(e.currentTarget).attr("id"),t.saveIt(i,!0)}),this.$("input[type=checkbox]").on("ifUnchecked",function(e){var i;return i=$(e.currentTarget).attr("id"),t.saveIt(i,!1)})},a.prototype.saveField=function(t){var e,i;return e=$(t.currentTarget).attr("id"),i=$(t.currentTarget).val(),this.saveIt(e,i)},a.prototype.saveIt=function(t,e){var i;return i=this,this.model.set(t,e),this.$("div.state."+t).html("saving...").show(),this.model.save(null,{success:function(e,a){return a.status?(i.$("div.state."+t).html("saved").show(),setTimeout(function(){return i.$("div.state."+t).html("").hide()},2e3)):i.$("div.state."+t).html("error occured").show()}})},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ContestEditAcmPrefsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/contest-edit-challenges",a.prototype.className="administration-contest-edit-challenges",a.prototype.events={"click button.add-challenge":"showAddChallengeDialog","dragstart div.js-challenge-record":"challengeDragStart","dragend div.js-challenge-record":"challengeDragEnd","dragover div.js-challenge-record":"challengeDragOver","dragleave div.js-challenge-record":"challengeDragLeave","drop div.js-challenge-record":"challengeDrop","click .change-weights":"changeWeight","keypress input.weight":"keypressInputWeight","click input.binary":"changeBinaryScoring","click input.dynamic":"changeDynamic","click .remove-challenge":"removeChallenge"},a.prototype.initialize=function(t){var e,a;return this.contest_id=t.contest_id,this.page=t.page,this.listenTo(this.model,"reset",this.render),e=this,a=function(t){return t.page=e.page,t.setContestId(e.model.get("id"))},this.collection=i.appController.getCollection("administration-challenges","page-"+this.page,a),this.collection.fetch({success:function(){return e.render()}}),this.listenTo(this.collection,"reset",this.render)},a.prototype.render=function(){return this.collection.sync_status?($(this.el).html(i.appController.template(this.template,this)({collection:this.collection,_collection:this.collection.toJSON(),contest_id:this.contest_id})),this.$(".help-me").length>0&&this.$(".help-me").popover({placement:"top"}),this):this},a.prototype.showAddChallengeDialog=function(){var t,e;return e=this,t=i.util.ShowDialog({title:"Add Challenge",body:"<div class='add-challenge-modal'> <input type='text' class='add-challenge-input left-half'><button class='btn add-challenge-button right-half'>Add</button> </div>",events:{"click button.add-challenge-button":function(i){var a;return t=i.data.that,a=t.$el().find("input.add-challenge-input").val(),t.destroy(),$.ajax({url:e.model.challenge_url(a),type:"POST",success:function(t){return t.status?e.collection.fetch({success:function(){return e.render()}}):void 0}})},"keypress input.add-challenge-input":function(e){return 13===e.which?(t=e.data.that,t.$el().find("button.add-challenge-button").click()):void 0}}}),t.render(),t.$el().find("input.add-challenge-input").autocomplete({minLength:2,source:function(t,e){return $.ajax({url:"/rest/administration/challenges/autocomplete?limit=4",data:{term:t.term},success:function(t){return e(t)}})},select:function(e,i){return t.$el().find("input.add-challenge-input").val(i.item.value),t.$el().find("button.add-challenge-button").click(),setTimeout(function(){return t.$el().find("input.add-challenge-input").val("")},100)}}).data("autocomplete")._renderItem=function(t,e){return $("<li></li>").data("item.autocomplete",e).append($("<a></a>").append($("<div class='challenge-autocomplete-container'> <p class='challenge-autocomplete-name'>"+e.label+"</p> <p class='challenge-autocomplete-slug'>"+e.value+"</p> </div>"))).appendTo(t)},t.$el().find("input.add-challenge-input").focus()},a.prototype.challengeDragStart=function(t){return $(t.currentTarget).css("opacity","0.5")},a.prototype.challengeDragEnd=function(t){var e,i,a,r,n;return $(t.currentTarget).css("opacity","1"),n=parseInt($(t.currentTarget).attr("data-index")),a=parseInt($(".js-challenge-record[selected=selected]").attr("data-index")),e=!1,n!==a&&(i=$(".js-challenge-record[selected=selected]"),1===i.length&&(r=$(t.currentTarget).detach(),i.before(r),e=!0)),$(".js-challenge-record[selected=selected]").css("border-top","1px solid #e1e1e1"),$(".js-challenge-record[selected=selected]").removeAttr("selected"),this.updateIndexes(e)},a.prototype.updateIndexes=function(t){var e;return _.each(this.$(".js-challenge-record"),function(t,e){return $(t).attr("data-index",e),$(t).find(".challenge-serial").html(e+1)}),t?(e=_.map(_.reject(this.$(".js-challenge-record"),function(t){return $(t).hasClass("dummy")}),function(t){return parseInt($(t).attr("data-id"))}),$.ajax({url:this.model.update_challenges_order_url(),data:{order:e},type:"PUT"})):void 0},a.prototype.challengeDragOver=function(t){return t.preventDefault(),$(t.currentTarget).css("border-top","1px solid #999"),$(t.currentTarget).attr("selected","selected"),!1},a.prototype.challengeDragLeave=function(t){return $(t.currentTarget).css("border-top","1px solid #e1e1e1"),$(t.currentTarget).removeAttr("selected")},a.prototype.changeWeight=function(t){var e;return $(t.currentTarget).find("i").hasClass("icon-pencil")?($(t.currentTarget).find("i").removeClass("icon-pencil").addClass("icon-floppy"),this.$("span.weight").hide(),this.$("input.weight").show()):(e={},_.each(_.reject(this.$(".js-challenge-record"),function(t){return $(t).hasClass("dummy")}),function(t){return e[parseInt($(t).attr("data-id"))]=parseInt($(t).find("input.weight").val())||0,$(t).find("span.weight").html(parseInt($(t).find("input.weight").val())||0)}),$.ajax({url:this.model.update_challenge_weights_url(),data:{weights:e},type:"PUT"}),$(t.currentTarget).find("i").addClass("icon-pencil").removeClass("icon-floppy"),this.$("span.weight").show(),this.$("input.weight").hide())},a.prototype.keypressInputWeight=function(t){return 13===t.which?$(".change-weights").click():void 0},a.prototype.changeBinaryScoring=function(t){var e,i;return e=$(t.currentTarget).is(":checked"),i=$(t.currentTarget).attr("data-id"),$.ajax({url:this.model.update_flags_url(i),data:{binary_scoring:e},type:"PUT"})},a.prototype.changeDynamic=function(t){var e,i;return i=$(t.currentTarget).is(":checked"),e=$(t.currentTarget).attr("data-id"),$.ajax({url:this.model.update_flags_url(e),data:{dynamic:i},type:"PUT"})},a.prototype.removeChallenge=function(t){var e;return e=$(t.currentTarget).attr("data-id"),this.$(".js-challenge-record[data-id="+e+"]").remove(),this.updateIndexes(!1),$.ajax({url:this.model.association_url(e),type:"DELETE"})},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ContestEditChallengesView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/contest-edit-overview",a.prototype.className="administration-contest-edit-overview",a.prototype.initialize=function(t){return this.action=t.action,this.parent=t.parent,this.listenTo(this.model,"reset",this.render),this.saveContest=function(t){return function(){return t.data_rendered&&t.changed()?t.parent.$("button.save-contest").click():void 0}}(this),this.throttledSave=_.throttle(this.saveContest,1e3)},a.prototype.events={"focusout input.auto-save":"autoSave","focusout textarea.auto-save":"autoSave","keyup input#name":"updateSlug","click input#noendtime":"disableEndtime","click a.edit-slug":"editSlug","click a.cancel-update-slug":"cancelUpdateSlug","click a.update-slug":"updateSlug","keyup textarea.tagline":"updateTaglineMessage","keypress input.edit-slug":"editSlugEnterKeyBinding","keypress input#moderator":"addModEnterKeyBinding","click button.moderator-save":"addMod","click a.remove-moderator":"removeMod"},a.prototype.render=function(){var t,e;return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action})),t={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,autoCloseBrackets:!0,cursorScrollMargin:2,mode:"text/x-markdown",indentUnit:4,tabSize:4,lineWrapping:!0},e=this,i.appController.loadCodeMirrorMode("markdown",function(i){return function(){return i.$("textarea.description").get(0)&&!i.description_editor?(i.description_editor=CodeMirror.fromTextArea(i.$("textarea.description").get(0),t),i.updatePreview(),i.description_editor.on("change",i.throttledSave),i.setData(i.model.toJSON()),i.description_editor.on("change",function(){return e.updatePreview()})):void 0}}(this)),"create"!==this.action&&this.$("#moderator").length>0&&(e=this,this.$("#moderator").autocomplete({minLength:2,source:function(t,e){return $.ajax({url:"/rest/hackers/autocomplete?limit=4",data:{q:t.term},success:function(t){return e(t)}})},select:function(t,i){return e.$("input#moderator").val(i.item.value),e.$("button.moderator-save").click(),setTimeout(function(){return e.$("input#moderator").val("")},100)}}).data("autocomplete")._renderItem=function(t,e){return $("<li></li>").data("item.autocomplete",e).append($("<a></a>").append($("<div class='hacker-container'> <div class='hacker-avatar'> <img height='50' width='50' class='pull-left avatar profile_avatar' onerror=\"this.src='https://d3rpyts3de3lx8.cloudfront.net/hackerrank/assets/gravatar.jpg';\" src='/rest/hackers/"+i.util.trim(e.value)+"/avatar'> </div> <div class='hacker-details'> <p class='hacker-username'>"+e.value+"</p> </div> </div>"))).appendTo(t)}),this.setData(this.model.toJSON()),this.setUpEvents()},a.prototype.autoSave=function(){return"create"!==this.action?this.saveContest():void 0},a.prototype.setUpEvents=function(){return this.$("input#startdate").datepicker(),this.$("input#enddate").datepicker(),this.$("input#starttime").timepicker({step:15,timeFormat:"H:i"}),this.$("input#endtime").timepicker({step:15,timeFormat:"H:i"})},a.prototype.disableEndtime=function(t){return $(t.currentTarget).is(":checked")?(this.cache_disabled_enddate=this.$("input#enddate").val(),this.cache_disabled_endtime=this.$("input#endtime").val(),this.$("input#enddate").val(""),this.$("input#endtime").val(""),this.$("input#enddate").attr("disabled","disabled"),this.$("input#endtime").attr("disabled","disabled"),this.$("input#enddate").addClass("disabled"),this.$("input#endtime").addClass("disabled")):(this.$("input#enddate").removeAttr("disabled"),this.$("input#endtime").removeAttr("disabled"),this.$("input#enddate").removeClass("disabled"),this.$("input#endtime").removeClass("disabled"),this.cache_disabled_enddate&&this.$("input#enddate").val(this.cache_disabled_enddate),this.cache_disabled_endtime&&this.$("input#endtime").val(this.cache_disabled_endtime)),this.autoSave()},a.prototype.getTimeStamps=function(){var t,e,a,r,n,o,s,l;return o={},o.errors={},n=$("input#noendtime").is(":checked"),n?(e=null,o.valid_endtime=!0,o.valid_enddate=!0,o._endtime=null):(a=this.$("input#enddate").val(),r=this.$("input#endtime").val(),o.valid_endtime=i.util.validate_time(r),o.valid_enddate=i.util.validate_date(a),o._endtime=o.valid_enddate&&o.valid_endtime?i.util.getEpochTimeStampFromDateTime(a,r):!1),s=this.$("input#startdate").val(),l=this.$("input#starttime").val(),o.valid_starttime=i.util.validate_time(l),o.valid_startdate=i.util.validate_date(s),o._starttime=o.valid_startdate&&o.valid_starttime?i.util.getEpochTimeStampFromDateTime(s,l):!1,o.valid_timestamps=o.valid_starttime&&o.valid_enddate&&o.valid_endtime&&o.valid_enddate?!0:!1,o.valid_values=!1,o.valid_timestamps&&(o.valid_values=!0,t=Math.floor((new Date).getTime()/1e3),"create"===this.action&&o._starttime+3600<t&&(o.valid_values=!1,o.errors.values="Value of Start Date and Time should lie in future"),n||("create"===this.action&&o._endtime<t&&o._endtime>o._starttime?(o.valid_values=!1,o.errors.values="Value of End Date and Time should lie in future"):o._endtime<o._starttime&&(o.valid_values=!1,o.errors.values="End Date & Time cannot be before Start Date & Time"))),o.valid_starttime||(o.errors.starttime="Start time is not valid"),o.valid_startdate||(o.errors.startdate="Start date is not valid"),o.valid_endtime||(o.errors.endtime="End time is not valid"),o.valid_enddate||(o.errors.enddate="End date is not valid"),o},a.prototype.validate=function(){var t,e,a;return this.$(".error").html("").hide(),t=this.getTimeStamps(),0===_.size(t.errors)&&""!==this.$("input#name").val()&&this.$("textarea.tagline").val().length<=this.model.max_limit.tagline?!0:((t.errors.starttime||t.errors.startdate)&&(a=[],t.errors.starttime&&a.push(t.errors.starttime),t.errors.startdate&&a.push(t.errors.startdate),this.$(".error.starttime").html(i.util.getErrorList(a)).show()),t.errors.values&&this.$(".error.starttime").html(i.util.getErrorList([t.errors.values])).show(),(t.errors.endtime||t.errors.enddate)&&(e=[],t.errors.endtime&&e.push(t.errors.endtime),t.errors.enddate&&e.push(t.errors.enddate),this.$(".error.endtime").html(i.util.getErrorList(e)).show()),""===this.$("input#name").val()&&this.$(".error.name").html(i.util.getErrorList(["Name can't be empty"])).show(),!1)},a.prototype.changed=function(){var t;return t=this.getTimeStamps(),this.model.get("starttime")!==t._starttime?!0:this.model.get("endtime")!==t._endtime?!0:this.$("input#name").val()!==this.model.get("name")?!0:this.$("textarea.tagline").val()!==this.model.get("tagline")?!0:this.description_editor.getValue()!==this.model.get("description")?!0:!1},a.prototype.getData=function(){var t,e;return t={},t.name=this.$("input#name").val(),e=this.getTimeStamps(),t.starttime=e._starttime,t.endtime=e._endtime,t.tagline=this.$("textarea.tagline").val(),""===t.tagline&&(t.tagline=null),t.description=this.description_editor?this.description_editor.getValue():null,""===t.description&&(t.description=null),t},a.prototype.setData=function(t){var e;if("create"!==this.action)return t.name&&this.$("input#name").val(t.name),t.slug&&this.$("span.slug").html(t.slug),t.starttime&&(e=i.util.splitDate(i.util.getDateFromEpoch(t.starttime)),this.$("input#startdate").val(""+e.MM+"/"+e.dd+"/"+e.yyyy),this.$("input#starttime").val(""+e.hh+":"+e.mm)),t.endtime?(e=i.util.splitDate(i.util.getDateFromEpoch(t.endtime)),this.$("input#enddate").val(""+e.MM+"/"+e.dd+"/"+e.yyyy),this.$("input#endtime").val(""+e.hh+":"+e.mm)):(this.$("input#noendtime").prop("checked",!0),this.$("input#enddate").attr("disabled","disabled"),this.$("input#endtime").attr("disabled","disabled")),t.description&&this.description_editor&&this.description_editor.setValue(t.description),t.tagline&&(this.$("textarea.tagline").val(t.tagline),this.$("small.tagline").html(""+(this.model.max_limit.tagline-t.tagline.length)+" characters left")),this.checkRenderedData()},a.prototype.checkRenderedData=function(){return this.rendered()&&!this.changed()?this.data_rendered=!0:void 0},a.prototype.rendered=function(){return this.$("input#name").length>0&&this.$("input#endtime").length>0&&this.$("input#enddate").length>0&&this.$("input#starttime").length>0&&this.$("input#startdate").length>0&&this.$("textarea.tagline").length>0&&this.description_editor?!0:!1},a.prototype.editSlug=function(t){return t.preventDefault(),$(t.currentTarget).hide(),this.$("p.slug").hide(),this.$("a.update-slug").show(),this.$("a.cancel-update-slug").show(),this.$("input.edit-slug").show().focus().val(this.$("input.edit-slug").val())},a.prototype.cancelUpdateSlug=function(t){return t.preventDefault(),$(t.currentTarget).hide(),this.$("p.slug").show(),this.$("a.update-slug").hide(),this.$("input.edit-slug").hide(),this.$("a.edit-slug").show()},a.prototype.updateSlug=function(t){var e;return t.preventDefault(),this.$(".slug.error").html("").hide(),e=this.$("input.edit-slug").val(),e!==this.model.get("slug")?_.isEmpty(e)?this.$(".slug.error").html("slug can't be empty").show():(this.model.set("slug",e),this.model.save(null,{silent:!0,success:function(t){return t.status?(this.$("p.slug").html(e),this.$("a.cancel-update-slug").click()):void 0}})):this.$("a.cancel-update-slug").click()},a.prototype.editSlugEnterKeyBinding=function(t){return 13===t.which?this.$("a.update-slug").click():void 0},a.prototype.updateTaglineMessage=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget).val(),e.length>this.model.max_limit.tagline?this.$("small.tagline").html("Characters left: -"+(e.length-this.model.max_limit.tagline)).addClass("error").removeClass("hint"):this.$("small.tagline").html("Characters left: "+(this.model.max_limit.tagline-e.length)).addClass("hint").removeClass("error")},a.prototype.addModEnterKeyBinding=function(t){return 13===t.which?this.$("button.moderator-save").click():void 0},a.prototype.addMod=function(){var t;return t=$("input#moderator").val(),this.addModContainer(t)&&this.addUserAsMod(t),this.$("input#moderator").val("")},a.prototype.addModContainer=function(t){return 0===this.$(".moderator-container[data-username="+t+"]").length?(this.$(".moderators-list").append(i.util.genModContainer({name:$("input#moderator").val(),avatar:"/rest/hackers/"+t+"/avatar",role:"moderator",close:!0})),this.$(".moderators-list remove-moderator[data-username="+t+"]").bind("click",this.removeMod),!0):!1},a.prototype.removeMod=function(t){var e;return e=$(t.currentTarget).attr("data-username"),this.$(".moderator-container[data-username="+e+"]").remove(),this.removeUserAsMod(e)},a.prototype.addUserAsMod=function(t){var e;return e=this,$.ajax({url:this.model.mod_url(t),type:"POST",success:function(i){return i.status?void 0:e.$(".moderator-container[data-username="+t+"]").remove()}})},a.prototype.removeUserAsMod=function(t){var e;return e=this,$.ajax({url:this.model.mod_url(t),type:"DELETE",success:function(i){return i.status?void 0:e.addModContainer(t)}})},a.prototype.updatePreview=function(){return i.requires(["sanitize"],function(t){return function(){var e;return e=HackDown.processData(t.description_editor.getValue()),""===e?t.$(".preview-wrap").hide():t.$(".preview-wrap").show(),t.$("#description-preview").html(e)}}(this))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ContestEditOverviewView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/contest-edit",a.prototype.className="administration-contest-edit",a.prototype.initialize=function(t){return this.action=t.action,this.tab=t.tab,this.contest_id=t.contest_id,this.page=t.page,this.listenTo(this.model,"reset",this.render)},a.prototype.events={"click a.change-tab":"changeTab","click button.save-contest":"saveContest"},a.prototype.render=function(){var t;return this.model.sync_status?($(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action,tab:this.tab})),"create"===this.action?this.$("li[data-tab=overview]").addClass("active"):this.$("li[data-tab="+this.tab+"]").addClass("active"),this.prev_tab&&this.tab===this.prev_tab||(this.prev_tab&&(this.tab_view.destroy(),this._subviews=[],this.$(".tab-body").html("<div class='tabs-body-inner'></div>")),"acm-prefs"===this.tab?(this.tab_view=new i.Administration_ContestEditAcmPrefsView({model:this.model,parent:this}),this.add_subview(this.tab_view)):"challenges"===this.tab?(this.tab_view=new i.Administration_ContestEditChallengesView({model:this.model,contest_id:this.contest_id,page:this.page,parent:this}),this.add_subview(this.tab_view)):"notification"===this.tab?(t=i.collection("broadcast",{contest_id:this.model.id}).cached(),this.tab_view=new i.Administration_ContestNotificationView({collection:t,contest_model:this.model,contest_id:this.contest_id,parent:this}),this.add_subview(this.tab_view)):(this.tab_view=new i.Administration_ContestEditOverviewView({model:this.model,action:this.action,parent:this}),this.add_subview(this.tab_view))),this.prev_tab=this.tab,this.tab_view.setElement(this.$(".tabs-body-inner")).render(),this):this},a.prototype.changeTab=function(t){var e,a;return t.preventDefault(),$(t.currentTarget).parent().hasClass("active")?void 0:(e=$(t.currentTarget).parent().attr("data-tab"),a="/administration/contests/"+this.action,this.contest_id&&(a+="/"+this.contest_id),e&&(a+="/"+e),i.router.navigate(a,!1),this.tab=e,this.render())},a.prototype.saveContest=function(t){var e,a;return t.preventDefault(),$(t.currentTarget).is(":disabled")?void 0:($(t.currentTarget).html("Saving..."),$(t.currentTarget).attr("disabled","disabled"),"create"===this.action?this.tab_view.validate&&this.tab_view.validate()?(e=new i.Administration_ContestModel(this.tab_view.getData()),e.save(null,{success:function(e,a){var r;
return 0===_.size(a.errors)?i.router.navigate("/administration/contests/edit/"+e.get("id"),{trigger:!0,replace:!0}):(r="Error Occured:\n",_.each(a.errors,function(t,e){return r+="	"+e+": "+t+"\n"}),alert(r)),$(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Contest")}})):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Contest")):this.tab_view?this.tab_view.validate&&this.tab_view.validate()?(a=this,this.model.save(this.tab_view.getData(),{silent:!0,success:function(){return a.$("button.save-contest").removeAttr("disabled"),a.$("button.save-contest").html("Save Contest")}})):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Contest")):($(t.currentTarget).removeAttr("disabled"),$(t.currentTarget).html("Save Contest")))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ContestEditView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/contest-notification-mail",a.prototype.className="administration-contest-notification-mail",a.prototype.initialize=function(t){return this.parent=t.parent,this.listenTo(this.model,"reset",this.render),this.render()},a.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()}))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ContestNotificationMailView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/contest-notification",a.prototype.className="administration-contest-notification",a.prototype.initialize=function(t){var e;return this.parent=t.parent,this.contest_model=t.contest_model,this.challenge_collection=new i.Administration_ChallengesCollection,this.challenge_collection.setContestId(this.contest_model.id),e=this,this.challenge_collection.fetch({success:function(){var t,i,a,r,n;for(i=[],n=e.challenge_collection.models,a=0,r=n.length;r>a;a++)t=n[a],i.push({id:t.id,text:t.get("name")});return $(".send-general-mail-challenge-list").select2({data:i})}}),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.contest_model,"reset",this.render)},a.prototype.events={"click .info-mail-preview":"showPreview","click .send-info-mail-btn":"sendInfoMail","click .reminder-mail-preview":"showReminderPreview","click .send-reminder-mail-btn":"sendReminderMail","change .send-general-mail-type":"changeGeneralMailType","click .send-general-mail-btn":"sendGeneralMail"},a.prototype.changeGeneralMailType=function(){var t;return t=$(".send-general-mail-type").val(),"contest-update"===t?$(".send-general-mail-challenge-list").addClass("hidden"):$(".send-general-mail-challenge-list").removeClass("hidden")},a.prototype.sendInfoMail=function(){var t,e,a;return t=parseInt(this.$(".mail-template-id").val().split("/").slice(-1)[0]),_.isNumber(t)||(t=1),e=new i.BroadcastModel({body:null,category:"contest-new",challenge_id:null,contest_id:this.contest_model.id,from:i.profile().get("email"),hacker_id:i.profile().id,using_mail_template:!0,mail_template_id:t,subject:null,status:0}),a=this,this.$(".send-info-mail-throbber").show(),this.$(".send-info-mail-btn").addClass("disabled"),this.$(".send-info-mail-alert").hide(),e.save(e.attributes,{error:function(t,e){var i,r,n,o,s;for(n=JSON.parse(e.responseText).errors,i="",o=0,s=n.length;s>o;o++)r=n[o],i=""+i+r.field+"<br />";return a.$(".send-info-mail-throbber").hide(),a.$(".send-info-mail-btn").removeClass("disabled"),a.$(".send-info-mail-alert").html(i),a.$(".send-info-mail-alert").show()},success:function(){return a.$(".send-info-mail-throbber").hide(),a.$(".send-info-mail-btn").removeClass("disabled")}})},a.prototype.sendGeneralMail=function(){var t,e,a;if(e=new i.BroadcastModel({body:$("#general-broadcast-message").val(),category:$(".send-general-mail-type").val(),contest_id:this.contest_model.id,from:i.profile().get("email"),hacker_id:i.profile().id,using_mail_template:!1,subject:$("#general-broadcast-subject").val(),status:0}),"challenge-submitted"===e.get("category")||"challenge-submitted"===e.get("category")){if(t=parseInt($(".send-general-mail-challenge-list").select2("val")),!t)return alert("Challenge has to be selected"),void 0;e.set("challenge_id",t)}return a=this,this.$(".send-general-mail-throbber").show(),this.$(".send-general-mail-btn").addClass("disabled"),this.$(".send-general-mail-alert").hide(),e.save(e.attributes,{error:function(t,e){var i,r,n,o,s;for(n=JSON.parse(e.responseText).errors,i="",o=0,s=n.length;s>o;o++)r=n[o],i=""+i+r.field+"<br />";return a.$(".send-general-mail-throbber").hide(),a.$(".send-general-mail-btn").removeClass("disabled"),a.$(".send-general-mail-alert").html(i),a.$(".send-general-mail-alert").show()},success:function(){return a.$(".send-general-mail-throbber").hide(),a.$(".send-general-mail-btn").removeClass("disabled")}})},a.prototype.sendReminderMail=function(){var t,e,a;return t=parseInt(this.$(".reminder-mail-template-id").val().split("/").slice(-1)[0]),_.isNumber(t)||(t=2),e=new i.BroadcastModel({body:null,category:"contest-update",challenge_id:null,contest_id:this.contest_model.id,from:i.profile().get("email"),hacker_id:i.profile().id,using_mail_template:!0,mail_template_id:t,subject:null,status:0}),a=this,this.$(".send-reminder-mail-throbber").show(),this.$(".send-reminder-mail-btn").addClass("disabled"),this.$(".send-reminder-mail-alert").hide(),e.save(e.attributes,{error:function(t,e){var i,r,n,o,s;for(n=JSON.parse(e.responseText).errors,i="",o=0,s=n.length;s>o;o++)r=n[o],i=""+i+r.field+"<br />";return a.$(".send-reminder-mail-throbber").hide(),a.$(".send-reminder-mail-btn").removeClass("disabled"),a.$(".send-reminder-mail-alert").html(i),a.$(".send-reminder-mail-alert").show()},success:function(){return a.$(".send-reminder-mail-throbber").hide(),a.$(".send-reminder-mail-btn").removeClass("disabled")}})},a.prototype.showPreview=function(){var t,e,a;return"Show Preview"===this.$(".info-mail-preview").html()?(t=parseInt(this.$(".mail-template-id").val().split("/").slice(-1)[0]),_.isNumber(t)||(t=1),a=i.model("mail-template",{id:t,sample:!0,contest_id:this.contest_model.id}).cached(),e=new i.Administration_ContestNotificationMailView({model:a}),this.assign({".preview-mail-container":e}),this.$(".preview-mail-container").slideToggle(),this.$(".info-mail-preview").html("Hide Preview")):(this.$(".preview-mail-container").slideToggle(),this.$(".info-mail-preview").html("Show Preview"))},a.prototype.showReminderPreview=function(){var t,e,a;return"Show Preview"===this.$(".reminder-mail-preview").html()?(t=parseInt(this.$(".reminder-mail-template-id").val().split("/").slice(-1)[0]),_.isNumber(t)||(t=2),a=i.model("mail-template",{id:t,sample:!0,contest_id:this.contest_model.id}).cached(),e=new i.Administration_ContestNotificationMailView({model:a}),this.assign({".reminder-mail-container":e}),this.$(".reminder-mail-container").slideToggle(),this.$(".reminder-mail-preview").html("Hide Preview")):(this.$(".reminder-mail-container").slideToggle(),this.$(".reminder-mail-preview").html("Show Preview"))},a.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({collection:this.collection,_collection:this.collection.toJSON(),contest_model:this.contest_model,_contest_model:this.contest_model.toJSON(),action:this.action,hacker:i.profile().toJSON()}))},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ContestNotificationView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};jQuery(function(){var t,i,a;return t=function(t){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,t),a.prototype.template="administration/resource-list",a.prototype.className="administration-resource-list",a.prototype.initialize=function(t){return this.page=t.page,this.query=t.query,this.resource=t.resource,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"sync",this.render)},a.prototype.events={"keyup #search-text":"searchResource","keypress #search-text":"searchResource"},a.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({collection:this.collection,_collection:this.collection.toJSON(),resource:this.resource,hacker:i.profile()})),this.collection.query&&this.$("#search-text").val(this.collection.query),i.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL(),this.collection.getCurrentPage()),this},a.prototype.searchResource=function(t){var e,a,r;return e=t.keyCode||t.which,13===e?(t.preventDefault(),"keypress"===t.type&&(a=i.util.trim($(t.currentTarget).val()),r=a?"/query/"+encodeURIComponent(a):"",i.router.navigate("/administration/"+this.resource+r,!0)),!1):void 0},a}(window.HR.GenericView),i=null!=(a=window.HR)?a:{},i.Administration_ResourceListView=t})}.call(this);
//# sourceMappingURL=administration-views-feb0ddc11c739c90def4dac54ce89d58.js.map