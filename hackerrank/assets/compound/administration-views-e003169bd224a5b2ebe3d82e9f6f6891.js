(function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-testcases",e.prototype.className="administration-challenge-edit-testcases",e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditTestcasesView=a})}).call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-languages",e.prototype.className="administration-challenge-edit-languages",e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()})),this},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditLanguagesView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit-overview",e.prototype.className="administration-challenge-edit-overview",e.prototype.initialize=function(a){var b=this;return this.action=a.action,this.parent=a.parent,this.listenTo(this.model,"reset",this.render),this.saveChallenge=function(){if(b.data_rendered&&b.changed())return b.parent.$("button.save-challenge").click()},this.throttledSave=_.throttle(this.saveChallenge,1e3)},e.prototype.events={"focusout input.auto-save":"autoSave","focusout textarea.auto-save":"autoSave","click a.edit-slug":"editSlug","click a.cancel-update-slug":"cancelUpdateSlug","click a.update-slug":"updateSlug","keypress input.edit-slug":"editSlugEnterKeyBinding","keyup textarea.description":"updateDescriptionMessage","keypress input#moderator":"addModEnterKeyBinding","click button.moderator-save":"addMod","click a.remove-moderator":"removeMod"},e.prototype.render=function(){var a,b;return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action})),a={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,autoCloseBrackets:!0,cursorScrollMargin:2,mode:"text/x-markdown",indentUnit:4,tabSize:4,lineWrapping:!0},this.$("textarea.problem-statement").get(0)&&(this.problem_statement_editor=CodeMirror.fromTextArea(this.$("textarea.problem-statement").get(0),a),this.problem_statement_editor.on("change",this.throttledSave)),b=this,this.$("input.tags").length>0&&this.$("input.tags").tagsInput({width:"98%",autocomplete_url:"/rest/tags/autocomplete?f=autocomplete",onChange:function(){return b.autoSave()}}),this.action!=="create"&&this.$("#moderator").length>0&&(b=this,this.$("#moderator").autocomplete({minLength:2,source:function(a,b){return $.ajax({url:"/rest/hackers/autocomplete?limit=4",data:{q:a.term},success:function(a){return b(a)}})},select:function(a,c){return b.$("input#moderator").val(c.item.value),b.$("button.moderator-save").click(),setTimeout(function(){return b.$("input#moderator").val("")},100)}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append($("<a></a>").append($("<div class='hacker-container'>                  <div class='hacker-avatar'>                    <img height='50' width='50' class='pull-left avatar profile_avatar' src='/rest/hackers/"+c.util.trim(b.value)+"/avatar'>                  </div>                  <div class='hacker-details'>                    <p class='hacker-username'>"+b.value+"</p>                  </div>                </div>"))).appendTo(a)}),this.setData(this.model.toJSON()),this},e.prototype.setData=function(a){if(this.action==="create")return;return a.name&&this.$("input#name").val(a.name),a.preview&&(this.$("textarea.description").val(a.preview),a.preview.length>this.model.max_limit.description?this.$("small.description").html("Characters left: -"+(a.preview.length-this.model.max_limit.description)).addClass("error").removeClass("hint"):this.$("small.description").html("Characters left: "+(this.model.max_limit.description-a.preview.length)).addClass("hint").removeClass("error")),a.body&&this.problem_statement_editor&&this.problem_statement_editor.setValue(a.body),a.tags&&a.tags.length>0&&this.$("input.tags").silentImportTags(a.tags.join()),this.checkRenderedData()},e.prototype.checkRenderedData=function(a){if(this.rendered()&&!this.changed())return this.data_rendered=!0},e.prototype.rendered=function(a){return this.$("input#name").length>0&&this.$("textarea.description").length>0&&this.problem_statement_editor?!0:!1},e.prototype.changed=function(){return this.model.get("name")!==this.$("input#name").val()?!0:this.model.get("preview")!==this.$("textarea.description").val()?!0:this.model.get("body")!==this.problem_statement_editor.getValue()?!0:_.difference(this.model.getTags(),this.getTags()).length>0||_.difference(this.getTags(),this.model.getTags()).length>0?!0:!1},e.prototype.validate=function(){return this.$(".error").html("").hide(),this.$("input#name").val()!==""&&this.$("textarea.description").val().length<=this.model.max_limit.description&&this.problem_statement_editor.getValue().length>0?!0:(this.$("input#name").val()===""&&this.$(".error.name").html(c.util.getErrorList(["Challenge name can't be empty"])).show(),this.problem_statement_editor.getValue().length===0&&this.$(".error.problem-statement").html(c.util.getErrorList(["Problem statement can't be empty"])).show(),!1)},e.prototype.getData=function(){var a;return a={},a.name=this.$("input#name").val(),a.preview=this.$("textarea.description").val(),a.preview===""&&(a.preview=null),a.body=this.problem_statement_editor?this.problem_statement_editor.getValue():null,a.tags=this.getTags(),a.body===""&&(a.body=null),a},e.prototype.getTags=function(){return _.reject(_.uniq(this.$("input.tags").val().split(",")),function(a){return a===""})},e.prototype.autoSave=function(a){if(this.action!=="create")return this.saveChallenge()},e.prototype.editSlug=function(a){return a.preventDefault(),$(a.currentTarget).hide(),this.$("p.slug").hide(),this.$("a.update-slug").show(),this.$("a.cancel-update-slug").show(),this.$("input.edit-slug").show().focus().val(this.$("input.edit-slug").val())},e.prototype.cancelUpdateSlug=function(a){return a.preventDefault(),$(a.currentTarget).hide(),this.$("p.slug").show(),this.$("a.update-slug").hide(),this.$("input.edit-slug").hide(),this.$("a.edit-slug").show()},e.prototype.updateSlug=function(a){var b;return a.preventDefault(),this.$(".slug.error").html("").hide(),b=this.$("input.edit-slug").val(),b!==this.model.get("slug")?_.isEmpty(b)?this.$(".slug.error").html("slug can't be empty").show():(this.model.set("slug",b),this.model.save(null,{silent:!0,success:function(a){if(a.status)return this.$("p.slug").html(b),this.$("a.cancel-update-slug").click()}})):this.$("a.cancel-update-slug").click()},e.prototype.editSlugEnterKeyBinding=function(a){if(a.which===13)return this.$("a.update-slug").click()},e.prototype.updateDescriptionMessage=function(a){var b;return a.preventDefault(),b=this.$(a.currentTarget).val(),b.length>this.model.max_limit.description?this.$("small.description").html("Characters left: -"+(b.length-this.model.max_limit.description)).addClass("error").removeClass("hint"):this.$("small.description").html("Characters left: "+(this.model.max_limit.description-b.length)).addClass("hint").removeClass("error")},e.prototype.addModEnterKeyBinding=function(a){if(a.which===13)return this.$("button.moderator-save").click()},e.prototype.addMod=function(a){var b;return b=$("input#moderator").val(),this.addModContainer(b)&&this.addUserAsMod(b),this.$("input#moderator").val("")},e.prototype.addModContainer=function(a){return this.$(".moderator-container[data-username="+a+"]").length===0?(this.$(".moderators-list").append(c.util.genModContainer({name:$("input#moderator").val(),avatar:"/rest/hackers/"+a+"/avatar",role:"moderator",close:!0})),this.$(".moderators-list remove-moderator[data-username="+a+"]").bind("click",this.removeMod),!0):!1},e.prototype.removeMod=function(a){var b;return b=$(a.currentTarget).attr("data-username"),this.$(".moderator-container[data-username="+b+"]").remove(),this.removeUserAsMod(b)},e.prototype.addUserAsMod=function(a){var b;return b=this,$.ajax({url:this.model.mod_url(a),type:"POST",success:function(c){if(!c.status)return b.$(".moderator-container[data-username="+a+"]").remove()}})},e.prototype.removeUserAsMod=function(a){var b;return b=this,$.ajax({url:this.model.mod_url(a),type:"DELETE",success:function(c){if(!c.status)return b.addModContainer(a)}})},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditOverviewView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/challenge-edit",e.prototype.className="administration-challenge-edit",e.prototype.initialize=function(a){return this.action=a.action,this.tab=a.tab,this.challenge_id=a.challenge_id,this.contest_id=a.contest_id,this.listenTo(this.model,"reset",this.render)},e.prototype.events={"click a.change-tab":"changeTab","click button.save-challenge":"saveChallenge"},e.prototype.render=function(){if(this.action!=="create"&&!this.model.sync_status)return this;$(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action,tab:this.tab,contest_id:this.contest_id})),this.action==="create"?this.$("li[data-tab=overview]").addClass("active"):this.$("li[data-tab="+this.tab+"]").addClass("active");if(!this.prev_tab||this.tab!==this.prev_tab)this.prev_tab&&(this.tab_view.destroy(),this._subviews=[],this.$(".tab-body").html("<div class='tabs-body-inner'></div>")),this.tab==="languages"?(this.tab_view=new c.Administration_ChallengeEditLanguagesView({model:this.model}),this.add_subview(this.tab_view)):this.tab==="testcases"?(this.tab_view=new c.Administration_ChallengeEditTestcasesView({model:this.model}),this.add_subview(this.tab_view)):(this.tab_view=new c.Administration_ChallengeEditOverviewView({model:this.model,action:this.action,parent:this}),this.add_subview(this.tab_view));return this.prev_tab=this.tab,this.tab_view.setElement(this.$(".tabs-body-inner")).render(),this},e.prototype.changeTab=function(a){var b,d;a.preventDefault();if(!$(a.currentTarget).parent().hasClass("active"))return b=$(a.currentTarget).parent().attr("data-tab"),d="/administration/",this.contest_id&&(d+="contests/edit/"+this.contest_id+"/"),d+="challenges/"+this.action,this.challenge_id&&(d+="/"+this.challenge_id),b&&(d+="/"+b),c.router.navigate(d,!1),this.tab=b,this.render()},e.prototype.saveChallenge=function(a){var b,d;a.preventDefault();if(!$(a.currentTarget).is(":disabled"))return $(a.currentTarget).html("Saving..."),$(a.currentTarget).attr("disabled","disabled"),this.action==="create"?this.tab_view.validate&&this.tab_view.validate()?(b=new c.Administration_ChallengeModel(this.tab_view.getData()),this.contest_id&&b.set("contest_id",this.contest_id),d=this,b.save(null,{success:function(b){var e;return e=d.contest_id?"/administration/contests/edit/"+d.contest_id+"/challenges/edit/"+b.get("id"):"/administration/challenges/edit/"+b.get("id"),c.router.navigate(e,{trigger:!0,replace:!0}),$(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Challenge")}})):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Challenge")):this.tab_view?this.tab_view.validate&&this.tab_view.validate()?(d=this,this.model.save(this.tab_view.getData(),{silent:!0,success:function(a){return d.$("button.save-challenge").removeAttr("disabled"),d.$("button.save-challenge").html("Save Challenge")}})):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Challenge")):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Challenge"))},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ChallengeEditView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/contest-edit-challenges",e.prototype.className="administration-contest-edit-challenges",e.prototype.events={"click button.add-challenge":"showAddChallengeDialog","dragstart div.split-table-body":"challengeDragStart","dragend div.split-table-body":"challengeDragEnd","dragover div.split-table-body":"challengeDragOver","dragleave div.split-table-body":"challengeDragLeave","drop div.split-table-body":"challengeDrop","click .change-weights":"changeWeight","keypress input.weight":"keypressInputWeight","click input.binary":"changeBinaryScoring","click input.dynamic":"changeDynamic","click .remove-challenge":"removeChallenge"},e.prototype.initialize=function(a){var b,d;return this.contest_id=a.contest_id,this.page=a.page,this.listenTo(this.model,"reset",this.render),b=this,d=function(a){return a.page=b.page,a.setContestId(b.model.get("id"))},this.collection=c.appController.getCollection("administration-challenges","page-"+this.page,d),this.listenTo(this.collection,"reset",this.render)},e.prototype.render=function(){return this.collection.sync_status?($(this.el).html(c.appController.template(this.template,this)({collection:this.collection,_collection:this.collection.toJSON(),contest_id:this.contest_id})),this.$(".help-me").length>0&&this.$(".help-me").popover({placement:"top"}),this):this},e.prototype.showAddChallengeDialog=function(a){var b,d;return d=this,b=c.util.ShowDialog({title:"Add Challenge",body:"          <div class='add-challenge-modal'>            <input type='text' class='add-challenge-input left-half'><button class='btn add-challenge-button right-half'>Add</button>          </div>        ",events:{"click button.add-challenge-button":function(a){var c;return b=a.data.that,c=b.$el().find("input.add-challenge-input").val(),b.destroy(),$.ajax({url:d.model.challenge_url(c),type:"POST",success:function(a){if(a.status)return d.collection.fetch({success:function(){return d.render()}})}})},"keypress input.add-challenge-input":function(a){if(a.which===13)return b=a.data.that,b.$el().find("button.add-challenge-button").click()}}}),b.render(),b.$el().find("input.add-challenge-input").autocomplete({minLength:2,source:function(a,b){return $.ajax({url:"/rest/administration/challenges/autocomplete?limit=4",data:{term:a.term},success:function(a){return b(a)}})},select:function(a,c){return b.$el().find("input.add-challenge-input").val(c.item.value),b.$el().find("button.add-challenge-button").click(),setTimeout(function(){return b.$el().find("input.add-challenge-input").val("")},100)}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append($("<a></a>").append($("<div class='challenge-autocomplete-container'>              <p class='challenge-autocomplete-name'>"+b.label+"</p>              <p class='challenge-autocomplete-slug'>"+b.value+"</p>            </div>"))).appendTo(a)},b.$el().find("input.add-challenge-input").focus()},e.prototype.challengeDragStart=function(a){return $(a.currentTarget).css("opacity","0.5")},e.prototype.challengeDragEnd=function(a){var b,c,d,e,f;return $(a.currentTarget).css("opacity","1"),f=parseInt($(a.currentTarget).attr("data-index")),d=parseInt($(".split-table-body[selected=selected]").attr("data-index")),b=!1,f!==d&&(c=$(".split-table-body[selected=selected]"),c.length===1&&(e=$(a.currentTarget).detach(),c.before(e),b=!0)),$(".split-table-body[selected=selected]").css("border-top","1px solid #e1e1e1"),$(".split-table-body[selected=selected]").removeAttr("selected"),this.updateIndexes(b)},e.prototype.updateIndexes=function(a){var b;_.each(this.$(".split-table-body"),function(a,b){return $(a).attr("data-index",b),$(a).find(".challenge-serial").html(b+1)});if(a)return b=_.map(_.reject(this.$(".split-table-body"),function(a){return $(a).hasClass("dummy")}),function(a,b){return parseInt($(a).attr("data-id"))}),$.ajax({url:this.model.update_challenges_order_url(),data:{order:b},type:"PUT"})},e.prototype.challengeDragOver=function(a){return a.preventDefault(),$(a.currentTarget).css("border-top","1px solid #999"),$(a.currentTarget).attr("selected","selected"),!1},e.prototype.challengeDragLeave=function(a){return $(a.currentTarget).css("border-top","1px solid #e1e1e1"),$(a.currentTarget).removeAttr("selected")},e.prototype.changeWeight=function(a){var b;return $(a.currentTarget).find("img").attr("src")!=="/assets/save.png"?($(a.currentTarget).find("img").attr("src","/assets/save.png"),this.$("span.weight").hide(),this.$("input.weight").show()):(b={},_.each(_.reject(this.$(".split-table-body"),function(a){return $(a).hasClass("dummy")}),function(a,c){return b[parseInt($(a).attr("data-id"))]=parseInt($(a).find("input.weight").val()),$(a).find("span.weight").html($(a).find("input.weight").val())}),$.ajax({url:this.model.update_challenge_weights_url(),data:{weights:b},type:"PUT"}),$(a.currentTarget).find("img").attr("src","/assets/write.png"),this.$("span.weight").show(),this.$("input.weight").hide())},e.prototype.keypressInputWeight=function(a){if(a.which===13)return $(".change-weights").click()},e.prototype.changeBinaryScoring=function(a){var b,c;return b=$(a.currentTarget).is(":checked"),c=$(a.currentTarget).attr("data-id"),$.ajax({url:this.model.update_flags_url(c),data:{binary_scoring:b},type:"PUT"})},e.prototype.changeDynamic=function(a){var b,c;return c=$(a.currentTarget).is(":checked"),b=$(a.currentTarget).attr("data-id"),$.ajax({url:this.model.update_flags_url(b),data:{dynamic:c},type:"PUT"})},e.prototype.removeChallenge=function(a){var b;return b=$(a.currentTarget).attr("data-id"),this.$(".split-table-body[data-id="+b+"]").remove(),this.updateIndexes(!1),$.ajax({url:this.model.association_url(b),type:"DELETE"})},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ContestEditChallengesView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/contest-edit-options",e.prototype.className="administration-contest-edit-options",e.prototype.initialize=function(a){return this.listenTo(this.model,"reset",this.render)},e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON()}))},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ContestEditOptionsView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/contest-edit-overview",e.prototype.className="administration-contest-edit-overview",e.prototype.initialize=function(a){var b=this;return this.action=a.action,this.parent=a.parent,this.listenTo(this.model,"reset",this.render),this.saveContest=function(){if(b.data_rendered&&b.changed())return b.parent.$("button.save-contest").click()},this.throttledSave=_.throttle(this.saveContest,1e3)},e.prototype.events={"focusout input.auto-save":"autoSave","focusout textarea.auto-save":"autoSave","keyup input#name":"updateSlug","click input#noendtime":"disableEndtime","click a.edit-slug":"editSlug","click a.cancel-update-slug":"cancelUpdateSlug","click a.update-slug":"updateSlug","keyup textarea.tagline":"updateTaglineMessage","keypress input.edit-slug":"editSlugEnterKeyBinding","keypress input#moderator":"addModEnterKeyBinding","click button.moderator-save":"addMod","click a.remove-moderator":"removeMod"},e.prototype.render=function(){var a,b;return $(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action})),a={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,autoCloseBrackets:!0,cursorScrollMargin:2,mode:"text/x-markdown",indentUnit:4,tabSize:4,lineWrapping:!0},this.$("textarea.description").get(0)&&(this.description_editor=CodeMirror.fromTextArea(this.$("textarea.description").get(0),a),this.description_editor.on("change",this.throttledSave)),this.action!=="create"&&this.$("#moderator").length>0&&(b=this,this.$("#moderator").autocomplete({minLength:2,source:function(a,b){return $.ajax({url:"/rest/hackers/autocomplete?limit=4",data:{q:a.term},success:function(a){return b(a)}})},select:function(a,c){return b.$("input#moderator").val(c.item.value),b.$("button.moderator-save").click(),setTimeout(function(){return b.$("input#moderator").val("")},100)}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append($("<a></a>").append($("<div class='hacker-container'>                  <div class='hacker-avatar'>                    <img height='50' width='50' class='pull-left avatar profile_avatar' src='/rest/hackers/"+c.util.trim(b.value)+"/avatar'>                  </div>                  <div class='hacker-details'>                    <p class='hacker-username'>"+b.value+"</p>                  </div>                </div>"))).appendTo(a)}),this.setData(this.model.toJSON()),this.setUpEvents()},e.prototype.autoSave=function(a){if(this.action!=="create")return this.saveContest()},e.prototype.setUpEvents=function(a){return this.$("input#startdate").datepicker(),this.$("input#enddate").datepicker(),this.$("input#starttime").timepicker({step:15,timeFormat:"H:i"}),this.$("input#endtime").timepicker({step:15,timeFormat:"H:i"})},e.prototype.disableEndtime=function(a){return $(a.currentTarget).is(":checked")?(this.cache_disabled_enddate=this.$("input#enddate").val(),this.cache_disabled_endtime=this.$("input#endtime").val(),this.$("input#enddate").val(""),this.$("input#endtime").val(""),this.$("input#enddate").attr("disabled","disabled"),this.$("input#endtime").attr("disabled","disabled"),this.$("input#enddate").addClass("disabled"),this.$("input#endtime").addClass("disabled")):(this.$("input#enddate").removeAttr("disabled"),this.$("input#endtime").removeAttr("disabled"),this.$("input#enddate").removeClass("disabled"),this.$("input#endtime").removeClass("disabled"),this.cache_disabled_enddate&&this.$("input#enddate").val(this.cache_disabled_enddate),this.cache_disabled_endtime&&this.$("input#endtime").val(this.cache_disabled_endtime)),this.autoSave()},e.prototype.getTimeStamps=function(a){var b,d,e,f,g,h,i,j;return h={},h.errors={},g=$("input#noendtime").is(":checked"),g?(d=null,h.valid_endtime=!0,h.valid_enddate=!0,h._endtime=null):(e=this.$("input#enddate").val(),f=this.$("input#endtime").val(),h.valid_endtime=c.util.validate_time(f),h.valid_enddate=c.util.validate_date(e),h.valid_enddate&&h.valid_endtime?h._endtime=c.util.getEpochTimeStampFromDateTime(e,f):h._endtime=!1),i=this.$("input#startdate").val(),j=this.$("input#starttime").val(),h.valid_starttime=c.util.validate_time(j),h.valid_startdate=c.util.validate_date(i),h.valid_startdate&&h.valid_starttime?h._starttime=c.util.getEpochTimeStampFromDateTime(i,j):h._starttime=!1,h.valid_starttime&&h.valid_enddate&&h.valid_endtime&&h.valid_enddate?h.valid_timestamps=!0:h.valid_timestamps=!1,h.valid_values=!1,h.valid_timestamps&&(h.valid_values=!0,b=Math.floor((new Date).getTime()/1e3),this.action==="create"&&h._starttime+3600<b&&(h.valid_values=!1,h.errors.values="Value of Start Date and Time should lie in future"),g||(this.action==="create"&&h._endtime<b&&h._endtime>h._starttime?(h.valid_values=!1,h.errors.values="Value of End Date and Time should lie in future"):h._endtime<h._starttime&&(h.valid_values=!1,h.errors.values="End Date & Time cannot be before Start Date & Time"))),h.valid_starttime||(h.errors.starttime="Start time is not valid"),h.valid_startdate||(h.errors.startdate="Start date is not valid"),h.valid_endtime||(h.errors.endtime="End time is not valid"),h.valid_enddate||(h.errors.enddate="End date is not valid"),h},e.prototype.validate=function(){var a,b,d;this.$(".error").html("").hide(),a=this.getTimeStamps();if(_.size(a.errors)===0&&this.$("input#name").val()!==""&&this.$("textarea.tagline").val().length<=this.model.max_limit.tagline)return!0;if(a.errors.starttime||a.errors.startdate)d=[],a.errors.starttime&&d.push(a.errors.starttime),a.errors.startdate&&d.push(a.errors.startdate),this.$(".error.starttime").html(c.util.getErrorList(d)).show();a.errors.values&&this.$(".error.starttime").html(c.util.getErrorList([a.errors.values])).show();if(a.errors.endtime||a.errors.enddate)b=[],a.errors.endtime&&b.push(a.errors.endtime),a.errors.enddate&&b.push(a.errors.enddate),this.$(".error.endtime").html(c.util.getErrorList(b)).show();return this.$("input#name").val()===""&&this.$(".error.name").html(c.util.getErrorList(["Name can't be empty"])).show(),!1},e.prototype.changed=function(){var a;return a=this.getTimeStamps(),this.model.get("starttime")!==a._starttime?!0:this.model.get("endtime")!==a._endtime?!0:this.$("input#name").val()!==this.model.get("name")?!0:this.$("textarea.tagline").val()!==this.model.get("tagline")?!0:this.description_editor.getValue()!==this.model.get("description")?!0:!1},e.prototype.getData=function(){var a,b;return a={},a.name=this.$("input#name").val(),b=this.getTimeStamps(),a.starttime=b._starttime,a.endtime=b._endtime,a.tagline=this.$("textarea.tagline").val(),a.tagline===""&&(a.tagline=null),a.description=this.description_editor?this.description_editor.getValue():null,a.description===""&&(a.description=null),a},e.prototype.setData=function(a){var b;if(this.action==="create")return;return a.name&&this.$("input#name").val(a.name),a.slug&&this.$("span.slug").html(a.slug),a.starttime&&(b=c.util.splitDate(c.util.getDateFromEpoch(a.starttime)),this.$("input#startdate").val(""+b.MM+"/"+b.dd+"/"+b.yyyy),this.$("input#starttime").val(""+b.hh+":"+b.mm)),a.endtime?(b=c.util.splitDate(c.util.getDateFromEpoch(a.endtime)),this.$("input#enddate").val(""+b.MM+"/"+b.dd+"/"+b.yyyy),this.$("input#endtime").val(""+b.hh+":"+b.mm)):(this.$("input#noendtime").prop("checked",!0),this.$("input#enddate").attr("disabled","disabled"),this.$("input#endtime").attr("disabled","disabled")),a.description&&this.description_editor&&this.description_editor.setValue(a.description),a.tagline&&(this.$("textarea.tagline").val(a.tagline),this.$("small.tagline").html(""+(this.model.max_limit.tagline-a.tagline.length)+" characters left")),this.checkRenderedData()},e.prototype.checkRenderedData=function(a){if(this.rendered()&&!this.changed())return this.data_rendered=!0},e.prototype.rendered=function(a){return this.$("input#name").length>0&&this.$("input#endtime").length>0&&this.$("input#enddate").length>0&&this.$("input#starttime").length>0&&this.$("input#startdate").length>0&&this.$("textarea.tagline").length>0&&this.description_editor?!0:!1},e.prototype.editSlug=function(a){return a.preventDefault(),$(a.currentTarget).hide(),this.$("p.slug").hide(),this.$("a.update-slug").show(),this.$("a.cancel-update-slug").show(),this.$("input.edit-slug").show().focus().val(this.$("input.edit-slug").val())},e.prototype.cancelUpdateSlug=function(a){return a.preventDefault(),$(a.currentTarget).hide(),this.$("p.slug").show(),this.$("a.update-slug").hide(),this.$("input.edit-slug").hide(),this.$("a.edit-slug").show()},e.prototype.updateSlug=function(a){var b;return a.preventDefault(),this.$(".slug.error").html("").hide(),b=this.$("input.edit-slug").val(),b!==this.model.get("slug")?_.isEmpty(b)?this.$(".slug.error").html("slug can't be empty").show():(this.model.set("slug",b),this.model.save(null,{silent:!0,success:function(a){if(a.status)return this.$("p.slug").html(b),this.$("a.cancel-update-slug").click()}})):this.$("a.cancel-update-slug").click()},e.prototype.editSlugEnterKeyBinding=function(a){if(a.which===13)return this.$("a.update-slug").click()},e.prototype.updateTaglineMessage=function(a){var b;return a.preventDefault(),b=this.$(a.currentTarget).val(),b.length>this.model.max_limit.tagline?this.$("small.tagline").html("Characters left: -"+(b.length-this.model.max_limit.tagline)).addClass("error").removeClass("hint"):this.$("small.tagline").html("Characters left: "+(this.model.max_limit.tagline-b.length)).addClass("hint").removeClass("error")},e.prototype.addModEnterKeyBinding=function(a){if(a.which===13)return this.$("button.moderator-save").click()},e.prototype.addMod=function(a){var b;return b=$("input#moderator").val(),this.addModContainer(b)&&this.addUserAsMod(b),this.$("input#moderator").val("")},e.prototype.addModContainer=function(a){return this.$(".moderator-container[data-username="+a+"]").length===0?(this.$(".moderators-list").append(c.util.genModContainer({name:$("input#moderator").val(),avatar:"/rest/hackers/"+a+"/avatar",role:"moderator",close:!0})),this.$(".moderators-list remove-moderator[data-username="+a+"]").bind("click",this.removeMod),!0):!1},e.prototype.removeMod=function(a){var b;return b=$(a.currentTarget).attr("data-username"),this.$(".moderator-container[data-username="+b+"]").remove(),this.removeUserAsMod(b)},e.prototype.addUserAsMod=function(a){var b;return b=this,$.ajax({url:this.model.mod_url(a),type:"POST",success:function(c){if(!c.status)return b.$(".moderator-container[data-username="+a+"]").remove()}})},e.prototype.removeUserAsMod=function(a){var b;return b=this,$.ajax({url:this.model.mod_url(a),type:"DELETE",success:function(c){if(!c.status)return b.addModContainer(a)}})},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ContestEditOverviewView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/contest-edit",e.prototype.className="administration-contest-edit",e.prototype.initialize=function(a){return this.action=a.action,this.tab=a.tab,this.contest_id=a.contest_id,this.page=a.page,this.listenTo(this.model,"reset",this.render)},e.prototype.events={"click a.change-tab":"changeTab","click button.save-contest":"saveContest"},e.prototype.render=function(){if(!this.model.sync_status)return this;$(this.el).html(c.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),action:this.action,tab:this.tab})),this.action==="create"?this.$("li[data-tab=overview]").addClass("active"):this.$("li[data-tab="+this.tab+"]").addClass("active");if(!this.prev_tab||this.tab!==this.prev_tab)this.prev_tab&&(this.tab_view.destroy(),this._subviews=[],this.$(".tab-body").html("<div class='tabs-body-inner'></div>")),this.tab==="options"?(this.tab_view=new c.Administration_ContestEditOptionsView({model:this.model,parent:this}),this.add_subview(this.tab_view)):this.tab==="challenges"?(this.tab_view=new c.Administration_ContestEditChallengesView({model:this.model,contest_id:this.contest_id,page:this.page,parent:this}),this.add_subview(this.tab_view)):(this.tab_view=new c.Administration_ContestEditOverviewView({model:this.model,action:this.action,parent:this}),this.add_subview(this.tab_view));return this.
prev_tab=this.tab,this.tab_view.setElement(this.$(".tabs-body-inner")).render(),this},e.prototype.changeTab=function(a){var b,d;a.preventDefault();if(!$(a.currentTarget).parent().hasClass("active"))return b=$(a.currentTarget).parent().attr("data-tab"),d="/administration/contests/"+this.action,this.contest_id&&(d+="/"+this.contest_id),b&&(d+="/"+b),c.router.navigate(d,!1),this.tab=b,this.render()},e.prototype.saveContest=function(a){var b,d;a.preventDefault();if(!$(a.currentTarget).is(":disabled"))return $(a.currentTarget).html("Saving..."),$(a.currentTarget).attr("disabled","disabled"),this.action==="create"?this.tab_view.validate&&this.tab_view.validate()?(b=new c.Administration_ContestModel(this.tab_view.getData()),b.save(null,{success:function(b){return c.router.navigate("/administration/contests/edit/"+b.get("id"),{trigger:!0,replace:!0}),$(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Contest")}})):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Contest")):this.tab_view?this.tab_view.validate&&this.tab_view.validate()?(d=this,this.model.save(this.tab_view.getData(),{silent:!0,success:function(a){return d.$("button.save-contest").removeAttr("disabled"),d.$("button.save-contest").html("Save Contest")}})):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Contest")):($(a.currentTarget).removeAttr("disabled"),$(a.currentTarget).html("Save Contest"))},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ContestEditView=a})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,a),e.prototype.template="administration/resource-list",e.prototype.className="administration-resource-list",e.prototype.initialize=function(a){return this.page=a.page,this.resource=a.resource,this.listenTo(this.collection,"reset",this.render)},e.prototype.render=function(){return $(this.el).html(c.appController.template(this.template,this)({collection:this.collection,_collection:this.collection.toJSON(),resource:this.resource})),c.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL(),this.collection.getCurrentPage()),this},e}(window.HR.GenericView),c=(e=window.HR)!=null?e:{},c.Administration_ResourceListView=a})}.call(this)