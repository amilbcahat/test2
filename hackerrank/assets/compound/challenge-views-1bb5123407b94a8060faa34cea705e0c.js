(function(){var e={}.hasOwnProperty,t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};jQuery(function(){var e,r,o;return e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="challenge",o.prototype.className="challenge-view container",o.prototype.events={"click a.hr-problem-link":"clickProblem","click a.hr-submissions-link":"clickSubmissions","click a.hr-leaderboard-link":"clickLeaderboard","click a.hr-forum-link":"clickForum","click a.hr-editorial-link":"clickEditorial","change #showPractice":"toggleLeaderboard","click .pagination a":"changePagination"},o.prototype.initialize=function(e){return this.activeTab=e.activeTab,this.paramPage=e.paramPage,this.customView=e.customView,this.includePractice=!0,this.leaderboardFilter=e.leaderboardFilter,this.contest=new r.model("contest"),this.contest.set("slug",this.model.get("contest_slug")),this.contest.cached(),this.listenTo(this.model,"reset",this.render),this.listenTo(this.contest,"reset",this.render)},o.prototype.setTab=function(e){return this.$("ul.nav-tabs li").removeClass("active"),this.$(e).addClass("active")},o.prototype.setProblem=function(){var e;return r.appController.setTitle(this.title_leading+this.default_title_middle+this.title_ending),e=this.model.get("contest_slug"),this.setTab("#problemTab"),this.body=new r.ChallengeTemplateView({model:this.model,contest:this.contest}),this.assign({".challenge-body":this.body}),null===e&&(e="master"),r.appController.set_contest_namespace(e),window.mixpanel_data={landing:!1,contest:e,page_type:"challengepage",challenge:this.model.get("slug")}},o.prototype.clickProblem=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()?(r.router.navigate(this.model.pageURL(),!1),this.setProblem()):void 0},o.prototype.setSubmissions=function(e){var t,o,i;return null==e&&(e=1),r.appController.setTitle(this.title_leading+" Submissions"+this.title_ending),this.activeTab="submissions",t=this.model.get("slug"),o=this.model.get("contest_slug"),this.submissions||(this.submissions=r.collection("submissions")),this.submissions.setPage(e),this.submissions.setContest(o),this.submissions.setChallenge(t),this.submissions.cached(),i=this,r.requires(["compound/submission-views"],function(){return i.body=new r.SubmissionsView({collection:i.submissions}),i.assign({".challenge-body":i.body}),i.setTab("#submissionsTab"),null===o&&(o="master"),r.appController.set_contest_namespace(o),window.mixpanel_data={landing:!1,contest:o,page_type:"submissions",challenge:t}})},o.prototype.clickSubmissions=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()+"/submissions"?(r.router.navigate(this.model.pageURL()+"/submissions",!1),this.setSubmissions()):void 0},o.prototype.setForum=function(e){var t,o,i,s;return null==e&&(e=1),r.appController.setTitle(this.title_leading+" Forum"+this.title_ending),this.activeTab="forum",s=this,t=this.model.get("slug"),o=this.model.get("contest_slug"),i=new r.QuestionCollection,i.page=e,i.setChallengeSlug(t),this.listenTo(i,"question:link:clicked",this.clickForumQuestion),r.requires(["compound/forum-views"],function(){return s.body=new r.ChallengeQuestionsView({challenge:s.model,collection:i}),s.assign({".challenge-body":s.body},s.setTab("#forumTab")),r.appController.set_contest_namespace(o),window.mixpanel_data={landing:!1,contest:o,challenge:t}})},o.prototype.clickForum=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()+"/forum/questions"?(r.router.navigate(this.model.pageURL()+"/forum/questions",!1),this.setForum()):void 0},o.prototype.setEditorial=function(){var e,t,o,i,s,n;return r.appController.setTitle(this.title_leading+" Editorial"+this.title_ending),this.activeTab="editorial",n=this,e=this.model.get("slug"),t=this.model.get("contest_slug"),i=r.profile(),s={challenge_slug:e},o=r.model("editorial",s).cached(),r.requires(["compound/extra-views"],function(){return n.body=new r.EditorialView({model:o,current_hacker:i}),n.assign({".challenge-body":n.body}),n.setTab("#editorialTab"),r.appController.set_contest_namespace(t),window.mixpanel_data={landing:!1,contest:t,challenge:e}})},o.prototype.clickEditorial=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()+"/editorial"?(r.router.navigate(this.model.pageURL()+"/editorial",!1),this.setEditorial()):void 0},o.prototype.clickForumQuestion=function(e){return r.router.navigate(this.model.pageURL()+"/forum/questions/"+e.id,!1),this.setForumQuestion(e)},o.prototype.setForumQuestion=function(e){var t;return t=new r.QuestionModel({challenge_slug:this.model.get("slug"),contest_slug:this.model.get("contest_slug"),id:e.id}),this.body=new r.QuestionView({challenge:this.model,model:t}),this.assign({".challenge-body":this.body}),this.setTab("#forumTab")},o.prototype.setLeaderboard=function(e){var t,o;return null==e&&(e=1),r.appController.setTitle(this.title_leading+" Leaderboard"+this.title_ending),t=this.model.get("contest_slug"),this.activeTab="leaderboard",this.leaderboard_collection||(this.leaderboard_collection=r.collection("leaderboard"),this.leaderboard_collection.setPage(e),this.leaderboard_collection.setContestSlug(t),this.leaderboard_collection.setChallenge(this.model.get("slug")),this.leaderboard_collection.setChallengeLeaderboard(),this.leaderboard_collection.setIncludePractice(this.includePractice),this.leaderboardFilter&&this.leaderboard_collection.setFiltersFromString(this.leaderboardFilter),this.leaderboard_collection.cached()),o=new r.LeaderboardView({collection:this.leaderboard_collection,profile:r.profile(),contest:this.contest,challenge:this.model}),this.setTab("#leaderboardTab"),this.body=o,this.assign({".challenge-body":this.body}),null===t&&(t="master"),r.appController.set_contest_namespace(this.model.get("contest_slug")),window.mixpanel_data={landing:!1,contest:t}},o.prototype.clickLeaderboard=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()+"/leaderboard"?(r.router.navigate(this.model.pageURL()+"/leaderboard",!1),this.setLeaderboard()):void 0},o.prototype.toggleLeaderboard=function(e){return this.leaderboard_collection.setIncludePractice(e.currentTarget.checked),this.leaderboard_collection.cached({fetch:!0})},o.prototype.changePagination=function(e){var t,o;return"leaderboard"===this.activeTab?(o=$(e.currentTarget).attr("data-page"),t=$(e.currentTarget).attr("href"),r.router.navigate(t,!1),this.leaderboard_collection.setPage(o),this.leaderboard_collection.cached({fetch:!0}),!1):void 0},o.prototype.render=function(){return this.model.sync_status&&this.contest.sync_status?this.model.get("body")?($(this.el).html(r.appController.template(this.template,this)({model:this.model})),this.header||(this.header=new r.ChallengeHeaderView({model:this.model,contest:this.contest,activeTab:this.activeTab})),this.assign({".challenge-header":this.header}),this.renderBody(),this):(this.model.cachedFetch({fetch:!0}),this):($(this.el).html(r.appController.viewLoader(64)),this)},o.prototype.renderBody=function(){return this.bootstrapTitle(),this.customView?(this.body=this.customView,this.assign({".challenge-body":this.body})):"leaderboard"===this.activeTab?this.setLeaderboard(this.paramPage||1):"submissions"===this.activeTab?this.setSubmissions(this.paramPage||1):"forum"===this.activeTab?this.setForum(this.paramPage||1):this.setProblem()},o.prototype.bootstrapTitle=function(){var e,t,o,i;return i=this.model.get("track"),t=null,e=null,i&&"master"===this.contest.get("slug")&&(o=i.slug,e=_.first(_.filter(r.contest().get("categories"),function(e){return t=_.first(_.filter(e.children,function(e){return e.slug===o})),null!==t&&void 0!==t})),t=_.first(_.filter(e.children,function(e){return e.slug===o}))),t&&t.name&&e&&e.name?(this.title_leading=this.model.get("name")+" :",this.default_title_middle=" Challenge",this.title_ending=" | "+t.name+" | "+e.name):(this.title_leading=this.model.get("name")+" :",this.default_title_middle=" Challenge",this.title_ending=" | "+r.contest().get("name"))},o}(window.HR.GenericView),r=null!=(o=window.HR)?o:{},r.ChallengeView=e})}).call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};jQuery(function(){var e,r;return e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="challenge-header",o.prototype.className="challenge-header-view",o.prototype.initialize=function(e){return this.activeTab=e.activeTab,this.contest=e.contest,this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this)},o.prototype.render=function(){var e,t;return $(this.el).html(r.appController.template(this.template,this)({model:this.model.toJSON(),contest:this.contest,baseURL:this.model.pageURL(),activeTab:this.activeTab})),this.$(".apply-blob")&&(this.apply_blob_view?this.apply_blob_view.setElement(this.$(".apply-blob")):(this.apply_blob_view=new r.ViewShiv({view:"apply-blob",model:this.model,el:this.$(".apply-blob")}),this.add_subview(this.apply_blob_view)),this.apply_blob_view.render()),e=this.model.breadCrumbs(),e.remove(e.last()),t=r.util.renderBreadCrumbs(this.$("div.breadcrumbs"),e),this.add_subview(t),this},o}(window.HR.GenericView),r=window.HR||{},r.ChallengeHeaderView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};jQuery(function(){var e,r;return e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="challenge-template",o.prototype.className="challenge-template-view",o.prototype.initialize=function(e){return null==e&&(e={}),this.contest=e.contest},o.prototype.render=function(){var e,t,o,i;return 0===this.$(".challenge-content").length&&$(this.el).html('<div class="challenge-content"></div><div class="challenge-request"></div><div class="challenge-response"></div>'),this.content_view||(this.content_view=new r.ChallengeContentView({parent:this,model:this.model,contest:this.contest})),this.request_view||(this.request_view=new r.ChallengeRequestView({parent:this,model:this.model})),this.response_view||(this.response_view=new r.ChallengeResponseView({parent:this,model:this.model})),this.assign({".challenge-content":this.content_view,".challenge-request":this.request_view,".challenge-response":this.response_view}),r.tour_going&&!this.dialog&&(r.tour_going=!1,o={},i={title:"Let's get started!"},e="<div class='plL plR onboarding_modal'> <p class='text-center mlT mlB'> This is the code editor. You can compile your code, view the  leaderboard, submissions, and discussions for the challenge, and submit for scoring when you are ready. Happy Hacking! <!--We have left some helpful hints in case you get stuck.--> </p> </div> <footer class='text-center'><a class='mlB btn btn-green btn-large js-close'>Start solving</a></footer>",t={"click .js-close":function(e){var t;return t=e.data.that,t.destroy()}},i.body=e,i.events=t,i.width=640,this.dialog=new r.util.ShowDialog(i,o),this.dialog.render()),this},o}(window.HR.GenericView),r=window.HR||{},r.ChallengeTemplateView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};jQuery(function(){var e,r;return e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="challenge-content",o.prototype.className="challenge-content-view",o.prototype.events=function(){return{"click .js-suggest-edits":"showSuggestionDiv","click .js-suggestion-save":"makeSuggestion","click .js-suggestion-cancel":"hideSuggestionDiv","click .facebook":"fbshare","click .twitter":"tweet","click .gplus":"gplus","change select.translations":"changeLanguage","click a.language-preference":"setLanguagepreference"}},o.prototype.initialize=function(e){return null==e&&(e={}),this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.contest=e.contest,this.get_recent_hackers(),this.current_hacker=r.profile()},o.prototype.get_recent_hackers=function(){var e;return e=this,$.ajax({url:""+this.model.restURL()+"/recent_hackers",success:function(t){return e.recent_hackers=t,e.render()}})},o.prototype.changeLanguage=function(e){var t,o,i;return $("#preference-msg").css("display","none"),t=$(e.currentTarget).val(),o=_.select(this.model.get("available_translations"),function(e){return e.language===t}),this.current_hacker.get("local_language")||$("#preference-msg").css("display","inline-block"),i=function(e){return function(){return 1===o.length?($(".challenge-text").html(o[0].body_html||e.model.get("body_html")),$(".hr_tour-challenge-name").html(o[0].name||e.model.get("name"))):($(".challenge-text").html(e.model.get("body_html")),$(".hr_tour-challenge-name").html(e.model.get("name")))}}(this),r.requires(["MathJax/MathJax"],i),i()},o.prototype.setLanguagepreference=function(e){var t;return t=$(".translations :selected").text().trim(),e.preventDefault(),$("#preference-msg").html("Saving language preference..."),this.current_hacker.set("local_language",t),this.current_hacker.save(null,{success:function(){return $("#preference-msg").html("Language preference updated."),setTimeout(function(){return $("#preference-msg").css("display","none")},3e3)},error:function(){return $("#preference-msg").html("There was some error while saving your preferences.")}})},o.prototype.render=function(){var e;return e=function(e){return function(){return $(e.el).html(r.appController.template(e.template,e)({model:e.model.toJSON(),contest:e.contest.toJSON(),baseURL:e.model.pageURL(),recent_hackers:e.recent_hackers})),e.setLanguageSelected()}}(this),r.requires(["MathJax/MathJax"],e),e(),this},o.prototype.fbshare=function(e){var t,r,o,i,s,n;return o=this.getPermaLink(),e.preventDefault(),n=600,t=350,r=screen.width/2-n/2,i=screen.height/2-t/2,s="https://www.facebook.com/sharer/sharer.php?s=100&p[url]="+encodeURIComponent(document.location.href)+"&p[title]="+encodeURIComponent(this.model.get("name"))+"&p[summary]="+encodeURIComponent(this.model.get("preview")),window.open(s,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+t+", top="+i+", left="+r),window.focus()},o.prototype.tweet=function(e){var t,r,o,i,s,n,l;return o=this.getPermaLink(),e.preventDefault(),l=600,t=350,r=screen.width/2-l/2,s=screen.height/2-t/2,i="Great challenge on @HackerRank. Try it here: "+o,n="https://twitter.com/intent/tweet?text="+encodeURIComponent(i),window.open(n,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+l+", height="+t+", top="+s+", left="+r),window.focus()},o.prototype.gplus=function(e){var t,r,o,i,s,n;return o=this.getPermaLink(),e.preventDefault(),n=600,t=350,r=screen.width/2-n/2,i=screen.height/2-t/2,s="https://plus.google.com/share?url="+o,window.open(s,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+t+", top="+i+", left="+r),window.focus()},o.prototype.hideSuggestionDiv=function(e){return e.preventDefault(),$("#suggestion-form").slideToggle(),$(".js-suggest-edits").addClass("in"),$(".alert.error").hide()},o.prototype.showSuggestionDiv=function(e){return e.preventDefault(),$("#suggestion-form").slideToggle(),$(".js-suggest-edits").removeClass("in")},o.prototype.makeSuggestion=function(e){var t,o;return e.preventDefault(),o=$("#suggestion").val().trim(),o.length<20?($(".alert.error").show().html("Your suggestion should contain at least 20 characters."),void 0):($(e.currentTarget).html("Processing Request...").attr("disabled","disabled"),t={suggestion:$("#suggestion").val(),challenge_id:this.model.get("id"),challenge_url:"www.hackerrank.com/"+Backbone.history.fragment,contest_slug:r.appController.get_current_contest_slug()},$.ajax({url:"/rest/challenge_edit_suggestion",type:"POST",data:t,success:function(t){var r,o,i,s;if($(e.currentTarget).removeAttr("disabled").html("Submit"),t.status)return $(".alert.error").hide(),$("#suggestion-form").slideToggle(),$(".js-suggest-edits").addClass("in");if(0===t.errors.length)r="Unknown Error";else if(1===t.errors.length)r=t.errors[0];else{for(r="<ul style='text-align: left;'>",i=t.errors.length-1,o=s=0;i>=0?i>=s:s>=i;o=i>=0?++s:--s)r+="<li>"+t.errors[o]+"</li>";r+="</ul>"}return $(".alert.error").show().html(r)},error:function(e,t,r){return 403===r?$(".alert.error").show().html("Please log in to suggest an edit."):$(".alert.error").show().html("Unknown Error")}}))},o.prototype.getPermaLink=function(){return""+document.location.protocol+"//"+document.location.host+r.appController.current_contest_namespace+"/challenges/"+this.model.get("slug")},o.prototype.setLanguageSelected=function(){var e;return e=this.model.get("preferred_language")?this.model.get("preferred_language"):"English",$("option[value="+e+"]").attr("selected","selected")},o}(window.HR.GenericView),r=window.HR||{},r.ChallengeContentView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};jQuery(function(){var e,r;return e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="challenge-request",o.prototype.className="challenge-request-view",o.prototype.initialize=function(e){return this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.parent=e.parent},o.prototype.render=function(){return $(this.el).html(r.appController.template(this.template,this)()),-1!==$.inArray(this.model.get("kind"),["code","game","client-server"])&&(this.codeeditor||(this.codeeditor=new r.CodeEditorView({model:this.model,parent:this})),this.assign({"div.codeeditor-wrapper":this.codeeditor})),this},o.prototype.unSetFullScreenView=function(){return this.fullscreen_view=void 0},o.prototype.setFullScreenView=function(e){return this.fullscreen_view=e},o.prototype.unrenderFullScreenView=function(){return this.fullscreen_view?this.fullscreen_view.unRender():void 0},o}(window.HR.GenericView),r=window.HR||{},r.ChallengeRequestView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};jQuery(function(){var e,r;return e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="challenge-response",o.prototype.className="challenge-response-view",o.prototype.initialize=function(){return this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this)},o.prototype.render=function(){return $(this.el).html("<h5 class='output-progress padded light-wrap hide mlT psT'></h5>\n<div class='output-area-wrap hide'>\n  <div class='output-area mlT psT' id='output-area'></div>\n</div>"),this.renderSubView(),this},o.prototype.renderSubView=function(){return this.compile_test?("game"===this.model.get("kind")?this.subview||(this.subview=new r.GameCompileTestView({model:this.compile_test,parent:this})):"code"===this.model.get("kind")?this.subview||(this.subview=new r.CodeCompileTestView({model:this.compile_test,parent:this})):"client-server"===this.model.get("kind")&&(this.subview||(this.subview=new r.ClientServerCompileTestView({model:this.compile_test,parent:this}))),this.assign({"#output-area":this.subview}),this.showHideViews()):this.clear()},o.prototype.setCompileTest=function(e){return this.compile_test&&(this.stopListening(this.compile_test),this.clear()),this.compile_test=e,this.listenTo(this.compile_test,"reset",this.showHideViews),this.listenTo(this.compile_test,"change:id",this.showHideViews),this.render()},o.prototype.showHideViews=function(){return this.compile_test.get("status")>0||_.isArray(this.compile_test.get("games"))&&this.compile_test.get("games").length>0?(this.$(".output-progress").addClass("hide"),this.$(".output-area-wrap").removeClass("hide")):(this.$(".output-progress").removeClass("hide"),_.isNumber(this.compile_test.get("id"))?this.compile_test.get("status_string")?this.$(".output-progress").html(this.compile_test.get("status_string")):this.$(".output-progress").html("Processing"):this.$(".output-progress").html("Uploading"))},o.prototype.showError=function(){return this.$(".output-progress").html("<p class='error'>"+this.compile_test.get("error")+"</p>")},o.prototype.clear=function(){return this.subview&&(this.subview.destroy(),this.subview=void 0),this.$(".output-area").addClass("hide")},o}(window.HR.GenericView),r=window.HR||{},r.ChallengeResponseView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};jQuery(function(){var e,r;return e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.el="body",o.prototype.template="fullscreen",o.prototype.initialize=function(e){return this.profile=r.profile(),this.parent=e.parent,this.template_view=this.parent.parent.parent},o.prototype.render=function(){var e,t;return t=this,0===$(this.el).find("#fullscreen-wrapper").length&&$(this.el).append("<div id='fullscreen-wrapper'></div>"),$(this.el).css("overflow-y","hidden"),$(this.el).find("#fullscreen-wrapper").show(),$(this.el).find("#fullscreen-wrapper").height($(window).height()).html(_.template('<div class="left-sidebar"> <div class="challenge-content"></div> </div> <div class="separator"></div> <div class="right-sidebar"> <div class="challenge-request"></div> <div class="challenge-response"></div> </div> <div class="clearfix"></div>')({model:this.model.toJSON()})),this.$left_sidebar=$(this.el).find("#fullscreen-wrapper .left-sidebar"),this.$right_sidebar=$(this.el).find("#fullscreen-wrapper .right-sidebar"),this.$separator=$(this.el).find("#fullscreen-wrapper .separator"),e=function(e){return function(){return e.$left_sidebar.height($(window).height()),e.$right_sidebar.height($(window).height()),e.$separator.height($(window).height())}}(this),e(),$(window).resize(e),this.template_view.request_view.setFullScreenView(this),this.assign({".left-sidebar .challenge-content":this.template_view.content_view,".right-sidebar .challenge-request":this.template_view.request_view,".right-sidebar .challenge-response":this.template_view.response_view}),$("div.separator").dragResize({activeColor:"#AAA",inactiveColor:"#DDD",resize:function(e){var r,o,i,s,n,l;return l=7,r=$(window).width(),i=e-3,n=r-(i+10),o=100*(i/r)+"%",s=100*(n/r)+"%",t.$left_sidebar.css("width",o),t.$right_sidebar.css("width",s)}}),this},o.prototype.unRender=function(){return $(this.el).css("overflow-y","visible"),$(this.el).find("#fullscreen-wrapper").length>0&&$(this.el).find("#fullscreen-wrapper").unbind().remove(),this.template_view.request_view.unSetFullScreenView(this),this.template_view.render()},o}(window.HR.GenericView),r=window.HR||{},r.FullScreenView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function o(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};jQuery(function(){var e,r,o;return e=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="codeeditor",o.prototype.className="codeeditor-view",o.prototype.initialize=function(e){return this.model=e.model,this.parent=e.parent,this.profile=r.profile(),this.forkable=!1,this.clipboardnotset=!0},o.prototype.events={"click #codeshell-wrapper a.fullscreen":"makeFullscreen","click #codeshell-wrapper a.restorefullscreen":"restoreFullscreen","click #codeshell-wrapper button.upload_file":"confirmUploadFileDialog","codeshellcompile #codeshell-wrapper":"compileTest","codeshellsubmit #codeshell-wrapper":"submitPopup"},o.prototype.render=function(){return 0===$(this.el).find("#codeshell-wrapper").length&&($(this.el).html("<div id='codeshell-wrapper'></div>"),r.appController.loadCodeMirror(function(e){return function(){return e.applyCodeshell(),e.isFullscreened?e.$(".fullscreen").click():void 0}}(this))),this},o.prototype.applyCodeshell=function(){var e;return e=this,this.$("#codeshell-wrapper").codeshell($.extend({showCustomInput:this.model.get("compile_and_test")&&this.model.get("custom_case"),showCompileTest:this.model.get("compile_and_test"),showSubmit:!0,showUploadCode:!0,showFullScreen:!0,showTheme:!0,foldCode:!0,compile_button_text:"Run Code",enableIntellisense:!0,enableVersioning:this.profile.isLoggedIn(),versionIds:this.model.get("version_ids")||[],versioningRestUrl:""+this.model.restURL()+"/versions",dynamicMode:!0,languages:this.model.get("languages"),autoSaveNamespace:"hr-cedit-contest:"+r.contest().get("id")+"-challenge:"+this.model.get("id"),loadmode:function(e){return function(t,o){return r.appController.loadCodeMirrorMode(o.lang,function(){return o.callback(),e.setClipboard()})}}(this)},this.model.getLanguageTemplates())),this.$("#codeshell-wrapper").codeshell("onChange",this.deleteMarkersOnSource)},o.prototype.makeFullscreen=function(){return this.isFullscreened||(this.$("#codeshell-wrapper").codeshell("saveLangCode"),this.fullscreen||(this.fullscreen=new r.FullScreenView({model:this.model,parent:this})),this.fullscreen.render(),this.isFullscreened=!0),this.$(".fullscreen").addClass("force-hide").removeClass("active-link"),this.$(".restorefullscreen").removeClass("force-hide").addClass("active-link")},o.prototype.restoreFullscreen=function(){return this.$("#codeshell-wrapper").codeshell("saveLangCode"),this.fullscreen.unRender(),this.isFullscreened=!1,this.$(".fullscreen").removeClass("force-hide"),this.$(".restorefullscreen").addClass("force-hide"),setTimeout(function(){return $("body").scrollTop($("#codeshell-wrapper").offset().top-50)},100)},o.prototype.confirmUploadFileDialog=function(){var e,t;return this.showConfirmUpload()?this.uploadFileDialog():(t=this,e=new r.util.ShowConfirmationDialog({title:"Attn: Upload file",body:"<p>Uploading a file will replace the content of your current codeeditor. Would you like to continue?</p> <p class='gray-text' style='font-size: 14px;'> <input id='confirm-upload-checkbox' type='checkbox' class='confirm-upload'> <label style='display: inline-block; font-weight: normal;' for='confirm-upload-checkbox'>skip this alert next time</label> </p>",buttons:[{name:"No","class":"hr_secondary-btn hr-dialog-button",callback:function(e){return t.toggleConfirmUpload(e.$body().find("input.confirm-upload").is(":checked")),this.setInactive(),e.destroy()}},{name:"Yes","class":"hr_primary-btn hr-dialog-button",callback:function(e){return t.toggleConfirmUpload(e.$body().find("input.confirm-upload").is(":checked")),this.setInactive(),e.destroy(),t.uploadFileDialog()}}]}),e.render())},o.prototype.toggleConfirmUpload=function(e){return $.cookie("code_upload_as_file",e===!1)},o.prototype.showConfirmUpload=function(){return"false"===$.cookie("code_upload_as_file")?!0:!1},o.prototype.uploadFileDialog=function(){var e,t,o,i,s;return s=this,i={},i["auto-detect"]="Auto Detect",i["current-language"]="Current Language",_.each(this.model.get("languages"),function(e){return i[e]=window.lang_display_mapping[e]}),o=[{name:"source_file",title:"Source File",type:"file"},{name:"language",title:"Language",type:"select",options:i},{name:"challenge_id",value:s.model.get("id"),type:"hidden"},{name:"contest_id",value:s.model.get("contest_id"),type:"hidden"},{name:"current_language",value:$("#codeshell-wrapper").codeshell("getOptions").language,type:"hidden"},{name:"is_file_upload",value:"1",type:"hidden"}],e=[{name:"Upload",callback:function(e){var t,o,i;return o=this,t=e.$form(),i=new FormData(t[0]),o.unSetFailedMsg(),$.ajax({url:"/rest/upload_respawn",type:"POST",data:i,cache:!1,contentType:!1,processData:!1,success:function(t){return o.setInactive(),t.ok?s.$("#codeshell-wrapper").codeshell("getOptions").lang_display_mapping[t.data.language]?r.appController.loadCodeMirrorMode(t.data.language,function(){return function(){return s.$("#codeshell-wrapper").codeshell("forkNewBuffer",{language:t.data.language,code:t.data.source}),e.destroy()}}(this)):o.failed("Language not supported for this challenge"):o.failed(t.message)}})}}],t=new r.util.ShowFormDialog({title:"Upload Dialog",width:650,enctype:"multipart/form-data",fields:o,buttons:e}),t.render()},o.prototype.compileTest=function(e,t){var o,i,s,n;if(0!==_.size(t)&&(n=this.parent.parent.response_view,i=this.parent.body,this.deleteMarkersOnSource(),o=$(e.currentTarget).find("button.bb-compile"),"disabled"!==o.attr("btn-disabled")&&!_.isEmpty($("#codeshell-wrapper").codeshell("getOptions").language)))return o.attr("btn-disabled","disabled"),o.addClass("disabled"),s=new r.CompileTestModel({code:t.code,language:t.language}),s.setChallenge(this.model),t.custominput?(s.set("customtestcase",!0),s.set("custominput",t.custominput)):s.set("customtestcase",!1),s.save(),s.bind("change:status",this.enableCompileTest,this),s.bind("change:error_markers",this.addMarkersOnSource,this),n.setCompileTest(s)},o.prototype.addMarkersOnSource=function(e,t){var r,o,i,s,n,l,a,c;if(t){window.error_marker_widgets||(window.error_marker_widgets=[]),r=this.$("#codeshell-wrapper").codeshell("getEditor"),n=t.head_code_lines,c=r.lineCount(),a=t.markers;for(i in a)o=a[i].message,s=a[i].line_number-n,c>=s&&(l=$("<div class='error-marker'><span class='error-marker-icon'>!</span>"+o+"</div>"),window.error_marker_widgets.push(r.addLineWidget(s-1,l[0],{above:!0})));return r.refresh()}},o.prototype.deleteMarkersOnSource=function(){var e,t;if(window.error_marker_widgets&&0!==window.error_marker_widgets.length){e=this.$("#codeshell-wrapper").codeshell("getEditor");for(t in window.error_marker_widgets)e.removeLineWidget(window.error_marker_widgets[t]);return e.refresh(),window.error_marker_widgets=[]}},o.prototype.enableCompileTest=function(e,t){var r;return t>0&&(this.$("#codeshell-wrapper").codeshell("enableCompileBtn"),r=e.get("error"))?this.parent.parent.response_view.showError():void 0},o.prototype.submitPopup=function(e,t){var o,i,s,n,l,a;return l=this,o=$(e.currentTarget).find("button.bb-submit"),"disabled"!==o.attr("btn-disabled")?(o.attr("btn-disabled","disabled"),o.addClass("disabled"),i=o.html(),$.inArray(this.model.get("id"),r.CHALLENGES_DISABLED)>=0||r.CONTEST_DISABLED?(n=new r.util.ShowSubmitDisabledDialog,n.render(),void 0):this.profile.isLoggedIn()?(o.html("Submitting"),s=new r.util.ShowConfirmationDialog({title:"Confirm Submission",body:"Are you sure you want to submit this code?",onDestroy:function(){return o.removeAttr("btn-disabled"),o.removeClass("disabled"),o.html(i)},buttons:[{name:"No, do not submit","class":"hr_secondary-btn hr-dialog-button",callback:function(e){return l.model&&l.model.get&&r.profile()&&mixpanel.push(["track","Submit Code",{challenge:l.model.get("slug"),contest:l.model.get("contest_slug"),kind:l.model.get("kind"),language:$("#codeshell-wrapper").codeshell("getOptions").language,fullscreen:l.isFullscreened,username:r.profile().username}]),this.setInactive(),e.destroy()}},{name:"Yes, submit my code","class":"hr_primary-btn hr-dialog-button",callback:function(e){var o,i;return l.model&&l.model.get&&r.profile()&&mixpanel.push(["track","Submit Code",{challenge:l.model.get("slug"),contest:l.model.get("contest_slug"),kind:l.model.get("kind"),language:$("#codeshell-wrapper").codeshell("getOptions").language,fullscreen:l.isFullscreened,username:r.profile().username}]),o=this,l.submitLock&&l.submitLock===!0?void 0:""!==$("#codeshell-wrapper").codeshell("getOptions").language?(this.setInactive(),l.submitLock=!0,$("#codeshell-wrapper").codeshell("deleteLangCode"),i=r.model("submission",{code:t.code,language:t.language,contest_slug:l.model.contest_slug||l.model.get("contest_slug")}),i.setChallenge(l.model),i.save(null,{success:function(t,i){return _gaq.push(["_trackPageview","/submitcode/"+(l.model.get("contest_slug")||l.model.contest_slug)+"/"+l.model.slug+"/"]),r.QUEUED_SUBMISSIONS||(r.QUEUED_SUBMISSIONS={}),r.QUEUED_SUBMISSIONS[t.get("id")]=!0,l.submitLock=!1,i.status?(e.destroy(),l.parent.unrenderFullScreenView(),t.set("kind",l.model.get("kind"),{silent:!0}),r.router.navigate(t.pageURL(),!0),$("html body").animate({scrollTop:0},300)):(o.setActive(),o.setFailedMsg(i.message))
},error:function(){return l.submitLock=!1,o.setActive(),o.setFailedMsg("Internal server error occured. Please try again.")}})):(this.setInactive(),e.showError("Select a language!"))}}]}),s.render()):(o.html("Logging in"),a=function(){return l.profile.isLoggedIn()?(o.removeAttr("btn-disabled"),o.removeClass("disabled"),o.click()):setTimeout(a,100)},s=new r.util.ShowLoginDialog({body_text:"Please login in order to submit",onDestroy:function(){return o.removeAttr("btn-disabled"),o.removeClass("disabled"),o.html(i)},success_callback:function(){return o.html(i),setTimeout(a,100)},show_sign_up_link:!0}),s.render(),void 0)):void 0},o.prototype.setClipboard=function(){var e,t,o;return this.codeshellwrapper=this.$("#codeshell-wrapper"),t=this.$("#codeshell-wrapper").codeshell("getEditor"),o=this,r.clipboard&&this.codeshellwrapper&&r.forkable&&t?(e={},e.language=r.clipboard.language,e.code=r.clipboard.code,o.codeshellwrapper.codeshell("setValueorFork",e),$("body").scrollTop($("#codeshell-wrapper").offset().top-50),delete r.clipboard):void 0},o}(window.HR.GenericView),r=null!=(o=window.HR)?o:{},r.CodeEditorView=e})}.call(this);
//# sourceMappingURL=challenge-views-110b35ceab3920aba3e6e536cdc6fa0f.js.map