(function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};jQuery(function(){var t,i,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){return this.on("error",function(t){return function(e,n){var o;return o=n&&n.responseText?JSON.parse(n.responseText):{message:""},void 0!==t.disableThrobber&&t.disableThrobber===!0||(i.util&&i.util.ajaxmsg&&i.util.ajaxmsg(o.message,!1,!0,1e4),!i.loadingButton)?void 0:i.util.inlineLoadingEnd(o)}}(this)),n.__super__.initialize.call(this,t)},n.prototype.save=function(t,e,o){return void 0===this.disableThrobber||this.disableThrobber!==!0?i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,n.__super__.save.call(this,t,e,o)},n.prototype.destroy=function(t){return void 0===this.disableThrobber||this.disableThrobber!==!0?i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,n.__super__.destroy.call(this,t)},n.prototype.parse=function(t,e){var o;return this.sync_status=!0,void 0===this.disableThrobber||this.disableThrobber!==!0?(i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("",!1,!0,0),i.loadingButton&&i.util.inlineLoadingEnd(t)):this.disableThrobber=!1,o=t&&t.model?t.model:t,n.__super__.parse.call(this,o,e)},n.prototype.fetch=function(){return this.trigger("initreset"),void 0===this.disableThrobber||this.disableThrobber!==!0?i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,Backbone.Model.prototype.fetch.apply(this,arguments)},n.prototype.setCaching=function(t){this.caching=t},n}(Backbone.Model),i=null!=(n=window.HR)?n:{},i.GenericModel=t})}).call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};jQuery(function(){var t,i,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){return this.sync_status=!1,this.render_once=!1,this.on("error",function(t){return function(e,n){var o;return o=JSON.parse(n.responseText),void 0!==t.disableThrobber&&t.disableThrobber===!0||(i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("",!1,!0,0),!i.loadingButton)?void 0:i.util.inlineLoadingEnd(o)}}(this)),n.__super__.initialize.call(this,t)},n.prototype.fetch=function(t){return null==t&&(t={}),this.trigger("initreset"),void 0===this.disableThrobber||this.disableThrobber!==!0?i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,Backbone.Collection.prototype.fetch.apply(this,arguments)},n.prototype.parse=function(t){return this.sync_status=!0,this.render_once=!1,t.metamodel&&(this.metamodel=t.metamodel),"number"==typeof t.total&&(this.total=t.total),"number"==typeof t.page&&(this.page=t.page),void 0===this.disableThrobber||this.disableThrobber!==!0?(i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("",!1,!0,0),i.loadingButton&&i.util.inlineLoadingEnd(t)):this.disableThrobber=!1,t.models},n.prototype.setCurrentPage=function(t){this.page=t},n.prototype.getCurrentPage=function(){return this.page},n.prototype.getTotal=function(){return this.total},n}(Backbone.Collection),i=null!=(n=window.HR)?n:{},i.GenericCollection=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e},i=function(t,e){return function(){return t.apply(e,arguments)}},n=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};jQuery(function(){var t,o,s,r,a,u,l,d,c,p,h,m,f,g,w,v,y,b;return c=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/instructions",n.prototype.className="candidate-instructions",n.prototype.initialize=function(t){return this.model=t.model},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({instructions:this.model.get("instructions")})),this},n}(window.HR.GenericView),p=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/question-list",n.prototype.className="candidate-qlist",n.prototype.events={"click .test-done":"testDone","click .next-section":"sectionNext","click .js-solvelink":"handleNav"},n.prototype.initialize=function(){return this.model=t.candidate.candidateAttemptModel,this.tid=t.candidate.candidateTestModel.get("unique_id"),this.aid=this.model.get("id")},n.prototype.render=function(){var e,i,n,o,s,r;return n=this.model.get("questions"),s=this.model.get("solve_mapping"),o=this.model.get("sections_mapping"),e=this.model.get("section"),$(this.el).html(t.appController.template(this.template,this)({section_count:o?o.length:1,current_section:e?e:1,footer_copyright:!!t.candidate.candidateTestModel.get("footer_copyright")})),o?(i=0,_.each(o,function(t){return function(o,r){var a;return a=t.getTable(n.slice(i,i+parseInt(o.questions)),i+1,s,r+1!==e),t.$("table.section"+(r+1)).html(a),i+=parseInt(o.questions)}}(this)),o.length>1&&e<o.length&&this.$("button.section-finish-"+e).removeClass("hidden")):(r=this.getTable(n,1,s),this.$("table.section1").html(r)),t.candidate.lastQuestionViewed&&setTimeout(function(e){return function(){return e.$(".qlist-"+t.candidate.lastQuestionViewed)[0]&&e.$(".qlist-"+t.candidate.lastQuestionViewed)[0].scrollIntoView()}}(this)),this},n.prototype.getTable=function(t,e,i,n){var o,s,r;return null==n&&(n=!1),r=this.tid,s=e,o="",_.each(t,function(t){var e,a;return a="",a+=1===s?"<tr class='border qlist-"+s+"''>":"<tr class='qlist-"+s+"'>",a+="<td width='5%' class='grey right'><span class='mdR'>Q"+s+"</span></td>",a+='<td width="46%"><a class="js-solvelink question-name" ',a+=n?">":"href='"+r+"/questions/"+t.unique_id+"'>",a+=t.name?t.name:"Question <em class='fnt-sz-small grey' style='font-weight: 500;'> &nbsp;&nbsp; "+_.escape(t.preview)+"..</em>",a+="</a></td>",a+="<td width='12%' class='fnt-sz-mid'>"+window.istreet.cfg.hrqn[t.type]+"</td>",e=n?"":"href='"+r+"/questions/"+t.unique_id+"'",a+=_.has(i,t.unique_id)?"<td width='12%' class='fnt-sz-mid'><span class='green customer-green-alternative'>submitted</span></td><td width='19%' class='right'><a "+e+" class='normal-underline display-inline-block margin-right-15 fnt-sz-mid js-solvelink' style='margin: 9px 11px 9px 0;''>Modify Submission</a></td>":"<td width='12%' class='fnt-sz-mid'>not answered</td><td width='19%' class='right'><a "+e+" class='btn btn-line margin-right-15 fnt-sz-mid js-solvelink'>Solve Question</a></td>",a+="</tr>",s++,o+=a}),o},n.prototype.handleNav=function(e){var i;return e.preventDefault(),i=this.$(e.currentTarget),i.attr("href")&&!t.candidate.ongoingQuestionNavigation?(t.candidate.ongoingQuestionNavigation=!0,setTimeout(function(){return t.candidate.ongoingQuestionNavigation=!1},1e4),t.candidate.attemptRefreshNeeded=!0,t.router.navigate(i.attr("href"),{trigger:!0,replace:!0})):void 0},n.prototype.testDone=function(){return t.util.confirm({title:"Confirm test close",message:"Once closed, you can no longer view or modify this test.\n\nAre you sure you are done, and want to close the test?",okButtonText:"Yes, close this test.",cancelButtonText:"No, go back.",okCallback:function(){return function(){return t.candidate.candidateTestModel.setAction("logout"),t.candidate.pingTimer&&clearInterval(t.candidate.pingTimer),t.candidate.candidateTestModel.save({how:"userclick"},{success:function(e){return t.router.navigate(""+e.get("unique_id")+"/redirect",{trigger:!0,replace:!0})}})}}(this)})},n.prototype.sectionNext=function(e){return t.util.confirm({title:"Confirm section close",message:"You will not be able access this section again.<br><br>Are you sure?",okButtonText:"Yes, move to next section.",cancelButtonText:"No, stay.",okCallback:function(i){return function(){return t.candidate.candidateAttemptModel.set("section_close",i.$(e.currentTarget).attr("data-section")),t.candidate.candidateAttemptModel.save(null,{success:function(){return t.router.navigate(""+t.candidate.candidateTestModel.get("unique_id")+"/redirect",{trigger:!0,replace:!0})},error:function(){return t.router.navigate(""+t.candidate.candidateTestModel.get("unique_id")+"/redirect",{trigger:!0,replace:!0})}})}}(this)})},n}(window.HR.GenericView),m=function(n){function o(){return this.getAnswerToSave=i(this.getAnswerToSave,this),o.__super__.constructor.apply(this,arguments)}return e(o,n),o.prototype.template="recruit/question-base",o.prototype.className="question-base",o.prototype.initialize=function(e){return this.model=e.model,this.tid=t.candidate.candidateTestModel.get("unique_id")},o.prototype.events={"click .ans-submit":"submitAnswer"},o.prototype.getAnswerToSave=function(){var t,e;return e=this.model.get("type"),_.contains(["code","approx","textAns","design"],e)?this.view?(t={type:e,answer:this.view.answer()},t.answer?t:null):null:null},o.prototype.submitAnswer=function(e){var i,n,o;return e.preventDefault(),i={type:this.model.attributes.type,answer:this.view.answer()},i.answer?(this.$(e.currentTarget).html("Submitting.."),this.$(e.currentTarget).attr("disabled","disabled"),n={qid:this.model.get("unique_id"),answer:i},o={url:"/recruit/attempts/"+t.candidate.candidateAttemptModel.get("id")+"/solves",data:n,dataType:"json",type:"POST",success:function(i){return function(n){var o;return i.$(e.currentTarget).html("Done, redirecting.."),n.error?i.showError(n.error):(o=i.model.get("nextqid")?""+i.tid+"/questions/"+i.model.get("nextqid"):""+i.tid+"/questions",t.candidate.attemptRefreshNeeded=!0,t.router.navigate(""+o,{trigger:!0,replace:!0}))}}(this),error:function(t){return function(i){t.$(e.currentTarget).html("Submit answer & continue"),t.$(e.currentTarget).removeAttr("disabled");try{return n=JSON.parse(i.responseText),n.error?t.showError(n.error):t.showError()}catch(o){return t.showError()}}}(this)},_.contains(["file_upload","code_upload"],this.model.get("type"))!==!0||_.isString(this.view.answer())||(n={qid:this.model.get("unique_id")},o.iframe=!0,o.processData=!1,o.data=n,o.files=this.view.answer()),$.ajax(o)):t.util.alert({title:"Submit error",message:"Please answer the question before submitting."})},o.prototype.showError=function(e){return null==e&&(e="Unable to save your answer."),t.util.candidatemsg(""+e+"<br><br>Click continue to refresh question listing.<br><br><a href='"+this.tid+"/questions' class='backbone btn'>Continue</a>",!1)},o.prototype._render=function(){var e,i,n,o;switch(this.question=this.model.attributes,$(this.el).html(t.appController.template(this.template,this)({tid:this.tid,question:this.question})),o=!0,this.question.type){case"code":case"approx":this.view=new t.RecruitCandidateCodingView({question:this.question});break;case"design":this.view=new t.RecruitCandidateDesignView({question:this.question,model:this.model});break;case"mcq":case"multiple_mcq":this.view=new t.RecruitCandidateMcqView({question:this.question});break;case"textAns":this.view=new t.RecruitCandidateSubjectiveView({question:this.question});break;case"complete":for(n=this.question.complete_string,e=0,i="<h4>Complete the blanks in the following question with the appropriate answer.</h4><br/>",i+=_.isEmpty(this.question.question)?"":this.question.question;-1!==n.search("{blank}");)n=n.replace("{blank}","<input type='text' class='complete-question' name='blank"+e+"'/>"),e+=1;i+=n,this.view=new t.RecruitCandidateCompleteView({question:this.question});break;case"file_upload":this.view=new t.RecruitCandidateFileUploadView({question:this.question});break;case"code_upload":this.view=new t.RecruitCandidateCodeUploadView({question:this.question});break;case"uml":case"electrical":this.view=new t.RecruitCandidateUMLView({question:this.question});break;default:o=!1}return this.question.name?this.$(".qtitle").html(""+this.question.name+" ("+window.istreet.cfg.hrqn[this.question.type]+")"):this.$(".qtitle").html(window.istreet.cfg.hrqn[this.question.type]),"complete"===this.question.type?this.$(".challenge-text").html(i):this.$(".challenge-text").html(this.question.question),o?this.$(".qcontent").html(this.view.render().el):(this.$(".qcontent").html("<center>This question type is not available.</center>"),this.$(".ans-submit").addClass("disabled")),t.candidate.lastQuestionViewed=this.model.get("qno"),"True"!==t.candidate.candidateTestModel.get("enable_copy_paste")&&$(document).on("cut copy paste contextmenu",function(t){return $(t.target).parents("#editor").length?void 0:t.preventDefault()}),setTimeout(function(){return t.util.scrollToTop()},200),this},o}(window.HR.GenericView),s=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/question-coding",n.prototype.className="question-coding",n.prototype.initialize=function(e){return this.question=e.question,this.test=t.candidate.candidateTestModel||e.test,this.codeshell=null,window.error_marker_widgets=[],t.candidate&&t.candidate.candidateAttemptModel?(this.aid=t.candidate.candidateAttemptModel.get("id"),t.appView.saveCodeOnNavigate=!0):this.aid="testing",this.autoSaveNamespace=e.disableLocalStorage&&e.disableLocalStorage===!0?null:""+this.aid+"-"+this.question.unique_id,this.compilingLock=!1,this},n.prototype.events={"codeshellcompile #editor":"compileAnswer","click #testcase-dl":"testcaseDownload"},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.show_template=!0,this.question.hide_template&&"true"===this.question.hide_template.toLowerCase()&&(this.show_template=!1),this.test.get("hide_template")&&"true"===this.test.get("hide_template").toLowerCase()&&(this.show_template=!1),t.appController.loadCodeMirror(function(t){return function(){return t.applyCodeshell()}}(this),function(){return function(){return t.util.candidatemsg("Unable to load code editor.<br><br> Check your internet connection, and refresh the page to fix this.",!1)}}(this)),this},n.prototype.testcaseDownload=function(){var e;return e="/recruit/attempts/"+t.candidate.candidateAttemptModel.id+"/questions/"+this.question.unique_id+"/testcases",t.util.downloadURL(e)},n.prototype.applyCodeshell=function(){var e;return e={languages:this.question.languages,language:"c",showFileTree:!1,autoSaveNamespace:this.autoSaveNamespace,lang_template:this.getLangDefaults(),showNonEditableHeadTail:this.show_template,lang_head_template:this.getLangHeads(),lang_tail_template:this.getLangTails(),compile_button_text:"Run Code",submit_button_text:"Submit code & Continue",showSubmit:!0,showCustomInput:this.showCustomInput(),dynamicMode:!0,lang_line_nos:this.question.line_nos,enableIntellisense:!0,loadmode:function(){return function(e,i){return t.appController.loadCodeMirrorMode(i.lang,function(){return i.callback()})}}(this)},("True"===this.test.get("hide_compile_test")||"True"===this.question.hide_compile_test)&&(e.showCompileTest=!1),"testing"===this.aid&&(e.showSubmit=!1,e.showCompileTest=!1),e.showCompileTest!==!1&&(e.showCompileTest=!0),this.$("#editor").codeshell(e),this.$("#editor").codeshell("refresh"),this.$("#editor").codeshell("onChange",function(t){return function(e,i){return t.deleteMarkersOnSource(e,i)}}(this)),this.set_answer(),setTimeout(function(t){return function(){return t.setDefaultText=!0}}(this),3e3)},n.prototype.getLangDefaults=function(){var t,e,i,n,o;for(e={},o=this.question.languages,i=0,n=o.length;n>i;i++)t=o[i],this.question[t+"_template"]&&(e[t]=this.question[t+"_template"]);return e},n.prototype.getLangHeads=function(){var t,e,i,n,o;if(e={},this.show_template)for(o=this.question.languages,i=0,n=o.length;n>i;i++)t=o[i],this.question[t+"_template_head"]&&(e[t]=this.question[t+"_template_head"]);return e},n.prototype.getLangTails=function(){var t,e,i,n,o;if(e={},this.show_template)for(o=this.question.languages,i=0,n=o.length;n>i;i++)t=o[i],this.question[t+"_template_tail"]&&(e[t]=this.question[t+"_template_tail"]);return e},n.prototype.showCustomInput=function(){return this.question.custom_testcase_allowed&&"False"===this.question.custom_testcase_allowed?!1:!0},n.prototype.compileAnswer=function(e,i){return i.code&&!$(".bb-compile").hasClass("disabled")?(i.custominput&&(i.customtestcase=!0),$(".bb-compile").addClass("disabled"),this.deleteMarkersOnSource(),t.candidate.ctmodel=new t.CandidateCompileTestModel,t.candidate.ctmodel.setAid(this.aid),t.candidate.ctmodel.setQid(this.question.unique_id),"runalltestcases"===e&&t.candidate.ctmodel.setAllCases(!0),t.candidate.ctview=new t.RecruitCandidateCompileTestView,this.$("#runstatus").html(t.candidate.ctview.render().el),t.util.scrollToBottom(1e3),t.candidate.ctmodel.save(i,{success:function(n){return function(){return t.candidate.ctview.setStatus("Uploaded. Waiting for results.."),t.candidate.ctloop=setTimeout(function(){return n.checkForResult(n,i,e)},2e3)}}(this),error:function(){return function(){return $(".bb-compile").removeClass("disabled"),t.candidate.ctmodel=null,t.candidate.ctview.setStatus("Could not compile as server is unreachable.")}}(this)})):void 0},n.prototype.checkForResult=function(e,i,n,o){return null==o&&(o=null),t.candidate.ctloop?(t.candidate.ctview.setStatus(o?o:"Processing.."),t.candidate.ctmodel.fetch({success:function(s){return function(r){var a,u,l,d,c,p,h,m,f,g,w,v;if(0===r.get("status"))return o=r.get("status_string")?r.get("status_string"):null,t.candidate.ctloop=setTimeout(function(){return e.checkForResult(e,i,n,o)},2e3),void 0;if(0!==r.get("status"))if($(".bb-compile").removeClass("disabled"),clearTimeout(t.candidate.ctloop),t.candidate.ctloop=null,r.get("result")>0)t.candidate.ctview.setStatus("Error.","red"),t.candidate.ctview.setCompileStatus("Compilation failed.",r.get("compilemessage")),e.addMarkersOnSource(r);else if(h=0,r.get("customtestcase"))t.candidate.ctview.setStatus("Compiled successfully.","orange"),l=r.get("stdin")[0],c=r.get("stdout")[0],p=r.get("stdout_debug")?r.get("stdout_debug")[0]:null,f="txt-green",t.candidate.ctview.addTestCase(1,l,c,p,null,"",f,m);else{for(v=r.get("testcase_status"),u=g=0,w=v.length;w>g;u=++g)l=v[u],c=r.get("stdout")[u],a=r.get("expected_output")[u],p=r.get("stdout_debug")?r.get("stdout_debug")[u]:null,d=r.get("testcase_message")[u],1===r.get("testcase_status")[u]?(f="txt-green",h++):f="txt-orange",r.get("score")&&_.isNumber(r.get("score")[u])&&(m=r.get("score")[u]),t.candidate.ctview.addTestCase(u+1,l,c,p,a,d,f,m);0===r.get("testcase_status").length?t.candidate.ctview.setStatus("Compiled successfully.","orange"):0===h?t.candidate.ctview.setStatus("No test cases passed.","red"):u>h?"runalltestcases"===n?t.candidate.ctview.setStatus("Compiled successfully. "+h+"/"+u+" test cases passed.","orange"):t.candidate.ctview.setStatus("Compiled successfully. "+h+"/"+u+" sample test cases passed.","orange"):"runalltestcases"!==n?(t.candidate.ctview.setStatus("Compiled successfully. All sample test cases passed!","green"),s.$(".bb-runall").show(),e.compileAnswer("runalltestcases",i)):t.candidate.ctview.setStatus("Compiled successfully. All test cases passed!","green")}return t.util.scrollToBottom(1e3)}}(this),error:function(){return function(){return t.candidate.ctmodel=null,$(".bb-compile").removeClass("disabled"),t.candidate.ctview.setStatus("Unable to fetch compile information from server.")}}(this)})):void 0},n.prototype.answer=function(){return this.$("#editor").codeshell("value")},n.prototype.set_answer=function(){return this.question.solve?this.$("#editor").codeshell("setValue",this.question.solve.answer):void 0},n.prototype.checkCopyPaste=function(e){var i;if(this.setDefaultText&&(i=e.text.join(""),i!==this.lastAddedText))return this.lastAddedText=i,"paste"===e.origin&&i.length>100?t.candidate.secureActivity.add({action:"paste",eid:9,qid:this.question.unique_id,insertTime:new Date}):void 0},n.prototype.addMarkersOnSource=function(t){var e,i,n,o,s,r,a,u,l;if(t.get("error_markers")){e=window.codeEditor,i=t.get("error_markers"),l=e.lineCount(),r=i.head_code_lines,u=i.markers;for(o in u)n=u[o].message,s=u[o].line_number,s-=r,l>=s&&(a=$("<div class='error-marker'><span class='error-marker-icon'>!</span>"+n+"</div>"),window.error_marker_widgets.push(e.addLineWidget(s-1,a[0],{above:!0})));return this.$("#editor").codeshell("refresh")}},n.prototype.deleteMarkersOnSource=function(e,i){var n,o;if(e&&i&&t.candidate&&t.candidate.candidateAttemptModel&&"True"===t.candidate.candidateAttemptModel.get("secure")&&this.checkCopyPaste(i),0!==window.error_marker_widgets.length){n=window.codeEditor;for(o in window.error_marker_widgets)n.removeLineWidget(window.error_marker_widgets[o]);return this.$("#editor").codeshell("refresh"),window.error_marker_widgets=[]}},n}(window.HR.GenericView),u=function(n){function o(){return this.hideLoading=i(this.hideLoading,this),o.__super__.constructor.apply(this,arguments)}return e(o,n),o.prototype.template="recruit/question-design",o.prototype.className="question-design",o.prototype.initialize=function(e){return this.question=e.question,this.test=t.candidate.candidateTestModel||e.test,this.codeshell=null,this.aid=t.candidate&&t.candidate.candidateAttemptModel?t.candidate.candidateAttemptModel.get("id"):"testing",this.autoSaveNamespace="testing"===this.aid?""+this.aid+"-"+this.test.id+"-"+this.question.id:""+this.aid+"-"+this.question.unique_id,"true"===this.question.multiple_files?this.initFileTree():this.multipleFiles=!1,this},o.prototype.events={"click .bb-compile":"renderAnswer"},o.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.$("#runstatus").load(this.hideLoading),this.show_template=!1,t.appController.loadCodeMirror(function(t){return function(){return t.applyCodeshell()}}(this),function(){return function(){return t.util.alert({message:"There was an error loading the code editor. Please refresh the page."})}}(this)),this},o.prototype.initFileTree=function(){var t,e;return e=this,t=function(t){var i;return i=null,i=t.node_path?t.node_path:$.jstree.reference("#filetree").get_path(t.node).join("/"),$.ajax({url:""+e.model.url()+"/files",type:"POST",data:{node:t.node,operation:t.operation,node_path:i,new_path:t.new_name?t.new_name:void 0},success:t.success,error:t.error})},this.multipleFiles={data:this.question.file_tree,onSave:function(e){return e.original&&e.original.readOnly?"":t({node:e,operation:"save",success:function(){},error:function(){return console.log("error")}})},fetch:function(e,i){return t({node:e.node,operation:"fetch",success:function(t){return e.node.original.fileContents=t.fileContents,i(e)},error:function(){return e.node.original.fileContents={code:"File not supported.",mime_type:"text/plain"},e.node.original.readOnly=!0,i(e)}})},onCreate:function(e,i){return"file"===e.type?t({node:e,node_path:$.jstree.reference("#filetree").get_path(i).join("/")+("/"+e.text),operation:"create",success:function(){},error:function(){return console.log("error")}}):void 0},onRename:function(e,i,n){return"file"===e.type||e.children.length>0?t({node:e,operation:"rename",new_name:n,success:function(){},error:function(){return console.log("error")}}):void 0},onDelete:function(e){return"file"===e.type||e.children.length>0?t({node:e,operation:"delete",success:function(){},error:function(){return console.log("error")}}):void 0}}},o.prototype.applyCodeshell=function(){var e,i,n;return e={showFileTree:this.multipleFiles,autoSaveNamespace:this.autoSaveNamespace,lang_template:this.getLangDefaults(),compile_button_text:"Render",submit_button_text:"Submit code & Continue",showSubmit:!0,languageChangeStyle:"tabs",showCustomInput:!1,dynamicMode:!0,enableIntellisense:!1,loadmode:function(){return function(e,i){return t.appController.loadCodeMirrorMode(i.lang,function(){return i.callback()})}}(this)},this.multipleFiles||(e.languages=this.question.languages,e.language="html",e.showNonEditableHeadTail=this.show_template),"testing"===this.aid&&(e.showSubmit=!1,e.showCompileTest=!0),e.showCompileTest!==!1&&(e.showCompileTest=!0),this.$("#editor").codeshell(e),this.multipleFiles||(this.$("#select-lang").addClass("hidden"),this.$("#select-lang-tabs").remove(),i="<div id='select-lang-tabs'> <div class='pull-left btn-group'>",this.question.languages.forEach(function(t){return i+="<a class='cursor btn btn-white "+(t===e.language?"active":void 0)+"' data-lang='"+t+"'>"+lang_display_mapping[t]+"</a>"}),i+="</div> </div>",n=$("<span class=' pull-left icon-help-circled txt-blue psT psB psL' data-toggle='tooltip' data-placement='right' title='The tabs on the left help you view the corresponding code segment.'></span>").tooltip(),i=$(i),i.find("a").on({click:function(t){return function(e){return e.preventDefault(),i.find("a").removeClass("active"),t.$("#editor").codeshell("saveLangCode"),t.$("#editor").codeshell("changeLanguage",t.$(e.currentTarget).addClass("active").data("lang"))}}(this)}),this.$("#editor > div.grey-header").prepend(i.append(n))),$("#render-help").remove(),this.$("#editor .bb-compile").parent().prepend($("<span id='render-help' class='pull-left icon-help-circled txt-blue psT psB psR' data-toggle='tooltip' data-placement='left' title='Press \"Render\" Button to view the visual output of your code. Press \"Submit code & Continue\" to submit your answer. '></span>").tooltip()),this.$("#editor").codeshell("refresh"),this.set_answer(),setTimeout(function(t){return function(){return t.setDefaultText=!0}}(this),3e3)},o.prototype.getLangDefaults=function(){var t,e,i,n,o;for(e={},o=this.question.languages,i=0,n=o.length;n>i;i++)t=o[i],this.question[t+"_template"]&&(e[t]=this.question[t+"_template"]);return e},o.prototype.hideLoading=function(){return this.$(".bb-compile").length?(this.setStatus("Document prepared successfully.","green"),this.$(".bb-compile").removeClass("disabled"),this.$("#runstatus-load").addClass("hidden"),this.$("#runstatus").removeClass("hidden")):void 0},o.prototype.renderAnswer=function(e,i){var n;if(!$(".bb-compile").hasClass("disabled"))return this.$(".bb-compile").addClass("disabled").data("status","sending"),"testing"!==this.aid?(t.candidate.dtmodel=new t.CandidateDesignTestModel,t.candidate.dtmodel.setAid(this.aid),t.candidate.dtmodel.setQid(this.question.unique_id)):(t.candidate.dtmodel=new t.RecruitDesignTestModel,t.candidate.dtmodel.setQid(this.question.id),t.candidate.dtmodel.setTid(this.test.id)),this.$("#runstatus").addClass("hidden"),this.$("#runstatus-load").removeClass("hidden"),i=this.answer(),this.setStatus("Preparing the document...","black"),"testing"!==this.aid?t.candidate.dtmodel.save(i,{success:function(e){return function(i){var n;return e.setStatus("Loading document.."),n=t.development?""+window.location.protocol+"//design."+window.location.host:""+window.location.protocol+"//design.hackerrank.com",e.$("#runstatus").attr("src",""+n+i.url()+"/"+i.get("id")),t.util.scrollToBottom(1e3)}}(this),error:function(e){return function(){return t.candidate.dtmodel=null,e.setStatus("There was an issue with rendering this code.","red")}}(this)}):(n=$('<form target="runstatus" action="'+t.candidate.dtmodel.url()+'" method="post">\n<input type="hidden" name="testing_design" />\n</form>'),n.find('input[name="testing_design"]').val(JSON.stringify(i)),n.submit())},o.prototype.answer=function(){return this.$("#editor").codeshell("value",!0)},o.prototype.setStatus=function(t,e){return null==e&&(e=""),this.$(".output-area-wrap").removeClass("hidden"),this.$(".status-msg").html(t),""!==e?this.$(".status-msg").addClass(e):void 0},o.prototype.set_answer=function(){var t;return!this.multipleFiles&&this.question.solve?(t={},_.each(this.question.solve.answer,function(e){return t[e.language]=e.code}),this.$("#editor").codeshell("setOption","lang_template",t),this.$("#editor").codeshell("setValue",{language:"html",code:t.html})):void 0},o.prototype.checkCopyPaste=function(e){var i;if(this.setDefaultText&&(i=e.text.join(""),i!==this.lastAddedText))return this.lastAddedText=i,"paste"===e.origin&&i.length>100?t.candidate.secureActivity.add({action:"paste",eid:9,qid:this.question.unique_id,insertTime:new Date}):void 0},o}(window.HR.GenericView),h=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/question-mcq",n.prototype.className="question-mcq",n.prototype.events={"click .clearall":"clearAll"},n.prototype.initialize=function(t){return this.question=t.question},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.set_answer(),this},n.prototype.clearAll=function(t){return t.preventDefault(),this.$('input[name="mcqopts"]').attr("checked",!1)},n.prototype.answer=function(){var t,e;return"mcq"===this.question.type?(e=this.$("input[name=mcqopts]:checked").val(),t=e?e:this.question.solve?-1:null,this.question.explanation_box&&"true"===this.question.explanation_box?{explanation:this.$("textarea[name=explanation]").val(),answer:t}:t):(e=[],_.each(this.$("input[name=mcqopts]:checked"),function(t){return function(i){return e.push(t.$(i).val())}}(this)),e.length?e:this.question.solve?-1:null)},n.prototype.set_answer=function(){var t,e,i,n,o,s;if(this.question.solve){if("mcq"!==this.question.type){for(o=this.question.solve.answer.answer,s=[],i=0,n=o.length;n>i;i++)t=o[i],s.push(this.$("input#mcqopts"+t).prop("checked",!0));return s}return this.$("input#mcqopts"+this.question.solve.answer.answer).prop("checked",!0),this.question.explanation_box&&"true"===this.question.explanation_box&&this.question.solve.metadata?(e=JSON.parse(this.question.solve.metadata),this.$("textarea[name=explanation]").val(e.explanation)):void 0}},n}(window.HR.GenericView),g=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/question-subjective",n.prototype.className="question-subjective",n.prototype.initialize=function(e){return this.question=e.question,t.candidate&&t.candidate.candidateAttemptModel?(this.aid=t.candidate.candidateAttemptModel.get("id"),this.autoSaveNamespace=""+this.aid+"-"+this.question.unique_id,t.appView.saveCodeOnNavigate=!0):(this.aid="testing",this.autoSaveNamespace=null)},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),t.appController.loadCodeMirror(function(t){return function(){return t.applyCodeshell(),t.set_answer()}}(this)),this},n.prototype.applyCodeshell=function(){var t;return t={languages:["text"],language:"text",autoSaveNamespace:this.autoSaveNamespace,showSubmit:!1,showCompileTest:!1,dynamicMode:!0,showCustomInput:!1,lang_line_nos:this.question.line_nos,loadmode:function(){return function(t,e){return e.callback()}}(this)},this.$("#editor").codeshell(t),this.$("#editor").codeshell("refresh")},n.prototype.answer=function(){return this.$("#editor").codeshell("value")},n.prototype.set_answer=function(){return this.question.solve?this.$("#editor").codeshell("setValue",{code:this.question.solve.answer.answer,language:"text"}):void 0},n}(window.HR.GenericView),l=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/question-fileupload",n.prototype.className="question-fileupload",n.prototype.initialize=function(t){return this.question=t.question},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.set_answer(),window.view=this,this},n.prototype.answer=function(){return $(":file").val()?$(":file"):this.question.solve&&this.question.solve.answer?this.question.solve.answer:!1},n.prototype.set_answer=function(){return this.question.solve?this.show_answer(this.question.solve):void 0},n.prototype.show_answer=function(e){var i,n,o,s;return n="",i=e.answer,e.metadata&&(s=JSON.parse(e.metadata),s.filename&&(n=s.filename)),o=t.util.getFileAnchor(i,n),this.$("#current_answer").html(o),this.$(".current-answer-section").removeClass("hidden")},n}(window.HR.GenericView),o=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/question-code-upload",n.prototype.className="question-code-upload",n.prototype.initialize=function(t){return this.question=t.question},n.prototype.events=function(){return{"click button[name=run-code]":"runCode"}},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.set_answer(),window.view=this,this
},n.prototype.enableRunCode=function(){return this.$("button[name=run-code]").removeClass("disabled").removeAttr("disabled")},n.prototype.disableRunCode=function(){return this.$("button[name=run-code]").addClass("disabled").attr("disabled",!0)},n.prototype.showError=function(e){return t.candidate.ctview.setStatus(e)},n.prototype.runCode=function(e){var i,n,o;return this.$("#runstatus").empty(),this.disableRunCode(),i=this.answer(),n={},n.customtestcase=!1,n.kind="project",n.language="maven",t.candidate.ctview=new t.RecruitCandidateCompileTestView,i?(this.$("#runstatus").html(t.candidate.ctview.render().el),t.util.scrollToBottom(1e3),o={url:"/recruit/attempts/"+this.aid+"/questions/"+this.question.unique_id+"/compile_tests?allcases="+!0,data:n,dataType:"json",type:"POST",success:function(i){return function(o){return o.error?(i.enableRunCode(),i.showError(o.error)):(t.candidate.ctmodel=new t.CandidateCompileTestModel,t.candidate.ctmodel.setAid(i.aid),t.candidate.ctmodel.setQid(i.question.unique_id),t.candidate.ctmodel.set("id",o.model.id),t.candidate.ctview.setStatus("Uploaded. Waiting for results.."),t.candidate.ctloop=setTimeout(function(){return i.checkForResult(i,n,e)},2e3))}}(this),error:function(e){return function(i){return e.enableRunCode(),t.candidate.ctview.setStatus(i.error)}}(this)},_.isString(i)?o.data.answer=i:(o.iframe=!0,o.processData=!1,o.files=i),$.ajax(o)):(this.showError("Please upload a file"),void 0)},n.prototype.checkForResult=function(e,i,n){return t.candidate.ctloop?(t.candidate.ctview.setStatus("Processing.."),t.candidate.ctmodel.fetch({success:function(o){return function(s){var r;return 0===s.get("status")?(t.candidate.ctloop=setTimeout(function(){return e.checkForResult(e,i,n)},2e3),void 0):(0!==s.get("status")&&(o.enableRunCode(),s.get("upload_url")&&(o.show_answer(s.get("upload_url")),o.uploaded_answer=s.get("upload_url")),clearTimeout(t.candidate.ctloop),t.candidate.ctloop=null,s.get("result")>0?(t.candidate.ctview.setStatus("Error.","red"),t.candidate.ctview.setCompileStatus("Compilation failed.",s.get("compilemessage"))):(r=0,s.get("signal")&&0===s.get("signal")[0]?(t.candidate.ctview.setStatus("Build successful","green"),t.candidate.ctview.setSuccessfulCompileStatus("Build successful.",s.get("compilemessage"))):(t.candidate.ctview.setStatus("Error.","red"),t.candidate.ctview.setCompileStatus("Build failed.",s.get("compilemessage"))))),t.util.scrollToBottom(1e3))}}(this),error:function(e){return function(){return t.candidate.ctmodel=null,e.enableRunCode(),t.candidate.ctview.setStatus("Unable to fetch compile information from server.")}}(this)})):void 0},n.prototype.answer=function(){return $(":file").val()?$(":file"):this.question.solve&&this.question.solve.answer?this.question.solve.answer:this.uploaded_answer?this.uploaded_answer:!1},n.prototype.set_answer=function(){return this.question.solve?this.show_answer(this.question.solve.answer):void 0},n.prototype.show_answer=function(e){var i;return i=t.util.getFileAnchor(e),this.$("#current_answer").html(i),this.$(".current-answer-section").removeClass("hidden")},n}(window.HR.GenericView),a=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/question-completesentence",n.prototype.className="question-complete",n.prototype.initialize=function(t){return this.question=t.question},n.prototype._render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this},n.prototype.postrender=function(){return setTimeout(function(t){return function(){return t.set_answer()}}(this))},n.prototype.answer=function(){return _.map($('input[name^="blank"]'),function(t){return $(t).val()})},n.prototype.set_answer=function(){var t;return this.question.solve?(t=0,_.each(this.question.solve.answer,function(e){return $('input[name="blank'+t+'"]').val(e),t+=1})):void 0},n}(window.HR.GenericView),y=function(n){function o(){return this.saveUml=i(this.saveUml,this),o.__super__.constructor.apply(this,arguments)}return e(o,n),o.prototype.template="recruit/question-uml",o.prototype.className="question-uml",o.prototype.initialize=function(e){return this.question=e.question,t.candidate&&t.candidate.candidateAttemptModel?(this.aid=t.candidate.candidateAttemptModel.get("id"),this.autoSaveNamespace=""+this.aid+"-"+this.question.unique_id,t.appView.saveCodeOnNavigate=!0):(this.aid="testing",this.autoSaveNamespace=null),this.umlStorageKey=this.autoSaveNamespace+"-"+this.question.hash,t.appController.loadGraphLibraries(function(t){return function(){return t.editor=new Editor}}(this),function(){return console.log("error")})},o.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),t.appController.loadCodeMirror(function(t){return function(){return t.applyCodeshell(),t.set_answer()}}(this)),t.appController.loadGraphLibraries(function(t){return function(){return t.initializeUMLView()}}(this),function(){return console.log("error")}),this},o.prototype.initializeUMLView=function(){var t;if(this.localSubmissionData=$.jStorage.get(this.umlStorageKey),this.xml="",this.xml=this.localSubmissionData?this.localSubmissionData.xml:null,this.question.custom_draw_menus)t=this.question.custom_draw_menus;else switch(this.question.type){case"uml":t=["uml"];break;case"electrical":t=["electrical"];break;default:t=[]}return this.ui=new EditorUi(this.editor,t,this.$("#geEditor")[0]),this.xml&&this.ui&&mxGraphFiles.load_xml(this.ui,this.xml),this.ui?setTimeout(this.saveUml,3e3):void 0},o.prototype.saveUml=function(){return this.saveUmlTimeout&&($.jStorage.set(this.umlStorageKey,mxGraphFiles.save(this.ui)),clearTimeout(this.saveUmlTimeout)),this.saveUmlTimeout=setTimeout(function(t){return function(){return t.saveUml()}}(this),3e3)},o.prototype.applyCodeshell=function(){var t;return t={languages:["text"],language:"text",autoSaveNamespace:this.autoSaveNamespace,showSubmit:!1,showCompileTest:!1,dynamicMode:!0,showCustomInput:!1,lang_line_nos:this.question.line_nos,loadmode:function(){return function(t,e){return e.callback()}}(this)},this.$("#editor").codeshell(t),this.$("#editor").codeshell("refresh")},o.prototype.answer=function(){var t;return t=mxGraphFiles.save(this.ui),{description:this.$("#editor").codeshell("value").code,svg:t.svg,xml:t.xml}},o.prototype.set_answer=function(){return this.question.solve?this.$("#editor").codeshell("setValue",{code:this.question.solve.answer.answer,language:"text"}):void 0},o}(window.HR.GenericView),d=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/footer",n.prototype.className="footer",n.prototype.initialize=function(){},n.prototype.render=function(){var e;return $("footer").show(),e=t.candidate.candidateTestModel.get("footer_copyright"),$(this.el).html(t.appController.template(this.template,this)({test:t.candidate.candidateTestModel.toJSON()})),this},n}(window.HR.GenericView),v=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}var o;return e(n,i),n.prototype.template="recruit/topbar",n.prototype.className="topbar",o=300,n.prototype.fullScreeenMode=function(){return screenfull&&!(t.candidate.candidateAttemptModel.get("attempt_done")&&t.candidate.candidateAttemptModel.get("attempt_done")===!0||(clearTimeout(this.fullscreenTimer),this.fullscreenTimer=setTimeout(function(t){return function(){return screenfull.isFullscreen||0!==$(".hr-dialog").length||(t.renderedDialog=!1),t.fullScreeenMode()}}(this),2e3),this.renderedDialog))?("undefined"==typeof this.renderedDialog&&document.addEventListener(screenfull.raw.fullscreenchange,function(e){return function(){return screenfull.isFullscreen||"logout"===t.candidate.candidateTestModel.action?void 0:(e.renderedDialog=!1,e.fullScreeenMode())}}(this)),this.renderedDialog=!0,t.util.alert({title:"Switch to full screen mode",message:"Please switch to full screen mode to proceed to test",callback:function(){return screenfull.enabled?(Backbone.History.started&&Backbone.history.stop(),Backbone.history.start({pushState:!1,root:"/tests"}),Backbone.history.navigate(""+t.candidate.candidateTestModel.get("unique_id")+"/questions",!0),screenfull.request()):void 0}})):void 0},n.prototype.secureMonitoring=function(){var e;if(!this.secureMonitoringActive&&t.candidate.candidateAttemptModel)return this.secureMonitoringActive=!0,e=function(e){return e.insertTime=new Date,t.candidate.secureActivity.add(e)},window.onblur=function(){return e({action:"blur",eid:7})},window.onfocus=function(){return e({action:"focus",eid:8})}},n.prototype.initialize=function(){return Offline.options={reconnect:{initialDelay:3},requests:!1,game:!1}},n.prototype.getTimeLeft=function(){var e;return e=t.candidate.candidateTestModel.get("sectional")?t.candidate.candidateAttemptModel.get("section_time_left"):t.candidate.candidateAttemptModel.get("time_left")},n.prototype.timerForSection=function(){return t.candidate.candidateTestModel.get("sectional")&&t.candidate.candidateAttemptModel.get("section_time_left")!==t.candidate.candidateAttemptModel.get("time_left")},n.prototype.setAlertClass=function(t){return t<this.TIME_LEFT_FOR_ALERT?$(".timerspan").addClass("alerttimer"):$(".timerspan").removeClass("alerttimer")},n.prototype.updateTimer=function(){var t;return t=this.getTimeLeft(),setTimeout(function(e){return function(){return $("#countdown-timer").countdown("destroy").countdown({until:t,layout:"{d<}{dn}{dl} {d>} {hnn}:{mnn}:{snn}",compact:!0}),$("#countdown-timer").countdown("option","onExpiry",e.testTimeUp),$("#countdown-timer").countdown("option","tickInterval",5),$("#countdown-timer").countdown("option","onTick",function(i){return 0===i[0]&&0===i[1]&&0===i[2]&&0===i[3]&&0===i[4]?(t=60*i[5]+i[6],e.setAlertClass(t)):void 0}),e.setAlertClass(t),e.timerForSection()?$("#timertag").html("to section end"):$("#timertag").html("to test end")}}(this))},n.prototype.render=function(){var e,i,n,o,s;return $(this.el).html(t.appController.template(this.template,this)({test:t.candidate.candidateTestModel,attempt:t.candidate.candidateAttemptModel,showalert:this.getTimeLeft<this.TIME_LEFT_FOR_ALERT})),t.candidate.candidateAttemptModel.get("secure")&&"True"===t.candidate.candidateAttemptModel.get("secure")?(this.secureMonitoring(),t.requires(["screenfull/dist/screenfull"],function(t){return function(){return t.fullScreeenMode()}}(this))):t.candidate.windowFocushookPresent||(t.candidate.windowFocushookPresent=!0,window.onfocus=function(){return function(){return t.candidate.windowBlurred=!1,t.candidate.showFocusMessage?(t.candidate.showFocusMessage=!1,t.util.alert({title:"Refresh needed",message:"The test state changed while you were away, and will be refreshed shortly.",timeout:15,callback:function(){var e;if(t.candidate&&t.candidate.candidateTestModel)return e=t.candidate.candidateTestModel.get("unique_id"),t.router.navigate(""+e+"/redirect",{trigger:!0,replace:!0})}})):void 0}}(this),window.onblur=function(){return function(){return t.candidate.windowBlurred=!0}}(this)),this.updateTimer(),t.candidate.pingTimer&&clearInterval(t.candidate.pingTimer),t.candidate.candidateAttemptModel.get("attempt_done")?t.appView.setTopbarView():(s=_.keys(t.candidate.candidateAttemptModel.get("solve_mapping")||{}).length,o=t.candidate.candidateAttemptModel.get("questions").length,this.$(".qdone").html(s),this.$(".qcount").html(o),this.$(".progress-done").css({width:Math.floor(100*s/o)}),e=6e4,i=1e4,n=this.getTimeLeft()<100?i:e,t.candidate.pingTimer=setInterval(function(e){return function(){var i,n,o,s,r;return n={pong:!0},t.candidate.currentQuestion&&(i=t.candidate.questionView.getAnswerToSave(),s=!1,i&&(s=!0,n.to_save_code=i,n.qid=t.candidate.questionView.model.get("unique_id"))),s&&t.candidate.questionView.view.$("#editor").codeshell("setStatusText","Saving draft.."),t.candidate.candidateTestModel?(r=t.candidate.candidateTestModel.get("sectional"),r&&(o=t.candidate.candidateAttemptModel.get("section")),t.candidate.candidateAttemptModel.save({data:n},{success:function(i){return s&&t.candidate.questionView.view.$("#editor").codeshell("setStatusText","Draft saved "+moment().format("hh:mm a")),t.candidate.windowBlurred&&(r&&i.get("section")!==o||i.get("attempt_done"))?t.candidate.showFocusMessage=!0:t.candidate.showFocusMessage?void 0:e.updateTimer()},error:function(){return s?t.candidate.questionView.view.$("#editor").codeshell("setStatusText","Unable to save draft."):void 0}})):void 0}}(this),n)),this},n.prototype.testTimeUp=function(){return t.candidate.pingTimer&&clearInterval(t.candidate.pingTimer),t.candidate.candidateTestModel.get("sectional")&&t.candidate.candidateAttemptModel.get("time_left")>30?($("#countdown-timer").countdown("destroy").html("Section done."),$(".timerspan").removeClass("alerttimer"),$("#timertag").empty(),t.candidate.showFocusMessage=!1,t.util.alert({title:"Section closed",message:"You have exceeded the time limit set for this section.<br><br>All answers you submitted before the time limit have been saved. You will automatically be moved to the next section shortly.",timeout:15,callback:function(){var e;return e=t.candidate.candidateTestModel.get("unique_id"),t.candidate.attemptRefreshNeeded=!0,t.router.navigate(""+e+"/redirect",{trigger:!0,replace:!0})}})):($("#countdown-timer").countdown("destroy").html("Test done."),$(".timerspan").removeClass("alerttimer"),$("#timertag").empty(),t.candidate.showFocusMessage=!1,t.util.alert({title:"Test finished",message:"Thank you for taking this test. You have exceeded the time limit set for this test.<br><br>All answers you submitted before the time limit have been saved.<br><br>You will shortly be redirected to the feedback page.",timeout:60,callback:function(){return t.candidate.candidateTestModel.setAction("logout"),t.candidate.candidateTestModel.save({how:"forced"},{success:function(){return function(e){return t.router.navigate(""+e.get("unique_id")+"/redirect",{trigger:!0,replace:!0})}}(this)})}}))},n}(window.HR.GenericView),f=function(i){function o(){return o.__super__.constructor.apply(this,arguments)}return e(o,i),o.prototype.template="recruit/sidebar",o.prototype.className="sbar",o.prototype.icon_types={QUESTION_ANSWERED:"nav",QUESTION_UNANSWERED:1,QUESTION_LIST:2},o.prototype.events={"click .js-navlink":"handleNav"},o.prototype.render=function(){var e;return t.candidate.ongoingQuestionNavigation=!1,e=Backbone.history.fragment,$(this.el).html(t.appController.template(this.template,this)),this.$(".fixed-nav").html(this.getTopIcons()),e.endsWith("questions")||e.endsWith("questions/")||(this.$(".questions-nav").html(this.getQuestionIcons()),t.candidate.lastQuestionViewed&&setTimeout(function(e){return function(){return e.$(".qnav-"+t.candidate.lastQuestionViewed)[0]&&e.$(".qnav-"+t.candidate.lastQuestionViewed)[0].scrollIntoView(),e.delegateEvents()}}(this))),this},o.prototype.handleNav=function(e){var i,n;return e.preventDefault(),i=this.$(e.currentTarget),i.hasClass("disabled")||t.candidate.ongoingQuestionNavigation?void 0:(n=i.attr("href"),this.$(".js-navlink").removeAttr("href"),this.$(".js-navlink").addClass("disabled"),i.removeClass("disabled"),t.candidate.attemptRefreshNeeded=!0,t.candidate.ongoingQuestionNavigation=!0,setTimeout(function(){return t.candidate.ongoingQuestionNavigation=!1},1e4),t.router.navigate(n,{trigger:!0,replace:!0}))},o.prototype.getTopIcons=function(){var e,i,n;return i="",n=Backbone.history.fragment,e="",(n.endsWith("questions")||n.endsWith("questions/"))&&(e="active"),i+='<li class="'+e+'"><a href="'+t.candidate.candidateTestModel.get("unique_id")+'/questions" class="backbone js-navlink"><i class="nav-icon icon-list-bullet-large"></i></a></li>',e="",(n.endsWith("instructions")||n.endsWith("instructions/"))&&(e="active"),i+='<li class="'+e+'"><a href="'+t.candidate.candidateTestModel.get("unique_id")+'/instructions" class="backbone js-navlink"><i class="nav-icon icon-help-circled"></i></a></li>'},o.prototype.getQuestionIcons=function(){var e,i,o,s,r,a,u,l,d,c,p;for(s="",a=function(t,e,i,n,o){var s,r,a,u,l;return r=t?"answered":"not-answered",u=e?"disabled":"",s=i?"active":"",a=e||i?"":"js-navlink",l=e||i?"":"href='"+n+"'",'<li class="qnav-'+o+" "+r+" "+u+" "+s+'">\n  <a '+l+' class="'+a+'">\n      <span class="quest-number">'+o+"</span>\n  </a>\n</li>"},l=t.candidate.candidateAttemptModel.get("questions"),o=_.keys(t.candidate.candidateAttemptModel.get("solve_mapping")),r=1,d=0,c=l.length;c>d;d++)u=l[d],p=u.unique_id.toString(),i=n.call(o,p)>=0,e=u.unique_id===t.candidate.currentQuestion,s+=u.disabled?a(i,!0,e,"",r):a(i,!1,e,""+t.candidate.candidateTestModel.get("unique_id")+"/questions/"+u.unique_id,r),r+=1;return s},o}(window.HR.GenericView),r=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/compiletest-base",n.prototype.className="ct-base",n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)),this},n.prototype.setStatus=function(t,e){return null==e&&(e=""),this.$(".status-msg").html(t),""!==e?this.$(".status-msg").addClass(e):void 0},n.prototype.setCompileStatus=function(t,e){return this.$(".compile-header").html(t),this.$(".compile-message").html(e),this.$("#error-message").removeClass("hide")},n.prototype.setSuccessfulCompileStatus=function(t,e){return this.$(".compile-header").html(t),this.$(".compile-message").html(e),this.$("#success-message").removeClass("hide")},n.prototype.addTestCase=function(e,i,n,o,s,r,a,u){var l;return l=new t.RecruitCandidateTestCaseView({tno:e,input:i,output:n,exp_output:s,st_class:a,compiler_msg:r,output_debug:o,score:u}),this.$(".testcases").append(l.render().el)},n}(window.HR.GenericView),w=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/compiletest-testcase",n.prototype.classname="test-case-wrap",n.prototype.initialize=function(t){return this.tno=t.tno,this.input=t.input,this.output=t.output,this.exp_output=t.exp_output,this.compiler_msg=t.compiler_msg,this.st_class=t.st_class,this.output_debug=t.output_debug,this.score=t.score},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({tno:this.tno,input:this.input,output:this.output,exp_output:this.exp_output,compiler_msg:this.compiler_msg,st_class:this.st_class,output_debug:this.output_debug,score:this.score})),this},n}(window.HR.GenericView),t=null!=(b=window.HR)?b:{},t.RecruitCandidateListView=p,t.RecruitCandidateQuestionView=m,t.RecruitCandidateCodingView=s,t.RecruitCandidateDesignView=u,t.RecruitCandidateMcqView=h,t.RecruitCandidateSubjectiveView=g,t.RecruitCandidateCompleteView=a,t.RecruitCandidateFileUploadView=l,t.RecruitCandidateUMLView=y,t.RecruitCandidateTopBarView=new v,t.RecruitCandidateFooterView=new d,t.RecruitCandidateSideBarView=new f,t.RecruitCandidateCompileTestView=r,t.RecruitCandidateTestCaseView=w,t.RecruitCandidateInstructionsView=c,t.RecruitCandidateCodeUploadView=o})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};jQuery(function(){var t,i,n,o,s,r,a;return i=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/login",n.prototype.className="candidate-login",n.prototype.events={"click .test-submit":"loginAction","click .test-submit-feedback":"submitFeedback","click .test-logout":"logoutTest","click .fblogin":"loginToFB","blur input.error":"removeError"},n.prototype.initialize=function(){},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({test:this.model.attributes})),this.model.get("facebook_login")&&!window.fbAdded&&(window.fbAdded=!0,$.getScript("/assets/fb.js")),this.model.get("logged_in")&&this.model.get("attempt_done")&&setTimeout(function(t){return function(){return t.$(".main-content").addClass("customer-feedback-box")}}(this)),$(this.el).find("div.gray").length>0&&setTimeout(function(t){return function(){return t.render()}}(this)),this},n.prototype.removeError=function(t){return $(t.target).removeClass("error").closest(".error").removeClass("error")},n.prototype.resetError=function(){var t;return t=this.$("#error-message"),t.find("header").html(""),t.find("p").html(""),this.$(".formgroup").removeClass("error").find("[name]").removeClass("error"),t.hide()},n.prototype.setError=function(t,e,i,n){var o,s,r;return null==i&&(i=null),null==n&&(n=null),o=this.$("#error-message"),o.find("header").html(t),o.find("p").html(e),i&&this.$("#error-message").addClass(i),n&&this.$("[name="+n+"]").addClass("error").closest(".formgroup").addClass("error"),o.show(),r=o.position().top,s=parseInt(r,10)/2,setTimeout(function(){return $("html,body").animate({scrollTop:r},s)},0)},n.prototype.loginAction=function(e){var i,n,o,s,r,a,u;if(this.disableButton("test-submit"),a=this,e.preventDefault(),this.resetError(),i=this.$("input[name=username]").val(),o=this.$("input[name=password]").val(),null==this.model.get("enable_acknowledgement")||"True"===this.model.get("enable_acknowledgement")){if(!this.$("#acknowledge").is(":checked"))return this.enableButton("test-submit"),!this.$("#acknowledge-alert").length>0&&this.$("#login-form").before('<div class="text-center alert error error-message" id="acknowledge-alert"> You cannot take this test without agreeing to the specified conditions. </div>'),void 0;this.$("#acknowledge-alert").remove()}return n=$("#test-login-form").serializeArray(),s={},_.each(n,function(t){return"gender"!==t.name?s[t.name]=t.value:("on"===$("input#gender-m:checked").val()&&(s.gender="m"),"on"===$("input#gender-f:checked").val()?s.gender="f":void 0)}),s.tauth_key=this.model.auth,$("#acknowledge").is(":checked")&&(s.acknowledge="on"),u=this.model.get("unique_id"),r={url:"/recruit/tests/"+u+"/login",data:s,type:"POST",success:function(e){return function(i){var n;return n="string"==typeof i?$.parseJSON($(i).text()):i,t.candidate.candidateTestModel.set(n.model),n.status?(t.util.trackTotango("Candidate Attempted","Tests"),n.model.attempt_done?t.router.navigate(""+u):t.router.navigate(""+u+"/questions",{trigger:!0,replace:!0}),void 0):(e.enableButton("test-submit"),a.setError(n.message.title,n.message.body,null,n.message.field_name))}}(this),error:function(t){return function(e){var i;return t.enableButton("test-submit"),i="string"==typeof e.responseText?$.parseJSON($(e.responseText).text()):e.responseText,i&&i.message?a.setError(i.message.title,i.message.body,i.message.alertclass,i.message.field_name):a.setError("Login error","There was an issue logging into the test")}}(this)},$(":file").length>0&&(r.iframe=!0,r.processData=!1,r.data=s,r.files=$(":file")),$.ajax(r),this},n.prototype.submitFeedback=function(){return this.disableButton("test-submit-feedback"),t.candidate.candidateAttemptModel.set("feedback_text",this.$(".feedback-text").val()),t.candidate.candidateAttemptModel.save(null,{success:function(t){return function(){return $.removeCookie("email",{path:"/"}),$.removeCookie("tid",{path:"/"}),t.enableButton("test-submit-feedback"),t.logoutTest()}}(this),error:function(){return this.enableButton("test-submit-feedback"),console.log("Could not submit feedback.")}})},n.prototype.logoutTest=function(){return t.clearCookies(),window.candidate={},this.$(".main-content").html("<h3>Thank you!</h3><br/><br/><p>The test is done. You may close this window, or head on to  <a href='//www.hackerrank.com'>hackerrank.com</a> and solve challenges.</p>")},n.prototype.disableButton=function(t){return this.$("button."+t).attr("disabled",!0).addClass("disabled")},n.prototype.enableButton=function(t){return this.$("button."+t).attr("disabled",!1).removeClass("disabled")},n.prototype.loginToFB=function(){return window.location=this.model.get("facebook_login_url")},n}(window.HR.GenericView),o=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/instructiontabs",n.prototype.className="ins-tabs",n.prototype.initialize=function(t){return this.subpage=t.subpage,this.public_url=t.public_url},n.prototype.events={"click .js-tablink":"tabClick","click .js-anchor":"anchorClick","click .js-gototop":"gotoTop"},n.prototype.gotoTop=function(t){return t.preventDefault(),$("html, body").animate({scrollTop:0},"slow")},n.prototype.anchorClick=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget).attr("name"),console.log(e,"a[name="+e+"]"),this.$("a[name="+e+"]")[1].scrollIntoView()},n.prototype.tabClick=function(e){var i,n,o;return e.preventDefault(),i=this.$(e.currentTarget),o=i.attr("id"),n=i.attr("href"),i.parent().parent().find("li").removeClass("active"),this.$("li#"+o).addClass("active"),this.$(".js-content").addClass("hidden"),this.$(".js-content-"+o).removeClass("hidden"),this.public_url?t.router.navigate(n,{replace:!0,trigger:!1}):void 0},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({subpage:this.subpage,public_url:this.public_url,test:t.candidate.candidateTestModel})),this},n}(window.HR.GenericView),n=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/fbresume",n.prototype.className="candidate-fb",n.prototype.events={"click .starttest":"startTest"},n.prototype.initialize=function(t){return this.model=t.model,this.data=t.data},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({test:this.model.attributes,data:this.data})),this},n.prototype.startTest=function(){var e,i;return e=this.$(".userprofile").val(),e?(i={type:"put",url:"/recruit/tests/"+this.model.get("unique_id")+"/fb_login",data:{profile:e},success:function(e){return function(){return t.router.navigate(""+e.model.get("unique_id")+"/questions",{trigger:!0,replace:!0})}}(this),error:function(e){return function(i){return window.candidatemessage=JSON.parse(i.responseText).message,t.router.navigate(""+e.model.get("unique_id")+"/message",{trigger:!0,replace:!0})}}(this)},$.ajax(i)):new t.util.ShowConfirmationDialog({body:"Please enter a short profile about yourself.",title:"Empty profile.",buttons:[{name:"OK",callback:function(t){return t.destroy()}}]}).render()},n}(window.HR.GenericView),s=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/candidatemessage",n.prototype.className="candidate-message",n.prototype.initialize=function(t){return this.model=t.model,this.message=t.message},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({test:this.model&&this.model.attributes||{},message:this.message})),this},n}(window.HR.GenericView),r=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/candidatemismatch",n.prototype.className="candidate-mismatch",n.prototype.events={"click .js-gotoother":"logoutGotoOther"},n.prototype.logoutGotoOther=function(e){return e.preventDefault(),t.clearCookies(),t.candidate.candidateTestModel=null,t.candidate.candidateAttemptModel=null,t.candidate.attemptRefreshNeeded=!1,t.router.navigate(this.$(e.currentTarget).attr("href"),{trigger:!0,replace:!0})},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({test:t.candidate.candidateTestModel.toJSON()})),this},n}(window.HR.GenericView),t=null!=(a=window.HR)?a:{},t.RecruitCandidateLoginView=i,t.RecruitFacebookResumeView=n,t.RecruitMessageView=s,t.RecruitMismatchView=r,t.RecruitInfoView=o})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};jQuery(function(){var t,i,n,o,s,r,a,u,l;return a=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.idAttribute="unique_id",i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),this.setCaching(!1),i.__super__.initialize.call(this,t,e)},i.prototype.setTidAuth=function(t,e){this.tid=t,this.auth=e},i.prototype.setAction=function(t){this.action=null!=t?t:"show"},i.prototype.url=function(){switch(this.action){case"login":return"/recruit/tests/"+this.tid+"/login?tauth_key="+this.auth;case"show":return"/recruit/tests/"+this.tid+"?tauth_key="+this.auth;case"logout":return"/recruit/tests/logout"}},i}(window.HR.GenericModel),i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),this.setCaching(!1),i.__super__.initialize.call(this,t,e)},i.prototype.setAid=function(t){return this.aid=t},i.prototype.url=function(){return"/recruit/attempts/"+this.aid},i}(window.HR.GenericModel),s=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.idAttribute="unique_id",i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),this.setCaching(!1),i.__super__.initialize.call(this,t,e)},i.prototype.setAid=function(t){this.aid=t},i.prototype.setQid=function(t){this.qid=t},i.prototype.url=function(){return"/recruit/attempts/"+this.aid+"/questions/"+this.qid},i}(window.HR.GenericModel),r=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),this.setCaching(!1),i.__super__.initialize.call(this,t,e)},i.prototype.setAttempt=function(t){this.aid=t},i.prototype.url=function(){return"/recruit/attempts/"+this.aid+"/solves/"},i}(window.HR.GenericModel),n=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),this.setCaching(!1),i.__super__.initialize.call(this,t,e)},i.prototype.setAid=function(t){this.aid=t},i.prototype.setQid=function(t){this.qid=t},i.prototype.setAllCases=function(t){this.allcases=t},i.prototype.url=function(){return this.id?"/recruit/attempts/"+this.aid+"/questions/"+this.qid+"/compile_tests/"+this.id:this.allcases?"/recruit/attempts/"+this.aid+"/questions/"+this.qid+"/compile_tests?allcases="+this.allcases:"/recruit/attempts/"+this.aid+"/questions/"+this.qid+"/compile_tests"},i}(window.HR.GenericModel),o=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),this.setCaching(!1),i.__super__.initialize.call(this,t,e)},i.prototype.setAid=function(t){this.aid=t},i.prototype.setQid=function(t){this.qid=t},i.prototype.url=function(){return"/recruit/attempts/"+this.aid+"/questions/"+this.qid+"/render"},i}(window.HR.GenericModel),t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),this.setCaching(!1),i.__super__.initialize.call(this,t,e)},i.prototype.setAid=function(t){this.aid=t},i.prototype.url=function(){return"/recruit/attempts/"+this.aid+"/logActivity"},i}(window.HR.GenericModel),u=null!=(l=window.HR)?l:{},u.CandidateTestModel=a,u.CandidateAttemptModel=i,u.CandidateSolveModel=r,u.CandidateQuestionModel=s,u.CandidateCompileTestModel=n,u.CandidateDesignTestModel=o,u.CandidateActivityModel=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};jQuery(function(){var t,i,n;return t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.model=window.HR.CandidateActivityModel,i.prototype.initialize=function(){return this.limit||(this.limit=10),this.page=1,this.total=0,this.on("add",this.pushEvent,this)},i.prototype.setAid=function(t){this.aid=t},i.prototype.pushEvent=function(t){return t.setAid(this.aid),t.save()},i.prototype.baseURL=function(){return""},i.prototype.restURL=function(){return""+this.baseURL()},i.prototype.getCurrentPage=function(){return this.page},i.prototype.setPage=function(t){this.page=t},i.prototype.getTotal=function(){return this.total},i.prototype.parse=function(t,e){return this.total=t.total,i.__super__.parse.call(this,t,e)},i}(window.HR.GenericCollection),i=null!=(n=window.HR)?n:{},i.CandidateActivityCollection=t})}.call(this),$(function(){$.fn.bootstrapFileInput=function(){this.each(function(t,e){var i=$(e);
if("undefined"==typeof i.attr("data-bfi-disabled")){var n="Browse";"undefined"!=typeof i.attr("title")&&(n=i.attr("title"));var o=$("<div>").append(i.eq(0).clone()).html(),s="";i.attr("class")&&(s=" "+i.attr("class")),i.replaceWith('<a class="file-input-wrapper btn'+s+'">'+n+o+"</a>")}}).promise().done(function(){$(".file-input-wrapper").mousemove(function(t){var e,i,n,o,s,r,a,u;i=$(this),e=i.find("input"),n=i.offset().left,o=i.offset().top,s=e.width(),r=e.height(),a=t.pageX,u=t.pageY,moveInputX=a-n-s+20,moveInputY=u-o-r/2,e.css({left:moveInputX,top:moveInputY})}),$(".file-input-wrapper input[type=file]").change(function(){var t;t=$(this).val(),$(this).parent().next(".file-input-name").remove(),t=$(this).prop("files")&&$(this).prop("files").length>1?$(this)[0].files.length+" files":t.substring(t.lastIndexOf("\\")+1,t.length),$(this).parent().after('<span class="file-input-name">'+t+"</span>")})})};var t="<style>.file-input-wrapper { overflow: hidden; position: relative; cursor: pointer; z-index: 1; }.file-input-wrapper input[type=file], .file-input-wrapper input[type=file]:focus, .file-input-wrapper input[type=file]:hover { position: absolute; top: 0; left: 0; cursor: pointer; opacity: 0; filter: alpha(opacity=0); z-index: 99; outline: 0; }.file-input-name { margin-left: 8px; }</style>";$("link[rel=stylesheet]").eq(0).before(t)});
//# sourceMappingURL=recruit-candidate-c9cc93c00a86f9409e4fefba6ca11068.js.map