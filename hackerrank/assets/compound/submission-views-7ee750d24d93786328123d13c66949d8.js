(function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return t=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.template="grouped-submissions",s.prototype.className="grouped-submissions-view",s.prototype.initialize=function(){return this.listenTo(this.collection,"reset",this.render),_.isObject(this.collection.challenge)?this.listenToOnce(this.collection.challenge("reset",this.render)):void 0},s.prototype.events={"click .expand":"expandChallenge"},s.prototype.expandChallenge=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).parents(".table-primary").find(".table-sub"),e.hasClass("block")?e.slideUp(200).removeClass("block").css("height: auto"):e.slideDown(200).addClass("block").css("height: auto")},s.prototype.render=function(){var t,e;return $(this.el).html(i.appController.template(this.template,this)({collection:this.collection})),t=i.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),this.add_subview(t),i.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL()+"grouped/page/",this.collection.getCurrentPage(),null,e=this.collection.limit),this.$(".submissions-list-wrapper").length>0&&(this.collection.sync_status?(this.$(".submissions-list-wrapper").html(""),_.each(this.collection.models,function(t){var e;return e=new i.GroupedSubmissionsListView({model:t}),this.$(".submissions-list-wrapper").append(e.render().el),this.add_subview(e)},this)):this.$(".submissions-list-wrapper").append(i.appController.viewLoader(64))),this},s}(window.HR.GenericView),i=null!=(s=window.HR)?s:{},i.GroupedSubmissionsView=t})}).call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return t=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.template="grouped-submissions-list",s.prototype.className="grouped-submissions-list-view",s.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},s.prototype.render=function(){var t,e;return this.model.get("challenge")&&(e=this.model.get("submissions"),t=e[0],e=e.slice(1),$(this.el).html(i.appController.template(this.template,this)({model:this.model.toJSON(),firstSubmission:t,challenge:this.model.challenge,submissions:e,ns:this.model.ns()}))),this.delegateEvents(),this},s}(window.HR.GenericView),i=null!=(s=window.HR)?s:{},i.GroupedSubmissionsListView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submissions",s.prototype.className="submissions-view container",s.prototype.initialize=function(t){return this.listenTo(this.collection,"reset",this.render),t.challenge&&(this.challenge=t.challenge),_.isObject(this.collection.challenge)?this.listenTo(this.collection.challenge,"reset",this.render):void 0},s.prototype.render=function(){var e,i;return $(this.el).html(t.appController.template(this.template,this)({collection:this.collection,challenge:this.collection.challenge,baseURL:this.collection.challenge.pageURL()})),e=t.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),this.add_subview(e),t.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL(),this.collection.getCurrentPage()),this.$(".submissions-list-wrapper").length>0&&(this.$(".submissions-list-wrapper").html(""),i=_.sortBy(this.collection.models,function(t){return-1*t.get("created_at")}),_.each(i,function(e){var i;return i=new t.SubmissionsListView({model:e,challenge:this.collection.challenge}),this.$(".submissions-list-wrapper").append(i.render().el),this.add_subview(i)},this)),this},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionsView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submissions-list",s.prototype.className="submissions-list-view",s.prototype.initialize=function(t){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.challenge=t.challenge},s.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({model:this.model,challenge:this.challenge})),this.delegateEvents(),this},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionsListView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submission-list",s.prototype.className="submission-list-view",s.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)()),this.delegateEvents(),this},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionListView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return t=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.template="chronological-submissions",s.prototype.className="chronological-submissions-view",s.prototype.initialize=function(){return this.listenTo(this.collection,"reset",this.render),_.isObject(this.collection.challenge)?this.listenToOnce(this.collection.challenge("reset",this.render)):void 0},s.prototype.render=function(){var t,e;return $(this.el).html(i.appController.template(this.template,this)({collection:this.collection})),t=i.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),this.add_subview(t),i.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL()+"all/page/",this.collection.getCurrentPage()),this.$(".submissions-list-wrapper").length>0&&(this.collection.sync_status?(this.$(".submissions-list-wrapper").html(""),e=_.sortBy(this.collection.models,function(t){return-1*t.get("created_at")}),_.each(e,function(t){var e;return e=new i.ChronologicalSubmissionsListView({model:t}),this.$(".submissions-list-wrapper").append(e.render().el),this.add_subview(e)},this)):this.$(".submissions-list-wrapper").append(i.appController.viewLoader(64))),this},s}(window.HR.GenericView),i=null!=(s=window.HR)?s:{},i.ChronologicalSubmissionsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return t=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.template="chronological-submissions-list",s.prototype.className="chronological-submissions-list-view",s.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},s.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({model:this.model,challenge:this.model.get("challenge"),ns:this.model.ns()})),this.delegateEvents(),this},s}(window.HR.GenericView),i=null!=(s=window.HR)?s:{},i.ChronologicalSubmissionsListView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submission",s.prototype.className="submission-view container",s.prototype.events={"click .copy_to_clipboard":"CopyToClipBoard"},s.prototype.initialize=function(t){return this.contest=t.contest,this.has_template=!1},s.prototype.setSubmissionModel=function(t){return this.model=t,this.listenTo(this.model,"reset",this.render),this.renderCurrentView()},s.prototype.setGameSetCollection=function(t){return this.collection=t,this.listenTo(this.collection,"reset",this.render),this.renderSubViews()},s.prototype.render=function(){return this.has_template?(this.renderCurrentView(),this.renderSubViews()):t.appController.getTemplate(this.template,function(t){return this.has_template=!0,this._template=t,this.renderCurrentView(),this.renderSubViews()},this),this},s.prototype.renderCurrentView=function(){var e,i,s,n,o,r;return this.rendered&&this.previous_model_id===this.model.get("id")||this._template&&this.model&&(s=t.util.isAvailable(this.model.get("contest_slug"))&&t.util.isAvailable(this.model.get("slug"))?t.appController.get_challenge_pageURL(this.model.get("contest_slug"),this.model.get("slug")):null,$(this.el).html(this._template({model:this.model.toJSON(),challengePageURL:s,_model:this.model,contest:this.contest.toJSON()})),this.$("#submission-code").length>0&&(e=this.$("#submission-code").get(0),n={lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,mode:lang_mime_mapping[this.model.get("language")],indentUnit:4,readOnly:!0,value:this.model.get("code")},t.appController.loadCodeMirrorMode(this.model.get("language"),function(t){return function(){return t.editor=CodeMirror(e,n)}}(this))),this.rendered=!0,this.renderSubViews(),this.previous_model_id=this.model.get("id"),this._ThrobberTimer&&window.clearTimeout(this._ThrobberTimer),this.model.get("slug")||(r=this,o=function(t){var e;return null==t&&(t=0),e=["fetching your submission","analysing statistics","generating report"],r.$(".gray").length>0?(r.$(".gray .msg").html(e[t%e.length]),r._ThrobberTimer=setTimeout(function(){return o(t+1)},1500)):void 0},this._ThrobberTimer=setTimeout(function(){return o()},500))),i=t.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.model.breadCrumbs()),this.add_subview(i),this},s.prototype.renderSubViews=function(){var e,i,s,n,o,r;return this.model&&this.model.sync_status!==!0||!this.rendered?this:(this.$(".apply-blob")&&(this.apply_blob_view?(this.apply_blob_view.setElement(this.$(".apply-blob")),this.add_subview(this.apply_blob_view)):this.apply_blob_view=new t.ViewShiv({view:"apply-blob",model:this.model,el:this.$(".apply-blob")}),this.apply_blob_view.render()),o=this.model.get("game_total"),e=this.model.get("game_played"),s=this.model.get("status_code"),i=0,0!==s&&(i+=10),o>0&&(i+=e/(1*o)*90),n=this,100===i&&(r=function(){return $(".progress-bar").next().fadeOut(),$(".progress-bar").fadeOut(),n.model.set("startLock",!0)},setTimeout(r,2e3)),this.stats||(this.stats=new t.SubmissionStatsView({parent:this})),this.stats.setModel(this.model),"game"===this.model.get("kind")&&(this.gameset||(this.gameset=new t.SubmissionGameSetView({parent:this})),this.gameset.setModel(this.model),this.gameset.setGameSetCollection(this.collection),this.manualgameplay||(this.manualgameplay=new t.SubmissionManualGamePlayView({contest:this.contest})),this.manualgameplay.setModel(this.model),this.manualgameplay.setGameSetCollection(this.collection),this.assign({"#submission-manual-game-play-wrapper":this.manualgameplay,"#submission-game-set-wrapper":this.gameset})),this.assign({"#submission-stats-wrapper":this.stats}),this.delegateEvents(),this)},s.prototype.renderManualGamePlay=function(){var t;return t=this},s.prototype.CopyToClipBoard=function(e){return e.preventDefault(),t.clipboard={language:this.model.get("language"),code:this.model.get("code")},window.HR.forkable=!0,t.router.navigate(""+t.appController.get_current_contest_namespace()+"/challenges/"+this.model.get("slug"),!0)},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submission-stats",s.prototype.className="submission-stats-view",s.prototype.events={"click a.js-download-test-case":"promptDialog"},s.prototype.initialize=function(){return $(".change-filter").live("click",this.updateSelect),this.render()},s.prototype.setModel=function(t){return this.model&&(this.model.unbind("change"),this.model.unbind("render")),this.model=t,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"render",this.render),this.render()},s.prototype.updateSelect=function(t){var e;return t.preventDefault(),e=$(t.target),$("#selected-filter span.select").html(e.text())},s.prototype.render=function(){var e;return this.model?(0===this.model.get("game_total")&&this.model.set("percent",0),e=this,t.requires(["compound/game-views","moment"],function(){var i,s,n;if(i=t.GameView.prototype.custom_player_count(),$(e.el).html(t.appController.template(e.template,e)({model:e.model.toJSON(),singlePlayer:!!i[e.model.get("codechecker_handle")]})),"game"===e.model.get("kind")){switch(s=[{id:0,text:"All "+e.model.get("game_played")+" Games Played",slug:"all"},{id:1,text:""+e.model.get("game_won")+" Games Won",slug:"won"},{id:2,text:""+e.model.get("game_lost")+" Games Lost",slug:"lost"},{id:3,text:""+e.model.get("game_mid_range")+" Games Tied",slug:"tied"}],n=0,e.model.get("filter")){case"won":n=1;break;case"lost":n=2;break;case"tied":n=3}return $("#submissions-filter").select2({data:s,width:"off"}),$("#submissions-filter").select2("data",s[n]),$("#submissions-filter").bind("change",function(){return Backbone.history.navigate(""+t.appController.get_current_contest_namespace()+"/submissions/game/"+e.model.get("id")+"/"+$("#submissions-filter").select2("data").slug,!0)})}}),this.delegateEvents(),this):void 0},s.prototype.promptDialog=function(t){var e,i,s;return t.preventDefault(),e=$(t.target).attr("testcase-num"),i=this,s=this.model.toJSON(),$.ajax({url:"/rest/contests/"+i.contestSlug()+"/testcases/"+s.challenge_id+"/"+e+"/permission",type:"GET",success:function(t){return t.permission===!0?i.renderDownloadTestCase(e):t.permission===!1?i.renderPurchaseTestCase(e):void 0}})},s.prototype.renderPurchaseTestCase=function(e){var i,s,n;return s=this,n=this.model.toJSON(),i={title:"Purchase TestCase",body:"<center><p> Do you wish to purchase test case #"+e+" of "+n.name+" for 5 hackos?</p> <p class='block-center'><a href='#' class='btn btn-primary js-buy-test-case' data-analytics='Confirm Purchase Testcase'>Yes</a>&nbsp;&nbsp;&nbsp; <a href='#' class='btn btn-primary js-dont-buy' data-analytics='Cancel Purchase Testcase'>No</a></p> <div class='formgroup clearfix m'> <div class='alert error hide'></div> </div>",events:{"click a.js-buy-test-case":function(t){return function(i){var o;return i.preventDefault(),"disabled"!==$(i.currentTarget).attr("disabled")?(o=$(i.currentTarget).html(),$(i.currentTarget).html("Buying testcases..."),$(i.currentTarget).attr("disabled","disabled"),s=t,$.ajax({url:"/rest/contests/"+s.contestSlug()+"/testcases/"+n.challenge_id+"/"+e+"/purchase",type:"PUT",beforeSend:function(t){return t.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},success:function(){return s.dialog.destroy(),s.renderDownloadTestCase(e)},error:function(){return $(".alert.error").show().html("Insufficient Hackos"),$(i.currentTarget).html(o),$(i.currentTarget).removeAttr("disabled")}})):void 0}}(this),"click a.js-dont-buy":function(t){return function(e){return e.preventDefault(),t.dialog.destroy()}}(this)}},this.dialog=new t.util.ShowDialog(i),this.dialog.render()},s.prototype.renderDownloadTestCase=function(e){var i,s,n;return s=this,n=this.model.toJSON(),i={title:"Download TestCase #"+e,body:"<center><p> Download Test Case #"+e+" of "+n.name+"</p> <p class='block-center'><a href='#' class='btn btn-primary js-download-test-case' command='testcaseinput' data-analytics='Download Input'>Input</a>&nbsp;&nbsp;&nbsp; <a href='#' class='btn btn-primary js-download-test-case' command='testcaseoutput' data-analytics='Download Output'>Output</a></p> <div class='formgroup clearfix m'> <div class='alert error hide'></div> </div>",events:{"click a.js-download-test-case":function(){return function(t){var i;return i=$(t.target).attr("command"),t.preventDefault(),window.open("/rest/contests/"+s.contestSlug()+"/testcases/"+n.challenge_id+"/"+e+"/"+i,"_blank")}}(this)}},this.dialog=new t.util.ShowDialog(i),this.dialog.render()},s.prototype.contestSlug=function(){return this.model.get("contest_slug")},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionStatsView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submission-success",s.prototype.className="submission-success-view",s.prototype.initialize=function(){return this.hacker=t.profile()},s.prototype.events={"click a.close":"destroy","click a.fb-share":"fbShare","click a.tweet":"tweet"},s.prototype.render=function(){var e,i;return i=Math.floor(100*this.model.score)/100||0,i>0?(e="&nbsp;&nbsp;&nbsp;\n<a class='fb-share' style='cursor:pointer;'><img src='/assets/fb-share.png'></a>\n&nbsp;&nbsp;&nbsp;\n<a class='tweet' style='cursor:pointer;'><img src='/assets/tweet-filler.png'></a>\n<a class='hr_tour-leaderboard backbone' href='"+t.appController.get_current_contest_namespace()+"/challenges/"+this.model.slug+"/leaderboard'>Go to leaderboard</a>",window.touring&&t.requires(["jquery-plugins/jquery.joyride"],function(){return function(){return setTimeout(function(){return $("#hr_tour-intro-part-2-tour").joyride({autoStart:!0,tipAnimation:"fade"})},1500)}}(this))):e=":(\n&nbsp;\n<a class='backbone' href='"+t.appController.get_current_contest_namespace()+"/challenges/"+this.model.slug+"'>Try Again</a>",$(this.el).html("<p class='container'>\n  <center>\n    <span>\n      Your `"+this.model.name+"`\n      <a class='backbone' href='"+t.appController.get_current_contest_namespace()+"/submissions/"+this.model.kind+"/"+this.model.id+"'>submission</a>\n      got "+i+" points.\n    </span>\n    "+e+"\n  </center>\n</p>\n<a class='close' style='cursor: pointer;color:red'>&times;</a>"),$(this.el).fadeIn(),this.delegateEvents(),this},s.prototype.destroy=function(t){return t&&t.preventDefault&&t.preventDefault(),$(this.el).remove(),s.__super__.destroy.call(this)},s.prototype.fbShare=function(t){var e,i;return t.preventDefault(),i=this.getURL(),e=Math.round(100*this.model.score)/100||0,window.HR.appController.facebook_share(i,"I scored "+e+" points in the "+this.model.name+" challenge on HackerRank "+i)},s.prototype.tweet=function(e){var i,s;return i=100*Math.round(this.model.score)/100||0,e.preventDefault(),s=this.getURL(),t.appController.twitter_share("I scored "+i+" points in the "+this.model.name+" challenge on HackerRank "+s)},s.prototype.getURL=function(){var e,i;return e=document.location.protocol+"//"+document.location.host,i=""+t.appController.get_current_contest_namespace()+"/submissions/"+this.model.kind+"/"+this.model.id,e+i},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionSuccessView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submission-game-set",s.prototype.className="submission-game-set-view",s.prototype.initialize=function(e){return this._collection=new t.GameSetCollection,this.parent=e.parent,this.gamesetlist={},this.has_template=!1,this.compareCollection()},s.prototype.setModel=function(t){return this.model&&(this.model.unbind("change",this.gamesetCollectionFetch,this),this.model.unbind("reset",this.gamesetCollectionFetch,this)),this.model=t,this.model.bind("change",this.gamesetCollectionFetch,this),this.model.bind("reset",this.gamesetCollectionFetch,this)},s.prototype.gamesetCollectionFetch=function(){return"game"===this.model.get("kind")?this.collection.fetch({disable_throbber:!0}):void 0},s.prototype.closeOtherGameContainersExcept=function(t){return _.each(this.gamesetlist,function(e){return void 0!==e?e.hideGameContainerExcept(t):void 0},this)},s.prototype.setGameSetCollection=function(t){return t?(this.collection&&(this.collection.unbind("reset"),this.collection.unbind("change")),this.collection=t,this.collection.bind("reset",this.render,this),this.collection.bind("change",this.render,this),this.compareCollection()):void 0},s.prototype.resetGameSetView=function(){return this.rendered=!1},s.prototype.compareCollection=function(){var e,i,s;if(this.has_template)return s=[],_.each(this._collection.models,function(t){return s.push(t.get("id"))},this),_.each(s,function(t){var e,i;return i=this._collection.get(t),e=this.collection.get(i.get("id")),e?void 0:this.removeGameSetView(i)},this),e=null,this.collection.models.length>0?this.$(".throbber").length>0&&this.$(".throbber").remove():this.$(".game-set-wrapper").html("<div class='throbber' style='padding: 95px 0; height: 64px;'> <img src='https://s3.amazonaws.com/hr-logos/hackerrank_spinner_64x64.gif'> </div>"),this.model.get("total_players")<this.model.get("player_count")?this.$(".game-set-wrapper").html("<div class='throbber' style='padding:95px 0; height: 64px;'> <h3 class='loading-message m'>There are no opponents to play with yet.</h3> </div>"):0===this.collection.total?(i={all:"Your game is being processed... Please wait.",won:"Your bot did not win any games.",lost:"Congratulations, your bot did not lose any games.",tie:"Your bot did not tie any games."},"all"===this.collection.getFilter()?(this.$(".game-set-wrapper").html("<div class='throbber'>"+t.appController.viewLoader(64)+("<div class='throbber' style='padding:0; height: 64px;'> <h3 class='loading-message m'>"+i[this.collection.getFilter()]+"</h3> </div></div>")),1!==this.model.get("player_count")&&this.updateWait()):this.$(".game-set-wrapper").html("<div class='throbber' style='padding:95px 0; height: 64px;'> <h3>"+i[this.collection.getFilter()]+"</h3> </div>")):this.timer&&clearTimeout(this.timer),_.each(this.collection.models,function(i){var s,n;return n=i.get("id"),s=this._collection.get(n),s?this.gamesetlist[n].setGameSetModel(i):(null===e?0!==this.$(".game-set-wrapper").children().length?this.$(".game-set-wrapper").children(":first").before("<div class='game-set-list' id='game-set-list-"+n+"'></div>"):this.$(".game-set-wrapper").append("<div class='game-set-list' id='game-set-list-"+n+"'></div>"):this.$(".game-set-wrapper #game-set-list-"+e).after("<div class='game-set-list' id='game-set-list-"+n+"'></div>"),this.gamesetlist[n]||(this.gamesetlist[n]=new t.SubmissionGameSetListView({submission:this.model,parent:this}),this.add_subview(this.gamesetlist[n])),this.gamesetlist[n].setElement(this.$(".game-set-wrapper #game-set-list-"+n)).render(),this._collection.add(i),this.gamesetlist[n].setGameSetModel(this.collection.get(i.get("id")))),e=n},this),this.setPagination()},s.prototype.updateWait=function(t){return null==t&&(t=0),$(this.el).find(".loading-message").html("Fetching opponents data "+new Array(t%3+1).join(".")),clearTimeout(this.timer),this.timer=setTimeout(function(e){return function(){return e.updateWait(t+1)}}(this),5e3)},s.prototype.removeGameSetView=function(t){var e;return e=t.get("id"),this._collection.remove(t),this.gamesetlist[e]&&(this.gamesetlist[e].hideGameContainerExcept,this.gamesetlist[e]=void 0),this.$(".game-set-wrapper #game-set-list-"+e).fadeOut().remove()},s.prototype.render=function(){return this.setTemplate(),this},s.prototype.setTemplate=function(){return this.has_template?(this.applyTemplate(),this.compareCollection()):t.appController.getTemplate(this.template,function(t){return this._template=t,this.has_template=!0,this.applyTemplate(),this.compareCollection()},this)},s.prototype.applyTemplate=function(){return this.rendered?void 0:($(this.el).html(this._template()),this._collection=new t.GameSetCollection,this.gamesetlist={},this.rendered=!0)},s.prototype.setPagination=function(){var e,i;return(this._collection.page!==this.collection.page||this._collection.total!==this.collection.total)&&this.has_template&&this.rendered?(this._collection.page=this.collection.page,this._collection.total=this.collection.total,i=this.collection.getFilter(),t.util.pagination(this.$(".pagination-wrapper"),this._collection.total,""+t.appController.get_current_contest_namespace()+"/submissions/game/"+this.model.get("id")+"/"+this.collection.getFilter()+"/page/",this._collection.page,null,5,10,"change-gameset"),e=this,this.$(".pagination a.change-gameset").click(function(s){var n,o,r,l,a;return s.preventDefault(),r=parseInt($(s.currentTarget).attr("data-page")),o=$(s.currentTarget).attr("href"),l=e.collection.getSid(),a=function(t){return t.setPage(r),t.setFilter(i),t.setSid(l)},t.router.navigate(o,!1),n=t.appController.getCollection("gameset","id-"+l+"-"+i+"-page-"+r,a,!0,!0),e.parent.setGameSetCollection(n)})):void 0},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionGameSetView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submission-game-set-list",s.prototype.className="submission-game-set-view-list",s.prototype.initialize=function(e){return this.parent=e.parent,this.submission=e.submission,this._collection=new t.GameCollection,this.has_template=!1},s.prototype.events={"click .play_game":"showGameContainer"},s.prototype.render=function(){return this.renderTemplate(),this},s.prototype.renderTemplate=function(){return this.has_template?this.setGameSetModel(this.model):t.appController.getTemplate(this.template,function(t){return this._template=t,this.has_template=!0,this.setGameSetModel(this.model)},this)},s.prototype.compareGamesetModel=function(){return this._model&&this.model?!this._compareObjects(this._model.attributes,this.model.attributes):this.model||this.model?!0:!1},s.prototype._compareObjects=function(t,e){var i;return i=!1,t&&e?_.isArray(t)&&_.isArray(e)?_.size(t)===_.size(e)?_.each(t,function(t){var s;return s=!0,_.each(e,function(e){return this._compareObjects(t,e)?s=!1:void 0},this),s===!0?i=!0:void 0},this):i=!0:_.isObject(t)&&_.isObject(e)?_.size(t)===_.size(e)?_.each(t,function(t,s){return this._compareObjects(e[s],t)?void 0:i=!0},this):i=!0:t!==e&&(i=!0):(t||e)&&(i=!0),!i},s.prototype.setGameSetModel=function(e){var i,s;return e&&(this.model=e,(this.compareGamesetModel()||!this.has_rendered)&&(this.model&&this._template&&(this._model&&(this._model.unbind("change"),this._model.unbind("render")),this._model=this.model,this._model.bind("change",this.render,this),this._model.bind("render",this.render,this),this.has_rendered=!0,$(this.el).html(this._template()),this.players_view=new t.SubmissionGameSetPlayersView({model:this._model,parent:this}),this.players_view.setElement($($(this.el).find(".players"))).render(),this.add_subview(this.players_view),s=this._model.get("games"),i=!1,_.each(s,function(t){return 1===t.process_flag?i=!0:void 0}),i?$(this.el).find("a.play_game").removeClass("disabled"):$(this.el).find("a.play_game").addClass("disabled")),this._model&&this._model.getGameCollection))?(this.collection=this._model.getGameCollection(),this.compareCollection()):void 0},s.prototype.compareCollection=function(){var t;if(this.collection&&this.has_template)return _.each(this._collection.models,function(t){var e;return e=this.collection.get(t.get("id")),e?void 0:this._collection.remove(t)},this),t=null,_.each(this.collection.models,function(e){var i;return i=this._collection.get(e.get("id")),i?i.get("updated_at")!==e.get("updated_at")&&i.set(e.attributes):t?this._collection.add(e,{at:t}):this._collection.unshift(e),t=this._collection.indexOf(e)},this)},s.prototype.showGameContainer=function(e){var i;return e.preventDefault(),$(e.currentTarget).hasClass("disabled")?void 0:(this.game_container&&(this.game_container.remove(),this.$("div.row.container").html('<div class="submission-game-container-wrapper" style="margin-left: 18px;"></div>')),i=this,t.requires(["compound/game-views"],function(){return i.game_container=new t.GameContainerView({collection:i._collection,gameset:i._model}),i.game_container.setElement(i.$(".submission-game-container-wrapper")).render(),i.add_subview(i.game_container),i.parent.closeOtherGameContainersExcept(i)}))},s.prototype.hideGameContainerExcept=function(t){return t.model!==this._model&&this.game_container?this.game_container.closeContainer():void 0},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionGameSetListView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="",i.prototype.initialize=function(t){return this.parent=t.parent,this.model.bind("reset",this.render,this)},i.prototype.render=function(){var t,e,i,s,n,o,r,l;return this.model.get("actors")?(t=this.parent.parent.parent.model.get("hacker_id"),$(this.el).html(_.template(this.template)()),l=this.model.toJSON(),o=l.actors.length,e=l.games,r={processed:0,pending:0,won:0,lost:0,tie:0,score_pending:0,score_processed:0},r.total=e.length,_.each(e,function(e){var i;if(1!==e.process_flag)return r.pending+=1,r.score_pending+=1;if(r.processed+=1,0===e.status?r.score_pending+=1:r.score_processed+=1,1===e.result){if(i=null,_.each(e.actors,function(t){return 1===t.actor?i=t:void 0}),null!==i)return i.hacker_id===t?r.won+=1:r.lost+=1}else if(2===e.result){if(i=null,_.each(e.actors,function(t){return 2===t.actor?i=t:void 0}),null!==i)return i.hacker_id===t?r.won+=1:r.lost+=1}else if(0===e.result)return r.tie+=1}),s={},i=[],_.each(l.actors,function(t){return i.push(t.hacker_id),s[t.hacker_id]=t},this),n="<style> table.stats, table.stats th, table.stats td { border: 1px solid #999; } table.stats td { padding: 5px; } table.stats { float: left; margin-right: 10px; } </style>",n+="<p class='span6 text-left submissions--game_list-players'>",_.each(i,function(e){return t!==e?n+="<img class='avatar submissions--game_list-avatar' src='"+s[e].hacker_avatar+"' height='25' width='25'> <span class='username submissions--game_list-name'>"+s[e].hacker_username+"</span>":void 0}),n+="</p>",n+="<p class='span6 clearfix'>",r.pending>0?n+="<span class='process-pending'>"+r.processed+"/"+r.total+" games played.</span>":(n+="<span class='result'>",n+=1===o?"Processed":r.won>r.lost?"You won the match":r.won<r.lost?"You lost the match":"You tied the match",n+=".</span>",r.score_pending>0&&(n+=" <span class='score-pending'>Score evaluation pending.</span>")),n+="</p>",$(this.el).html(n),this):this},i}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionGameSetPlayersView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;
return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submission-game-container",s.prototype.className="submission-game-container-view",s.prototype.initialize=function(t){return this.parent=t.parent,this.render()},s.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)()),this.delegateEvents(),this},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionGameContainerView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="submission-manual-game-play",s.prototype.className="submission-manual-game-play-view",s.prototype.initialize=function(t){return this.contest=t.contest},s.prototype.render=function(){return this.has_template?this.applyTemplate():t.appController.getTemplate(this.template,function(t){return this._template=t,this.applyTemplate(),this.has_template=!0},this),this},s.prototype.applyTemplate=function(){return!this.rendered()&&this._template&&this.model&&this.model.sync_status?($(this.el).html(this._template({model:this.model,_model:this.model.toJSON()})),this.renderView()):void 0},s.prototype.rendered=function(){return""!==$(this.el).html()},s.prototype.renderView=function(){var e;return e=this,0!==this.$(".select2-container").length?($(this.el).html(""),this.$("#moreplayers").unbind("change"),this.render(),void 0):(this.$("#moreplayers").select2({placeholder:"Challenge another hacker",minimumInputLength:2,ajax:{url:"/rest/contests/"+this.contest.get("slug")+"/challenges/"+this.model.get("slug")+"/hackers/autocomplete",dataType:"json",data:function(t){return{q:t,challenge_id:e.model.get("challenge_id")}},results:function(t){return t}}}),e=this,this.$("#moreplayers").change(function(i){var s;return s=$(i.currentTarget).val(),$("#loadingagainst").show(),e.$("img.spinner").show(),$.post("/rest/games/",{id:e.model.get("id"),against:s,challenge_id:e.model.get("challenge_id")},function(i){return e.contest&&e.contest.get("id")&&1!==e.contest.get("id")?t.router.navigate("/contests/"+e.contest.get("slug")+"/submissions/"+e.model.get("kind")+"/"+e.model.get("id")+"/page/"+i.page,!0):t.router.navigate("/submissions/"+e.model.get("kind")+"/"+e.model.get("id")+"/page/"+i.page,!0),e.$("img.spinner").hide(),e.model.fetch({force_fetch:!0}),e.$("#loadingagainst").hide(),e.render(),e.renderView()})}),this.delegateEvents)},s.prototype.setModel=function(t){return this.model&&(this.model.unbind("reset",this.render,this),this.model.unbind("change",this.render,this)),this.model=t,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.render()},s.prototype.setGameSetCollection=function(t){return this.collection&&(this.collection.unbind("reset",this.render,this),this.collection.unbind("change",this.render,this)),this.collection=t,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render),this.render()},s.prototype.playagainst=function(){},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.SubmissionManualGamePlayView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="judge-submissions",s.prototype.className="judge-submissions-view",s.prototype.initialize=function(t){return this.team_slug=t.team_slug,this.challenge_slug=t.challenge_slug,this.listenTo(this.collection,"reset",this.render),_.isObject(this.collection.challenge)?this.listenToOnce(this.collection.challenge("reset",this.render)):void 0},s.prototype.render=function(){var e,i,s;return $(this.el).html(t.appController.template(this.template,this)({collection:this.collection,team_slug:this.team_slug,challenge_slug:this.challenge_slug})),e=t.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),this.add_subview(e),s="",this.team_slug&&(s="team/"+this.team_slug+"/"),this.challenge_slug&&(s="challenge/"+this.challenge_slug+"/"),t.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL()+s,this.collection.getCurrentPage()),this.$(".submissions-list-wrapper").length>0&&(this.collection.sync_status?(this.$(".submissions-list-wrapper").html(""),i=_.sortBy(this.collection.models,function(t){return-1*t.get("created_at")}),_.each(i,function(e){var i;return i=new t.JudgeSubmissionsListView({model:e}),this.$(".submissions-list-wrapper").append(i.render().el),this.add_subview(i)},this)):this.$(".submissions-list-wrapper").append(t.appController.viewLoader(64))),this},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.JudgeSubmissionsView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e};jQuery(function(){var t,i,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.template="judge-submissions-list",s.prototype.className="judge-submissions-list-view",s.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},s.prototype.events={"change .hr_set-status":"updateStatus"},s.prototype.tooltip=function(){var t,e,i,s,n,o;for(i="",o=this.model.get("testcase_message"),t=s=0,n=o.length;n>s;t=++s)e=o[t],i+="Testcase #"+t+": "+e+"<br/>";return i},s.prototype.formatTime=function(t){return""+Math.ceil(t)},s.prototype.updateStatus=function(t){var e;return e=$(t.currentTarget),this.model.set("status_code",e.is(":checked")===!0?2:121),this.model.save({success:function(t){return function(){return t.model.collection.fetch()}}(this)})},s.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({tooltip:this.tooltip(),model:this.model,challenge:this.model.get("challenge"),ns:this.model.ns(),formattedTime:this.formatTime(this.model.get("time_from_start"))})),this.delegateEvents(),this},s}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.JudgeSubmissionsListView=i})}.call(this);
//# sourceMappingURL=submission-views-e0c6fa037f8257875e55b7480d810dec.js.map