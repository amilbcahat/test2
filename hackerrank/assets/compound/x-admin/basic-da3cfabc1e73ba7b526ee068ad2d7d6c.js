(function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e,t){return null==e&&(e={}),null==t&&(t={}),t.casual&&(this.casual={},this.casual.min_fetch_timelapse=1e4,this.casual.timestamp=(new Date).getTime()),null==this.caching&&(this.caching=!0),n.__super__.initialize.call(this,e,t)},n.prototype.url=function(){return""+this.restURL()+"?"+this.queryParams()},n.prototype.queryParams=function(){return""},n.prototype.setCaching=function(e){this.caching=e},n.prototype.restPrefix=!0,n.prototype.restURL=function(){var e,t;return t=""+this.ns(e=!0)+this.baseURL(),""+r.restURL(t,this.restPrefix)},n.prototype.pageURL=function(){return""+this.ns()+this.baseURL()},n.prototype.baseURL=function(){return"/dummy"},n.prototype.ns=function(e){return null==e&&(e=!1),this.collection&&(this.contest_slug||(this.contest_slug=this.contest_slug||this.get("contest_slug")||this.collection.contest_slug)),this.contest_slug||(this.contest_slug=r.appController.get_current_contest_slug()),this.contest_slug||(this.contest_slug="master"),r.namespace(this.contest_slug,e)},n.prototype.hasChanged=function(e){return n.__super__.hasChanged.call(this,e)},n.prototype.keyPrefix=function(){return r.profile().get("key_prefix")},n.prototype.modelCrumbs=function(){var e;return e=r.collection("bread-crumbs"),this.id&&e.add({id:""+this.constructor.name+"-"+this.id,slug:this.get("slug")||this.get("id"),path:this.pageURL(),name:this.get("name")||this.get("title"),model:this}),e},n.prototype.setContestCrumb=function(){var e,t;return t=this.contest_slug||this.get("contest-slug"),t?e=r.model("contest",{slug:this.contest_slug}).cached({success:function(e){return function(t){return e.crumbs.merge(t.breadCrumbs(),{at:0})}}(this)}):void 0},n.prototype.breadCrumbs=function(){return this.crumbs||(this.crumbs=r.collection("bread-crumbs"),this.setContestCrumb()),this.crumbs.merge(this.modelCrumbs()),this.crumbs},n.prototype.save=function(e,t,r){return this.id&&this.caching&&this.cacheSet(e,t,r),this.collection&&this.collection.flush(),Backbone.Model.prototype.save.apply(this,arguments)},n.prototype.fetch=function(){return void 0===this.disableThrobber||this.disableThrobber!==!0?r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,Backbone.Model.prototype.fetch.apply(this,arguments)},n.prototype.parse=function(e,t){var i,o,s,a,c,u,p;if(void 0!==t||e.model){for(this.sync_status=!0,void 0===this.disableThrobber||this.disableThrobber!==!0?r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("",!1,!0,0):this.disableThrobber=!1,s=["total","page","activities","gamedata","status","metadata","errors"],a=this,c=function(t){return void 0!==e[t]?a[t]=e[t]:void 0},u=0,p=s.length;p>u;u++)i=s[u],c(i);o=n.__super__.parse.call(this,e.model,t)}else o=n.__super__.parse.call(this,e,t);return o},n}(Backbone.Model),r=null!=(n=window.HR)?n:{},r.GenericModel=e})}).call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.url=function(){return""+this.restURL()+"?"+this.queryParams()},n.prototype.queryParams=function(){var e;return(!this.page||this.page<1)&&(this.page=1),this.limit||(this.limit=10),e=this.query?"&query="+this.query:"","offset="+(this.page-1)*this.limit+"&limit="+this.limit+e},n.prototype.restPrefix=!0,n.prototype.restURL=function(){var e,t;return t=""+this.ns(e=!0)+this.baseURL(),""+r.restURL(t,this.restPrefix)},n.prototype.pageURL=function(){return""+this.ns()+this.baseURL()},n.prototype.getTotal=function(){return this.total},n.prototype.getCurrentPage=function(){return this.page},n.prototype.cacheModels=!1,n.prototype.keyPrefix=function(){return r.profile().get("key_prefix")},n.prototype.baseURL=function(){return"/dummies"},n.prototype.ns=function(e){return null==e&&(e=!1),r.namespace(this.contest_slug,e)},n.prototype.collectionCrumbs=function(){return r.collection("bread-crumbs")},n.prototype.setContestCrumb=function(){var e,t;return t=this.contest_slug||this.get("contest-slug"),t?e=r.model("contest",{slug:this.contest_slug}).cached({success:function(e){return function(t){return e.crumbs.merge(t.breadCrumbs(),{at:0})}}(this)}):void 0},n.prototype.breadCrumbs=function(){return this.crumbs||(this.crumbs=r.collection("bread-crumbs"),this.setContestCrumb()),this.crumbs.merge(this.collectionCrumbs()),this.crumbs},n.prototype.merge=function(e,t){return this.add(e.models,t)},n.prototype.parse=function(e,t){var r,i,o,s,a,c,u;if(void 0!==t||e.models){for(this.sync_status=!0,o=["total","page","activities","round_data","available","ongoing_count","slug_title","errors","current_hacker","contest","gross"],s=this,a=function(t){return void 0!==e[t]?s[t]=e[t]:void 0},c=0,u=o.length;u>c;c++)r=o[c],a(r);i=n.__super__.parse.call(this,e.models,t)}else i=n.__super__.parse.call(this,e,t);return i=_.map(i,function(e){return function(t){var r;return r=new e.model(t),e.cacheModels&&r.cacheSet(),r}}(this))},n}(Backbone.Collection),r=null!=(n=window.HR)?n:{},r.GenericCollection=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(e){var t;return this.active_nav_link=e.active_nav_link,this.sideBarClass=null!=(t=e.sideBarClass)?t:"open"},n.prototype.updateData=function(e,t){return this.model=e,this.active_nav_link=t,this.sideBarClass=this.collapseClass()},n.prototype.collapseClass=function(){return $(".hre-sidebar").hasClass("open")?"open":$(".hre-sidebar").hasClass("closed")?"closed":void 0},n.prototype._render=function(){var e;return e=r.appController.template(this.template,this)({active_nav_link:this.active_nav_link,throbber:r.appController.viewLoader(),sideBarClass:this.sideBarClass}),$(this.el).html(e),this},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CommonSidebarNavigationView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/periodic-report",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.companyFields={id:"id",name:"name",email:"email"},n.prototype.reportType="company_attempts",n.prototype.events={"change .search-radio-grp input":"syncSearchBy","change select#report-type-select":"changeReportType","submit form[name=periodic-table-form]":"addOrUpdateCron"},n.prototype.initCompanySelectBox=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a Company",ajax:{url:"/x/api/v1/admin/search/companies",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):-1===e.indexOf("@")?(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0)):-1!==e.indexOf("@")&&(n.searchBy="email",$(".search-radio-grp input:nth(2)").prop("checked",!0))),{q:e,fields:n.companyFields[n.searchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.companySelectBox=$("#company-select2"),this.companySelectBox.select2(t),this.companySelectBox.on("change",function(e){return n.fetchCompanyData(e.val)})},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.fetchCompanyData=function(e){return this.company=new r.CompanyModel,this.company.set("id",e),this.fetchData()},n.prototype.changeReportType=function(e){var t;return t=$(e.currentTarget),this.reportType=t.val(),this.fetchData()},n.prototype.fetchFields=function(){var e,t;return $("#select-default-fields").prop("checked")&&(t="default"),$("#select-all-fields").prop("checked")&&(t="all"),$("#select-default-fields").prop("checked")||$("#select-all-fields").prop("checked")||(t=[],e=$(".fields-custom-container input"),_.each(e,function(e){return $(e).prop("checked")?t.push($(e).val()):void 0})),t},n.prototype.fetchUserIds=function(){var e,t;return t=[],e=$(".user-custom-container input"),_.each(e,function(e){return $(e).prop("checked")?t.push($(e).val()):void 0}),t},n.prototype.fetchTestIds=function(){var e,t;return t=[],e=$(".tests-custom-container input"),_.each(e,function(e){return $(e).prop("checked")?t.push($(e).val()):void 0}),t},n.prototype.fetchData=function(){var e;return e=this,this.company.fetch({data:{company_data_action:"period_reports",report_type:e.reportType},success:function(t){var n;return n=new r.AdminPeriodicReportFieldsView({model:t,record:e.record}),$(".company-fields").html(n.render().el)},error:function(){}})},n.prototype.addOrUpdateCron=function(e){return"add"===this.cronAction?this.addReportCron(e):"update"===this.cronAction?this.updateReportCron(e):void 0},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.AdminCommonPeriodicFormView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/admin-reports-actions",n.prototype.startDate=moment().subtract("month",1),n.prototype.endDate=moment(),n.prototype.tableOpened={"user-custom-container":!1,"tests-custom-container":!1,"fields-custom-container":!1},n.prototype.events={"click a.show-custom-link":"showCustomContainer","click a.hide-custom-link":"hideCustomContainer","change input.select-all-input":"selectAll","change input.select-all-fields":"selectAllFields","change input.select-default-fields":"selectDefaultFields","change input.row-checkbox":"deselectAllAndDefault"},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({model:this.model.toJSON(),startDate:this.startDate.format("YYYY/MM/DD"),endDate:this.endDate.format("YYYY/MM/DD"),defaultFields:this.defaultFields,allFields:this.allFields}),$(this.el).html(e),setTimeout(function(){return t.initDateRangeSelect(),t.initDataTable()}),this},n.prototype.initDateRangeSelect=function(){var e,t,r,n,i,o;return o=this,t=moment().subtract("month",1).startOf("month"),n=moment().subtract("week",1).startOf("week"),e=moment().subtract("month",1).endOf("month"),r=moment().subtract("week",1).endOf("week"),i=o.model.get("created_at")||moment().subtract("year",10),$("input#invite-report-date-range").daterangepicker({format:"YYYY/MM/DD",ranges:{"Last Month":[t,e],"Last Week":[n,r]},startDate:o.startDate,endDate:o.endDate,minDate:moment(i).subtract("day",1),maxDate:moment().add("day",1)},function(e,t){return o.startDate=e,o.endDate=t,$("input#invite-report-date-range").val(o.startDate.format("YYYY/MM/DD")+" - "+o.endDate.format("YYYY/MM/DD"))})},n.prototype.initDataTable=function(){return this.userDataTable=$(".table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",bPaginate:!1,sPaginationType:"bootstrap",bDestroy:!0,aaSorting:[[1,"asc"]]})},n.prototype.selectAll=function(e){var t,r,n;return r=$(e.currentTarget),t=r.data("list-container"),this.tableOpened[t]||this.openContainer(t),n=$("."+t).find("input"),_.each(n,function(e){return $(e).prop("checked",r.prop("checked"))})},n.prototype.selectAllFields=function(e){var t,r;return t=$(e.currentTarget),r=t.parent().parent().find("#select-default-fields"),$(r).prop("checked",!1),this.selectAll(e)},n.prototype.selectDefaultFields=function(e){var t,r,n;return n=$(e.currentTarget),t=n.parent().parent().find("#select-all-fields"),$(t).prop("checked",!1),r=n.data("list-container"),this.tableOpened[r]||this.openContainer(r),n.prop("checked")?this.selectDefaultInputs(e):this.selectAll(e)},n.prototype.selectDefaultInputs=function(e){var t,r,n,i;return i=this,r=$(e.currentTarget),t=r.data("list-container"),n=$("."+t).find("input"),_.each(n,function(e){return-1!==i.defaultFields.indexOf($(e).val())?$(e).prop("checked",!0):$(e).prop("checked",!1)})},n.prototype.deselectAllAndDefault=function(e){var t;return t=$(e.currentTarget),t.closest(".custom-container").parent().find(".select-all").prop("checked",!1)},n.prototype.showCustomContainer=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.addClass("hidden"),t.siblings(".hide-custom-link").removeClass("hidden"),$("."+t.data("container")).toggleClass("hidden"),this.tableOpened[t.data("container")]=!0},n.prototype.openContainer=function(e){var t;return t=$("."+e),t.removeClass("hidden"),t.parent().find(".hide-custom-link").removeClass("hidden"),t.parent().find(".show-custom-link").addClass("hidden"),this.tableOpened[e]=!0},n.prototype.hideCustomContainer=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.addClass("hidden"),t.siblings(".show-custom-link").removeClass("hidden"),$("."+t.data("container")).toggleClass("hidden")},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.AdminCommonReportsActionsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.companyFields={id:"id",name:"name",email:"email"},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(e),setTimeout(function(){return t.initCompanySelect2()}),this},n.prototype.initCompanySelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a Company",ajax:{url:"/x/api/v1/admin/search/companies",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):-1===e.indexOf("@")?(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0)):-1!==e.indexOf("@")&&(n.searchBy="email",$(".search-radio-grp input:nth(2)").prop("checked",!0))),{q:e,fields:n.companyFields[n.searchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.selectBox=$("#company-select2"),this.selectBox.select2(t),this.selectBox.on("change",function(e){return n.fetchCompany(e.val,n)})},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.fetchCompany=function(e,t){var n;return n=new r.CompanyModel,n.set("id",e),t.model=n,n.fetch({data:{company_data_action:t.companyDataAction},success:function(e){var r;return r=new t.actionViewClass({model:e}),t.actionsView=r,$(".company-action-section").html(r.render().el)}})},n.prototype.generateReport=function(e){var t,n,i,o,s,a,c;return a=this,e.preventDefault(),$("a#link-box").addClass("hidden"),n=$(e.currentTarget),t=n.find("button"),o={},$("#select-all-tests").prop("checked")||(o.test_ids=[],s=$(".tests-custom-container input"),_.each(s,function(e){return $(e).prop("checked")?o.test_ids.push($(e).val()):void 0})),$("#select-all-users").prop("checked")||(o.user_ids=[],c=$(".user-custom-container input"),_.each(c,function(e){return $(e).prop("checked")?o.user_ids.push($(e).val()):void 0})),$("#select-default-fields").prop("checked")&&(o.fields="default"),$("#select-all-fields").prop("checked")&&(o.fields="all"),$("#select-default-fields").prop("checked")||$("#select-all-fields").prop("checked")||(o.fields=[],i=$(".fields-custom-container input"),_.each(i,function(e){return $(e).prop("checked")?o.fields.push($(e).val()):void 0})),o.company_id=this.model.get("id"),o.from_time=this.actionsView.startDate.format("YYYY/MM/DD"),o.to_time=this.actionsView.endDate.format("YYYY/MM/DD"),r.util.inlineLoadingStart(t),$.ajax({url:a.reportGenerationUrl,type:"GET",data:o,success:function(e){return r.util.inlineLoadingEnd({message:"Downloading Report ..."}),$("a#link-box").attr("href",e.url).removeClass("hidden").html(e.url),window.location.href=e.url},error:function(){return r.util.inlineLoadingEnd({message:"Error"})}})},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.AdminCommonReportsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="dashboard/e404",n.prototype.initialize=function(){},n.prototype._render=function(){var t;return t=e.appController.template(this.template,this),$(this.el).html(t)},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.X404View=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.cronAction="add",n.prototype.initialize=function(e){return null==e&&(e={}),this.company=new r.CompanyModel,this.record=new r.PeriodicReportModel},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({searchBy:this.searchBy,company:this.company}),$(this.el).html(e),setTimeout(function(){return t.initCompanySelectBox()}),this},n.prototype.addReportCron=function(e){var t,n,i,o,s,a;return e.preventDefault(),n=$(e.currentTarget),t=n.find("button"),r.util.inlineLoadingStart(t),i=this.fetchFields(),a=this.fetchUserIds(),s=this.fetchTestIds(),o=new r.PeriodicReportModel,o.set("entity_id",this.companySelectBox.select2("val")),o.set("time_frequency",$(".time-frequency").val()),o.set("report_type",$("#report-type-select").val()),o.set("report_fields",i),o.set("report_user_ids",a),o.set("report_test_ids",s),o.set("recipients",$(".report-recipients").val()),o.save(null,{success:function(e,t){return r.router.navigate("/admin/reports/periodic",!0,!0),r.util.inlineLoadingEnd(t)},error:function(e,t){return t=JSON.parse(t.responseText),r.util.inlineLoadingEnd(t)}})},n}(window.HR.AdminCommonPeriodicFormView),r=null!=(n=window.HR)?n:{},r.AdminAddPeriodicReportsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(e){var t,r;return null==e&&(e={}),r=this,this.model=e.model,t=this.model.get("default_attempt_fields"),this.defaultFields=[],this.allFields=this.model.get("all_attempt_fields"),_.each(t,function(e){return r.defaultFields.push(e.id)}),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},r}(window.HR.AdminCommonReportsActionsView),r=null!=(n=window.HR)?n:{},r.AdminAttemptReportsActionsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template="x-admin/attempt-reports",r.prototype.actionViewClass=window.HR.AdminAttemptReportsActionsView,r.prototype.companyDataAction="attempt_reports",r.prototype.reportGenerationUrl="/x/api/v1/admin/reports/generate_attempt_report",r.prototype.events={"change .search-radio-grp input":"syncSearchBy","submit form#attempts-report-form":"generateReport"},r}(window.HR.AdminCommonReportsView),r=null!=(n=window.HR)?n:{},r.AdminAttemptReportsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.selectBoxSet=!1,n.prototype.cronAction="update",n.prototype.initialize=function(e){var t;return null==e&&(e={}),t=this,this.record=e.entity,this.company=new r.CompanyModel,this.company.set("id",this.record.get("company_id")),setTimeout(function(){return t.fetchData()},300),this.listenTo(this.company,"change",this.setSelectBox)},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({company:this.company.toJSON(),record:this.record.toJSON(),searchBy:this.searchBy}),$(this.el).html(e),setTimeout(function(){return t.initCompanySelectBox()}),this},n.prototype.setSelectBox=function(){return this.selectBoxSet?void 0:(this.selectBoxSet=!0,this.companySelectBox.select2("data",{id:this.company.get("id"),primary:this.company.get("name")}))},n.prototype.updateReportCron=function(e){var t,n,i,o,s;return e.preventDefault(),n=$(e.currentTarget),t=n.find("button"),r.util.inlineLoadingStart(t),i=this.fetchFields(),s=this.fetchUserIds(),o=this.fetchTestIds(),this.record.set("entity_id",this.companySelectBox.select2("val")),this.record.set("time_frequency",$(".time-frequency").val()),this.record.set("report_type",$("#report-type-select").val()),this.record.set("report_fields",i),this.record.set("report_user_ids",s),this.record.set("report_test_ids",o),this.record.set("recipients",$(".report-recipients").val()),this.record.save(null,{success:function(e,t){return r.router.navigate("/admin/reports/periodic",!0,!0),r.util.inlineLoadingEnd(t)},error:function(e,t){return t=JSON.parse(t.responseText),r.util.inlineLoadingEnd(t)}})},n}(window.HR.AdminCommonPeriodicFormView),r=null!=(n=window.HR)?n:{},r.AdminEditPeriodicReportsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(e){var t,r;return null==e&&(e={}),r=this,this.model=e.model,t=this.model.get("default_invite_fields"),this.defaultFields=[],this.allFields=this.model.get("all_invite_fields"),_.each(t,function(e){return r.defaultFields.push(e.id)}),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},r}(window.HR.AdminCommonReportsActionsView),r=null!=(n=window.HR)?n:{},r.AdminInviteReportsActionsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template="x-admin/invite-reports",r.prototype.actionViewClass=window.HR.AdminInviteReportsActionsView,r.prototype.companyDataAction="invite_reports",r.prototype.reportGenerationUrl="/x/api/v1/admin/reports/generate_invite_report",r.prototype.events={"change .search-radio-grp input":"syncSearchBy","submit form#invites-report-form":"generateReport"},r}(window.HR.AdminCommonReportsView),r=null!=(n=window.HR)?n:{},r.AdminInviteReportsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template="x-admin/admin-navigation",r.prototype.className="admin-navigation",r}(window.HR.CommonSidebarNavigationView),r=null!=(n=window.HR)?n:{},r.AdminNavigationView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e;return e=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}var n,i;return t(r,e),r.prototype.template="x-admin/periodic-report-fields",r.prototype.initialize=function(e){var t,r;return null==e&&(e={}),r=this,this.model=e.model,this.record=e.record,t=this.model.get("default_period_fields"),this.defaultFields=[],this.allFields=this.model.get("all_period_fields"),_.each(t,function(e){return r.defaultFields.push(e.id)})},r.prototype.events={"change input.select-all-input":"selectAll","change input.select-all-fields":"selectAllFields","change input.select-default-fields":"selectDefaultFields","change input.row-checkbox":"deselectAllAndDefault"},r.prototype._render=function(){var e,t;return t=this,e=n.appController.template(this.template,this)({company:this.model.toJSON(),record:this.record.toJSON(),defaultFields:this.defaultFields,allFields:this.allFields}),$(this.el).html(e),setTimeout(function(){return t.initDataTables()}),this},r.prototype.initDataTables=function(){return this.DataTables=$(".table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",bPaginate:!1,sPaginationType:"bootstrap",bDestroy:!0,aaSorting:[[1,"asc"]],bFilter:!1})},r.prototype.selectAll=function(e){var t,r,n;return r=$(e.currentTarget),t=r.data("list-container"),n=$("."+t).find("input"),_.each(n,function(e){return $(e).prop("checked",r.prop("checked"))})},r.prototype.selectAllFields=function(e){var t,r;return t=$(e.currentTarget),r=t.parent().parent().find("#select-default-fields"),$(r).prop("checked",!1),this.selectAll(e)},r.prototype.selectDefaultFields=function(e){var t,r,n;return n=$(e.currentTarget),t=n.parent().parent().find("#select-all-fields"),$(t).prop("checked",!1),r=n.data("list-container"),n.prop("checked")?this.selectDefaultInputs(e):this.selectAll(e)},r.prototype.selectDefaultInputs=function(e){var t,r,n,i;return i=this,r=$(e.currentTarget),t=r.data("list-container"),n=$("."+t).find("input"),_.each(n,function(e){return-1!==i.defaultFields.indexOf($(e).val())?$(e).prop("checked",!0):$(e).prop("checked",!1)})},r.prototype.deselectAllAndDefault=function(e){var t;return t=$(e.currentTarget),t.closest(".custom-container").parent().find(".select-all").prop("checked",!1)},n=null!=(i=window.HR)?i:{},n.AdminPeriodicReportFieldsView=r,r}(window.HR.GenericView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/periodic-reports",n.prototype.initialize=function(e){return null==e&&(e={}),this.collection=e.collection},n.prototype.events={"click input.delete-cron-task":"deletePeriodicRecord"},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({collection:this.collection.toJSON()}),$(this.el).html(e),setTimeout(function(){return t.initDataTable()}),this},n.prototype.initDataTable=function(){return this.dataTable=$(".periodic-table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",bPaginate:!0,sPaginationType:"bootstrap",iDisplayLength:10})},n.prototype.deletePeriodicRecord=function(e){var t,n,i;return e.preventDefault(),t=$(e.currentTarget),n=t.data("item-id"),i=this.collection.find(function(e){return e.get("id")===n}),i.destroy({success:function(e,t){return r.util.ajaxmsg(t.message,!1,!0,2),that.render()},error:function(e){return e=JSON.parse(e),r.util.ajaxmsg(e.message,!1,!0,2)}})},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.AdminPeriodicReportsView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/attempts-dashboard-table",n.prototype.initialize=function(e){return null==e&&(e={}),this.filters=e.filters},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this),$(this.el).html(e),setTimeout(function(){return t.initDataTable()}),this},n.prototype.initDataTable=function(){var e;return e=this,this.attemptsTable=this.$(".attempts-table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",iDisplayStart:0,iDisplayLength:50,bProcessing:!1,bFilter:!1,bServerSide:!0,bDestroy:!0,bAutoWidth:!1,oLanguage:{sProcessing:"Loading data...",sLoadingRecords:"Loading data..."},aoColumnDefs:[{bSortable:!1,aTargets:[1,2,3,6,7]}],sAjaxSource:"/x/api/v1/admin/attempts?"+this.filterString(),fnServerData:function(t,n,i){return r.util.ajaxmsg("Loading Attempts data..",!0),$.getJSON(t,n,function(t){return _.isFunction(e.afterRequest)&&(t=e.afterRequest(t)),e.data=t,i(t)})}})},n.prototype.filterString=function(){var e;return e=[],this.filters.time_type&&e.push("time_type="+this.filters.time_type),this.filters.company_id&&e.push("company_id="+this.filters.company_id),this.filters.user_id&&e.push("user_id="+this.filters.user_id),this.filters.date_range&&e.push("date_range="+this.filters.date_range),e.join("&")},n.prototype.afterRequest=function(e){var t,n;return n=this,r.util.ajaxmsg("Done",!1,!0,.5),t={aaData:[],iTotalDisplayRecords:0,iTotalRecords:0,models:[]},_.isObject(e)&&_.isArray(e.models)&&(t.iTotalDisplayRecords=e.total_attempts,t.iTotalRecords=e.total_attempts,t.aaData=_.map(e.models,function(e,t){return n.mapColumns(e,t)})),t},n.prototype.mapColumns=function(e){var t;return t=[],t.push(e.id),t.push(e.company_id),t.push(r.util.htmlEncode(e.company_name||"-")),t.push(r.util.htmlEncode(e.full_name||"-")),t.push(r.util.htmlEncode(e.email)),t.push(e.test_id),t.push(r.util.htmlEncode(e.test_name)),t.push(e.invited_by),t},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.AttemptsDashboardTableView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/attempts-dashboard",n.prototype.attemptedAtType="start_time",n.prototype.userSearchBySelected=!1,n.prototype.companySearchBySelected=!1,n.prototype.userSearchBy="id",n.prototype.companySearchBy="id",n.prototype.userFields={id:"id",name:"firstname,email"},n.prototype.companyFields={id:"id",name:"name",email:"email"},n.prototype.startDate=moment().subtract(1,"w"),n.prototype.endDate=moment(),n.prototype.events={"click #filter-attempts":"filterAttempts","change .attempt-time-type input":"filterAttempts","click .js-dateclear":"clearDate","click a.show-advanced-filters":"showAdvancedOptions","click a.hide-advanced-filters":"hideAdvancedOptions","change .user-search-radio-grp input":"syncUserSearchBy","change .company-search-radio-grp input":"syncCompanySearchBy"},n.prototype.initialize=function(e){return null==e&&(e={}),this.filters={},this.filters.date_range=this.startDate.format("YYYY/MM/DD")+"-"+this.endDate.format("YYYY/MM/DD")
},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({attemptedAtType:this.attemptedAtType,userSearchBy:this.userSearchBy,companySearchBy:this.companySearchBy,startDate:this.startDate,endDate:this.endDate}),$(this.el).html(e),setTimeout(function(){return t.initUserSelect2(),t.initCompanySelect2(),t.initDatePicker(),t.filterAttempts()}),this},n.prototype.clearDate=function(e){return e&&e.preventDefault(),$(".js-daterange").val(""),this.filters.date_range="",$(".js-dateclear").hide(),this.filterAttempts()},n.prototype.initUserSelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.userSearchBySelected||($.isNumeric(e)?(n.userSearchBy="id",$(".user-search-radio-grp.search-radio-grp input:nth(0)").prop("checked",!0)):(n.userSearchBy="name",$(".user-search-radio-grp.search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.userFields[n.userSearchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.userSelectBox=$("#invited-by-attempts-filter"),this.userSelectBox.select2(t),this.userSelectBox.on("change",function(){return n.filterAttempts()})},n.prototype.initCompanySelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a Company",ajax:{url:"/x/admin/v1/search/companies",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.companySearchBySelected||($.isNumeric(e)?(n.companySearchBy="id",$(".company-search-grp.search-radio-grp input:nth(0)").prop("checked",!0)):-1===e.indexOf("@")?(n.companySearchBy="name",$(".company-search-grp.search-radio-grp input:nth(1)").prop("checked",!0)):(n.companySearchBy="email",$(".company-search-grp.search-radio-grp input:nth(2)").prop("checked",!0))),{q:e,fields:n.companyFields[n.companySearchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.companySelectBox=$("#company-attempts-filter"),this.companySelectBox.select2(t),this.companySelectBox.on("change",function(){return n.filterAttempts()})},n.prototype.initDatePicker=function(){return this.$("#attempt-from-time-filter").daterangepicker({latestDate:"today",separator:" to ",format:"YYYY/MM/DD",ranges:{"Last week":[moment().add("days",-7),moment().format()],"Last 2 weeks":[moment().add("days",-14),moment().format()],"Last 30 days":[moment().add("days",-30),moment().format()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"Past year":[moment().add("days",-365),moment().format()]},startDate:this.startDate,endDate:this.endDate},function(e){return function(t,r){return e.$(".js-dateclear").removeClass("hide"),e.filters.date_range=t.format("YYYY/MM/DD")+"-"+r.format("YYYY/MM/DD"),$(".js-dateclear").show(),e.filterAttempts()}}(this))},n.prototype.syncUserSearchBy=function(){return this.userSearchBy=$(".user-search-radio-grp input:checked").val(),this.userSearchBySelected=!0},n.prototype.syncCompanySearchBy=function(){return this.companySearchBy=$(".company-search-radio-grp input:checked").val(),this.companySearchBySelected=!0},n.prototype.showAdvancedOptions=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.parent().addClass("hidden"),$(".advanced-options").removeClass("hidden"),$("a.hide-advanced-filters").parent().removeClass("hidden")},n.prototype.hideAdvancedOptions=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.parent().addClass("hidden"),$(".advanced-options").addClass("hidden"),$("a.show-advanced-filters").parent().removeClass("hidden")},n.prototype.filterAttempts=function(e){return e&&e.preventDefault(),this.filters.time_type=this.attemptedAtType,this.filters.company_id=this.companySelectBox.select2("val"),this.filters.user_id=this.userSelectBox.select2("val"),this.initTableView()},n.prototype.initTableView=function(){var e;return e=new r.AttemptsDashboardTableView({filters:this.filters}),this.$("#attempts-table-container").html(e.render().el)},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.AttemptsDashboardView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/company-add-invites-data",n.prototype.initialize=function(e){return null==e&&(e={}),this.model=e.model},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(e),this},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CompanyAddInvitesDataView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/company-add-invites",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.companyFields={id:"id",name:"name",email:"email"},n.prototype.events={"change .search-radio-grp input":"syncSearchBy","submit form#add-invites-form":"addInvites"},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(e),setTimeout(function(){return t.initCompanySelect2()}),this},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.initCompanySelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a Company",ajax:{url:"/x/api/v1/admin/search/companies",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):-1===e.indexOf("@")?(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0)):-1!==e.indexOf("@")&&(n.searchBy="email",$(".search-radio-grp input:nth(2)").prop("checked",!0))),{q:e,fields:n.companyFields[n.searchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.selectBox=$("#company-select2"),this.selectBox.select2(t),this.selectBox.on("change",function(e){return n.fetchCompany(e.val,n)})},n.prototype.fetchCompany=function(e,t){var n;return n=new r.CompanyModel,n.set("id",e),t.model=n,n.fetch({data:{company_data_action:"add_invites"},success:function(e){var t;return t=new r.CompanyAddInvitesDataView({model:e}),$(".company-info-section").html(t.render().el)}})},n.prototype.addInvites=function(e){var t,n,i,o,s;return s=this,e.preventDefault(),n=$(e.currentTarget),this.$(".message-box").addClass("hidden").html(""),this.$("#invites-count").removeClass("error"),t=n.find("button"),this.model.get("id")?(i=parseInt(this.$("#invites-count").val(),10))?(r.util.inlineLoadingStart(t),o={id:this.model.get("id"),invites_count:i,invites_type:this.$("#invites-type").val()},$.ajax({url:"/x/api/v1/admin/companies/add_invites",data:o,type:"PUT",success:function(e){return r.util.inlineLoadingEnd({message:"Success"}),s.$(".message-box").removeClass("hidden").addClass("success").html(e.message)},error:function(e){return e=JSON.parse(e.responseText),r.util.inlineLoadingEnd({message:"Error"}),s.$(".message-box").removeClass("hidden").addClass("error").html(e.message)}})):(this.$(".message-box").removeClass("hidden").addClass("error").html("You need to enter the number of invites"),this.$("#invites-count").addClass("error"),void 0):(this.$(".message-box").removeClass("hidden").addClass("error").html("You need to select a company"),void 0)},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CompanyAddInvitesView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/company-extend-trial-data",n.prototype.initialize=function(e){return null==e&&(e={}),this.model=e.model},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(e),setTimeout(function(){return t.initDateSelect()}),this},n.prototype.initDateSelect=function(){var e;return e=this,$("#new-payment-date").datepicker({autoclose:!0,format:"yyyy/mm/dd",startDate:"-1d"})},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CompanyExtendTrialDataView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/company-extend-trial",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.companyFields={id:"id",name:"name",email:"email"},n.prototype.events={"change .search-radio-grp input":"syncSearchBy","submit form#extend-trial-form":"extendTrial"},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(e),setTimeout(function(){return t.initCompanySelect2()}),this},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.initCompanySelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a Company",ajax:{url:"/x/api/v1/admin/search/companies",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):-1===e.indexOf("@")?(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0)):-1!==e.indexOf("@")&&(n.searchBy="email",$(".search-radio-grp input:nth(2)").prop("checked",!0))),{q:e,fields:n.companyFields[n.searchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.selectBox=$("#company-select2"),this.selectBox.select2(t),this.selectBox.on("change",function(e){return n.fetchCompany(e.val,n)})},n.prototype.fetchCompany=function(e,t){var n;return n=new r.CompanyModel,n.set("id",e),t.model=n,n.fetch({data:{company_data_action:"extend_trial"},success:function(e){var t;return t=new r.CompanyExtendTrialDataView({model:e}),$(".company-info-section").html(t.render().el)}})},n.prototype.extendTrial=function(e){var t,n,i,o;return o=this,e.preventDefault(),n=$(e.currentTarget),this.$(".message-box").addClass("hidden").html(""),t=n.find("button"),this.model.get("id")?"Trial"===this.model.get("plan_name")||"Free"===this.model.get("plan_name")?this.$("#new-payment-date").val()?(r.util.inlineLoadingStart(t),i={id:this.model.get("id"),new_payment_date:this.$("#new-payment-date").val()},$.ajax({url:"/x/api/v1/admin/companies/extend_trial",data:i,type:"PUT",success:function(e){return r.util.inlineLoadingEnd({message:"Success"}),o.$(".message-box").removeClass("hidden").addClass("success").html(e.message)},error:function(e){return e=JSON.parse(e.responseText),r.util.inlineLoadingEnd({message:"Error"}),o.$(".message-box").removeClass("hidden").addClass("error").html(e.message)}})):(this.$(".message-box").removeClass("hidden").addClass("error").html("You need to select a new expiry date"),void 0):void 0:(this.$(".message-box").removeClass("hidden").addClass("error").html("You need to select a company"),void 0)},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CompanyExtendTrialView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/duplicate-question",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.userFields={id:"id",name:"firstname, email"},n.prototype.questionFields={id:"id",name:"question"},n.prototype.events={"change .search-radio-grp input":"syncSearchBy","submit #duplicate-question-form":"duplicate"},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(e),setTimeout(function(){return t.initQuestionSelect2(),t.initUserSelect2()}),this},n.prototype.initQuestionSelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a Question",ajax:{url:"/x/api/v1/admin/search/questions",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",n.$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",n.$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.questionFields[n.searchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.questionSelectBox=$("#question-select2"),this.questionSelectBox.select2(t)},n.prototype.initUserSelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",n.$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",n.$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.userFields[n.searchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.userSelectBox=$("#user-select2"),this.userSelectBox.select2(t)},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.duplicate=function(e){var t,n,i,o;return e.preventDefault(),this.$(".message-box").addClass("hidden"),i=this,o=this.userSelectBox.select2("val"),n=this.questionSelectBox.select2("val"),o?n?(t={uid:o,qid:n},r.util.inlineLoadingStart($(e.currentTarget).find("button")[0]),$.ajax({url:"/x/api/v1/admin/questions/duplicate",type:"POST",dataType:"json",data:t,success:function(e){return r.util.inlineLoadingEnd({message:"Success"}),i.$(".message-box").html(e.message).removeClass("hidden error").addClass("success")},error:function(e){return e=JSON.parse(e.responseText),r.util.inlineLoadingEnd({message:"Error"}),i.$(".message-box").html(e.message).removeClass("hidden success").addClass("error")}})):(this.$(".message-box").html("Please Select a Test").removeClass("hidden success").addClass("error"),void 0):(this.$(".message-box").html("Please Select a User").removeClass("hidden success").addClass("error"),void 0)},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.DuplicateQuestionView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="x-admin/duplicate-test",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.userFields={id:"id",name:"firstname,email"},n.prototype.testFields={id:"id",name:"name"},n.prototype.events=function(){return{"change .search-radio-grp input":"syncSearchBy","submit #duplicate-test-form":"duplicate"}},n.prototype._render=function(){var e,t;return t=this,e=r.appController.template(this.template,this)({searchBy:t.searchBy}),$(this.el).html(e),setTimeout(function(){return t.initUserSelect2(),t.initTestSelect2()}),this},n.prototype.initUserSelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.userFields[n.searchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.userSelectBox=$(".user-select2"),this.userSelectBox.select2(t)},n.prototype.initTestSelect2=function(){var e,t,n;return n=this,e=r.util.admin.defaultSelect2Options(),t={placeholder:"Select a Test",ajax:{url:"/x/api/v1/admin/search/tests",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.testFields[n.searchBy]}},results:function(e){return{results:e.results}}}},t=_.extend(e,t),this.testSelectBox=$(".test-select2"),this.testSelectBox.select2(t),$(".test-select2").on("change",function(e){return $(".test-name-edit").val(e.added.primary)})},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.duplicate=function(e){var t,n,i,o,s;return e.preventDefault(),this.$(".message-box").addClass("hidden"),i=this,s=this.userSelectBox.select2("val"),o=this.testSelectBox.select2("val"),t=this.$(".test-name-edit").val(),s?o?(n={uid:s,tid:o,name:t},r.util.inlineLoadingStart($(e.currentTarget).find("button")[0]),$.ajax({url:"/x/api/v1/admin/tests/duplicate",type:"POST",dataType:"json",data:n,success:function(e){return r.util.inlineLoadingEnd({message:"Success"}),i.$(".message-box").html(e.message).removeClass("hidden error").addClass("success")},error:function(e){return e=JSON.parse(e.responseText),r.util.inlineLoadingEnd({message:"Error"}),i.$(".message-box").html(e.message).removeClass("hidden success").addClass("error")}})):(this.$(".message-box").html("Please Select a Test").removeClass("hidden success").addClass("error"),void 0):(this.$(".message-box").html("Please Select a User").removeClass("hidden success").addClass("error"),void 0)},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.DuplicateTestView=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/home",n.prototype._render=function(){var t;return t=e.appController.template(this.template,this),$(this.el).html(t),this},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.HomeView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/question-change-owner-data",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.userFields={id:"id",name:"firstname, email"},n.prototype.events={"change .search-radio-grp input":"syncSearchBy","click a.show-sub-section":"showSubSection","click a.hide-sub-section":"hideSubSection","click a#change-test-owner-submit":"changeOwner"},n.prototype.initialize=function(e){return null==e&&(e={}),this.model=e.model,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this)({model:this.model.toJSON(),searchBy:this.searchBy}),$(this.el).html(t),setTimeout(function(){return r.initUserSelect2()}),this},n.prototype.initUserSelect2=function(){var t,r,n;return n=this,t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",n.$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",n.$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.userFields[n.searchBy]}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.selectBox=$("#user-select2"),this.selectBox.select2(r)},n.prototype.syncSearchBy=function(){return this.searchBy=this.$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.showSubSection=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.addClass("hidden"),t.siblings(".hide-sub-section").removeClass("hidden"),$("."+t.data("link-container")).removeClass("hidden")},n.prototype.hideSubSection=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.addClass("hidden"),t.siblings(".show-sub-section").removeClass("hidden"),$("."+t.data("link-container")).addClass("hidden")},n.prototype.changeOwner=function(t){var r,n,i,o;return i=this,t.preventDefault(),r=$(t.currentTarget),o=this.selectBox.val(),o||$(".message-box").removeClass("hidden").addClass("error").html("Please Select a User"),e.util.inlineLoadingStart(r),n={user_id:o},$.ajax({url:"/x/api/v1/admin/questions/"+this.model.get("id")+"/change_owner",type:"PUT",data:n,success:function(t){return e.util.inlineLoadingEnd(t),setTimeout(function(){return i.model.fetch()},1e3)},error:function(t){return t=JSON.parse(t.responseText),e.util.inlineLoadingEnd(t)}})},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.QuestionChangeOwnerDataView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/question-change-owner",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.questionFields={id:"id",name:"question"},n.prototype.events=function(){return{"change .search-radio-grp input":"syncSearchBy"}},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(t),setTimeout(function(){return r.initQuestionSelect2()}),this},n.prototype.initQuestionSelect2=function(){var t,r,n;return n=this,t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a Question",ajax:{url:"/x/api/v1/admin/search/questions",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",n.$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",n.$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.questionFields[n.searchBy]}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.selectBox=$("#question-select2"),this.selectBox.select2(r),this.selectBox.on("change",function(t){return n.model=new e.QuestionModel,n.fetchQuestionData(t.val,n)})},n.prototype.syncSearchBy=function(){return this.searchBy=this.$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.fetchQuestionData=function(e,t){return t.model.set("id",e),t.model.fetch({data:{test_data_action:"change_question_owner"},success:function(){return t.renderQuestionDataView()}})},n.prototype.renderQuestionDataView=function(){var t;return t=new e.QuestionChangeOwnerDataView({model:this.model}),$("#question-info-section").html(t.render().el)},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.QuestionChangeOwnerView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/question-duplicate-from-hr",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.userFields={id:"id",name:"firstname,email"},n.prototype.events={"change .search-radio-grp input":"syncSearchBy","submit form#duplicate-from-hr-form":"duplicate"},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(t),setTimeout(function(){return r.initSlugSelect2(),r.initUserSelect2()}),this},n.prototype.initSlugSelect2=function(){var t,r;return t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a Challenge",ajax:{url:"/x/api/v1/admin/search/challenges",type:"GET",quietMillis:800,dataType:"json",data:function(e){return{q:e}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.challengeSelectBox=$("#challenge-select2"),this.challengeSelectBox.select2(r)},n.prototype.initUserSelect2=function(){var t,r,n;return n=this,t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",n.$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",n.$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.userFields[n.searchBy]}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.userSelectBox=$("#user-select2"),this.userSelectBox.select2(r)},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.duplicate=function(t){var r,n,i,o,s,a;return s=this,t.preventDefault(),n=$(t.currentTarget),r=n.find("button"),o=this.challengeSelectBox.val(),a=this.userSelectBox.val(),o?(e.util.inlineLoadingStart(r),i={slug:o},a&&(i.user_id=a),$.ajax({url:"/x/api/v1/admin/questions/duplicate_from_hr",type:"POST",data:i,success:function(t){var r;return e.util.inlineLoadingEnd({message:"Success"}),r=t.message+"<br> Question ID: "+t.question.id,s.$(".message-box").removeClass("hidden").addClass("success").html(r),s.userSelectBox.select2("data",null),s.challengeSelectBox.select2("data",null)},error:function(t){return e.util.inlineLoadingEnd({message:"Error"}),s.$(".message-box").removeClass("hidden").addClass("error").html(t.message)}})):(this.$(".message-box").removeClass("hidden").addClass("error").html("You need to select a challenge to duplicate"),void 0)},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.QuestionDuplicateFromHRView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/sectional-test",n.prototype.colors=["#FFBF00","#8DB600","#E30022","#9BDDFF"],n.prototype.initialize=function(e){return null==e&&(e={}),this.model=e.model},n.prototype.events=function(){return{"click .confirm-new-section-button":"confirmAddSection","click .show-edit-section-button":"showEditSection","click .cancel-edit-section-button":"cancelEditSection","click .confirm-edit-section-button":"confirmEditSection","click .confirm-section-button":"confirmEditSection","click .remove-section-button":"removeSection","keydown .add-section-form input":"preventEnter"}},n.prototype._render=function(){var t;return this.precalculateQuestionSection(),t=e.appController.template(this.template,this)({model:this.model.toJSON(),colors:this.colors}),$(this.el).html(t),this},n.prototype.precalculateQuestionSection=function(){var e,t,r;return e=this.model.get("questions"),t=null!=(r=this.model.get("time_slots_decoded"))?r:[],_.each(e,function(e,r){var n;return n=0,e.time_slot_index=void 0,_.each(t,function(t,i){return t&&(n+=t.questions,n>=r+1&&void 0===e.time_slot_index)?e.time_slot_index=i:void 0})}),this.model.set("questions",e)},n.prototype.preventEnter=function(e){var t;return t=e.keyCode||e.which,13===t?e.preventDefault():void 0},n.prototype.confirmAddSection=function(e){var t,r,n,i,o;return e.preventDefault(),this.$(".new-section-msg").addClass("hidden"),this.$("#new-section-name").removeClass("error"),this.$("#new-section-no-ques").removeClass("error"),this.$("#new-section-duration").removeClass("error"),n=this.$("#new-section-name").val(),t=parseInt(this.$("#new-section-no-ques").val(),10),r=parseInt(this.$("#new-section-duration").val(),10),n?t?r?(i=null!=(o=this.model.get("time_slots_decoded"))?o:[],i.push({name:n,duration:r,questions:t}),this.model.set("time_slots_decoded",i),this.model.set("duration",parseInt(this.model.get("duration"),10)+r),this.render(),setTimeout(function(){return $("#new-section-name").focus()})):(this.$("#new-section-duration").addClass("error"),this.$(".new-section-msg").removeClass("hidden success").addClass("error").html("Section Duration Cannot be blank"),void 0):(this.$("#new-section-no-ques").addClass("error"),this.$(".new-section-msg").removeClass("hidden success").addClass("error").html("Questions count cannot be blank"),void 0):(this.$("#new-section-name").addClass("error"),this.$(".new-section-msg").removeClass("hidden success").addClass("error").html("Name cannot be blank"),void 0)},n.prototype.showEditSection=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.parent().parent().addClass("hidden"),t.parent().parent().parent().find(".section-edit").removeClass("hidden"),t.parent().parent().parent().find(".section-name").focus()},n.prototype.cancelEditSection=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.parent().parent().addClass("hidden"),t.parent().parent().parent().find(".section-info").removeClass("hidden")},n.prototype.confirmEditSection=function(e){var t,r,n,i,o,s,a,c;return e.preventDefault(),s=$(e.currentTarget),s.parent().parent().find(".section-name").removeClass("error"),s.parent().parent().find(".section-no-ques").removeClass("error"),s.parent().parent().find(".section-duration").removeClass("error"),n=parseInt(s.data("index")),i=s.parent().parent().find(".section-name").val(),t=parseInt(s.parent().parent().find(".section-no-ques").val(),10),r=parseInt(s.parent().parent().find(".section-duration").val(),10),i?t?r?(a=null!=(c=this.model.get("time_slots_decoded"))?c:[],o=a[n],a[n]={name:i,duration:r,questions:t},this.model.set("time_slots_decoded",a),this.model.set("duration",parseInt(this.model.get("duration"),10)-o.duration+r),this.render()):(s.parent().parent().find(".section-duration").addClass("error"),s.parent().parent().find(".edit-section-msg").removeClass("hidden success").addClass("error").html("Section Duration Cannot be blank"),void 0):(s.parent().parent().find(".section-no-ques").addClass("error"),s.parent().parent().find(".edit-section-msg").removeClass("hidden success").addClass("error").html("Questions count cannot be blank"),void 0):(s.parent().parent().find(".section-name").addClass("error"),s.parent().parent().find(".edit-section-msg").removeClass("hidden success").addClass("error").html("Name cannot be blank"),void 0)},n.prototype.removeSection=function(e){var t,r,n,i;return e.preventDefault(),n=$(e.currentTarget),t=parseInt(n.data("index"),10),i=this.model.get("time_slots_decoded"),r=i[t],i.splice(t,1),this.model.set("time_slots_decoded",i),this.model.set("duration",parseInt(this.model.get("duration"),10)-r.duration),this.render()},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.SectionalTestView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.searchBySelected=!1,n.prototype.searchBy="id",n.prototype.userFields={id:"id",name:"firstname,email"},n.prototype.template="x-admin/switch-user",n.prototype.events=function(){return{"change .search-radio-grp input":"syncSearchBy","submit #su-form":"switchUser"}
},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(t),r.initUserSelect2(),this},n.prototype.initUserSelect2=function(){var t,r,n;return n=this,t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.userFields[n.searchBy]}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.userSelectBox=$("#user-select2"),this.userSelectBox.select2(r)},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.switchUser=function(t){var r,n,i,o;return t.preventDefault(),this.$(".message-box").html("").addClass("hidden"),o=this,i=$(t.currentTarget).find("button")[0],(r=this.userSelectBox.select2("val"))?(n={id:r},e.util.inlineLoadingStart(i),$.ajax({url:"/x/api/v1/admin/users/su",type:"POST",dataType:"json",data:n,success:function(t){return e.util.inlineLoadingEnd({message:"Success"}),o.$(".message-box").removeClass("hidden error").addClass("success").html(t.message),setTimeout(function(){return window.location.href="/x/tests"},1e3)},error:function(t){return e.util.inlineLoadingEnd({message:null}),t=JSON.parse(t.responseText),o.$(".message-box").removeClass("hidden success").addClass("error").html(t.message)}})):(this.$(".message-box").html("Please select a user to switch into his account").addClass("error").removeClass("success hidden"),void 0)},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.SwitchUserView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/test-add-sections",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.testFields={id:"id",name:"name"},n.prototype.initialize=function(){return this._subviews=[]},n.prototype.events=function(){return{"change .search-radio-grp input":"syncSearchBy","submit #test-sections-form":"updateTestSections"}},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(t),setTimeout(function(){return r.initTestSelect2()}),this},n.prototype.initTestSelect2=function(){var t,r,n;return n=this,t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a Test",ajax:{url:"/x/api/v1/admin/search/tests",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.testFields[n.searchBy]}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.testSelectBox=$(".test-select2"),this.testSelectBox.select2(r),this.testSelectBox.on("change",function(e){return n.fetchTestData(e.val)})},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.formatResult=function(e){var t,r,n,i;return t=e.id,n=e.primary,i=e.secondary,r="<table class='result-result'><tr>",n&&(r+="<td class='result-info'><div class='result-title'>"+t+" : "+n+"</div>"),i&&(r+="<div class='result-data'>"+i+"</div>"),r+="</td></tr></table>"},n.prototype.formatSelection=function(e){var t;return t=e.primary,t?""+e.id+" : "+t:void 0},n.prototype.fetchTestData=function(t){var r;return r=this,this.model=new e.TestModel,this.model.set("id",t),this.model.fetch({silent:!0,success:function(t){return r.testView=new e.SectionalTestView({model:t}),r.$("#test-sections-container").html(r.testView.render().el)}})},n.prototype.updateTestSections=function(t){var r,n,i,o,s,a,c,u;if(t.preventDefault(),a=this,this.$(".message-box").addClass("hidden"),r=$(t.currentTarget).find("button[type=submit]"),u=this.model.get("time_slots_decoded"),c=this.model.get("id"),s=this.model.get("questions"),i=this.model.get("duration"),u&&u.length){if(n=0,_.each(u,function(e){return e?n+=parseInt(e.questions,10):void 0}),s.length>n)return this.$(".message-box").html("Sections contain lesser questions than total test questions").removeClass("hidden success").addClass("error"),void 0;if(s.length<n)return this.$(".message-box").html("Sections contain more questions than total test questions").removeClass("hidden success").addClass("error"),void 0}return o={time_slots:JSON.stringify(null!=u?u:[]),duration:i},e.util.inlineLoadingStart(r),$.ajax({url:"/x/api/v1/admin/tests/"+c+"/update_sections",type:"PUT",dataType:"json",data:o,success:function(t){return e.util.inlineLoadingEnd({message:t.message})},error:function(t){return t=JSON.parse(t.responseText),e.util.inlineLoadingEnd({message:t.message})}})},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.TestAddSectionsView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/test-change-owner-data",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.userFields={id:"id",name:"firstname,email"},n.prototype.events={"change .search-radio-grp input":"syncSearchBy","click a.show-sub-section":"showSubSection","click a.hide-sub-section":"hideSubSection","click a#change-test-owner-submit":"changeOwner"},n.prototype.initialize=function(e){return null==e&&(e={}),this.model=e.model,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render)},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this)({model:this.model.toJSON(),searchBy:this.searchBy}),$(this.el).html(t),setTimeout(function(){return r.initUserSelect2()}),this},n.prototype.initUserSelect2=function(){var t,r,n;return n=this,t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",n.$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",n.$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.userFields[n.searchBy]}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.selectBox=$("#user-select2"),this.selectBox.select2(r)},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.showSubSection=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.addClass("hidden"),t.siblings(".hide-sub-section").removeClass("hidden"),$("."+t.data("link-container")).removeClass("hidden")},n.prototype.hideSubSection=function(e){var t;return e.preventDefault(),t=$(e.currentTarget),t.addClass("hidden"),t.siblings(".show-sub-section").removeClass("hidden"),$("."+t.data("link-container")).addClass("hidden")},n.prototype.changeOwner=function(t){var r,n,i,o,s;return o=this,t.preventDefault(),n=$(t.currentTarget),s=this.selectBox.val(),s||$(".message-box").removeClass("hidden").addClass("error").html("Please Select a User"),r=$("#change-question-owner").prop("checked"),e.util.inlineLoadingStart(n),i={user_id:s,change_question_owner:r},$.ajax({url:"/x/api/v1/admin/tests/"+this.model.get("id")+"/change_owner",type:"PUT",data:i,success:function(t){return e.util.inlineLoadingEnd(t),setTimeout(function(){return o.model.fetch()},1e3)},error:function(t){return t=JSON.parse(t.responseText),e.util.inlineLoadingEnd(t)}})},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.TestChangeOwnerDataView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/test-change-owner",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.testFields={id:"id",name:"name"},n.prototype.events=function(){return{"change .search-radio-grp input":"syncSearchBy"}},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(t),setTimeout(function(){return r.initTestSelect2()}),this},n.prototype.initTestSelect2=function(){var t,r,n;return n=this,t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a Test",ajax:{url:"/x/api/v1/admin/search/tests",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",n.$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",n.$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.testFields[n.searchBy]}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.selectBox=$("#test-select2"),this.selectBox.select2(r),this.selectBox.on("change",function(t){return n.model=new e.TestModel,n.fetchTestData(t.val,n)})},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.fetchTestData=function(e,t){return t.model.set("id",e),t.model.fetch({data:{test_data_action:"change_test_owner"},success:function(){return t.renderTestDataView()}})},n.prototype.renderTestDataView=function(){var t;return t=new e.TestChangeOwnerDataView({model:this.model}),$("#test-info-section").html(t.render().el)},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.TestChangeOwnerView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/test-invite-candidates",n.prototype.initialize=function(){return this._subviews=[]},n.prototype.events=function(){return{"submit form[name=invite-candidates-form]":"inviteCandidates"}},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this),$(this.el).html(t),this},n.prototype.inviteCandidates=function(e){var t;return e.preventDefault(),this.$(".message-box").empty(),t={url:"/x/api/v1/admin/tests/invite_candidates?force_invite="+$("input[name=force-invite]").get(0).checked,type:"POST",dataType:"json",success:function(e){return function(t){return e.$(".message-box").empty(),t.invited&&t.invited>0&&e.$(".message-box.success").append(""+t.invited+" candidates have been invited"),t.invited_rows&&e.$(".message-box.success").append(" from rows ["+t.invited_rows.join(",")+"] <br/>"),t.errors&&t.errors.length>0?e.$(".message-box.error").append(""+t.errors.join("<br/>")):void 0}}(this),error:function(){return function(e){return console.log("Error Occured"),console.log(e)}}(this)},$(":file").length>0&&(t.iframe=!0,t.processData=!1,t.files=$(":file")),$.ajax(t)},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.TestInviteCandidatesView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/top-nav-bar",n.prototype.class_name="hr-nav",n.prototype.activeSection="",n.prototype.initialize=function(e){return this.model=e.model,this.listenTo(this.model,"change",this.render)},n.prototype.events=function(){return{"click a.js-nav-link":"navigateAnchor"}},n.prototype.render=function(){var t;return this.activeSection=this.getActiveSection(),t=e.appController.template(this.template,this)({model:this.model.toJSON(),_model:this.model,activeSection:this.activeSection}),$(this.el).html(t),this.highlightActiveSection(),this},n.prototype.navigateAnchor=function(t){var r;return t.ctrlKey||t.metaKey?!0:(t.preventDefault(),r=$(t.currentTarget).attr("href"),r&&"#"!==r?(e.router.navigate(r,!0),this.highlightActiveSection()):void 0)},n.prototype.highlightActiveSection=function(){return this.activeSection=this.getActiveSection(),this.$(".js-nav-sections").removeClass("active"),"admin"===this.activeSection?this.$(".js-admin-section").addClass("active"):"analytics"===this.activeSection?this.$(".js-analytics-section").addClass("active"):void 0},n.prototype.getActiveSection=function(){return Backbone.history.fragment?Backbone.history.fragment.split("/")[0]:void 0},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.TopNavigationBarView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,r),n.prototype.template="x-admin/user-change-email",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.userFields={id:"id",name:"firstname,email"},n.prototype.events=function(){return{"change .search-radio-grp input":"syncSearchBy","submit #change-user-email":"updateUserEmail"}},n.prototype._render=function(){var t,r;return r=this,t=e.appController.template(this.template,this)({searchBy:this.searchBy}),$(this.el).html(t),setTimeout(function(){return r.initUserSelect2()}),this},n.prototype.initUserSelect2=function(){var t,r,n;return n=this,t=e.util.admin.defaultSelect2Options(),r={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(e){return n.searchBySelected||($.isNumeric(e)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:e,fields:n.userFields[n.searchBy]}},results:function(e){return{results:e.results}}}},r=_.extend(t,r),this.selectBox=$(".user-select2"),this.selectBox.select2(r)},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.updateUserEmail=function(t){var r,n,i,o,s,a,c;return c=this,t.preventDefault(),n=$(t.currentTarget),r=n.find("button")[0],this.$(".message-box").addClass("hidden"),this.$(".new-email").removeClass("error"),o=this.$(".user-select2").select2("val"),i=this.$(".new-email").val(),a=this.$(".send-confirmation-mail").prop("checked"),o?i?(e.util.inlineLoadingStart(r),s={id:o,email:i,send_confirmation:a},$.ajax({url:"/x/api/v1/admin/users/update_email",type:"PUT",data:s,dataType:"json",success:function(t){return e.util.inlineLoadingEnd(t),c.render()},error:function(t){return t=JSON.parse(t.responseText),e.util.inlineLoadingEnd({message:null}),c.$(".message-box").removeClass("hidden success").addClass("error").html(t.message),c.$(".new-email").addClass("error")}})):(this.$(".message-box").removeClass("hidden success").addClass("error").html("Please Enter an Email"),this.$(".new-email").addClass("error"),void 0):(this.$(".message-box").removeClass("hidden success").addClass("error").html("Please Select a User"),void 0)},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.UserChangeEmailView=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return e=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.url=function(){return this.get("id")?"/x/api/v1/admin/companies/"+this.get("id"):"/x/api/v1/admin/companies"},r}(window.HR.GenericModel),r=null!=(n=window.HR)?n:{},r.CompanyModel=e})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.caching=!1,r.prototype.url=function(){return this.get("id")?"/x/api/v1/admin/periodic_reports/"+this.get("id"):"/x/api/v1/admin/periodic_reports"},r}(window.HR.GenericModel),e=null!=(n=window.HR)?n:{},e.PeriodicReportModel=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.url=function(){return"/x/api/v1/admin/questions/"+this.get("id")},r}(window.HR.GenericModel),e=null!=(n=window.HR)?n:{},e.QuestionModel=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.url=function(){return"/x/api/v1/admin/tests/"+this.get("id")},r}(window.HR.GenericModel),e=null!=(n=window.HR)?n:{},e.TestModel=r})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var i in r)e.call(r,i)&&(t[i]=r[i]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};jQuery(function(){var e,r,n;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.page=1,r.prototype.url=function(){return"/x/api/v1/admin/periodic_reports?page="+this.page},r.prototype.setPage=function(e){return this.page=e},r.prototype.model=window.HR.PeriodicReportModel,r}(window.HR.GenericCollection),e=null!=(n=window.HR)?n:{},e.PeriodicReportsCollection=r})}.call(this),function(){}.call(this);
//# sourceMappingURL=basic-88998ff129df054918f80f1c102d1952.js.map