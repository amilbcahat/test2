(function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){return this.on("error",function(t){return function(e,n){var a;return a=n&&n.responseText?JSON.parse(n.responseText):{message:""},void 0!==t.disableThrobber&&t.disableThrobber===!0||(r.util&&r.util.ajaxmsg&&r.util.ajaxmsg(a.message,!1,!0,1e4),!r.loadingButton)?void 0:r.util.inlineLoadingEnd(a)}}(this)),n.__super__.initialize.call(this,t)},n.prototype.save=function(t,e,a){return void 0===this.disableThrobber||this.disableThrobber!==!0?r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,n.__super__.save.call(this,t,e,a)},n.prototype.destroy=function(t){return void 0===this.disableThrobber||this.disableThrobber!==!0?r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,n.__super__.destroy.call(this,t)},n.prototype.parse=function(t,e){var a;return this.sync_status=!0,void 0===this.disableThrobber||this.disableThrobber!==!0?(r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("",!1,!0,0),r.loadingButton&&r.util.inlineLoadingEnd(t)):this.disableThrobber=!1,a=t&&t.model?t.model:t,n.__super__.parse.call(this,a,e)},n.prototype.fetch=function(){return this.trigger("initreset"),void 0===this.disableThrobber||this.disableThrobber!==!0?r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,Backbone.Model.prototype.fetch.apply(this,arguments)},n.prototype.setCaching=function(t){this.caching=t},n}(Backbone.Model),r=null!=(n=window.HR)?n:{},r.GenericModel=t})}).call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){return this.sync_status=!1,this.render_once=!1,this.on("error",function(t){return function(e,n){var a;return a=JSON.parse(n.responseText),void 0!==t.disableThrobber&&t.disableThrobber===!0||(r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("",!1,!0,0),!r.loadingButton)?void 0:r.util.inlineLoadingEnd(a)}}(this)),n.__super__.initialize.call(this,t)},n.prototype.fetch=function(t){return null==t&&(t={}),this.trigger("initreset"),void 0===this.disableThrobber||this.disableThrobber!==!0?r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,Backbone.Collection.prototype.fetch.apply(this,arguments)},n.prototype.parse=function(t){return this.sync_status=!0,this.render_once=!1,t.metamodel&&(this.metamodel=t.metamodel),"number"==typeof t.total&&(this.total=t.total),"number"==typeof t.page&&(this.page=t.page),void 0===this.disableThrobber||this.disableThrobber!==!0?(r.util&&r.util.ajaxmsg&&r.util.ajaxmsg("",!1,!0,0),r.loadingButton&&r.util.inlineLoadingEnd(t)):this.disableThrobber=!1,t.models},n.prototype.setCurrentPage=function(t){this.page=t},n.prototype.getCurrentPage=function(){return this.page},n.prototype.getTotal=function(){return this.total},n}(Backbone.Collection),r=null!=(n=window.HR)?n:{},r.GenericCollection=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(t){var e;return this.active_nav_link=t.active_nav_link,this.sideBarClass=null!=(e=t.sideBarClass)?e:"open"},n.prototype.updateData=function(t,e){return this.model=t,this.active_nav_link=e,this.sideBarClass=this.collapseClass()},n.prototype.collapseClass=function(){return $(".hre-sidebar").hasClass("open")?"open":$(".hre-sidebar").hasClass("closed")?"closed":void 0},n.prototype._render=function(){var t;return t=r.appController.template(this.template,this)({active_nav_link:this.active_nav_link,throbber:r.appController.viewLoader(),sideBarClass:this.sideBarClass}),$(this.el).html(t),this},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CommonSidebarNavigationView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.subViewClasses={},n.prototype.events={"click a.graph-type-change":"changeGraphType"},n.prototype.initialize=function(t){var e;return e=this,this.setupSubViewClasses(),this.company=t.model,this.parent=t.parent},n.prototype._render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({graphType:this.graphType}),$(this.el).html(t),setTimeout(function(){return e.setSubView()}),this},n.prototype.changeGraphType=function(t){var e,r;return t.preventDefault(),e=$(t.currentTarget),r=e.data("graph-type"),this.graphType!==r?(this.graphType=r,this.render()):void 0},n.prototype.setSubView=function(){var t;return t=new this.subViewClasses[this.graphType]({model:this.company,parent:this}),$("#data-sub-section-container").html(t.el)},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.GenericCompanyDashboardSecondaryView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/common-company-line-data-view",n.prototype.initialize=function(t){return null==t&&(t={}),this.company=t.model,this.company.setAction(this.dataAction),this.dataPoint=t.dataPoint,this.series=t.series,this.graphType=t.graphType,this.aggregationFrame=t.aggregationFrame},n.prototype._render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({data:this.company.toJSON()[this.dataAction],tableHeader:this.tableHeader}),$(this.el).html(t),setTimeout(function(){return e.initDataTable()}),this},n.prototype.initDataTable=function(){return this.dataTable=$(".line-graph-data-table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",bPaginate:!0,sPaginationType:"bootstrap",iDisplayLength:50,bDestroy:!0})},n.prototype.fetchData=function(){var t,e;return e=this,t={aggregation_frame:this.aggregationFrame,date_object_string:this.dataPoint,graph_type:this.graphType,series:this.series},this.company.fetch({data:t,success:function(){return e.render(),setTimeout(function(){return $("#control-overflow").animate({scrollTop:1500},300)})}})},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.GenericCompanyLineDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.aggregationFrame="day",n.prototype.template="x-analytics/company-common-line-graph",n.prototype.initialize=function(t){return this.company=t.model,this.company.get("created_at")?this.startDate=moment(this.company.get("created_at")).format("YYYY/MM/DD"):(this.startDate=moment().subtract("days",30).startOf("day").format("YYYY/MM/DD"),this.aggregationFrame="day"),this.endDate=moment().format("YYYY/MM/DD"),this.parent=t.parent,this.fetchData()},n.prototype.events={"change #aggregation-select":"changeAggregation"},n.prototype._render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({startDate:this.startDate,endDate:this.endDate,aggregation_frame:this.aggregationFrame}),$(this.el).html(t),setTimeout(function(){return e.initGraph(),e.initDateRange()}),this},n.prototype.initDateRange=function(){var t,e,r,n,a;return a=this,e=moment().subtract("month",1).startOf("month"),n=moment().subtract("week",1).startOf("week"),t=moment().subtract("month",1).endOf("month"),r=moment().subtract("week",1).endOf("week"),$("input#date-range-select").daterangepicker({format:"YYYY-MM-DD",ranges:{"Last 30 Days":[moment().subtract("days",29),moment()],"Last Month":[e,t],"Last Week":[n,r]},startDate:a.startDate,endDate:a.endDate},function(t,e){return a.startDate=t.format("YYYY/MM/DD"),a.endDate=e.format("YYYY/MM/DD"),a.fetchData(),$("input#date-range-select").val(a.startDate+" - "+a.endDate)})},n.prototype.fetchData=function(){var t,e;return e=this,this.company.setAction(this.companyAction),t={aggregation_frame:this.aggregationFrame,date_range:this.startDate+"-"+this.endDate,graph_type:this.graphType},this.company.fetch({data:t,success:function(){return e.render()}})},n.prototype.changeAggregation=function(t){var e;return e=$(t.currentTarget),this.aggregationFrame=e.val(),this.fetchData()},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.GenericCompanyLineGraphView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template="x-analytics/analytics-navigation",r.prototype.className="analytics-navigation",r}(window.HR.CommonSidebarNavigationView),r=null!=(n=window.HR)?n:{},r.AnalyticsNavigationView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.data=[],n.prototype.fromTime="",n.prototype.toTime="",n.prototype._render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({data:this.data,fromTime:this.fromTime,toTime:this.toTime}),$(this.el).html(t),setTimeout(function(){return e.initDataTable()}),this},n.prototype.initDataTable=function(){return this.dataTable=$(".trial-data-table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",bPaginate:!0,sPaginationType:"bootstrap",iDisplayLength:50,bDestroy:!0})},n.prototype.fetchData=function(t,e){var r,n;return n=this,r={aggregation_frame:e,date_object_string:t},$.ajax({url:this.dataUrl,type:"GET",data:r,success:function(t){return n.data=t.data,n.fromTime=t.from_time,n.toTime=t.to_time,n.render(),setTimeout(function(){return $("#control-overflow").animate({scrollTop:520},300)})}})},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CommonSignupsDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.aggregation_frame="day",n.prototype.data=[],n.prototype.startDate=moment().subtract("month",1).format("YYYY/MM/DD"),n.prototype.endDate=moment().format("YYYY/MM/DD"),n.prototype.subviews=[],n.prototype.events={"change #aggregation-select":"changeAggregation","click .x-admin-sticky-note .hide-note":"hideNote"},n.prototype.initialize=function(){var t;return this.noteHidden=null!=(t=r.AnalyticsLocalStorage.get("trial_signups_note_hide"))?t:!1,this.fetchData()},n.prototype._render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({aggregation_frame:this.aggregation_frame,startDate:this.startDate,endDate:this.endDate,noteHidden:this.noteHidden}),$(this.el).html(t),e.data.length&&setTimeout(function(){return e.initDateRangeSelect(),e.initGraph(),e.initDataView()}),this},n.prototype.initDateRangeSelect=function(){var t,e,r,n,a;return a=this,e=moment().subtract("month",1).startOf("month"),n=moment().subtract("week",1).startOf("week"),t=moment().subtract("month",1).endOf("month"),r=moment().subtract("week",1).endOf("week"),$("input#date-range-select").daterangepicker({format:"YYYY-MM-DD",ranges:{"Last 30 Days":[moment().subtract("days",29),moment()],"Last Month":[e,t],"Last Week":[n,r]},startDate:a.startDate,endDate:a.endDate},function(t,e){return a.startDate=t.format("YYYY/MM/DD"),a.endDate=e.format("YYYY/MM/DD"),a.fetchData(),$("input#date-range-select").val(a.startDate+" - "+a.endDate)})},n.prototype.initGraph=function(){var t,e,r,n;return r=this,t=_.map(r.data,function(t){return t.date}),e=_.map(r.data,function(t){return t.count}),n=Math.ceil(t.length/9),$("#graph-signups").highcharts({chart:{type:"line",spacingTop:40,zoomType:"x"},title:{text:r.graphTitle,margin:20,floating:!1},backgroundColor:null,height:250,xAxis:{categories:t,tickInterval:n,offset:0,startOnTick:!0,endOnTick:!0,showFirstLabel:!0,showLastLabel:!0,title:{text:"Time"}},yAxis:{gridLineColor:"#E0E0E0",allowDecimals:!1,min:0,tickLength:7,title:{text:"#Signups"}},series:[{name:"Signups",data:e,type:"line"}],legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){var t;return t=this.category,r.dataView.fetchData(t,r.aggregation_frame)}}}}}})},n.prototype.changeAggregation=function(t){var e;return e=$(t.currentTarget),this.aggregation_frame=e.val(),this.fetchData()},n.prototype.fetchData=function(){var t,e;return e=this,t={aggregation_frame:e.aggregation_frame,date_range:e.startDate+"-"+e.endDate},$.ajax({url:"/x/api/v1/analytics/users/signups",type:"GET",data:t,success:function(t){return e.data=t,e.render()}})},n.prototype.hideNote=function(t){return t.preventDefault()},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CommonSignupsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.events={"click a.delete-item":"removeFromWatchList","change .search-radio-grp input":"syncSearchBy"},n.prototype.initialize=function(t){return null==t&&(t={}),this.list=t.collection,this.listenTo(this.list,"add",this.render)},n.prototype._render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({list:this.list.toJSON(),searchBy:this.searchBy}),$(this.el).html(t),setTimeout(function(){return e.initUserSelect2(),e.initWatchlistDataTable()}),this},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.initWatchlistDataTable=function(){var t;return t=this,this.dataTable=$(".watchlist-table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",bPaginate:!0,sPaginationType:"bootstrap",iDisplayLength:50,bDestroy:!0,aaSorting:[[0,"asc"]]})},n.prototype.removeFromWatchList=function(t){var e,n,a,o;return o=this,t.preventDefault(),e=$(t.currentTarget),n=e.data("item-id"),a=this.collection.find(function(t){return t.get("id")===n}),a.destroy({success:function(t,e){return r.util.ajaxmsg(e.message,!1,!0,2),o.render()},error:function(t){return t=JSON.parse(t),r.util.ajaxmsg(t.message,!1,!0,2)}})},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CommonWatchlistView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/companies-dashboard",n.prototype.localStorageKey="companies_table_type",n.prototype.viewType="dataUsage",n.prototype.startDate=moment().subtract("month",1).format("YYYY/MM/DD"),n.prototype.endDate=moment().format("YYYY/MM/DD"),n.prototype.companyType="all",n.prototype.duration="daily",n.prototype.noSort={compact:{licenseUsage:[2,4,6,8,10],dataUsage:[2,4,6,8]},full:{licenseUsage:[6,8,10,12,14,16],dataUsage:[6,8,10,12,14]}},n.prototype.initialize=function(t){return null==t&&(t={}),this.companies=t.collection,this.setTableTypeFromLocal()},n.prototype.events={"change select#payment-type-change":"changePaymentType","change select#duration-change":"changeDuration","change select#view-type-change":"changeViewType","click a#toggle-table-type":"toggleTableType"},n.prototype._render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({viewType:this.viewType,duration:this.duration,companyType:this.companyType,startDate:this.startDate,endDate:this.endDate,tableType:this.tableType}),$(this.el).html(t),setTimeout(function(){return e.initDateRangeSelect(),"compact"===e.tableType&&r.appView.closeSidebar(),e.initDataTable()},100),this},n.prototype.initDataTable=function(){var t;return t=this,r.util.admin.initDataTablePercentSort(),this.dataTable=$(".dash-table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",oLanguage:{sEmptyTable:"No Customers found matching these parameters",sInfoEmpty:"No Customers found matching these parameters",sZeroRecords:"No Customers found matching these parameters"},bPaginate:!0,sPaginationType:"bootstrap",iDisplayLength:50,bServerSide:!0,bDestroy:!0,aaSorting:[[1,"asc"]],aoColumnDefs:[{bSortable:!1,aTargets:this.noSort[this.tableType][this.viewType]}],sAjaxSource:"/x/api/v1/analytics/companies?type="+t.companyType+"&duration="+t.duration+"&date_range="+t.dateRange+"&table_type="+t.tableType+"&view_type="+t.viewType,fnServerData:function(e,n,a){return r.util.ajaxmsg("Loading Customers Data..",!0,!1,10),$.getJSON(e,n,function(e){return _.isFunction(t.afterRequest)&&(e=t.afterRequest(e)),t.data=e,a(e)})},fnRowCallback:function(t,e){return $(t).data("company-id",e[0])}}).fnSetFilteringDelay(800),this.searchText&&this.dataTable.fnFilter(this.searchText),$(".dash-table tbody tr").live("click",function(t){var e;return e=$(t.currentTarget).data("company-id"),r.router.navigate("analytics/companies/"+e,!0)})},n.prototype.afterRequest=function(t){var e;return r.util.ajaxmsg("Done.",!1,!0,.5),e={aaData:[],iTotalDisplayRecords:0,iTotalRecords:0,models:[]},_.isObject(t)&&_.isArray(t.models)&&(e.iTotalDisplayRecords=t.total,e.iTotalRecords=t.total,e.aaData=_.map(t.models,function(t){return function(e,r){return t.mapColumns(e,r)}}(this))),e},n.prototype.mapColumns=function(t){var e;return e=[],"full"===this.tableType&&e.push(t.id),e.push(t.name),"full"===this.tableType&&(e.push(t.email),e.push(t.plan),e.push(t.country)),"dataUsage"===this.viewType&&(e.push(t.tests_count),e.push(t.tests_diff),e.push(t.invites_count),e.push(t.invites_diff),e.push(t.attempts_count),e.push(t.attempts_diff),e.push(t.interviews_count),e.push(t.interviews_diff)),"licenseUsage"===this.viewType&&(e.push(t.teams_count),e.push(t.teams_diff),e.push(t.admins_count),e.push(t.admins_diff),e.push(t.recruiters_count),e.push(t.recruiters_diff),e.push(t.developers_count),e.push(t.developers_diff),e.push(t.users_count),e.push(t.users_diff)),"full"===this.tableType&&(e.push(t.created_at),e.push(t.score_text)),e},n.prototype.setTableTypeFromLocal=function(){var t;return t=r.AnalyticsLocalStorage.get(this.localStorageKey),this.tableType=t?t:"full"},n.prototype.toggleTableType=function(t){return t.preventDefault(),"full"===this.tableType?(this.tableType="compact",r.appView.closeSidebar()):this.tableType="full",r.AnalyticsLocalStorage.set(this.localStorageKey,this.tableType),this.render()},n.prototype.changePaymentType=function(t){var e,r,n;return r=this,e=$(t.currentTarget),n=this.companyType,n!==e.val()?(this.companyType=e.val(),this.searchText=$(".dataTables_filter input").val(),r.render()):void 0},n.prototype.changeDuration=function(t){var e,r,n;return n=this,e=$(t.currentTarget),r=this.duration,r!==e.val()?"custom"===e.val()?this.customDuration():(this.duration=e.val(),this.searchText=$(".dataTables_filter input").val(),n.render()):void 0},n.prototype.initDateRangeSelect=function(){var t,e,r,n,a;return a=this,e=moment().subtract("month",1).startOf("month"),n=moment().subtract("week",1).startOf("week"),t=moment().subtract("month",1).endOf("month"),r=moment().subtract("week",1).endOf("week"),$("input#date-range-select").daterangepicker({format:"YYYY-MM-DD",ranges:{"Last Month":[e,t],"Last Week":[n,r]},startDate:a.startDate,endDate:a.endDate},function(t,e){return a.startDate=t.format("YYYY/MM/DD"),a.endDate=e.format("YYYY/MM/DD"),a.fetchCustomData(),$("input#date-range-select").val(a.startDate+" - "+a.endDate)})},n.prototype.customDuration=function(){return this.duration="custom",this.fetchCustomData()},n.prototype.fetchCustomData=function(){var t;return t=this,this.searchText=$(".dataTables_filter input").val(),this.dateRange=this.startDate+"-"+this.endDate,t.render()},n.prototype.changeViewType=function(t){var e;return e=$(t.currentTarget),this.viewType!==e.val()?(this.searchText=$(".dataTables_filter input").val(),this.viewType=e.val(),this.render()):void 0},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CompaniesDashboardView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.dataAction="data_usage_table",r.prototype.tableHeader="Attempts Data",r}(window.HR.GenericCompanyLineDataView),r=null!=(n=window.HR)?n:{},r.CompanyAttemptsTimeDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.graphType="attempts_time",n.prototype.companyAction="data_usage",n.prototype.aggregationFrame="month",n.prototype.dataViewObject=function(t){return new r.CompanyAttemptsTimeDataView(t)},n.prototype.initGraph=function(){var t,e,n,a,o,i;return o=this,e=this.company.get("data_usage").attempts_time,t=_.map(e,function(t){return t.date}),a=_.map(e,function(t){return t.count}),i=Math.ceil(t.length/9),n={type:"line",text:"# Attempts vs Time Graph",categories:t,tickInterval:i,xTitle:"Time",yTitle:"# Tests Attempted",results:a,seriesName:"Attempts",plotClick:function(){var t;return t=o.dataViewObject({graphType:o.graphType,aggregationFrame:o.aggregationFrame,model:o.company,dataAction:o.companyAction,dataPoint:this.category,series:this.series.name,parent:o}),t.fetchData(),$(".graph-data-view-container").html(t.el)}},this.$(".graph-container").highcharts(r.util.admin.highChartOptions(n))},n}(window.HR.GenericCompanyLineGraphView),r=null!=(n=window.HR)?n:{},r.CompanyAttemptsTimeGraphView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/company-basic-data",n.prototype.initialize=function(t){var e;return null==t&&(t={}),e=this,this.parent=t.parent,this.company=t.model,this.company.setAction("basic"),this.company.fetch({success:function(){return e.render()}})},n.prototype._render=function(){var t;return this.company.get("basic")&&(t=r.appController.template(this.template,this)({company:this.company.toJSON()}),$(this.el).html(t)),this},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CompanyBasicDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/company-dashboard",n.prototype.searchBy="id",n.prototype.searchBySelected=!1,n.prototype.subViewType="basic",n.prototype.companyFields={id:"id",name:"name",email:"email"},n.prototype.subViews={},n.prototype.rendered=!1,n.prototype.initialize=function(t){return null==t&&(t={}),this.model=t.model?t.model:new r.DashboardCompanyModel,this.populateSubViews()},n.prototype.events={"change .search-radio-grp input":"syncSearchBy","click a.change-view-type":"changeViewType"},n.prototype._render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({company:this.model.toJSON(),searchBy:this.searchBy,subViewType:this.subViewType}),$(this.el).html(t),setTimeout(function(){return e.initSelect2()}),this},n.prototype.syncSearchBy=function(){return this.searchBy=$(".search-radio-grp input:checked").val(),this.searchBySelected=!0},n.prototype.initSelect2=function(){var t,e,n;return n=this,t=r.util.admin.defaultSelect2Options(),e={placeholder:"Select a Company",ajax:{url:"/x/api/v1/admin/search/companies",type:"GET",quietMillis:800,dataType:"json",data:function(t){return n.searchBySelected||($.isNumeric(t)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):-1===t.indexOf("@")?(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0)):-1!==t.indexOf("@")&&(n.searchBy="email",$(".search-radio-grp input:nth(2)").prop("checked",!0))),{q:t,fields:n.companyFields[n.searchBy]}},results:function(t){return{results:t.results}}}},e=_.extend(t,e),this.selectBox=$("#company-select2"),this.selectBox.select2(e),this.selectBox.on("change",function(t){return n.model=new r.DashboardCompanyModel,n.model.set("id",t.val),n.fetchCompany()}),this.model.get("name")&&this.model.get("id")?(this.selectBox.select2("data",{id:this.model.get("id"),primary:this.model.get("name")}),n.renderSubView(),n.showSubViewOptions()):void 0},n.prototype.fetchCompany=function(t){var e;return null==t&&(t={}),e=this,this.model.fetch({success:function(){return $("#sub-view-container").html(""),e.renderSubView(),e.showSubViewOptions()}})},n.prototype.populateSubViews=function(){return this.subViews.basic=r.CompanyBasicDataView,this.subViews.data=r.CompanyDataUsageView,this.subViews.license=r.CompanyLicenseUsageView},n.prototype.showSubViewOptions=function(){return this.$(".subview-header-container").removeClass("hidden")},n.prototype.renderSubView=function(){var t;return t=new this.subViews[this.subViewType]({model:this.model,parent:this}),$("#sub-view-container").html(t.render().el)},n.prototype.changeViewType=function(t){var e,r;return t.preventDefault(),this.model.get("id")&&(e=$(t.currentTarget),r=e.data("view-type"),r!==this.subViewType)?(this.subViewType=r,this.render(),this.renderSubView()):void 0},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.CompanyDashboardView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/company-data-usage",n.prototype.graphType="tests_time",n.prototype.setupSubViewClasses=function(){return this.subViewClasses.tests_time=r.CompanyTestsTimeGraphView,this.subViewClasses.invites_time=r.CompanyInvitesTimeGraphView,this.subViewClasses.attempts_time=r.CompanyAttemptsTimeGraphView,this.subViewClasses.interviews_time=r.CompanyInterviewsTimeGraphView},n}(window.HR.GenericCompanyDashboardSecondaryView),r=null!=(n=window.HR)?n:{},r.CompanyDataUsageView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.dataAction="data_usage_table",r.prototype.tableHeader="Interviews Data",r}(window.HR.GenericCompanyLineDataView),r=null!=(n=window.HR)?n:{},r.CompanyInterviewsTimeDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.graphType="interviews_time",n.prototype.companyAction="data_usage",n.prototype.aggregationFrame="month",n.prototype.dataViewObject=function(t){return new r.CompanyInterviewsTimeDataView(t)},n.prototype.initGraph=function(){var t,e,n,a,o,i;return o=this,e=this.company.get("data_usage").interviews_time,t=_.map(e,function(t){return t.date}),a=_.map(e,function(t){return t.count}),i=Math.ceil(t.length/9),n={type:"line",text:"# Interviews vs Time Graph",categories:t,tickInterval:i,xTitle:"Time",yTitle:"# Interview Created",results:a,seriesName:"Interviews",plotClick:function(){var t;return t=o.dataViewObject({graphType:o.graphType,aggregationFrame:o.aggregationFrame,model:o.company,dataAction:o.companyAction,dataPoint:this.category,series:this.series.name,parent:o}),t.fetchData(),$(".graph-data-view-container").html(t.el)}},this.$(".graph-container").highcharts(r.util.admin.highChartOptions(n))},n}(window.HR.GenericCompanyLineGraphView),r=null!=(n=window.HR)?n:{},r.CompanyInterviewsTimeGraphView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.dataAction="data_usage_table",r.prototype.tableHeader="Invites Data",r}(window.HR.GenericCompanyLineDataView),r=null!=(n=window.HR)?n:{},r.CompanyInvitesTimeDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.graphType="invites_time",n.prototype.companyAction="data_usage",n.prototype.aggregationFrame="month",n.prototype.dataViewObject=function(t){return new r.CompanyInvitesTimeDataView(t)},n.prototype.initGraph=function(){var t,e,n,a,o,i;return o=this,e=this.company.get("data_usage").invites_time,t=_.map(e,function(t){return t.date}),a=_.map(e,function(t){return t.count}),i=Math.ceil(t.length/9),n={type:"line",text:"Invites vs Time Graph",categories:t,tickInterval:i,xTitle:"Time",yTitle:"# Invites Sent",results:a,seriesName:"Invites Sent",plotClick:function(){var t;return t=o.dataViewObject({graphType:o.graphType,aggregationFrame:o.aggregationFrame,model:o.company,dataAction:o.companyAction,dataPoint:this.category,series:this.series.name,parent:o}),t.fetchData(),$(".graph-data-view-container").html(t.el)}},this.$(".graph-container").highcharts(r.util.admin.highChartOptions(n))},n}(window.HR.GenericCompanyLineGraphView),r=null!=(n=window.HR)?n:{},r.CompanyInvitesTimeGraphView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;
return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/company-license-usage",n.prototype.graphType="teams_time",n.prototype.subViewClasses={},n.prototype.setupSubViewClasses=function(){return this.subViewClasses.teams_time=r.CompanyTeamsTimeGraphView,this.subViewClasses.users_time=r.CompanyUsersTimeGraphView},n}(window.HR.GenericCompanyDashboardSecondaryView),r=null!=(n=window.HR)?n:{},r.CompanyLicenseUsageView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/company-signups-data",n.prototype.dataUrl="/x/api/v1/analytics/companies/trial_signups_data",n.prototype.initDataTable=function(){return n.__super__.initDataTable.apply(this,arguments),$(".trial-data-table tbody tr.company.clickable").live("click",function(t){var e;return e=$(t.currentTarget).data("company-id"),r.router.navigate("analytics/companies/"+e,!0)})},n}(window.HR.CommonSignupsDataView),r=null!=(n=window.HR)?n:{},r.CompanySignupsDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/company-signups",n.prototype.graphTitle="Company Trial Signups",n.prototype.initDataView=function(){return this.dataView=new r.CompanySignupsDataView,this.subviews.push(this.dataView),this.$("#signups-data").html(this.dataView.render().el)},n.prototype.fetchData=function(){var t,e;return e=this,t={aggregation_frame:e.aggregation_frame,date_range:e.startDate+"-"+e.endDate},$.ajax({url:"/x/api/v1/analytics/companies/trial_signups",type:"GET",data:t,success:function(t){return e.data=t,e.render()}})},n.prototype.hideNote=function(t){var e,n;return t.preventDefault(),e=$(t.currentTarget),n=r.currentUser,r.AnalyticsLocalStorage.setId(n.get("id")),r.AnalyticsLocalStorage.set("trial_signups_note_hide",!0),e.parent().parent().slideUp()},n}(window.HR.CommonSignupsView),r=null!=(n=window.HR)?n:{},r.CompanySignupsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.dataAction="license_usage_table",r.prototype.tableHeader="Teams Data",r}(window.HR.GenericCompanyLineDataView),r=null!=(n=window.HR)?n:{},r.CompanyTeamsTimeDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.graphType="teams_time",n.prototype.aggregationFrame="month",n.prototype.companyAction="license_usage",n.prototype.dataViewObject=function(t){return new r.CompanyTeamsTimeDataView(t)},n.prototype.initGraph=function(){var t,e,n,a,o,i;return o=this,e=this.company.get("license_usage").teams_time,t=_.map(e,function(t){return t.date}),a=_.map(e,function(t){return t.count}),i=Math.ceil(t.length/9),n={type:"line",text:"#Teams vs Time Graph",categories:t,tickInterval:i,xTitle:"Time",yTitle:"# Teams Created",results:a,seriesName:"Teams",plotClick:function(){var t;return t=o.dataViewObject({graphType:o.graphType,aggregationFrame:o.aggregationFrame,model:o.company,dataAction:o.companyAction,dataPoint:this.category,series:this.series.name,parent:o}),t.fetchData(),$(".graph-data-view-container").html(t.el)}},this.$(".graph-container").highcharts(r.util.admin.highChartOptions(n))},n}(window.HR.GenericCompanyLineGraphView),r=null!=(n=window.HR)?n:{},r.CompanyTeamsTimeGraphView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.dataAction="data_usage_table",r.prototype.tableHeader="Tests Data",r}(window.HR.GenericCompanyLineDataView),r=null!=(n=window.HR)?n:{},r.CompanyTestsTimeDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.graphType="tests_time",n.prototype.aggregationFrame="month",n.prototype.companyAction="data_usage",n.prototype.dataViewObject=function(t){return new r.CompanyTestsTimeDataView(t)},n.prototype.initGraph=function(){var t,e,n,a,o,i;return o=this,e=this.company.get("data_usage").tests_time,t=_.map(e,function(t){return t.date}),a=_.map(e,function(t){return t.count}),i=Math.ceil(t.length/9),n={type:"line",text:"#Tests vs Time Graph",categories:t,tickInterval:i,xTitle:"Time",yTitle:"# Tests Created",results:a,seriesName:"Tests",plotClick:function(){var t;return t=o.dataViewObject({graphType:o.graphType,aggregationFrame:o.aggregationFrame,model:o.company,dataAction:o.companyAction,dataPoint:this.category,series:this.series.name,parent:o}),t.fetchData(),$(".graph-data-view-container").html(t.el)}},this.$(".graph-container").highcharts(r.util.admin.highChartOptions(n))},n}(window.HR.GenericCompanyLineGraphView),r=null!=(n=window.HR)?n:{},r.CompanyTestsTimeGraphView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.dataAction="license_usage_table",r.prototype.tableHeader="Users Data",r.prototype.setTableHeader=function(t){return this.tableHeader=t},r}(window.HR.GenericCompanyLineDataView),r=null!=(n=window.HR)?n:{},r.CompanyUsersTimeDataView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.graphType="users_time",n.prototype.aggregationFrame="month",n.prototype.companyAction="license_usage",n.prototype.dataViewObject=function(t){return new r.CompanyUsersTimeDataView(t)},n.prototype.initGraph=function(){var t,e,n,a,o,i,s,p,u,c,l,h,y,m,d;return h=this,a=this.company.get("license_usage").users_time,m=a.user_data,t=a.admin_data,i=a.developer_data,c=a.recruiter_data,n=_.map(m,function(t){return t.date}),d=_.map(m,function(t){return t.count}),e=_.map(t,function(t){return t.count}),s=_.map(i,function(t){return t.count}),l=_.map(c,function(t){return t.count}),y=Math.ceil(n.length/9),u={type:"line",text:"Users SignUps vs Time Graph",categories:n,tickInterval:y,xTitle:"Time",yTitle:"# Users Signed up",plotClick:function(){var t;return t=h.dataViewObject({graphType:h.graphType,aggregationFrame:h.aggregationFrame,model:h.company,dataAction:h.companyAction,dataPoint:this.category,series:this.series.name,parent:h}),t.setTableHeader(""+this.series.name+" Data"),t.fetchData(),$(".graph-data-view-container").html(t.el)}},o=r.util.admin.highChartOptions(u),p={series:[{name:"Users",data:d,type:"line"},{name:"Admins",data:e,type:"line"},{name:"Developers",data:s,type:"line"},{name:"Recruiters",data:l,type:"line"}],legend:{enabled:!0}},p=_.extend(o,p),this.$(".graph-container").highcharts(p)},n}(window.HR.GenericCompanyLineGraphView),r=null!=(n=window.HR)?n:{},r.CompanyUsersTimeGraphView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/company-watchlist",n.prototype.companyFields={id:"id",name:"name",email:"email"},n.prototype.initUserSelect2=function(){var t,e,n;return n=this,t=r.util.admin.defaultSelect2Options(),e={placeholder:"Select a Company",ajax:{url:"/x/api/v1/admin/search/companies",type:"GET",quietMillis:800,dataType:"json",data:function(t){return n.searchBySelected||($.isNumeric(t)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):-1===t.indexOf("@")?(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0)):-1!==t.indexOf("@")&&(n.searchBy="email",$(".search-radio-grp input:nth(2)").prop("checked",!0))),{q:t,fields:n.companyFields[n.searchBy]}},results:function(t){return{results:t.results}}}},e=_.extend(t,e),this.selectBox=$("#company-select2"),this.selectBox.select2(e),this.selectBox.on("change",function(t){return n.addToWatchList(t.val,n.list)})},n.prototype.addToWatchList=function(t,e){var n;return n=new r.CompanyWatchlistEntityModel,n.set("company_id",t),n.save(null,{success:function(t){return r.util.ajaxmsg("Company has been added to your watchlist",!1,!1,3),e.add(t)},error:function(t){return t=JSON.parse(t),r.util.ajaxmsg(t.message,!1,!1,3)}})},n}(window.HR.CommonWatchlistView),r=null!=(n=window.HR)?n:{},r.CompanyWatchlistView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="x-analytics/default-home",n.prototype._render=function(){var t;return t=r.appController.template(this.template,this),$(this.el).html(t),this},n}(window.HR.GenericView),r=null!=(n=window.HR)?n:{},r.DefaultAnalyticsView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="x-analytics/revenue-health-data",n.prototype.initialize=function(t){return null==t&&(t={}),this.model=t.model,this.type=t.type,this.month=t.month,this.reportType=t.reportType,this.reportDate=t.reportDate},n.prototype._render=function(){var e,r;return r=this,e=t.appController.template(this.template,this)({data:this.model.toJSON().table_data[this.month][this.type],month:this.month,type:this.type,reportType:this.reportType,reportDate:this.reportDate}),$(this.el).html(e),setTimeout(function(){return r.initDataTable()}),this},n.prototype.initDataTable=function(){return this.dataTable=$(".revenue-table").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",bPaginate:!0,sPaginationType:"bootstrap",iDisplayLength:50,bDestroy:!0})},n}(window.HR.GenericView),t=null!=(n=window.HR)?n:{},t.RevenueHealthDataView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="x-analytics/revenue-health",n.prototype.reportType="current",n.prototype.reportDate=moment().subtract("day",1).format("YYYY/MM/DD"),n.prototype.initialize=function(t){return null==t&&(t={}),this.model=t.model,this.month=t.month,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render)},n.prototype.events={"click a.get-data":"getOpportunitiesData","click a.change-month":"fetchAmounts","click a.edit-goal":"editGoal","click a.change-report-type":"changeReportType","submit form[name=goal-form]":"updateGoal"},n.prototype._render=function(){var e,r;return r=this,e=t.appController.template(this.template,this)({data:this.model.toJSON().amounts[this.month],month:this.month,report_type:this.reportType,report_date:this.reportDate}),$(this.el).html(e),setTimeout(function(){return r.initDateSelect()}),this},n.prototype.initDateSelect=function(){var t;return t=this,$(".date-pick").datepicker({autoclose:!0,format:"yyyy/mm/dd",startDate:"-61d",endDate:"-1d"}),$(".date-pick").bind("change",function(e){return t.reportDate=$(e.currentTarget).val(),t.fetchAmounts(e)})},n.prototype.fetchAmounts=function(e){var r,n,a,o;return a=this,e.preventDefault(),this.model.unset("amounts",{silent:!0}),this.model.unset("table_date",{silent:!0}),r=$(e.currentTarget),this.month=null!=(o=r.data("month"))?o:this.month,n={month:this.month},"past"===this.reportType&&(n.date=this.reportDate),this.model.fetch({data:n}),t.router.navigate("/analytics/revenue/health/"+this.month,!1,!1)},n.prototype.getOpportunitiesData=function(t){var e,r,n,a;return n=this,t.preventDefault(),e=$(t.currentTarget),a=e.data("type"),r={month:n.month,type:a},"past"===this.reportType&&(r.date=this.reportDate),this.model.setDataAction(),this.model.fetch({silent:!0,data:r,success:function(){return n.model.unsetDataAction(),setTimeout(function(){return n.renderDataView(a)})}})},n.prototype.renderDataView=function(e){var r;return r=new t.RevenueHealthDataView({model:this.model,type:e,month:this.month,reportType:this.reportType,reportDate:this.reportDate}),this.$("#health-data-section").html(r.render().el)},n.prototype.changeReportType=function(t){var e;return t.preventDefault(),e=$(t.currentTarget),this.reportType=e.data("report-type"),this.month="current",this.fetchAmounts(t)},n.prototype.editGoal=function(t){var e;return t.preventDefault(),e=$(t.currentTarget),e.parent().addClass("hidden"),e.parent().parent().find("form").removeClass("hidden").find("input").focus()},n.prototype.updateGoal=function(e){var r,n,a;return e.preventDefault(),n=$(e.currentTarget),r=n.find("button"),a=n.find("input"),a.removeClass("error"),a.val()?(t.util.inlineLoadingStart(r),$.ajax({type:"PUT",data:{goal:a.val()},url:"/x/api/v1/analytics/revenue/update_goal",success:function(e){return $(".goal-text").val("$ "+a.val()).removeClass("hidden"),t.util.inlineLoadingEnd(e),n.addClass("hidden")}})):(a.addClass("error"),void 0)},n}(window.HR.GenericView),t=null!=(n=window.HR)?n:{},t.RevenueHealthView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return r=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template="x-analytics/user-signups-data",r.prototype.dataUrl="/x/api/v1/analytics/users/signups_data",r}(window.HR.CommonSignupsDataView),t=null!=(n=window.HR)?n:{},t.UserSignupsDataView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="x-analytics/user-signups",n.prototype.graphTitle="User Trial Signups",n.prototype.initDataView=function(){return this.dataView=new t.UserSignupsDataView,this.subviews.push(this.dataView),this.$("#signups-data").html(this.dataView.render().el)},n.prototype.fetchData=function(){var t,e;return e=this,t={aggregation_frame:e.aggregation_frame,date_range:e.startDate+"-"+e.endDate},$.ajax({url:"/x/api/v1/analytics/users/signups",type:"GET",data:t,success:function(t){return e.data=t,e.render()}})},n}(window.HR.CommonSignupsView),t=null!=(n=window.HR)?n:{},t.UserSignupsView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="x-analytics/user-watchlist",n.prototype.userFields={id:"id",name:"firstname,email"},n.prototype.initUserSelect2=function(){var e,r,n;return n=this,e=t.util.admin.defaultSelect2Options(),r={placeholder:"Select a User",ajax:{url:"/x/api/v1/admin/search/users",type:"GET",quietMillis:800,dataType:"json",data:function(t){return n.searchBySelected||($.isNumeric(t)?(n.searchBy="id",$(".search-radio-grp input:nth(0)").prop("checked",!0)):(n.searchBy="name",$(".search-radio-grp input:nth(1)").prop("checked",!0))),{q:t,fields:n.userFields[n.searchBy]}},results:function(t){return{results:t.results}}}},r=_.extend(e,r),this.selectBox=$("#user-select2"),this.selectBox.select2(r),this.selectBox.on("change",function(t){return n.addToWatchList(t.val,n.list)})},n.prototype.addToWatchList=function(e,r){var n;return n=new t.UserWatchlistEntityModel,n.set("user_id",e),n.save(null,{success:function(e){return t.util.ajaxmsg("User has been added to your watchlist",!1,!1,3),r.add(e)},error:function(e){return e=JSON.parse(e),t.util.ajaxmsg(e.message,!1,!1,3)}})},n}(window.HR.CommonWatchlistView),t=null!=(n=window.HR)?n:{},t.UserWatchlistView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.url=function(){return this.id?"/x/api/v1/analytics/companies/watchlist/"+this.id:"/x/api/v1/analytics/companies/watchlist"},r}(window.HR.GenericModel),r=null!=(n=window.HR)?n:{},r.CompanyWatchlistEntityModel=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.url=function(){return this.action?"/x/api/v1/analytics/companies/"+this.id+"/"+this.action:"/x/api/v1/analytics/companies/"+this.id},r.prototype.setAction=function(t){return this.action=t},r}(window.HR.GenericModel),r=null!=(n=window.HR)?n:{},r.DashboardCompanyModel=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return r=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.url=function(){return this.dataAction?"/x/api/v1/analytics/revenue/opportunities_data":"/x/api/v1/analytics/revenue"},r.prototype.setDataAction=function(){return this.dataAction=!0},r.prototype.unsetDataAction=function(){return this.dataAction=!1},r}(window.HR.GenericModel),t=null!=(n=window.HR)?n:{},t.RevenueHealthModel=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return r=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.url=function(){return this.id?"/x/api/v1/analytics/users/watchlist/"+this.id:"/x/api/v1/analytics/users/watchlist"},r}(window.HR.GenericModel),t=null!=(n=window.HR)?n:{},t.UserWatchlistEntityModel=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.url=function(){return"/x/api/v1/analytics/companies/watchlist"},r.prototype.model=window.HR.CompanyWatchlistEntityModel,r}(window.HR.GenericCollection),r=null!=(n=window.HR)?n:{},r.CompanyWatchlistCollection=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.customer_type="paid",r.prototype.duration="daily",r.prototype.url=function(){return"/x/api/v1/analytics/companies?type="+this.customer_type+"&duration="+this.duration+"&date_range="+this.dateRange},r.prototype.setType=function(t){return this.customer_type=t},r.prototype.getType=function(){return this.customer_type},r.prototype.setDuration=function(t){return this.duration=t},r.prototype.getDuration=function(){return this.duration},r.prototype.setDateRange=function(t){return this.dateRange=t},r.prototype.model=window.HR.DashboardCompanyModel,r}(window.HR.GenericCollection),r=null!=(n=window.HR)?n:{},r.DashboardCompaniesCollection=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};jQuery(function(){var t,r,n;return r=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.url=function(){return"/x/api/v1/analytics/users/watchlist"},r.prototype.model=window.HR.UserWatchlistEntityModel,r}(window.HR.GenericCollection),t=null!=(n=window.HR)?n:{},t.UserWatchlistCollection=r})}.call(this),function(){}.call(this);
//# sourceMappingURL=basic-d9342ea383b4c936f8f6adc31f78ca6f.js.map