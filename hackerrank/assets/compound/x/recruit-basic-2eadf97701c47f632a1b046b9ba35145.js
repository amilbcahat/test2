(function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.fetch=function(a){return a==null&&(a={}),this.trigger("initreset"),c.__super__.fetch.call(this,a)},c.prototype.parse=function(a,b){var d;return this.sync_status=!0,a&&a.model?d=a.model:d=a,c.__super__.parse.call(this,d,b)},c}(Backbone.Model),c=(e=window.HR)!=null?e:{},c.GenericModel=a})}).call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return a=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.initialize=function(){return this.sync_status=!1,this.render_once=!1},c.prototype.fetch=function(a){return a==null&&(a={}),this.trigger("initreset"),c.__super__.fetch.call(this,a)},c.prototype.parse=function(a){return this.sync_status=!0,this.render_once=!1,a.metamodel&&(this.metamodel=a.metamodel),a.total&&(this.total=a.total),a.page&&(this.page=a.page),a.models},c.prototype.setCurrentPage=function(a){this.page=a},c.prototype.getCurrentPage=function(){return this.page},c.prototype.getTotal=function(){return this.total},c}(Backbone.Collection),c=(e=window.HR)!=null?e:{},c.GenericCollection=a})}.call(this),function(){jQuery(function(){return window.HR.GenericView.prototype.postrender=function(){return this.delegateEvents()},window.HR.GenericView.prototype.render=function(){return typeof this.prerender=="function"&&this.prerender,typeof this.teardown=="function"&&this.teardown(),typeof this._render=="function"&&this._render(),typeof this.postrender=="function"&&this.postrender(),this}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-admin",e.prototype.className="test-admin",e.prototype.events=function(){return{"submit form[name=test-admin-form]":"saveTestAdmin"}},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e.prototype.saveTestAdmin=function(a){var b,c=this;return a.preventDefault(),this.$(".validation-error").addClass("hidden"),b=$("input[name=test-admins]").removeClass("error").val(),b?(this.model.set("test_admins",b,{silent:!0}),this.model.save(null,{success:function(){return c.render()},error:function(a,b){var d;return c.model.set("test_admins",c.model.previousAttributes().test_admins,{silent:!0}),d=$.parseJSON(b.responseText),c.$("input[name=test-admins]").addClass("error"),c.$(".validation-error").find(".error").html(d.message),c.$(".validation-error").removeClass("hidden")}})):$("input[name=test-admin]").addClass("error")},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestAdminView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this,this._subviews=[],this.listenTo(this.model,"change",this.render)},e.prototype.template="x/test-advanced-settings",e.prototype.className="test-advanced-settings",e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this.custom_link_view=new a.TestCustomLinkView({model:this.model}),this.test_admin_view=new a.TestAdminView({model:this.model}),this.cutoff_score_view=new a.TestCutoffScoreView({model:this.model}),this.master_password_view=new a.TestMasterPasswordView({model:this.model}),this.questions_shuffling_view=new a.TestQuestionsShufflingView({model:this.model}),this.allowed_languages_view=new a.TestAllowedLanguagesView({model:this.model}),this.duplicate_test_view=new a.TestDuplicateView({model:this.model}),this.delete_test_view=new a.TestDeleteView({model:this.model}),this.mcq_score_view=new a.TestMcqScoreView({model:this.model}),this.time_settings_view=new a.TestTimeSettingsView({model:this.model}),this.assign({"div#custom_link":this.custom_link_view,"div#time_settings":this.time_settings_view,"div#test_admin":this.test_admin_view,"div#cutoff_score":this.cutoff_score_view,"div#mcq_score":this.mcq_score_view,"div#master_password":this.master_password_view,"div#questions_shuffling":this.questions_shuffling_view,"div#allowed_languages":this.allowed_languages_view,"div#duplicate_test":this.duplicate_test_view,"div#delete_test":this.delete_test_view}),this._subviews.push(this.custom_link_view,this.time_settings_view,this.test_admin_view,this.cutoff_score_view,this.mcq_score_view,this.master_password_view,this.questions_shuffling_view,this.allowed_languages_view,this.duplicate_test_view,this.delete_test_view),this},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestAdvancedSettingsView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-allowed-languages",e.prototype.className="test-allowed-languages",e.prototype.events=function(){return{"click label.hr-checkbox":"toggleCheckbox","submit form[name=test-allowedLanguages-form]":"saveAllowedLanguages"}},e.prototype.render=function(){var b,c,d,e;return d=this,e=this.model.toJSON(),e&&(b=[],e.allowedLanguages&&(b=e.allowedLanguages.split(",")),c=a.appController.template(this.template,this)({model:e,allowedLanguages:b,throbber:a.appController.viewLoader()}),$(this.el).html(c)),this},e.prototype.toggleCheckbox=function(a){var b;a.preventDefault(),$(a.currentTarget).hasClass("active")?(b="",$(a.currentTarget).removeClass("active").removeClass("active"),$(a.currentTarget).find("input").removeAttr("checked")):(b="checked",$(a.currentTarget).addClass("active").addClass("active"),$(a.currentTarget).find("input").attr("checked","checked"));if($(a.currentTarget).hasClass("select-all"))return this.changeAllCheckboxes(b)},e.prototype.changeAllCheckboxes=function(a){var b;return b=this.$(".hr-checkbox.languages"),a==="checked"?_.each(b,function(a){return $(a).addClass("active"),$(a).find("input").attr("checked","checked")}):_.each(b,function(a){return $(a).removeClass("active"),$(a).find("input").removeAttr("checked")})},e.prototype.saveAllowedLanguages=function(a){var b,c,d=this;return a.preventDefault(),b=[],c=$("input[name=allowedLanguages]:checked"),_.each(c,function(a){return b.push(a.value)}),this.model.set("allowedLanguages",b.join(",")),this.model.save()},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestAllowedLanguagesView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this,this.listenTo(this.model,"change",this.render)},e.prototype.template="x/test-candidate-settings",e.prototype.className="test-candidate-settings",e.prototype.events=function(){return{"submit form[name=test-candidate-settings-form]":"saveCandidateSettings","click label.hr-checkbox":"toggleCheckbox","submit form[name=add-custom-detail-form]":"addCustomField","click .js-add-custom-field":"addCustomField"}},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader(),candidateSettings:this.prepareCandidateDetails()}),$(this.el).html(b)),this},e.prototype.prepareCandidateDetails=function(){var b,c,d;return this.model.get("collect_data")?c=this.model.get("collect_data"):c=!1,b={},_.each(a.util.getCandidateDetailsMapping(),function(a,d){var e;return e={value:d,label:a,name:"collect_candidate_details"},c&&_.indexOf(c,d)!==-1&&(e.checked="checked"),b[d]=e}),this.model.get("collect_data_extra")&&(d=this.model.get("collect_data_extra"),_.each(d,function(c){var d,e;return d={value:c,label:c,name:"collect_candidate_details_extra",checked:"checked"},e=a.util.convertToSlug(c),b[e]=d})),b},e.prototype.toggleCheckbox=function(a){return a.preventDefault(),$(a.currentTarget).hasClass("active")?($(a.currentTarget).removeClass("active").removeClass("active"),$(a.currentTarget).find("input").removeAttr("checked")):($(a.currentTarget).addClass("active").addClass("active"),$(a.currentTarget).find("input").attr("checked","checked"))},e.prototype.addCustomField=function(a){var b;a.preventDefault(),b=$("input[name=custom_field]").removeClass("error").val();if(_.isEmpty(b)){$("input[name=custom_field]").addClass("error").focus();return}return this.saveCandidateSettings(null,b)},e.prototype.saveCandidateSettings=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=this;a&&a.preventDefault(),h=$("input[name=collect_candidate_details]:checked");if(h){f=[];for(i=0,k=h.length;i<k;i++)g=h[i],f.push(g.value);this.model.set("collect_data",f,{silent:!0})}d=$("input[name=collect_candidate_extra_details]:checked");if(d){e=[];for(j=0,l=d.length;j<l;j++)c=d[j],e.push(c.value);b&&e.push(b),this.model.set("collect_data_extra",e,{silent:!0})}return this.model.save(null,{success:function(){return m.model.fetch()}})},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestCandidateSettingsView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-custom-link",e.prototype.className="test-custom-link",e.prototype.events=function(){return{"submit form[name=short-test-url-form]":"createShortURL","submit form[name=public-test-url-form]":"createPublicURL"}},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e.prototype.createPublicURL=function(a){var b,c=this;return a.preventDefault(),this.$(".public-url-validation-error").addClass("hidden"),b=$("input[name=public-test-url]").removeClass("error").val(),b?$.post("/xrest/tests/"+this.model.get("id")+"/link",{short_url:b,type:"public"},function(a){return a.message==="Success"?c.model.fetch():(c.$(".public-url-validation-error").find(".error").html(a.message),c.$(".public-url-validation-error").removeClass("hidden"))}):$("input[name=public-test-url]").addClass("error").focus()},e.prototype.createShortURL=function(a){var b,c=this;return a.preventDefault(),this.$(".short-url-validation-error").removeClass("hidden"),b=$("input[name=short-test-url]").removeClass("error").val(),b?$.post("/xrest/tests/"+this.model.get("id")+"/link",{short_url:b,type:"short"},function(a){return a.message==="Success"?c.model.fetch():(c.$(".short-url-validation-error").find(".error").html(a.message),c.$(".short-url-validation-error").removeClass("hidden"))}):$("input[name=short-test-url]").addClass("error").focus()},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestCustomLinkView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-cutoff-score",e.prototype.className="test-cutoff-score",e.prototype.events=function(){return{"submit form[name=test-cutoff-score-form]":"saveTestCutoff"}},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e.prototype.saveTestCutoff=function(a){var b;return a.preventDefault(),b=$("input[name=cutoff-score]").removeClass("error").val(),b?(this.model.set("cutoff_score",parseInt(b,10)),this.model.save()):$("input[name=test-cutoff]").addClass("error")},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestCutoffScoreView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-delete",e.prototype.className="test-delete",e.prototype.events=function(){return{"click #delete_test":"deleteTest"}},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e.prototype.deleteTest=function(a){var b=this;return a.preventDefault(),this.model.destroy({success:function(){return Backbone.history.navigate("x/tests",!0)},error:function(b,c,d){var e;return e=$.parseJSON(c.responseText),$(a.currentTarget).html(e.message),$(a.currentTarget).removeAttr("id")}})},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestDeleteView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-duplicate",e.prototype.className="test-duplicate",e.prototype.events=function(){return{"click #clone_test":"cloneTest"}},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e.prototype.cloneTest=function(b){var c;return c=new a.TestModel({tid:this.model.get("id")}),c.save(null,{success:function(a){return $(b.currentTarget).html("Test created. Click here to go to the test"),$(b.currentTarget).removeAttr("id"),$(b.currentTarget).addClass("js-backbone"),$(b.currentTarget).attr("href","/x/tests/"+a.get("id")+"/questions")}})},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestDuplicateView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-general-settings",e.prototype.className="test-general-settings",e.prototype.events=function(){return{"submit form[name=test-general-settings-form]":"saveGeneralSettings"}},e.prototype.render=function(){var b,c,d,e;return d=this,e=this.model.toJSON(),e&&(c=a.appController.template(this.template,this)({model:e,throbber:a.appController.viewLoader()}),$(this.el).html(c)),b={skin:"moono",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"],["Source"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,width:this.$("textarea[name=test-instructions]").width()||780,removePlugins:"elementspath,contextmenu,liststyle,tabletools",disableNativeSpellChecker:!1},d=this,setTimeout(function(){return CKEDITOR.instances["test-instructions"]&&delete CKEDITOR.instances["test-instructions"],b.width=this.$("textarea[name=test-instructions]").width()||780,this.$("textarea.texteditor").ckeditor(b)}),this},e.prototype.saveGeneralSettings=function(a){var b,c,d,e;a.preventDefault(),d=this.$("input[name=name]").removeClass("error").val(),b=this.$("input[name=duration]").removeClass("error").val(),c=this.$("textarea[name=test-instructions]").removeClass("error").ckeditorGet().getData();if(_.isEmpty(d)){this.$("input[name=name]").addClass("error");return}if(_.isEmpty(b)){this.$("input[name=duration]").addClass("error");return}if(_.isEmpty(c)){this.$("textarea[name=test-instructions]").addClass("error");return}return e={name:d,duration:b,instructions:c},this.model.save(e)},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestGeneralSettingsView=c})}.call(this),function(){var a,b,c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};jQuery(function(){}),d=function(b){function c(){return e=c.__super__.constructor.apply(this,arguments),e}return j(c,b),c.prototype.template="x/test-library",c.prototype.className="test-library-view",c.prototype.initialize=function(a){return this.library=a.library,this.filter=a.filter,this.testmodel=a.testmodel,console.log(a)},c.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({test:this.testmodel.attributes,filter:this.filter,library:this.library}),$(this.el).html(b),setTimeout(this.loadLib(),200),this},c.prototype.loadLib=function(){var b=this;return $.ajax({url:"/xrest/tests/"+this.testmodel.get("id")+"/library",data:{library:this.library,filter:this.filter},success:function(c){var d,e,f,g,h,i,j,k,l,m,n,o;f=c.model,b.$(".libcontent").empty(),m=f.sets;for(i=0,k=m.length;i<k;i++)g=m[i],h=new a.TestLibrarySetView({set:g,test:b.testmodel}),b.$(".libcontent").append(h.render().el);n=f.questions,o=[];for(j=0,l=n.length;j<l;j++)d=n[j],e=new a.TestLibraryQuestionView({question:d,test:b.testmodel}),o.push(b.$(".libcontent").append(e.render().el));return o},error:function(a){return console.log(a)}})},c}(window.HR.GenericView),b=function(b){function c(){return f=c.__super__.constructor.apply(this,arguments),f}return j(c,b),c.prototype.template="x/test-library-question",c.prototype.className="test-library-question-view",c.prototype.events=function(){return{"click .remove-question":"removeQuestion","click .add-question":"addQuestion"}},c.prototype.initialize=function(a){return this.test=a.test,this.question=a.question},c.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({question:this.question,test:this.test.attributes,hrqn:window.istreet.cfg.hrqn}),$(this.el).html(b),this},c.prototype.removeQuestion=function(a){var b;return a.preventDefault(),b=this.$(a.currentTarget),alert("TODO: remove question with unique_id "+b.attr("data-qid")+" from test "+this.test.get("id"))},c.prototype.addQuestion=function(a){var b;return a.preventDefault(),b=this.$(a.currentTarget),alert("TODO: add question with unique_id "+b.attr("data-qid")+" to test "+this.test.get("id"))},c}(window.HR.GenericView),c=function(b){function c(){return g=c.__super__.constructor.apply(this,arguments),g}return j(c,b),c.prototype.template="x/test-library-set",c.prototype.className="test-library-set-view",c.prototype.events=function(){return{"click .showset":"showSetModal"}},c.prototype.initialize=function(a){return this.test=a.test,this.set=a.set},c.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({set:this.set,test:this.test.attributes,hrqn:window.istreet.cfg.hrqn}),$(this.el).html(b),this},c.prototype.showSetModal=function(a){var b;return a.preventDefault(),b=this.$(a.currentTarget),alert("TODO: show modal of questions set with id: "+b.attr("data-set"))},c}(window.HR.GenericView),a=(h=window.HR)!=null?h:{},a.TestLibraryView=d,a.TestLibraryQuestionView=b,a.TestLibrarySetView=c}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-master-password",e.prototype.className="test-master-password",e.prototype.events=function(){return{"submit form[name=test-master-password-form]":"saveMasterPassword"}},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e.prototype.saveMasterPassword=function(a){var b;return a.preventDefault(),b=$("input[name=master-password]").removeClass("error").val(),b?(this.model.set("defPassword",b),this.model.save()):$("input[name=master-password]").addClass("error")},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestMasterPasswordView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-mcq-score",e.prototype.className="test-mcq-score",e.prototype.events=function(){return{"submit form[name=test-mcq-score-form]":"saveMCQScore"}},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e.prototype.saveMCQScore=function(a){var b,c;return a.preventDefault(),c=parseInt($("input[name=correct-answer-score]").val(),10),b=parseInt($("input[name=wrong-answer-score]").val(),10),b>0&&(b=-1*b),this.model.set({mcq_score:c,mcq_negative_score:b}),this.model.save()},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestMcqScoreView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this,this.active_nav_link=a.active_nav_link},e.prototype.template="x/test-navigation",e.prototype.className="test-navigation",e.prototype.updateData=function(a,b){return this.model=a,this.active_nav_link=b,this.render()},e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,active_nav_link:this.active_nav_link,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestNavigationView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return h=function(c){function d(){return k=d.__super__.constructor.apply(this,arguments),k}return b(d,c),d.prototype.className="test-report",d.prototype.initialize=function(b){return this._subviews=[],this.testmodel=b.testmodel,this.qid=b.qid,this.type=b.type,this.step=b.step,this.qid?(this.model=new a.QuestionModel({id:this.qid,tid:this.testmodel.get("id"),type:this.type}),this.listenTo(this.model,"change",this.render),this.model.fetch()):(this.model=new a.QuestionModel({tid:this.testmodel.get("id"),type:this.type}),this.listenTo(this.model,"change",this.render))},d.prototype.events=function(){},d.prototype.render=function(){var a,b=this;_.each(this._subviews,function(a){return a.destroy()});switch(this.model.get("type")){case"code":a=new g({model:this.model,testmodel:this.testmodel,step:this.step}),this._subviews.push(a),$(this.el).html(a.render().el)}return this},d}(window.HR.GenericView),g=function(g){function h(){return l=h.__super__.constructor.apply(this,arguments),l}return b(h,g),h.prototype.template="x/question-coding",h.prototype.className="question-coding",h.prototype.initialize=function(a){return this._subviews=[],this.step=a.step,this.testmodel=a.testmodel},h.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({model:this.model.toJSON(),edit:this.model.get("id")?!0:!1,step:this.step,test:this.testmodel.toJSON()}),$(this.el).html(b),this.renderStep(this.step),this},h.prototype.renderStep=function(a){var b;switch(a){case"step1":return b=new c({model:this.model,testmodel:this.testmodel}),this._subviews.push(b),this.$("#control-overflow").html(b.render().el);case"step2":return b=new d({model:this.model,testmodel:this.testmodel}),this._subviews.push(b),this.$("#control-overflow").html(b.render().el);case"step3":return b=new e({model:this.model,testmodel:this.testmodel}),this._subviews.push(b),this.$("#control-overflow").html(b.render().el);case"step4":return b=new f({model:this.model,testmodel:this.testmodel}),this._subviews.push(b),this.$("#control-overflow").html(b.render().el)}},h}(window.HR.GenericView),c=function(c){function d(){return m=d.__super__.constructor.apply(this,arguments),m}return b(d,c),d.prototype.template="x/question-coding-step1",d.prototype.className="question-coding-step1",d.prototype.initialize=function(a){return this.testmodel=a.testmodel,this.edit=this.model.get("id")?!0:!1},d.prototype.events=function(){return{"submit form[name=coding-question-step1-form]":"saveQuestion"}},d.prototype.render=function(){var b,c,d;return c=a.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(c),b={skin:"moono",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"],["Source"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,width:this.$("textarea[name=problem-description]").width()||780,removePlugins:"elementspath,contextmenu,liststyle,tabletools",disableNativeSpellChecker:!1},d=this,setTimeout(function(){return CKEDITOR.instances["problem-description"]&&delete CKEDITOR.instances["problem-description"],b.width=this.$("textarea[name=problem-description]").width()||780,this.$("textarea.texteditor").ckeditor(b)}),this},d.prototype.saveQuestion=function(a){var b,c,d,e=this;a.preventDefault(),b=this.$("input[name=name]").removeClass("error").val(),c=this.$("textarea[name=problem-description]").removeClass("error").ckeditorGet().getData();if(_.isEmpty(b)){this.$("input[name=name]").addClass("error");return}if(_.isEmpty(c)){this.$("textarea[name=problem-description]").addClass("error");return}return d={name:b,question:c},this.model.save(d,{silent:!0,success:function(a){return Backbone.history.navigate("x/tests/"+e.testmodel.get("id")+"/questions/"+a.get("id")+"/edit/step2",!0)}})},d}(window.HR.GenericView),d=function(c){function d(){return n=d.__super__.constructor.apply(this,arguments),n}return b(d,c),d.prototype.template="x/question-coding-step2",d.prototype.className="question-coding-step2",d.prototype.initialize=function(a){return console.log("here"),this.testmodel=a.testmodel},d.prototype.events=function(){return{"submit form[name=coding-question-step2-form]":"saveQuestion","click label.hr-checkbox":"toggleCheckbox","click a.js-clear-all":"clearAllCheckbox","click a.js-select-all":"checkAllCheckbox","change input[name=template_type]:checked":"toggleCodeStubs"}},d.prototype.render=function(){var b,c,d,e;return c=[],e=this.model.toJSON(),e.allowedLanguages&&(c=e.allowedLanguages.split(",")),d=a.appController.template(this.template,this)({model:this.model.toJSON(),allowedLanguages:c}),$(this.el).html(d),this.editorOptions={lineNumbers:!1,lineWrapping:!0,mode:"text/x-csrc"},b=this.$("textarea#template_body").get(0),b&&(window.editor=this.tbody_editor=CodeMirror.fromTextArea(b,this.editorOptions),this.tbody_editor.setValue(this.model.get("c_template")),this.tbody_editor.focus()),this},d.prototype.saveQuestion=function(a){var b,c,d=this;return a.preventDefault(),b=[],c=$("input[name=allowedLanguages]:checked"),_.each(c,function(a){return b.push(a.value)}),this.model.set("allowedLanguages",b.join(",")),this.model.save(null,{silent:!0,success:function(a){return Backbone.history.navigate("x/tests/"+d.testmodel.get("id")+"/questions/"+a.get("id")+"/edit/step3",!0)}})},d.prototype.toggleCheckbox=function(a){return a.preventDefault(),$(a.currentTarget).hasClass("active")?($(a.currentTarget).removeClass("active").removeClass("active"),$(a.currentTarget).find("input").removeAttr("checked")):($(a.currentTarget).addClass("active").addClass("active"),$(a.currentTarget).find("input").attr("checked","checked"))},d.prototype.checkAllCheckbox=function(a){var b,c=this;return a.preventDefault(),b=this.$(".hr-checkbox.languages"),_.each(b,function(a){return $(a).addClass("active"),$(a).find("input").attr("checked","checked")})},d.prototype.clearAllCheckbox=function(a){var b,c=this;return a.preventDefault(),b=this.$(".hr-checkbox.languages"),_.each(b,function(a){return $(a).removeClass("active"),$(a).find("input").removeAttr("checked")})},d.prototype.toggleCodeStubs=function(a){var b;return b=$(a.currentTarget).val(),b==="0"?this.$(".js-code-stubs-section").slideUp():this.$(".js-code-stubs-section").slideDown()},d}(window.HR.GenericView),e=function(c){function d(){return o=d.__super__.constructor.apply(this,arguments),o}return b(d,c),d.prototype.template="x/question-coding-step3",d.prototype.className="question-coding-step3",d.prototype.initialize=function(b){return this._subviews=[],this.testmodel=b.testmodel,this.testcases=new a.TestCasesCollection,this.testcases.setTid(this.testmodel.get("id")),this.testcases.setQid(this.model.get("id")),this.listenTo(this.testcases,"add",this.render),this.listenTo(this.testcases,"remove",this.render),this.testcases.fetch()},d.prototype.events=function(){return{"click .js-edit-testcase":"editTestcase","click .js-add-testcase":"addTestcase","click .js-remove-testcase":"removeTestcase","click .js-upload-testcases":"uploadTestcases"}},d.prototype.render=function(){var b,c=this;return b=a.appController.template(this.template,this)({model:this.model.toJSON(),testcases:this.testcases.toJSON()}),$(this.el).html(b),this.testcases.models.length>0&&_.each(this.testcases.models,function(a,b){var d;return d=new j({model:a,index:b}),c._subviews.push(d),c.$("tbody").append(d.render().el)}),this},d.prototype.editTestcase=function(a){var b,c,d=this;return a.preventDefault(),b=parseInt($(a.currentTarget).data("tcid")),console.log(b),c=this.testcases.at(b),console.log(c),c.set("qid",this.model.get("id")),c.set("tid",this.testmodel.get("id")),c.fetch({success:function(a){var c;return c=new i({model:a,index:b,collection:d.testcases}),d._subviews.push(c),d.$("#testcase-modal-container").html(c.render().el)}})},d.prototype.addTestcase=function(b){
var c,d,e=this;return b.preventDefault(),c=this.testcases.models.length,d=new a.TestCaseModel({qid:this.model.get("id"),tid:this.testmodel.get("id")}),d.fetch({success:function(a){var b;return b=new i({model:a,index:c,collection:e.testcases}),e._subviews.push(b),e.$("#testcase-modal-container").html(b.render().el)}})},d}(window.HR.GenericView),j=function(c){function d(){return p=d.__super__.constructor.apply(this,arguments),p}return b(d,c),d.prototype.template="x/testcase-row",d.prototype.className="testcase-row",d.prototype.tagName="tr",d.prototype.initialize=function(a){return this.index=a.index,this.listenTo(this.model,"change",this.render)},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({testcase:this.model.toJSON(),index:this.index}),$(this.el).html(b),this},d}(window.HR.GenericView),i=function(c){function d(){return q=d.__super__.constructor.apply(this,arguments),q}return b(d,c),d.prototype.template="x/testcase-edit-modal",d.prototype.className="testcase-edit-modal",d.prototype.initialize=function(a){return this.index=a.index},d.prototype.events=function(){return{"submit form[name=edit-testcase-form]":"saveTestcase"}},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({model:this.model.toJSON(),index:this.index}),$(this.el).html(b),this.$("#edit-testcase-modal").modal(),this},d.prototype.saveTestcase=function(a){var b,c=this;return a.preventDefault(),b={name:this.$("input[name=name]").val()||"Testcase "+this.index,type:this.$("select[name=type]").val()||"Easy",score:parseInt(this.$("input[name=score]").val()),input:this.$("textarea[name=input]").val(),output:this.$("textarea[name=output]").val(),sample:this.$("input[name=sample]:checked").length>0?!0:!1},this.model.save(b,{success:function(a){return a.collection?c.$(".close").click():(c.$(".close").click(),c.collection.add(a))}})},d}(window.HR.GenericView),f=function(c){function d(){return r=d.__super__.constructor.apply(this,arguments),r}return b(d,c),d.prototype.template="x/question-coding-step4",d.prototype.className="question-coding-step4",d.prototype.initialize=function(a){return this.testmodel=a.testmodel},d.prototype.events=function(){return{"submit form[name=coding-question-step4-form]":"saveQuestion"}},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(b),this},d.prototype.saveQuestion=function(a){var b,c,d,e=this;a.preventDefault(),b=this.$("input[name=name]").removeClass("error").val(),c=this.$("textarea[name=problem-description]").removeClass("error").ckeditorGet().getData();if(_.isEmpty(b)){this.$("input[name=name]").addClass("error");return}if(_.isEmpty(c)){this.$("textarea[name=problem-description]").addClass("error");return}return d={name:b,question:c},this.model.save(d,{silent:!0,success:function(a){return Backbone.history.navigate("x/tests/"+e.testmodel.get("id")+"/questions/"+a.get("id")+"/edit/step2",!0)}})},d}(window.HR.GenericView),a=(s=window.HR)!=null?s:{},a.TestQuestionEditView=h})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-questions-shuffling",e.prototype.className="test-questions-shuffling",e.prototype.events=function(){return{"submit form[name=questions-shuffling-form]":"saveQuestionsShuffling"}},e.prototype.render=function(){var b,c,d,e=this;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){return e.$(".switch").bootstrapSwitch()},200),this},e.prototype.saveQuestionsShuffling=function(a){var b;return a.preventDefault(),b=this.$("input[name=questions-shuffling]").attr("checked"),b?this.model.set("shuffle_questions","True"):this.model.set("shuffle_questions","False"),this.model.save()},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestQuestionsShufflingView=c})}.call(this),function(){var a,b,c,d,e={}.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};jQuery(function(){}),b=function(b){function d(){return c=d.__super__.constructor.apply(this,arguments),c}return f(d,b),d.prototype.initialize=function(a){var b;return b=this,this.listenTo(this.model,"change",this.render)},d.prototype.template="x/test-questions",d.prototype.className="test-questions-view",d.prototype.events=function(){return{"click .js-toggle-question-desc":"toggleQuestionDesc"}},d.prototype.render=function(){var b,c,d,e=this;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this.makeButtonsResponsive(),setTimeout(function(){return e.$("#questions-sortable").sortable({revert:!0,handle:".draggable",stop:function(b,c){var d;d=e.$("#questions-sortable").sortable("toArray",{attribute:"data-qid"}),d=_.uniq(d);if(!a.util.compareArrays(d,e.model.get("questions_array"))&&_.difference(e.model.get("questions_array"),d).length===0)return e.model.set("questions_array",d,{silent:!0}),e.model.save(null,{success:function(){return e.model.fetch()}})}})},300),this},d.prototype.toggleQuestionDesc=function(a){var b;return a.preventDefault(),b=$(a.currentTarget).data("qid"),this.$("#q-"+b+"-desc").hasClass("hidden")?(this.$("#q-"+b+"-desc").removeClass("hidden"),$(a.currentTarget).find("i").removeClass("icon-down-open").addClass("icon-up-open")):(this.$("#q-"+b+"-desc").addClass("hidden"),$(a.currentTarget).find("i").removeClass("icon-up-open").addClass("icon-down-open")),this.makeButtonsResponsive()},d.prototype.makeButtonsResponsive=function(){var a,b,c;b=$("#control-overflow")[0],c=$("#responsive-bottom-holder")[0],a=$("#responsive-bottom-holder").html();if(b)if(b.offsetHeight<b.scrollHeight||b.offsetWidth<b.scrollWidth){$(".overflow-content").addClass("support-reponsive-bottom-holder");if($("#responsive-bottom-holder").length>0)return $("#responsive-bottom-holder").addClass("hidden"),$("#responsive-bottom-placeholder").html(a),$("#responsive-bottom-placeholder").addClass("float-bottom")}else{$(".overflow-content").removeClass("support-reponsive-bottom-holder");if($("#responsive-bottom-holder").length>0)return $("#responsive-bottom-holder").removeClass("hidden"),$("#responsive-bottom-placeholder").html(""),$("#responsive-bottom-placeholder").removeClass("float-bottom")}},d}(window.HR.GenericView),a=(d=window.HR)!=null?d:{},a.TestQuestionsView=b}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},d=function(a,b){return function(){return a.apply(b,arguments)}};jQuery(function(){var a,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return o=function(c){function d(){return p=d.__super__.constructor.apply(this,arguments),p}return b(d,c),d.prototype.template="x/test-report",d.prototype.className="test-report",d.prototype.initialize=function(b){return this._subviews=[],this.testmodel=b.testmodel,this.aid=b.aid,this.tid=b.tid,this.qid=b.qid,this.tab=b.tab,this.model=new a.TestAttemptModel({id:this.aid,tid:this.tid}),this.summary_view=new a.ReportSummaryView({model:this.model,testmodel:this.testmodel,parent:this}),this._subviews.push(this.summary_view),this.detailed_view=new a.ReportDetailedView({model:this.model,testmodel:this.testmodel,qid:this.qid,parent:this}),this._subviews.push(this.detailed_view),this.timeline_view=new a.ReportTimelineView({model:this.model,testmodel:this.testmodel,parent:this}),this._subviews.push(this.timeline_view),this.listenTo(this.model,"change",this.render),this.model.fetch()},d.prototype.events=function(){return{"click .js-report-tab":"changeTab"}},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({test:this.testmodel.toJSON(),tab:this.tab,model:this.model.toJSON()}),$(this.el).html(b),this.renderTab(this.tab,this.qid),this},d.prototype.changeTab=function(a){var b,c,d;return a.preventDefault(),d=$(a.currentTarget).data("tab"),c=$(a.currentTarget).data("qid"),this.$(".sub-topbar-tabs li").removeClass("active"),this.$(".sub-topbar-tabs li a[data-tab="+d+"]").parent().addClass("active"),b="/x/tests/"+this.tid+"/candidates/"+this.aid+"/report/"+d,c&&(b+="/"+c),window.history.pushState(null,null,b),this.renderTab(d,c)},d.prototype.renderTab=function(a,b){b==null&&(b=null);if(!this.model.get("test"))return;if(a==="summary")return this.$("#report-tab-content-container").html(this.summary_view.render().el);if(a==="detailed")return this.$("#report-tab-content-container").html(this.detailed_view.render(b).el);if(a==="timeline")return this.$("#report-tab-content-container").html(this.timeline_view.render().el)},d.prototype.getQuestionTime=function(){var a,b,c,d,e,f,g,h,i,j,k;this.tq_split={},i=this.model.get("questions"),k=[];for(a=e=0,g=i.length;e<g;a=++e){c=i[a],this.tq_split[a+1]=void 0;if(this.timelineView.qarray[a+1]){d=0,j=this.timelineView.qarray[a+1];for(f=0,h=j.length;f<h;f++)b=j[f],d+=b[1]-b[0];k.push(this.tq_split[a+1]=d)}else k.push(void 0)}return k},d}(window.HR.GenericView),m=function(c){function d(){return q=d.__super__.constructor.apply(this,arguments),q}return b(d,c),d.prototype.template="x/test-report-summary",d.prototype.className="test-report-summary",d.prototype.initialize=function(a){return this.testmodel=a.testmodel},d.prototype.events=function(){},d.prototype.render=function(){var b,c,d,e,f=this;return d=[],this.model.get("test")&&(_.each(this.model.get("candidate_details"),function(a,b){return d.push(a)}),this.model.get("ip_address")&&d.push({title:"IP ADDRESS",value:this.model.get("ip_address")}),this.model.get("inviter")&&d.push({title:"INVITED BY",value:this.model.get("inviter")}),this.model.get("feedback")&&d.push({title:"FEEDBACK",value:this.model.get("feedback")}),this.model.get("scores_tags_split")&&(c="",_.each(this.model.get("scores_tags_split"),function(a,b){return c+='<span class="label q-tags">'+b+"</span> "+a+"<br/>"}),d.push({title:"TAG SCORE",value:c}))),b=a.appController.template(this.template,this)({test:this.testmodel.toJSON(),tab:this.tab,model:this.model.toJSON(),hasDisconnect:!1,more_details:d}),$(this.el).html(b),this.model.get("test")&&(e=this.model.get("test").max_score,e<this.model.get("score")&&(e=this.model.get("score")),this.makeDonut(this.model.get("score"),e-this.model.get("score"))),this},d.prototype.makeDonut=function(a,b){var c,d;if(!this.model.get("test"))return;return c=google.visualization.arrayToDataTable([["A","B"],["Right",parseInt(a)],["Wrong",parseInt(b)]]),d={pieHole:.7,pieSliceText:"none",width:"260",height:"260",tooltip:{trigger:"none",showColorCode:!1},legend:{position:"none"},colors:["#4dd486","#f1f1f1"]},setTimeout(function(){return(new google.visualization.PieChart(this.$("#donut")[0])).draw(c,d)},200)},d}(window.HR.GenericView),l=function(c){function d(){return t=d.__super__.constructor.apply(this,arguments),t}return b(d,c),d.prototype.template="x/test-report-detailed",d.prototype.className="test-report-detailed",d.prototype.initialize=function(a){return this.testmodel=a.testmodel,this._subviews=[]},d.prototype.events=function(){},d.prototype.render=function(b){var c,d=this;return b==null&&(b=null),c=a.appController.template(this.template,this),$(this.el).html(c),this.renderQuestions(),setTimeout(function(){if(b)return d.scrollToQuestion(b)},200),this},d.prototype.renderQuestions=function(){var a,b=this;return a=$('<div id="report-questions-container"></div>'),_.each(this.model.get("questions"),function(c,d){var e;return e=new i({model:b.model,question:c,index:d+1}),a.append(e.render().el)}),this.$("#detailed-report").append(a)},d.prototype.scrollToQuestion=function(a){return $("#report-tab").animate({scrollTop:$("#report-q-"+a).position().top},2e3)},d}(window.HR.GenericView),i=function(c){function d(){return u=d.__super__.constructor.apply(this,arguments),u}return b(d,c),d.prototype.template="x/test-report-detailed-question",d.prototype.className="test-report-detailed-question",d.prototype.status={correct:{"class":"icon2-status_correct txt-green",text:"Correct Answer",color:"green"},wrong:{"class":"icon2-status_wrong txt-orange",text:"Wrong Answer",color:"red"},review:{"class":"icon2-generalsettings txt-yellow",text:"Needs Review",color:"Yellow"},unattempted:{"class":"icon2-status_no_ans txt-alt-grey",text:"Not attempted",color:"grey"},neutral:{"class":"icon2-status_no_ans txt-alt-grey",text:"Self Evaluation",color:"grey"}},d.prototype.initialize=function(a){var b;return b=[],this.question=a.question,this.index=a.index},d.prototype.events=function(){return{"click .js-btn-copy":"copyCode","keyup #add_new_comment":"addComment","click #scoreedit":"editScore","keypress .score-input":"setScoreOnEnter","focusout .score-input":"setScoreOnFocus"}},d.prototype.copyCode=function(a){return a.preventDefault()},d.prototype.addComment=function(b){var c,d,e,f,g=this;return b.which===13||b.keyCode===13?(b.preventDefault(),e=this,c=this.$("#add_new_comment").val(),c?(d={comment:c,qid:this.question.id},f="/xrest/tests/"+this.model.get("tid")+"/attempts/"+this.model.get("id")+"/report_comment",$.post(f,d,function(b){var c;return console.log(b),b.status===!0?(c='<div class="msT msB">                        <p>'+b.model.comment+'</p>                        <p class="txt-alt-grey">- '+b.model.name+" ("+a.util.formatDateTime(b.model.inserttime)+")</p>                    </div>",g.$(".comments_container").append(c),g.$("#add_new_comment").val("")):console.log("failed")})):alert("Type a comment, and press return.")):!0},d.prototype.setScoreOnEnter=function(a){if(a.keyCode===13)return this.setScore()},d.prototype.setScoreOnFocus=function(a){return this.setScore()},d.prototype.editScore=function(a){return this.$("#scoreedit").addClass("hidden"),this.$(".score-input").css("display","inline"),this.$(".score-input").val(this.question.score),this.$(".score-input").focus()},d.prototype.cancelEditScore=function(a){return this.$("#scoreedit").removeClass("hidden"),this.$(".score-input").css("display","none")},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({model:this.model.toJSON(),question:this.question,index:this.index,time:0,status:this.status[this.question.status]?this.status[this.question.status]:this.status.neutral}),$(this.el).html(b),this.displayAnswer(),this},d.prototype.displayAnswer=function(){var a;switch(this.question.type){case"mcq":case"multiple_mcq":return a=new h({question:this.question}),this.$("#question_answer").html(a.render().el);case"textAns":case"unscramble":case"file_upload":return a=new k({question:this.question}),this.$("#question_answer").html(a.render().el);case"rewrite":case"complete":return a=new j({question:this.question}),this.$("#question_answer").html(a.render().el);case"correct_errors":return a=new f({question:this.question}),this.$("#question_answer").html(a.render().el);case"uml":case"electrical":return a=new g({question:this.question}),this.$("#question_answer").html(a.render().el);case"code":case"approx":return a=new e({question:this.question}),this.$("#question_answer").html(a.render().el)}},d}(window.HR.GenericView),h=function(d){function e(){return v=e.__super__.constructor.apply(this,arguments),v}return b(e,d),e.prototype.template="x/test-report-detailed-mcq",e.prototype.className="test-report-detailed-mcq",e.prototype.initialize=function(a){return this.question=a.question},e.prototype.render=function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p;this.question.type==="mcq"?(h=[this.question.my_answer],d=[this.question.answer]):(h=this.question.my_answer,d=this.question.answer),b=a.appController.template(this.template,this)({question:this.question,my_ans:h,exp_ans:d}),$(this.el).html(b),i=1;if(this.question.answered){e="",n=this.question.options;for(l=0,m=n.length;l<m;l++)j=n[l],k=(o=i.toString(),c.call(h,o)>=0)||c.call(h,i)>=0,g=(p=i.toString(),c.call(d,p)>=0)||c.call(d,i)>=0,g&&k?f="cy":g&&!k?f="cn":!g&&k?f="ny":f="nn",e+="<li><img class='mcq-opt-img' src = '/assets/mcq_options/img_mcq_"+f+".png' /><span class='mcq-opt'>"+j+"</span><div class='clear' /></li>",i++;this.$(".mcq-reports-answer").html(e)}return this},e}(window.HR.GenericView),g=function(c){function d(){return w=d.__super__.constructor.apply(this,arguments),w}return b(d,c),d.prototype.template="x/test-report-detailed-draw",d.prototype.className="test-report-detailed-draw",d.prototype.initialize=function(a){return this.question=a.question},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({question:this.question}),$(this.el).html(b),this},d}(window.HR.GenericView),f=function(c){function d(){return x=d.__super__.constructor.apply(this,arguments),x}return b(d,c),d.prototype.template="x/test-report-detailed-correct-errors",d.prototype.className="test-report-detailed-correct-errors",d.prototype.initialize=function(a){return this.question=a.question},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({question:this.question}),$(this.el).html(b),this},d}(window.HR.GenericView),j=function(c){function d(){return y=d.__super__.constructor.apply(this,arguments),y}return b(d,c),d.prototype.template="x/test-report-detailed-rewrite-complete",d.prototype.className="test-report-detailed-rewrite-complete",d.prototype.initialize=function(a){return this.question=a.question},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({question:this.question}),$(this.el).html(b),this},d}(window.HR.GenericView),k=function(c){function d(){return z=d.__super__.constructor.apply(this,arguments),z}return b(d,c),d.prototype.template="x/test-report-detailed-subjective",d.prototype.className="test-report-detailed-subjective",d.prototype.initialize=function(a){return this.question=a.question},d.prototype.render=function(){var b;return b=a.appController.template(this.template,this)({question:this.question}),$(this.el).html(b),this},d}(window.HR.GenericView),e=function(c){function d(){return A=d.__super__.constructor.apply(this,arguments),A}return b(d,c),d.prototype.template="x/test-report-detailed-coding",d.prototype.className="test-report-detailed-code",d.prototype.initialize=function(a){return this.question=a.question},d.prototype.events=function(){return{"click .code-player":"togglePlayer","slide .slider":"playcode","click #toggle_output":"toggleOutput"}},d.prototype.render=function(){var b,c;return b=a.appController.template(this.template,this)({question:this.question}),$(this.el).html(b),this.question.submissions&&this.viewCode(this.question.submissions,this.question.my_lang,this.question.submissions.length-1),this.$(".slider").slider({min:1,max:this.question.submissions.length,value:this.question.submissions.length}),c=this,setTimeout(function(){var a,b,d;a=".js-btn-copy-"+c.question.id,d=$(a);if(c.question.submissions&&c.question.submissions.length>0){d.attr("data-clipboard-text",c.question.submissions[c.question.submissions.length-1].answer);if(d.length)return b=new ZeroClipboard(d,{container:$("div.right_cont div.rt_content_wrap").get(0)}),b.setTitle("Copy this code")}},200),this},d.prototype.togglePlayer=function(a){var b=this;return a.preventDefault(),this.$("#code-player").width()!==430?(this.$(".code_play_slide_wrap").hide(),this.$("#code-player").animate({width:"430px"}).parent().css("z-index",100),this.$(".playcode_txt").html(this.codeTime),setTimeout(function(){return b.$(".code_play_slide_wrap").fadeIn()},300)):(this.$(".code_play_slide_wrap").hide(),this.$(".playcode_txt").html("PLAY CODE"),this.$("#code-player").animate({width:"140px"}).parent().css("z-index",1))},d.prototype.toggleOutput=function(a){var b;return a.preventDefault(),b=this.$(".code-output"),b.hasClass("hidden")?(b.removeClass("hidden"),this.$(a.currentTarget).html("[-] Click here to hide the output")):(b.addClass("hidden"),this.$(a.currentTarget).html("[+] Click here to see the output"))},d.prototype.playcode=function(a,b){var c,d;return c=this.question.submissions[parseInt(b.value,10)-1].answer,this.$(".outbox").html(_.escape(c)),this.$(".langused").html(this.question.submissions[parseInt(b.value,10)-1].lang.toUpperCase()),this.viewCode(this.question.submissions,this.question.my_lang,parseInt(b.value,10)-1),this.$("#code-player").width()===430&&this.$(".playcode_txt").html(this.codeTime),d=".js-btn-copy-"+this.question.id,a=$(d),a.attr("data-clipboard-text",c)},d.prototype.viewCode=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;h={c:"text/x-csrc",cpp:"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp",haskell:"text/x-haskell",php:"text/x-php",python:"text/x-python",perl:"text/x-perl",ruby:"text/x-ruby",bash:"text/x-bash",oracle:"text/x-plsql",mysql:"text/x-plsql",sql:"text/x-plsql",clojure:"text/x-scheme",scala:"text/plain",code:"text/plain",go:"text/x-go",javascript:"text/javascript",objectivec:"text/x-csrc"};if(a){n=this,l=a[c],g=c;if(!l)return;return this.codeTime="At "+l.timespan,i=h[l.lang||b],k=this.$("pre.outbox"),k.empty(),$(k).append('<table><tr><td class="line-no" width="5%"></td><td class="code"></td></tr></table>'),e=$("<div></div>"),f=$("<div>1</div>"),$(k).find(".code").append(e),$(k).find(".line-no").append(f),d=0,m=CodeMirror.defaults.tabSize||4,j=2,CodeMirror.runMode(l.answer,i,function(a,b){var g,h,i,l,n;if(a==="\n"){f.height(e.height()),e=$("<div></div>"),f=$("<div>"+j+"</div>"),j++,$(k).find(".code").append(e),$(k).find(".line-no").append(f),d=0;return}g="",i=0;for(;;){h=a.indexOf("\t",i);if(h===-1){g+=a.slice(i),d+=a.length-i;break}d+=h-i,g+=a.slice(i,h),l=m-d%m,d+=l,c=0;while(c<l)g+=" ",++c;i=h+1}return b?(n=$("<span></span>"),n.addClass("cm-"+b.replace(RegExp(" +","g")," cm-")),n.append(document.createTextNode(g)),e.append(n)):e.append(document.createTextNode(g))})}},d}(window.HR.GenericView),n=function(c){function e(){return this.checkForIframeError=d(this.checkForIframeError,this),this.setIframeData=d(this.setIframeData,this),r=e.__super__.constructor.apply(this,arguments),r}return b(e,c),e.prototype.template="x/test-report-timeline",e.prototype.className="test-report-timeline",e.prototype.initialize=function(a){this.model=a.model,this.testmodel=a.testmodel,this.timeline=this.model.get("timeline")?this.model.get("timeline"):[],this.qarray={},this.lastqno=null,this.hasDisconnect=!1,this.offlineTime=0;if(this.timeline.length>1)return this.buildGoogleDatatable()},e.prototype.getTimeline=function(){this.timeline=this.model.get("timeline")?this.model.get("timeline"):[];if(this.timeline.length>1)return this.buildGoogleDatatable()},e.prototype.render=function(){var b,c;return this.getTimeline(),c=this.timeline.length,b=a.appController.template(this.template,this)({test:this.testmodel.toJSON(),timeline:this.timeline,tab:this.tab,starttime:this.model.get("starttime"),total_time_taken:this.model.get("total_time_taken"),tllen:c,hasDisconnect:this.hasDisconnect,offlineTime:a.util.prettyPrintSeconds(this.offlineTime),model:this.model.toJSON()}),$(this.el).html(b),c>1&&setTimeout(this.setIframeData,500),this},e.prototype.setIframeData=function(){if(this.$("#tl-frame").length===0||!this.$("#tl-frame")[0].contentWindow||this.$("#tl-frame")[0].contentWindow.s!=="notset")return setTimeout(this.setIframeData,500);this.$("#tl-frame").height(this.height+30),this.$("#tl-frame")[0].contentWindow.opts=this.dtopts,this.$("#tl-frame")[0].contentWindow.s=this.dt,setTimeout(this.checkForIframeError,1e3),this.$("ul.tnc").removeClass("hide");if(this.hasDisconnect)return this.$("li.new-tl").removeClass("hide");if(!this.trackingListing)return this.$("li.old-tl").removeClass("hide")},e.prototype.checkForIframeError=function(){if(this.$("#tl-frame")[0].contentWindow.errcount===2)return this.$("#tl-frame").css("min-width",""),this.$("#tl-frame")[0].contentWindow.drawChart()},e.prototype.buildGoogleDatatable=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;l={LOGIN:"1",VIEW_LIST:"2",QUES_VIEW:"3",QUES_SUBMIT:"4",QUES_COMPILE:"5",PING:"6"},this.timetaken={},b="Question list",a="Offline",c="No ping",d=70,this.timeline.length>2&&(this.timeline[0].id===l.VIEW_LIST||this.timeline[1].id===l.VIEW_LIST)?u=!0:u=!1,j=this.timeline.length,F=this.timeline;for(m=v=0,z=F.length;v<z;m=++v)i=F[m],m===j-1?p=0:p=this.timeline[m+1].inserttime-i.inserttime,i.id===l.VIEW_LIST||i.id===l.LOGIN?this.streamevent(b,i.inserttime):i.qno&&this.streamevent(i.qno,i.inserttime),p!==null&&p>d&&u&&this.streamevent(a,i.inserttime+10);this.streamevent("finish",i.inserttime+10),g=new google.visualization.DataTable,g.addColumn({type:"string",id:"Question"}),g.addColumn({type:"string",id:"Name"}),g.addColumn({type:"date",id:"Start"}),g.addColumn({type:"date",id:"End"}),u?h="No ping received in this time (maybe due to network disconnection).":h="No other events tracked in this timeslot.",f=_.keys(this.qarray).length+1,t=[],k=[];if(_.has(this.qarray,a)){G=this.qarray[a];for(w=0,A=G.length;w<A;w++)n=G[w],k.push(["Offline",h,new Date(n[0]*1e3),new Date(n[1]*1e3)]),this.offlineTime+=n[1]-n[0];delete this.qarray[a]}if(_.has(this.qarray,b)){H=this.qarray[b];for(x=0,B=H.length;x<B;x++)n=H[x],t.push(["Main listing","Viewed question listing",new Date(n[0]*1e3),new Date(n[1]*1e3)]);delete this.qarray[b]}s=_.keys(this.qarray).sort(function(a,b){return a-b});for(y=0,C=s.length;y<C;y++){r=s[y],I=this.qarray[r];for(E=0,D=I.length;E<D;E++)n=I[E],t.push(["Question "+r,"q."+r,new Date(n[0]*1e3),new Date(n[1]*1e3)])}return g.addRows(t),u?g.addRows(k):f-=1,q={width:700},this.height=(f+1)*45,!u||k.length===0?(q.timeline={singleColor:"#4dd486"},this.hasDisconnect=!1):(o=t.length,e=function(){var a,b;b=[];for(m=a=1;1<=o?a<=o:a>=o;m=1<=o?++a:--a)b.push("#4dd486");return b}(),o=k.length,e=e.concat(function(){var a,b;b=[];for(m=a=1;1<=o?a<=o:a>=o;m=1<=o?++a:--a)b.push("#f00");return b}()),q.colors=e,this.hasDisconnect=!0),this.dt=g.toJSON(),this.dtopts=q,this.trackingListing=u},e.prototype.streamevent=function(a,b){var c;return console.log(this.qarray),console.log(this.lastqno),this.lastqno===null?(_.has(this.qarray,a)||(this.qarray[a]=[]),this.qarray[a].push([b,null])):a==="finish"?(c=this.qarray[this.lastqno].length-1,this.qarray[this.lastqno][c][1]=b):this.lastqno===a?(c=this.qarray[a].length-1,this.qarray[a][c][1]=b):(c=this.qarray[this.lastqno].length-1,this.qarray[this.lastqno][c][1]=b,_.has(this.qarray,a)||(this.qarray[a]=[]),this.qarray[a].push([b,null])),console.log("qno is "+a),this.lastqno=a},e}(window.HR.GenericView),a=(s=window.HR)!=null?s:{},a.TestReportView=o,a.ReportSummaryView=m,a.ReportDetailedView=l,a.ReportTimelineView=n})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this},e.prototype.template="x/test-time-settings",e.prototype.className="test-time-settings",e.prototype.render=function(){var b,c,d;return c=this,d=this.model.toJSON(),d&&(b=a.appController.template(this.template,this)({model:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestTimeSettingsView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this,this.collection.bind("change",this.render,this)},e.prototype.template="x/tests",e.prototype.className="tests-list-view",e.prototype.render=function(){var b,c,d;return c=this,d=this.collection.toJSON(),d&&(console.log(this.el),b=a.appController.template(this.template,this)({collection:d,throbber:a.appController.viewLoader()}),console.log(b),$(this.el).html(b)),this},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestsView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(c){function e(){return d=e.__super__.constructor.apply(this,arguments),d}return b(e,c),e.prototype.initialize=function(a){var b;return b=this,this.listenTo(this.model,"change",this.render)},e.prototype.template="x/tests",e.prototype.className="tests-list-view",e.prototype.render=function(){var b,c,d;return c=this,d=this.collection.toJSON(),d&&(b=a.appController.template(this.template,this)({collection:d,throbber:a.appController.viewLoader()}),$(this.el).html(b)),this},e}(window.HR.GenericView),a=(e=window.HR)!=null?e:{},a.TestsView=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.urlRoot=function(){var a;return this.tid=this.get("tid"),this.tid&&(a="/xrest/tests/"+this.tid+"/questions"),a},c}(window.HR.GenericModel),a=(e=window.HR)!=null?e:{},a.QuestionModel=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.url=function(){var a;if(this.id&&this.tid)return a="/x/tests/"+this.tid+"/attempts/{@id}"},c}(window.HR.GenericModel),a=(e=window.HR)!=null?e:{},a.TestAttemptModel=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.url=function(){var a;return this.tid=this.get("tid"),this.id&&this.tid&&(a="/xrest/tests/"+this.tid+"/attempts/"+this.id),a},c}(window.HR.GenericModel),a=(e=window.HR)!=null?e:{},a.TestAttemptModel=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.urlRoot="/xrest/tests",c}(window.HR.GenericModel),a=(e=window.HR)!=null?e:{},a.TestModel=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.urlRoot=function(){var a;return this.tid=this.get("tid"),this.qid=this.get("qid"),a="/xrest/tests/"+this.tid+"/questions/"+this.qid+"/testcases",a},c}(window.HR.GenericModel),a=(e=window.HR)!=null?e:{},a.TestCaseModel=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.model=window.HR.TestCaseModel,c.prototype.setTid=function(a){this.tid=a},c.prototype
.setQid=function(a){this.qid=a},c.prototype.url=function(){return"/xrest/tests/"+this.tid+"/questions/"+this.qid+"/testcases"},c}(window.HR.GenericCollection),a=(e=window.HR)!=null?e:{},a.TestCasesCollection=c})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jQuery(function(){var a,c,d,e;return c=function(a){function c(){return d=c.__super__.constructor.apply(this,arguments),d}return b(c,a),c.prototype.model=window.HR.TestModel,c.prototype.url="/xrest/tests",c}(window.HR.GenericCollection),a=(e=window.HR)!=null?e:{},a.TestsCollection=c})}.call(this)