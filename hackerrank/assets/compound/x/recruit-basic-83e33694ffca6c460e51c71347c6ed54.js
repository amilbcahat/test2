(function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n,s,o,a,l;return a=function(t){return _.isFunction(t)?t():t},s=function(t){var e,i;return i=t,t&&(e=t.split(/to/i),e.length>1&&(i=e[0].trim()+".."+e[1].trim())),i},n=function(t,e,i){return null==i&&(i="prop"),_.find(t,function(t){return t[i]===e})},o=function(t){var e;return e={},_.each(t,function(t){return e[t.name]=t.value}),e},r=function(t,e,i){return null==t&&(t={}),null==e&&(e={}),null==i&&(i={}),_.each(e,function(e,r){return t[r]=e,void 0!==i[r]?t[r]=i[r]:void 0}),t},t=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.def={},s.prototype.setAsync=function(t){this.async=t},s.prototype.defField=function(){return{template:"<%- row[prop] %>",format:function(t,e,i,r){return _.isFunction(i)||(i=_.template(i)),i({row:this,prop:t,row_no:e,field:r})}}},s.prototype.initialize=function(t){return null==t&&(t={}),r(this,a(this.def),t),_.bindAll(this),this.customDatatableOpt=t.customDatatableOpt,s.__super__.initialize.apply(this,arguments)},s.prototype.fields=null,s.prototype.url=null,s.prototype.datatableEl="#datatable",s.prototype.modelClass=null,s.prototype.datatable=null,s.prototype.baseParams=null,s.prototype.getFields=function(){var t,e;return e=this,t=_.map(a(this.fields),function(t,i){var r;return r={ix:i},_.extend(r,a(e.defField),t),_.isString(r.template)&&(r.template=_.template(r.template)),r}),t=_.sortBy(t,function(t){return t.ix})},s.prototype.beforeRequest=function(t){var e,i,r;return r={},e=a(this.baseParams),e&&_.extend(r,e),i=n(this.getFields(),t.iSortCol_0,"ix"),i&&i.prop&&(r.order_by=i.prop),r.order_dir=t.sSortDir_0,r.limit=t.iDisplayLength,r.offset=t.iDisplayStart,r},s.prototype.afterRequest=function(t,e){var i;return i={aaData:[],iTotalDisplayRecords:0,iTotalRecords:0,models:[]},_.isObject(t)&&_.isArray(t.results)&&(i.iTotalDisplayRecords=t.total,i.iTotalRecords=t.total,i.aaData=_.map(t.results,function(t){return function(r,n){var s;return t.modelClass&&(r=new t.modelClass(r),i.models.push(r)),s=_.map(e,function(t){return t.format.call(r,t.prop,n,t.template)})}}(this))),i},s.prototype.params=function(){return{model:this.model,fields:this.getFields(),collection:this.collection}},s.prototype.sortableFields=function(){var t,e;return t=this.getFields(),e=_.chain(t).filter(function(t){return t.sortable===!1}).map(function(t){return t.ix}).value()},s.prototype.defaultOrderBy=function(){var t,e,i;return e=a(this.baseParams),i=0,e&&e.order_by&&(t=n(this.getFields(),e.order_by,"prop"),t&&(i=t.ix)),i},s.prototype.defaultOrderDir=function(){var t,e;return t=a(this.baseParams),e="asc",t&&t.order_dir&&(e=t.order_dir),e},s.prototype.datatableOpt=function(){var t,e;return e=this,t=this.getFields(),{sPaginationType:"bootstrap",bProcessing:!1,bServerSide:!0,bDestroy:!0,bAutoWidth:!1,aaSorting:[[this.defaultOrderBy(),this.defaultOrderDir()]],iDisplayLength:50,aoColumnDefs:[{bVisible:!0,aTargets:_.map(t,function(t){return t.ix})},{bSortable:!1,aTargets:a(this.sortableFields)}],fnPreDrawCallback:function(t){return function(e){return t.customDatatableOpt&&t.customDatatableOpt.showAfterFetch&&e._iRecordsTotal>0?$(t.el).show():void 0}}(this),sAjaxSource:a(this.url),fnServerData:function(r,n,s){return n=o(n),_.isFunction(e.beforeRequest)&&(n=e.beforeRequest(n),n===!1)?void 0:(i.util.ajaxmsg("Loading...",!1,!0,1e3),$.ajax({url:r,data:n,dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(r){return _.isFunction(e.afterRequest)&&(r=e.afterRequest(r,t)),e.data=r,s(r),i.util.ajaxmsg("",!1,!0,0),$(".tip").tooltip()}}))}}},s.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)(a(this.params))),this.customDatatableOpt&&this.customDatatableOpt.showAfterFetch&&$(this.el).hide(),this.async?this:(this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(function(t){return function(){return _.isFunction(t.postRender)?t.postRender():console.log("post render not present - datatable")}}(this),1e3),this)},s.prototype.postRender=function(){var t;return t={},_.extend(t,a(this.datatableOpt),this.customDatatableOpt),this.datatable=this.$(this.datatableEl).dataTable(t)},s}(Backbone.View),i=null!=(l=window.HR)?l:{},i.DataTableView=t})}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t};jQuery(function(){var e;return e=function(e){function r(){return this.saveData=t(this.saveData,this),r.__super__.constructor.apply(this,arguments)}var n,s;return i(r,e),r.prototype.template="x/add-user-modal",r.prototype.tagName="div",r.prototype.initialize=function(t){return this.parent=t.parent,this.type=t.type,this.userLabels=t.userLabels,this.users=t.users,this.mapping_id=t.mapping_id,this.team_id=t.team_id,this.data=t.data,this.user_data=t.user_data,r.__super__.initialize.call(this,t)},r.prototype.render=function(){var t,e,i,r,s,o,a,l;return $(this.el).empty(),$(this.el).html(n.appController.template(this.template,this)({collection:this.collection,type:this.type})),this.$("#new-add-user").modal(),a=_.map(this.collection.models,function(){return function(t){return"real"===t.get("type")&&t.get("edit")===!0?{id:t.get("id"),text:t.get("name")}:null}}(this)),a=_.compact(a),"add user"===this.type?(s="new",r=!0,e=!1,this.setDefaultAndShowPermissions()):"add to team"===this.type?(s="select2",r=!1,e=!0,this.setDefaultAndShowPermissions()):"edit"===this.type&&(s="pre-filled",this.user_data={},_.each(this.collection.models,function(t){return function(e){return _.each(e.get("users"),function(i){return i.get("id")===t.mapping_id?(t.model=i,t.user_data=i.toJSON(),t.user_data.team={id:e.get("id"),name:e.get("name")}):void 0})}}(this)),this.user_data&&(this.$("span.js-user-name").html(this.user_data.firstname+" "+this.user_data.lastname),this.$("span.js-user-email").html(this.user_data.email),"admin"===this.user_data.role?(this.$("span.js-user-profile").html("Recruitment"),this.$("span.js-user-admin").html("Yes")):"recruiter"===this.user_data.role?(this.$("span.js-user-profile").html("Recruitment"),this.$("span.js-user-admin").html("No")):(this.$("span.js-user-profile").html("Development"),this.$("span.js-user-admin").html("No"))),o=this.user_data.questions_permission_json,l=this.user_data.tests_permission_json,t=this.user_data.candidates_permission_json,i=this.user_data.interviews_permission_json,this.setDefaultAndShowPermissions(this.user_data.role,o,l,t,i)),"add user"===this.type&&(setTimeout(function(t){return function(){return t.$("input[name=user-teams-select]").select2({data:a,multiple:!0})}}(this)),this.user_data&&(this.user_data.email&&this.$("input[name=user-email]").val(this.user_data.email),this.user_data.firstname&&(s=this.user_data.firstname,this.user_data.lastname&&(s+=" "+this.user_data.lastname),this.$("input[name=user-name]").val(s)))),"select2"===s&&this.userLabels&&setTimeout(function(t){return function(){return t.$("input[name=user-name]").select2({data:t.userLabels,width:200,formatSelection:function(e){var i,r;return _.isEmpty(e)?void 0:(i=t.users[e.id],t.user_data=i,t.$("span.js-user-email").html(i.email),t.$("span.js-user-name").html(i.firstname+" "+i.lastname),"admin"===i.role?(t.$("span.js-user-profile").html("Recruitment"),t.$("span.js-user-admin").html("Yes")):"recruiter"===i.role?(t.$("span.js-user-profile").html("Recruitment"),t.$("span.js-user-admin").html("No")):(t.$("span.js-user-profile").html("Development"),t.$("span.js-user-admin").html("No")),t.user_id=i.user_id,t.$(".js-user-info").removeClass("hidden"),r="admin"===i.role||"recruiter"===i.role?"recruiter":"developer",t.showPermissions(r,!1),_.compact([i.firstname,i.lastname]).join(" "))}})}}(this),800),this},r.prototype.events=function(){return{"submit form[name=add-user-form]":"addUser","change select[name=user-role]":"toggleAdmin"}},r.prototype.toggleAdmin=function(t){var e;return e=this.$(t.currentTarget).val(),"recruiter"===e?this.$(".js-user-admin-container").removeClass("hidden"):this.$(".js-user-admin-container").addClass("hidden"),"edit"!==this.type?this.showPermissions(e,!1):void 0},r.prototype.disableForm=function(){return this.$("button[type=submit]").attr("disabled",!0).addClass("disabled")},r.prototype.enableForm=function(){return this.$("button[type=submit]").attr("disabled",!1).removeClass("disabled")},r.prototype.setDefaultAndShowPermissions=function(t,e,i,r,n){return null==t&&(t="recruiter"),null==e&&(e=null),null==i&&(i=null),null==r&&(r=null),null==n&&(n=null),"admin"===t&&(t="recruiter"),e=e?{developer:e,recruiter:e}:{developer:{owned:this.collection.new_user_permissions.owned.questions_permission.developer,shared:this.collection.new_user_permissions.shared.questions_permission.developer},recruiter:{owned:this.collection.new_user_permissions.owned.questions_permission.recruiter,shared:this.collection.new_user_permissions.shared.questions_permission.recruiter}},i=i?{developer:i,recruiter:i}:{developer:{owned:this.collection.new_user_permissions.owned.tests_permission.developer,shared:this.collection.new_user_permissions.shared.tests_permission.developer},recruiter:{owned:this.collection.new_user_permissions.owned.tests_permission.recruiter,shared:this.collection.new_user_permissions.shared.tests_permission.recruiter}},r=r?{developer:r,recruiter:r}:{developer:{owned:this.collection.new_user_permissions.owned.candidates_permission.developer,shared:this.collection.new_user_permissions.shared.candidates_permission.developer},recruiter:{owned:this.collection.new_user_permissions.owned.candidates_permission.recruiter,shared:this.collection.new_user_permissions.shared.candidates_permission.recruiter}},n=n?{developer:n,recruiter:n}:{developer:{owned:this.collection.new_user_permissions.owned.interviews_permission.developer,shared:this.collection.new_user_permissions.shared.interviews_permission.developer},recruiter:{owned:this.collection.new_user_permissions.owned.interviews_permission.recruiter,shared:this.collection.new_user_permissions.shared.interviews_permission.recruiter}},this.defaultPermissions={questions_permission:e,tests_permission:i,candidates_permission:r,interviews_permission:n},this.showPermissions(t)},r.prototype.showPermissions=function(t,e,i,r,n,s){return null==t&&(t="recruiter"),null==e&&(e=!0),null==i&&(i=null),null==r&&(r=null),null==n&&(n=null),null==s&&(s=null),"admin"===t&&(t="recruiter"),i||(i=this.defaultPermissions.questions_permission[t]),r||(r=this.defaultPermissions.tests_permission[t]),n||(n=this.defaultPermissions.candidates_permission[t]),s||(s=this.defaultPermissions.interviews_permission[t]),i.shared>1?this.$("input[name=questions-permission]").attr("checked","checked"):this.$("input[name=questions-permission]").removeAttr("checked"),r.owned>1?this.$("input[name=tests-permission][value=create-tests]").attr("checked","checked"):this.$("input[name=tests-permission][value=create-tests]").removeAttr("checked"),r.shared>1?this.$("input[name=tests-permission][value=share-tests]").attr("checked","checked"):this.$("input[name=tests-permission][value=share-tests]").removeAttr("checked"),n.shared>1?this.$("input[name=candidates-permission][value=share-candidates]").attr("checked","checked"):this.$("input[name=candidates-permission][value=share-candidates]").removeAttr("checked"),s.owned>1?this.$("input[name=interviews-permission][value=schedule-interviews]").attr("checked","checked"):this.$("input[name=interviews-permission][value=schedule-interviews]").removeAttr("checked"),s.shared>1?this.$("input[name=interviews-permission][value=share-interviews]").attr("checked","checked"):this.$("input[name=interviews-permission][value=share-interviews]").removeAttr("checked"),e?setTimeout(function(t){return function(){var e;return e=require__("switchery"),$.map($(t.el).find(".js-switch"),function(i){return new e(i),t.$(i).attr("checked")?t.$(i).next().find("small").css("left","20px"):void 0})}}(this)):setTimeout(function(t){return function(){var e;return e=require__("switchery"),$.map($(t.el).find(".js-switch"),function(i){return t.$(i).parent().find(".switchery").remove(),new e(i),t.$(i).attr("checked")?t.$(i).next().find("small").css("left","20px"):void 0})}}(this))},r.prototype.getPermissions=function(t){var e;return e={questions_permission:{shared:2,owned:3},tests_permission:{shared:2,owned:3},candidates_permission:{shared:2,owned:3},interviews_permission:{shared:2,owned:3}},"admin"===t&&(t="recruiter"),e.questions_permission.shared=this.$("input[name=questions-permission]").is(":checked")?this.defaultPermissions.questions_permission[t].shared>=2?this.defaultPermissions.questions_permission[t].shared:2:this.defaultPermissions.questions_permission[t].shared<=1?this.defaultPermissions.questions_permission[t].shared:1,e.tests_permission.owned=this.$("input[name=tests-permission][value=create-tests]").is(":checked")?3:0,e.tests_permission.shared=this.$("input[name=tests-permission][value=share-tests]").is(":checked")?this.defaultPermissions.tests_permission[t].shared>=2?this.defaultPermissions.tests_permission[t].shared:2:this.defaultPermissions.tests_permission[t].shared<=1?this.defaultPermissions.tests_permission[t].shared:1,e.candidates_permission.shared=this.$("input[name=candidates-permission][value=share-candidates]").is(":checked")?this.defaultPermissions.candidates_permission[t].shared>=2?this.defaultPermissions.candidates_permission[t].shared:2:0,e.interviews_permission.owned=this.$("input[name=interviews-permission][value=schedule-interviews]").is(":checked")?3:0,e.interviews_permission.shared=this.$("input[name=interviews-permission][value=share-interviews]").is(":checked")?this.defaultPermissions.interviews_permission[t].shared>=2?this.defaultPermissions.interviews_permission[t].shared:2:0,e},r.prototype.addUser=function(t){var e,i,r,s,o,a,l,u,c,d,p,h;return t.preventDefault(),"add user"===this.type?(s=this.$("input[name=user-name]").removeClass("error").val(),o=s.split(" "),i=o.shift(),r=o.join(" "),e=this.$("input[name=user-email]").val(),c=this.$("input[name=user-teams-select]").val().split(","),l=this.$("select[name=user-role]").val(),this.$("input[name=user-admin]:checked").length>0&&(l="admin"),_.isEmpty(i)?(this.$("input[name=user-name]").addClass("error"),this.enableForm(),void 0):_.isEmpty(e)?(this.$("input[name=user-email]").addClass("error"),this.enableForm(),void 0):_.isEmpty(c)?(this.$("input[name=user-teams-select]").addClass("error"),this.enableForm(),void 0):"developer"!==l&&"trial"===n.currentUser.get("company").striple_plan&&this.userLabels.length>=30?(this.enableForm(),alert("You can add only upto 30 users in the trial period"),null):(d={firstname:i,lastname:r,email:e,teams:c,role:l},a=_.find(c,function(t){return function(e){var i;return i=t.collection.get(e),i.get("is_owner_team")?!0:!1}}(this)),a?(this.$("#new-add-user").modal("hide"),1===this.collection.models.length?n.util.confirm({title:"Adding user to Owner's Team",message:"You are adding a new user to the Owner's Team. Members of this team have access to all your company data. It is good practise to create a different team for day to day operations. Would you like to create a new team now?",okButtonText:"No, Add to Owner's Team",cancelButtonText:"Create New Team",okCallback:function(t){return function(){var e;return t.$("#new-add-user").modal("show"),e=new n.UserTeamModel,t.saveData(d,l,e)}}(this),cancelCallback:function(t){return function(){return n.UserSettings.set("new_user_data",d),t.parent.addTeamAndUser(t)}}(this)}):n.util.confirm({title:"Adding user to Owner's Team",message:"You are adding a new user to the Owner's Team. Members of this team have access to all your company data. It is good practise to create a different team for day to day operations. Are you sure?",okButtonText:"Yes, I know what I am doing",cancelButtonText:"Cancel",okCallback:function(t){return function(){var e;return t.$("#new-add-user").modal("show"),e=new n.UserTeamModel,t.saveData(d,l,e)}}(this)})):(h=new n.UserTeamModel,this.saveData(d,l,h)))):"add to team"===this.type?(u=this.team_id,p=this.user_id,l=this.user_data.role,d={user_id:p,team_id:u},h=new n.UserTeamModel,this.saveData(d,l,h)):"edit"===this.type?(l=this.user_data.role,h=this.model,d={id:this.mapping_id},this.saveData(d,l,h)):void 0},r.prototype.saveData=function(t,e,i){var r;return r=this.getPermissions(e),t.questions_permission=r.questions_permission,t.tests_permission=r.tests_permission,t.candidates_permission=r.candidates_permission,t.interviews_permission=r.interviews_permission,i.save(t,{success:function(t){return function(){return t.$("button.close").click(),n.util.trackTotango("Added User - "+e,"Account Settings"),setTimeout(function(){return t.collection.fetch({success:function(){return t.parent.render()}})},1e3)}}(this),error:function(e){return function(i,r){var n;return n=$.parseJSON(r.responseText),402===r.status?(e.$("button.close").click(),setTimeout(function(){return e.checkout(t)},500)):(e.$(".alert.error").html(n.message),e.$(".alert.error").removeClass("hidden"),e.enableForm())}}(this)})},r.prototype.checkout=function(){return n.util.alert({title:"Plan upgrade required",message:"Adding another user in recruitment profile would need you to upgrade your plan. Please contact support@hackerrank.com for more details."})},n=null!=(s=window.HR)?s:{},n.TeamUserView=r,r}(window.HR.GenericView)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template="x/candidate-search",r.prototype.className="candidate-search",r.prototype.initialize=function(t){return null==t&&(t={}),this.term=t.term||"",this.collection.bind("reset",this.render,this),this.collection.bind("change",this.render,this),r.__super__.initialize.call(this,t)},r.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({collection:this.collection,term:this.term})),this},r}(window.HR.GenericView),i=null!=(r=window.HR)?r:{},i.CandidateSearchView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.getToken=function(){var t;return this.validate()?Stripe.createToken({number:$("#card-number").val(),cvc:$("#cvv").val(),exp_month:$("#expiry-month").val(),exp_year:$("#expiry-year").val()},this.cardCheckResponseHandler()):(t="Data provided is invalid",i.util.inlineLoadingEnd({}),this.$(".response-message").removeClass("hidden").addClass("error").html(t),$("#card-details-submit").attr("disabled",!1).removeClass("disabled"),!1)},r.prototype.validate=function(){var t,e,i,r;return r=$("#card-number").val(),t=$("#cvv").val(),e=$("#expiry-month").val(),i=$("#expiry-year").val(),Stripe.validateExpiry(e,i)&&Stripe.validateCVC(t)&&"Unknown"!==Stripe.cardType(r)?!0:!1},r.prototype.cardCheckResponseHandler=function(){},r}(window.HR.GenericView),i=null!=(r=window.HR)?r:{},i.CardDetailsView=t})}.call(this),function(){var t,e,i,r={}.hasOwnProperty,n=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};jQuery(function(){}),t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.initialize=function(){var t;return t=this,this.listenTo(this.model,"change",this.render)},i.prototype.template="x/create-question-modal",i.prototype.className="create-question-modal",i.prototype.events=function(){return{"click .js-create-question-tabs-select":"selectTab","click .js-question-tab":"closeModalAndNavigate"}},i.prototype.render=function(){var t,i,r;return i=this,r=this.model.toJSON(),r&&(t=e.appController.template(this.template,this)({model:this.model,throbber:e.appController.viewLoader()}),$(this.el).html(t)),this.$("#create-question-modal").modal(),this},i.prototype.selectTab=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget).data("tab"),this.$(".js-create-question-tabs").addClass("hidden"),this.$(".js-"+e).removeClass("hidden"),this.$(".js-create-question-tabs-select").parent().removeClass("active"),this.$(t.currentTarget).parent().addClass("active")},i.prototype.closeModalAndNavigate=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget).attr("href"),this.$(".close").click(),setTimeout(function(){return Backbone.history.navigate(e,!0)},200)},i}(window.HR.GenericView),e=null!=(i=window.HR)?i:{},e.CreateQuestionModalView=t}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template="x/edit-team-modal",r.prototype.tagName="div",r.prototype.initialize=function(t){return this.parent=t.parent},r.prototype._render=function(){return $(this.el).empty(),$(this.el).html(i.appController.template(this.template,this)({model:this.model})),this.$("#new-team-modal").modal(),this},r.prototype.events=function(){return{"submit form[name=team-form]":"createTeam"}},r.prototype.createTeam=function(t){var e;return t.preventDefault(),e=this.$("input[name=new-team-name]").val(),e?(this.model.set("name",e,{silent:!0}),this.model.save(null,{silent:!0,success:function(t){return function(e){return t.$("button.close").click(),setTimeout(function(){return t.collection.get(e.get("id"))||t.collection.add(e),t.collection.fetch({success:function(){return t.parent.render()}})},1e3)}}(this),error:function(t){return function(e,i){var r;return r=$.parseJSON(i),t.$(".alert.error").html(r.message)}}(this)})):void 0},r}(window.HR.GenericView),i=null!=(r=window.HR)?r:{},i.EditTeamView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template="x/edit-user-team-modal",r.prototype.tagName="div",r.prototype.initialize=function(t){return this.parent=t.parent,this.users=t.users,this.userLabels=t.userLabels,this.team_id=t.team_id,r.__super__.initialize.call(this,t)},r.prototype.events=function(){return{"submit form[name=team-member-form]":"updateUser"}},r.prototype.render=function(){return $(this.el).html(i.appController.template(this.template,this)({model:this.model.toJSON()})),this.$("input[name=edit-user-team-id]").val(this.team_id),this.$("#edit-user-modal").modal(),this.$("select[name=new-user-role]").val(this.model.get("role")).attr("disabled",!0),this},r.prototype.updateUser=function(t){var e,i,r,n;return t.preventDefault(),$(".alert.error").addClass("hidden"),r=$("input[name=edit-user-tests-permission]").attr("checked")?2:1,i=$("input[name=edit-user-questions-permission]").attr("checked")?2:1,e=$("input[name=edit-user-candidates-permission]").attr("checked")?2:1,n={tests_permission:r,questions_permission:i,candidates_permission:e},console.log(this.model),this.model.save(n,{suppressMessage:!0,success:function(t){return function(){return t.$("button.close").click(),t.collection.fetch()}}(this)},{error:function(t){return function(e,i){var r;return r=$.parseJSON(i.responseText),t.$(".alert.error").html(r.message),t.$(".alert.error").removeClass("hidden")}}(this)})},r}(window.HR.GenericView),i=null!=(r=window.HR)?r:{},i.EditUserTeamView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n,s;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.initialize=function(){var t;return t=this,this.just_created="new interview"===r.NotificationModel.pop()},s.prototype.template="x/interview-edit",s.prototype.className="interview-edit",s.prototype.events=function(){return{"submit form[name=quick-pad-form]":"createQuickPad","click .js-add-interviewer":"addInterviewer","click .js-edit-attendant":"editAttendant","click .js-done":"done","click .js-share-pad":"sharePad","submit form[name=update-interview-form]":"updateInterview","click  button[name=edit-interview-button]":"editInterview","click  button[name=cancel-button]":"cancelBtn"}},s.prototype.render=function(){var t,e;return e=this,t=r.appController.template(this.template,this)({throbber:r.appController.viewLoader(),model:this.model.toJSON(),time_diff:(this.model.get("to").getTime()-this.model.get("from").getTime())/6e4,just_created:this.just_created}),$(this.el).html(t),this.setupTimezoneSelect(),this.$("#copy-access-code").popover({content:"Access Code has been copied",trigger:"none"}),this.initializeCopy(),this.$("input[type=file]").bootstrapFileInput(),this.$(".date.start").datepicker({format:"m-d-yyyy",autoclose:!0}),this.$(".time.start").timepicker({showDuration:!0,timeFormat:"H:i",scrollDefaultNow:!0}),r.currentUser.isLocked()&&this.$(".account-locked").removeClass("hidden"),this.editInterview(),this},s.prototype.initializeCopy=function(){var t;return t=this,this.client=new ZeroClipboard(this.$("#copy-access-code")),this.client.on("complete",function(){var e;return $(this).popover("show"),e=$(this),setTimeout(function(){return function(){return e.popover("hide"),t.initializeCopy()}}(this),2e3)})},s.prototype.setupTimezoneSelect=function(){var t;return t=this,setTimeout(function(){return $.ajax({url:"/x/api/v1/users/timezones",type:"GET",success:function(t){return $("#timezones").select2({width:"off",data:t.data})}})})},s.prototype.done=function(t){return t.preventDefault(),Backbone.history.navigate("interviews",!0)},s.prototype.sharePad=function(t){var e;return t.preventDefault(),e=new n({model:this.model}),this.$("#modal-container").html(e.render().el)},s.prototype.addInterviewer=function(e){var i;return e.preventDefault(),i=new t({role:"interviewer",attendant:{},model:this.model,parent:this}),this.$("#modal-container").html(i.render().el)},s.prototype.checkForResume=function(){var t,e,i,r;return this.$("input[name=resume]").val()?(i="/x/api/v1/users/upload_codepair_resume",t=this.$("form[name=update-interview-form]"),e=function(){var e;return e={type:"POST",files:t.find(":file"),iframe:!0,crossDomain:!0}},r=this,$.ajax(i,e()).complete(function(t){return function(e){return e=$.parseJSON(e.responseText),"Success"===e.message?t.saveInterview(e.upload_path):(t.$("button[name=schedule-interview-button]").attr("disabled",!1),t.$(".file-upload-error").html(e.message))}}(this))):this.model.get("resume")?this.saveInterview(this.model.get("resume")):this.saveInterview("")},s.prototype.editInterview=function(){return this.$(".editData").show().removeClass("hidden"),this.$(".displayData").hide(),setTimeout(function(t){return function(){return t.$(".overflow-content").animate({scrollTop:200})}}(this))},s.prototype.cancelBtn=function(){return this.$(".editData").hide(),this.$(".displayData").show()},s.prototype.updateInterview=function(t){return t.preventDefault(),this.$("button[name=update-interview-button]").attr("disabled",!0),this.checkForResume()},s.prototype.editAttendant=function(e){var i,r,n,s;if(e.preventDefault(),s=this.$(e.currentTarget).data("role"),n=this.$(e.currentTarget).data("id"),i={},"candidate"===s)_.each(this.model.get("candidates"),function(){return function(t){return t.id&&t.id===n?i=t:void 0}}(this));else{if("interviewer"!==s)return;_.each(this.model.get("interviewers"),function(){return function(t){return t.id&&t.id===n?i=t:void 0}}(this))}return i&&_.isEmpty(i)?void 0:(r=new t({role:s,attendant:i,model:this.model,parent:this}),this.$("#modal-container").html(r.render().el))},s.prototype.saveInterview=function(t){var e,i,n,s;return s=new Date(moment.tz(moment($(".date.start").val()+" "+$(".time.start").val(),"M-D-YYYY HH:mm"),$("#timezones").val()).format()),e=this.$("select[name=interview-duration]").val(),i=moment(s)+6e4*parseInt(e),n=new Date(moment(i)),this.model.set("from",new Date(moment(s).tz($("#timezones").val()||r.currentUser.get("timezone")).format())),this.model.set("to",new Date(moment(n).tz($("#timezones").val()||r.currentUser.get("timezone")).format())),this.model.set("notes",this.$("textarea[name=interview-notes]").val()),this.model.set("resume",t),this.model.save(null,{success:function(t){return function(e){var i;return r.NotificationModel.push("updated interview"),Backbone.history.navigate("interviews/"+e.get("id"),!0),t.$("button[name=update-interview-button]").removeAttr("disabled"),t.cancelBtn(null),t.render(),i={interview_id:e.get("id")},r.util.track("Edited Interview",i)}}(this),error:function(t){return function(){return t.$("button[name=update-interview-button]").removeAttr("disabled")}}(this)})},s}(window.HR.GenericView),t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="x/attendant-edit-modal",i.prototype.className="attendant-edit-modal",i.prototype.initialize=function(t){return this.attendant=t.attendant,this.role=t.role,this.parent=t.parent},i.prototype.events=function(){return{"submit form[name=edit-attendant-form]":"saveAttendant"}},i.prototype.render=function(){var t;return t=r.appController.template(this.template,this)({attendant:this.attendant,role:this.role}),$(this.el).html(t),this.$("#attendant-edit-modal").modal(),this},i.prototype.saveAttendant=function(t){var e,i,n,s,o,a,l;return t.preventDefault(),a=this.$("input[name=name]").removeClass("error").val(),n=this.$("input[name=email]").removeClass("error").val(),l=this.$("input[name=phone]").val(),s=!1,_.isEmpty(a)&&(this.$("input[name=name]").addClass("error"),s=!0),(_.isEmpty(n)||!n.match(/^\S+@\S+?\.[a-zA-Z]{2,5}$/))&&(this.$("input[name=email]").addClass("error"),s=!0),s?void 0:(e={name:a,email:n,phone:l},this.attendant.id?(e.email=this.attendant.email,"interviewer"===this.role?(o=[],_.each(this.model.get("interviewers"),function(t){return function(i){var r;return i.id===t.attendant.id?(r={},_.extend(r,i,e),o.push(r)):o.push(i)}}(this)),this.model.set("interviewers",o,{silent:!0})):"candidate"===this.role&&(i=[],_.each(this.model.get("candidates"),function(t){return function(r){var n;return r.id===t.attendant.id?(n={},_.extend(n,r,e),i.push(n)):i.push(r)}}(this)),this.model.set("candidates",i,{silent:!0}))):(o=this.model.get("interviewers"),o.push(e),this.model.set("interviewers",o,{silent:!0})),this.model.save(null,{silent:!0,success:function(t){return function(e){var i;return t.$(".close").click(),t.parent.render(),i={interview_id:e.get("id")},r.util.track("Edited Interview",i)}}(this)}))},i}(window.HR.GenericView),n=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="x/share-pad-modal",i.prototype.className="share-pad-modal",i.prototype.events=function(){return{"submit form[name=share-pad-form]":"sharePad","click .js-close-modal":"closeModalEvent"}},i.prototype.render=function(){var t,e,i,n;return e=r.appController.template(this.template,this)({model:this.model.toJSON()}),n={step:"Start"},r.util.track("Shared QuickPad",n),$(this.el).html(e),this.$("#share-pad-modal").modal(),t={skin:"moono",extraPlugins:"image",filebrowserUploadUrl:"/x/api/v1/editor_uploads",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Link","Unlink"],["Styles","Format","FontSize"],["PasteFromWord","-","Undo","Redo"],["Source"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,width:720,removePlugins:"elementspath,contextmenu,liststyle,tabletools",disableNativeSpellChecker:!1},i=this,setTimeout(function(){return CKEDITOR.instances["email-content"]&&delete CKEDITOR.instances["email-content"],this.$("textarea.texteditor").ckeditor(t)
}),this},i.prototype.closeModalEvent=function(){var t;return t={step:"Cancel"},r.util.track("Shared QuickPad",t)},i.prototype.sharePad=function(t){var e,i,n;return t.preventDefault(),i=this.$("input[name=email]").removeClass("error").val(),n=this.$("input[name=subject]").val(),e=this.$("textarea[name=email-content]").ckeditorGet().getData(),-1===i.lastIndexOf(" ")&&-1!==i.lastIndexOf(".")&&-1!==i.lastIndexOf("@")&&i.lastIndexOf(".")>i.lastIndexOf("@")?(this.$(".send-email").attr("disabled",!0),this.$(".send-email").html("Sending..."),r.util.ajaxmsg("Loading...",!1,!0,1e3),$.post("/x/api/v1/interviews/share",{email:i,subject:n,content:e},function(t){return function(e){var i;return e.status===!0?(t.$(".send-email").html("Mail sent"),r.util.ajaxmsg("Mail sent",!1,!0,5),t.$(".close").click(),i={step:"Finish"},r.util.track("Shared QuickPad",i)):console.log("mail failed")}}(this))):(this.$("input[name=email]").addClass("error"),void 0)},i}(window.HR.GenericView),r=null!=(s=window.HR)?s:{},r.EditInterviewView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n,s,o,a,l,u,c,d,p,h,m,f,v,g,y;return g=function(t){return _.isFunction(t)?t():t},v=function(t){var e,i;return i=t,t&&(e=t.split(/to/i),e.length>1&&(i=e[0].trim()+".."+e[1].trim())),i},n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.def=function(){return{template:"x/interviews-datatable",dashboard:!1,title:"Interviews",page_url:"interviews",url:""+i.INTERVIEWS_DOMAIN+"/api/interviews?auth_v2="+i.currentUser.get("auth_v2")+"&api_key="+i.currentUser.get("apiKey"),modelClass:i.InterviewModel,quickpad:0}},r.prototype.baseParams=function(){var t;return t={order_by:"from",quickpad:this.quickpad},v(this.$("#daterange").val())&&(t.from=v(this.$("#daterange").val())),this.$("#email").val().length>0&&("all"===this.$("#email-type").val()&&(this.all_toggle?t["interview_attendants.email"]=this.$("#email").val():t["user.email"]=this.$("#email").val()),"candidate"===this.$("#email-type").val()&&(t["interview_attendants.role"]="candidate",t["interview_attendants.email"]=this.$("#email").val()),"interviewer"===this.$("#email-type").val()&&(t["interview_attendants.role"]="interviewer",t["interview_attendants.email"]=this.$("#email").val()),"owner"===this.$("#email-type").val()&&(t["user.email"]=this.$("#email").val())),""!==this.$("#quickpad-title").val()&&(t.title=this.$("#quickpad-title").val()),"0"!==this.$("#thumbs").val()&&(t.thumbs=parseInt(this.$("#thumbs").val()-1)),t},r.prototype.beforeRequest=function(t){var e;return e=r.__super__.beforeRequest.call(this,t),v(this.$("#daterange").val())&&(e.from=v(this.$("#daterange").val())),e},r.prototype.afterRequest=function(t,e){return"all"===this.$("#email-type").val()&&this.$("#email").val().length>0&&!this.all_toggle?(this.all_data=t,this.all_toggle=!0,this.redraw(),r.__super__.afterRequest.call(this,t,e)):(this.all_data&&this.all_data.results&&_.each(this.all_data.results,function(e){return _.include(_.pluck(t.results,"id"),e.id)?void 0:(t.results.push(e),t.total+=1)}),this.all_toggle=!1,r.__super__.afterRequest.call(this,t,e))},r.prototype.fields=function(){return[{name:"CANDIDATE",template:'<span class="sleekstrong"><%= row.candidate() ? row.candidate().name : row.get("title") ? row.get("title") : "-" %></span>',prop:"interview_attendants.name",className:"w25"},{name:"WHEN",template:"<%= row.when()  %>",prop:"from",className:"w25"},{name:"INTERVIEWER",template:'<%= row.interviewer() ? row.interviewersName() : "-" %>',prop:"interview_attendants.name",className:"w25"},{name:"OWNER",template:'<%= row.owner() ? row.ownerName() : "-" %>',prop:"user.firstname",className:"w25"}]},r.prototype.events=function(){return{"click .js-dateclear":"clearDateRange"}},r.prototype.datatableOpt=function(){var t;return t=r.__super__.datatableOpt.call(this),this.dashboard?_.extend(t,{sDom:"t i",iDisplayLength:10}):_.extend(t,{sDom:"t <'clear_float'> <'empty_heightspacer'><'clear_float'><'mjL' l> p <'empty_heightspacer'><'clear_float'><'empty_heightspacer'><'clear_float'> "}),t},r.prototype.dateRanges=function(){return{"Last week":[moment().add("days",-7),moment().format()],"Last 2 weeks":[moment().add("days",-14),moment().format()],"Last 30 days":[moment().add("days",-30),moment().format()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]}},r.prototype.clearDateRange=function(t){return t.preventDefault(),this.$("#daterange").val(""),$(t.currentTarget).addClass("hidden"),this.redraw(!1)},r.prototype.selectOptions=function(){return{FILTER:"Filter",ALL:"All",LAST_MONTH:"Last Month",LAST_100:"Last 100"}},r.prototype.params=function(){var t;return t=r.__super__.params.call(this),_.extend(t,{title:this.title,quickpadView:!1,showInterviewer:!0,showDateSelect:!0,showThumbs:!0,showTitle:!1,showSelect:!1,selectOptions:g(this.selectOptions)}),this.dashboard&&_.extend(t,{showTitle:!0,showSelect:!1,showDateSelect:!1,showInterviewer:!1}),t},r.prototype.onChoose=function(){return"Choose"!==this.$("#choose").val()?Backbone.history.navigate(this.page_url+"/"+this.$("#choose").val(),!0):void 0},r.prototype.redraw=function(t){return null==t&&(t=!0),t?this.$(".js-filterclear").show():this.$(".js-filterclear").hide(),i.util.ajaxmsg("Loading...",!1,!0,1e3),this.datatable.fnDraw()},r.prototype.postRender=function(){var t,e,n,s;return r.__super__.postRender.call(this),n=this,this.delegateEvents(),this.$("#email-type").select2({width:"160px",minimumResultsForSearch:-1}),this.$("#email-type").on("change",function(t){return function(){return t.redraw()}}(this)),this.$("#email-filter").on("submit",function(t){return function(e){return e.preventDefault(),t.redraw()}}(this)),this.$("#thumbs").select2({width:"150px",minimumResultsForSearch:-1}),this.$("#thumbs").on("change",function(t){return function(){return t.redraw()}}(this)),this.$(".js-filterclear").on("click",function(){return function(){return Backbone.history.loadUrl(Backbone.history.fragment)}}(this)),this.$("#daterange").length>0&&this.$("#daterange").daterangepicker({latestDate:"today",separator:" to ",format:"YYYY-MM-DD",ranges:g(this.dateRanges)},function(){return n.$(".js-dateclear").removeClass("hidden"),n.redraw()}),s={owner:""+i.INTERVIEWS_DOMAIN+"/api/interviews/owners?auth_v2="+i.currentUser.get("auth_v2")+"&api_key="+i.currentUser.get("apiKey")+"&quickpad="+this.quickpad,candidate:""+i.INTERVIEWS_DOMAIN+"/api/candidates?auth_v2="+i.currentUser.get("auth_v2")+"&api_key="+i.currentUser.get("apiKey"),interviewer:""+i.INTERVIEWS_DOMAIN+"/api/interviewers?auth_v2="+i.currentUser.get("auth_v2")+"&api_key="+i.currentUser.get("apiKey")},e={owner:[],candidate:[],interviewer:[]},t=[],_.each(s,function(i){return function(r,n){return $.ajax({url:r,data:{"interview.from":i.baseParams().from},dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(i){return _.each(i.results,function(i){var r;return i.email&&(r={value:i.email,label:(i.name?i.name+"-":"")+i.email},e[n].push(r),!_.include(_.pluck(t,"value"),i.email))?t.push(r):void 0})}})}}(this)),e.all=t,this.$("#email").autocomplete({minLength:0,source:function(t,i){var r;return r=$.grep(e[n.$("#email-type").val()],function(e){return e.label.toLowerCase().indexOf(t.term.toLowerCase())>=0}),i(r)},select:function(){return setTimeout(n.redraw,100)}}),$("#email").data("autocomplete")._renderItem=function(t,e){return t.addClass("no-padding").addClass("autocomplete"),$("<li></li>").data("item.autocomplete",e).html("<a class='' href='#'>"+e.label+"</a>").appendTo(t)},this},r}(window.HR.DataTableView),a=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template="x/interviews-listing",r.prototype.setAsync=function(t){this.async=t},r.prototype.initialize=function(t){var e;return null==t&&(t={}),_.bindAll(this),this.title=t.title||"Interviews Listing",e=t.klass||i.InterviewsDataTableView,this.table=new e({dashboard:!1,title:this.title})},r.prototype._render=function(){return $(this.el).html(i.appController.template(this.template,this)({title:this.title})),i.currentUser.isLocked()&&this.$(".account-locked").removeClass("hidden"),this.async||this.$("#cnt-list").append(this.table.render().el),this},r}(window.HR.GenericView),o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){return null==t&&(t={}),t.klass=i.InterviewsDoneDataTableView,t.title="Interviews Done",r.__super__.initialize.call(this,t)},r}(a),s=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){var e;return e={oLanguage:{sEmptyTable:"No interviews in the done stage",sInfoEmpty:"No interviews in the done stage",sZeroRecords:"No interviews in the done stage"},fnRowCallback:function(){return function(t){return $(t).find("td:not(:last)").each(function(t,e){return $(e).on("click",function(t){return i.router.navigate($(t.currentTarget).parent().find(".nav-viewreport").attr("href"),!0)})})}}(this)},t.customDatatableOpt?_.extend(e,t.customDatatableOpt):t.customDatatableOpt=e,r.__super__.initialize.call(this,t)},r.prototype.def=function(){var t;return t=r.__super__.def.call(this),_.extend(t,{url:""+i.INTERVIEWS_DOMAIN+"/api/interviews/done?auth_v2="+i.currentUser.get("auth_v2")+"&api_key="+i.currentUser.get("apiKey"),page_url:"/x/interviews/done",title:"INTERVIEWS DONE"})},r.prototype.datatableEl="#datatable-done",r.prototype.params=function(){var t;return t=r.__super__.params.call(this),t.id_suffix="-done",t},r.prototype.baseParams=function(){var t;return t=r.__super__.baseParams.call(this),_.extend(t,{from:".."+JSON.stringify(new Date).replace(/"/gi,""),order_by:"from",order_dir:"desc"}),t},r.prototype.fields=function(){var t;return t=r.__super__.fields.call(this),t.push({name:"STATUS",template:'<% var thumbs = row.get("thumbs"); if (thumbs == 1) { %><span class="thumbs_up"><i class="icon2-thumbsup"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><% } else if (thumbs == 0) { %><span class="thumbs_down"><i class="icon2-thumbsdown"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><% } else { %>Pending<% } %>',prop:"status",className:"w10"},{name:"REPORT/LINK",template:'<a href="interviews/<%= row.get("id") %>/report" class="txt-alt-grey mdL nav-viewreport js-backbone">\n  <i class="icon-eye tip" data-original-title="View Report"></i>\n</a>\n<a href="#" class="txt-alt-grey mdL js-share" data-id="<%= row.get("id") %>">\n  <i class="icon2-sharetest tip" data-original-title="Share"></i>\n</a>',sortable:!1,className:"w10",sortable:!1}),t},r.prototype.shareReport=function(t){var e,r;return t.preventDefault(),e=_.filter(this.data.models,function(e){return e.get("id").toString()===$(t.currentTarget).attr("data-id")}),e.length?(r=new i.InterviewShareReportModalView({link:i.InterviewModel.shareReportLink(e[0]),model:e[0]}),$(".modal-container").html(r.render().el)):void 0},r.prototype.events=function(){var t;return t=r.__super__.events.call(this)||{},_.extend(t,{"click a.js-share":"shareReport"}),t},r}(n),u=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){return null==t&&(t={}),t.klass=i.InterviewsQuickPadDataTableView,t.title="QuickPad Interviews",r.__super__.initialize.call(this,t)},r}(a),l=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){var e;return e={oLanguage:{sEmptyTable:"No quickpads generated yet!",sInfoEmpty:"No quickpads generated yet!",sZeroRecords:"No quickpads generated yet!"},fnRowCallback:function(){return function(t){return $(t).find("td:not(:last)").each(function(t,e){return $(e).on("click",function(t){return i.router.navigate($(t.currentTarget).parent().find(".nav-edit").attr("href"),!0)})})}}(this)},t.customDatatableOpt?_.extend(e,t.customDatatableOpt):t.customDatatableOpt=e,r.__super__.initialize.call(this,t)},r.prototype.def=function(){var t;return t=r.__super__.def.call(this),_.extend(t,{page_url:"/x/interviews/quickpad",title:"INTERVIEWS QUICKPADS",quickpad:1})},r.prototype.dateRanges=function(){return{"Past week":[moment().format(),moment().subtract("days",7)],"Next week":[moment().format(),moment().add("days",7)],"Next 2 weeks":[moment().format(),moment().add("days",14)],"Next 30 days":[moment().format(),moment().add("days",30)],"This Month":[moment(),moment().endOf("month")],"Next month":[moment().add("month",1).startOf("month"),moment().add("month",1).endOf("month")]}},r.prototype.selectOptions=function(){return{FILTER:"Filter",ALL:"All",NEXT_MONTH:"Next Month",NEXT_100:"Next 100"}},r.prototype.datatableEl="#datatable-quickpads",r.prototype.params=function(){var t;return t=r.__super__.params.call(this),t.id_suffix="-quickpads",t.quickpadView=!0,t},r.prototype.baseParams=function(){var t;return t=r.__super__.baseParams.call(this),_.defaults(t,{quickpad:1,order_by:"created_at"}),t},r.prototype.fields=function(){var t;return t=[{name:'<span class="mjL">TITLE</span>',template:'<span class="mjL"><%= row.get("title") %></span>',prop:"title",className:"w10"},{name:"LINK",template:'<a href="<%= row.get("interviewer_url") %>" target="_blank">[Link]</a>',prop:"interviewer_url",className:"w10",sortable:!1},{name:"ACCESS CODE",template:'<%= row.get("access_code") %>',prop:"access_code",className:"w10",sortable:!1},{name:"OWNER",template:'<%= row.owner() ? row.ownerName() : "-" %>',prop:"user.firstname",className:"w25"},{name:"CREATED ON",template:"<%= row.createdOn() %>",prop:"created_at",className:"w25"},{name:"EDIT/REPORT/DELETE",template:'<a href="interviews/<%= row.get("id") %>" class="txt-alt-grey mdL js-backbone nav-edit"><i class="icon2-edit tip" data-original-title="Edit"></i></a><a href="interviews/<%= row.get("id") %>/report" class="txt-alt-grey mdL js-backbone"><i class="icon-eye tip" data-original-title="View Report"></i></a><a href="#" class="txt-alt-grey mdL cancel js-delete-interview" data-interview="<%= row.get("id") %>"><i class="icon2-delete tip" data-original-title="Delete"></i></a>',sortable:!1,className:"w10",sortable:!1}]},r.prototype.cancelInterview=function(t){var e,r;return t.preventDefault(),r=_.filter(this.data.models,function(e){return e.get("id").toString()===$(t.currentTarget).attr("data-interview")}),r.length?(e=new i.DeleteInterviewModalView({model:r[0],parent:this}),$(".modal-container").html(e.render().el)):void 0},r.prototype.events=function(){var t;return t=r.__super__.events.call(this)||{},_.extend(t,{"click a.js-delete-interview":"cancelInterview"}),t},r.prototype.postRender=function(){return r.__super__.postRender.call(this),this.$("#quickpad-name-filter").on("submit",function(t){return function(e){return e.preventDefault(),t.redraw()}}(this))},r}(n),f=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){return null==t&&(t={}),t.klass=i.InterviewsUpcomingDataTableView,t.title="Upcoming Interviews",r.__super__.initialize.call(this,t)},r}(a),m=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){var e;return e={oLanguage:{sEmptyTable:'No interviews are upcoming. <br/><a class="btn fnt-sz-normal mdB msT js-backbone" href="interviews/new" id="scheduleInterview">Schedule a new Interview</a>',sInfoEmpty:'No interviews are upcoming. <br/><a class="btn fnt-sz-normal mdB msT js-backbone" href="interviews/new" id="scheduleInterview">Schedule a new Interview</a>',sZeroRecords:'No interviews are upcoming. <br/><a class="btn fnt-sz-normals mdB msT js-backbone" href="interviews/new" id="scheduleInterview">Schedule a new Interview</a>'},fnRowCallback:function(){return function(t){return $(t).find("td:not(:last)").each(function(t,e){return $(e).on("click",function(t){return i.router.navigate($(t.currentTarget).parent().find(".nav-edit").attr("href"),!0)})})}}(this)},t.customDatatableOpt?_.extend(e,t.customDatatableOpt):t.customDatatableOpt=e,r.__super__.initialize.call(this,t)},r.prototype.def=function(){var t;return t=r.__super__.def.call(this),_.extend(t,{page_url:"/x/interviews/upcoming",title:"INTERVIEWS UPCOMING"})},r.prototype.dateRanges=function(){return{"Next week":[moment().format(),moment().add("days",7)],"Next 2 weeks":[moment().format(),moment().add("days",14)],"Next 30 days":[moment().format(),moment().add("days",30)],"This Month":[moment(),moment().endOf("month")],"Next month":[moment().add("month",1).startOf("month"),moment().add("month",1).endOf("month")]}},r.prototype.selectOptions=function(){return{FILTER:"Filter",ALL:"All",NEXT_MONTH:"Next Month",NEXT_100:"Next 100"}},r.prototype.datatableEl="#datatable-upcoming",r.prototype.params=function(){var t;return t=r.__super__.params.call(this),t.id_suffix="-upcoming",t},r.prototype.baseParams=function(){var t;return t=r.__super__.baseParams.call(this),_.defaults(t,{from:JSON.stringify(new Date).replace(/"/gi,"")+"..",current_status:0,quickpad:!1}),t},r.prototype.fields=function(){var t;return t=r.__super__.fields.call(this),t.push({name:"EDIT/VISIT/DELETE",template:'<a href="interviews/<%= row.get("id") %>" class="txt-alt-grey mdL js-backbone nav-edit">\n  <i class="icon2-edit tip"  data-original-title="Edit"></i>\n</a>\n<a href="<%= row.get("paperurl") %>" class="txt-alt-grey mdL" target="_blank">\n  <i class="icon-globe tip"  data-original-title="Visit"></i>\n</a>\n<a href="#" class="txt-alt-grey mdL cancel js-delete-interview" data-interview="<%= row.get("id") %>">\n  <i class="icon2-delete tip"  data-original-title="Delete"></i>\n</a>',sortable:!1,className:"w10",sortable:!1}),t},r.prototype.cancelInterview=function(t){var e,r;return t.preventDefault(),r=_.filter(this.data.models,function(e){return e.get("id").toString()===$(t.currentTarget).attr("data-interview")}),r.length?(e=new i.DeleteInterviewModalView({model:r[0],parent:this}),$(".modal-container").html(e.render().el)):void 0},r.prototype.events=function(){var t;return t=r.__super__.events.call(this)||{},_.extend(t,{"click a.js-delete-interview":"cancelInterview"}),t},r}(n),h=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){return null==t&&(t={}),t.klass=i.InterviewsThumbsUpDataTableView,t.title="Thumbs up",r.__super__.initialize.call(this,t)},r}(a),p=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t){var e;return e={oLanguage:{sEmptyTable:"No interviews in the thumbs up",sInfoEmpty:"No interviews in the thumbs up",sZeroRecords:"No interviews in the thumbs up"}},t.customDatatableOpt=e,i.__super__.initialize.call(this,t)},i.prototype.def=function(){var t;return t=i.__super__.def.call(this),_.extend(t,{page_url:"/x/interviews/upcoming",title:"Thumbs up"}),t},i.prototype.datatableEl="#datatable-thumbsup",i.prototype.params=function(){var t;return t=i.__super__.params.call(this),t.id_suffix="-thumbsup",t},i.prototype.baseParams=function(){var t;return t=i.__super__.baseParams.call(this),_.extend(t,{thumbs:1}),t},i}(s),d=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){return null==t&&(t={}),t.klass=i.InterviewsThumbsDownDataTableView,t.title="Thumbs up",r.__super__.initialize.call(this,t)},r}(a),c=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t){var e;return e={oLanguage:{sEmptyTable:"No interviews in the thumbs down",sInfoEmpty:"No interviews in the thumbs down",sZeroRecords:"No interviews in the thumbs down"}},t.customDatatableOpt=e,i.__super__.initialize.call(this,t)},i.prototype.def=function(){var t;return t=i.__super__.def.call(this),_.extend(t,{page_url:"/x/interviews/upcoming",title:"Thumbs up"}),t},i.prototype.baseParams=function(){var t;return t=i.__super__.baseParams.call(this),_.extend(t,{thumbs:0}),t},i.prototype.datatableEl="#datatable-thumbsdown",i.prototype.params=function(){var t;return t=i.__super__.params.call(this),t.id_suffix="-thumbsdown",t},i}(s),r=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template="x/interviews-dashboard",r.prototype.initialize=function(t){return r.__super__.initialize.call(this,t),_.bindAll(this,"render"),this.collection.bind("reset",this.render,this),this.collection.bind("change",this.render,this),this._subviews=[],this.upcoming=new m({dashboard:!0,customDatatableOpt:{oLanguage:{sEmptyTable:"No interviews are upcoming.",sInfoEmpty:"No interviews are upcoming. ",sZeroRecords:"No interviews are upcoming. ",sInfo:"Showing _START_ to _END_ of _TOTAL_. Click <a href='interviews/upcoming' class='js-backbone'>here</a> to view all "},fnRowCallback:function(){return function(t){return $(t).find("td:not(:last)").each(function(t,e){return $(e).on("click",function(t){return i.router.navigate($(t.currentTarget).parent().find(".nav-edit").attr("href"),!0)})})}}(this)}}),this.done=new s({dashboard:!0,customDatatableOpt:{showAfterFetch:!0,oLanguage:{sInfo:"Showing _START_ to _END_ of _TOTAL_. Click <a href='interviews/done' class='js-backbone'>here</a> to view all "},fnRowCallback:function(){return function(t){return $(t).find("td:not(:last)").each(function(t,e){return $(e).on("click",function(t){return i.router.navigate($(t.currentTarget).parent().find(".nav-viewreport").attr("href"),!0)})})}}(this)}}),this._subviews=[this.done,this.upcoming]},r.prototype.setAsync=function(t){this.async=t},r.prototype.events=function(){return{"click .tour-leg":"tour","click .rt_content_wrap":"closeModal","click .onboard-tour-container":"disableCloseModal","click .common_margin":"closeModal"}},r.prototype._render=function(){return $(this.el).html(i.appController.template(this.template,this)({len:this.collection.models.length})),0===this.collection.models.length||this.async||(this.$("#cnt-upcoming").append(this.upcoming.render().el),this.$("#cnt-done").append(this.done.render().el)),i.currentUser.isLocked()&&this.$(".account-locked").removeClass("hidden"),this},r}(window.HR.GenericView),t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template="x/delete-interview-modal",r.prototype.className="delete-interview-modal",r.prototype.initialize=function(t){return this.parent=t.parent,r.__super__.initialize.call(this,t)},r.prototype._render=function(){var t;return t=i.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(t),this.$("#delete-interview-modal").modal(),this},r.prototype.events=function(){return{"click a.js-cancel-interview":"cancelInterview"}},r.prototype.cancelInterview=function(t){return t.preventDefault(),i.util.ajaxmsg("Loading...",!1,!0,1e3),this.model.destroy({success:function(t){return function(){var e;return i.util.ajaxmsg("",!1,!0,0),t.$(".close").click(),t.parent.redraw(),e={interview_id:t.model.get("id")},i.util.track("Deleted Interview",e)}}(this)})},r}(window.HR.GenericView),i=null!=(y=window.HR)?y:{},i.InterviewsDataTableView=n,i.InterviewsListingView=a,i.InterviewsDoneView=o,i.InterviewsDoneDataTableView=s,i.InterviewsUpcomingView=f,i.InterviewsUpcomingDataTableView=m,i.InterviewsQuickPadView=u,i.InterviewsQuickPadDataTableView=l,i.InterviewsThumbsUpView=h,i.InterviewsThumbsUpDataTableView=p,i.InterviewsThumbsDownDataTableView=c,i.InterviewsThumbsDownView=d,i.InterviewsDashboardView=r,i.DeleteInterviewModalView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n;return r=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var e,i,r;return i=this,e=moment().minutes(0).seconds(0).milliseconds(0).add("hours",1),r=moment(e).add("hours",1),this.model=new t.InterviewModel({from:new Date(e),to:new Date(r)})},r.prototype.template="x/interview-new",r.prototype.className="interview-new",r.prototype.events=function(){return{"submit form[name=quick-pad-form]":"createQuickPad","click .js-add-interviewer":"addInterviewer","submit form[name=schedule-interview-form]":"scheduleInterview"}},r.prototype.render=function(){var e,i;return i=this,e=t.appController.template(this.template,this)({throbber:t.appController.viewLoader(),model:this.model.toJSON(),time_diff:(this.model.get("to").getTime()-this.model.get("from").getTime())/6e4}),$(this.el).html(e),this.setupTimezoneSelect(),this.renderAttendants(),this.$("input[type=file]").bootstrapFileInput(),this.$(".date.start").datepicker({format:"m-d-yyyy",autoclose:!0}),this.$(".time.start").timepicker({showDuration:!0,timeFormat:"H:i",scrollDefaultNow:!0}),t.currentUser.isLocked()&&this.$(".account-locked").removeClass("hidden"),this},r.prototype.renderAttendants=function(){var e,i;return e=new t.InterviewAttendantEditView({attendant:{},role:"candidate",add:!0}),this.$("#interview-candidates-container").html(e.render().el),i=new t.InterviewAttendantEditView({attendant:{},role:"interviewer",add:!0}),this.$("#interview-interviewers-container").html(i.render().el)},r.prototype.setupTimezoneSelect=function(){var t;return t=this,setTimeout(function(){return $.ajax({url:"/x/api/v1/users/timezones",type:"GET",success:function(t){return $("#timezones").select2({width:"off",data:t.data})}})})},r.prototype.addInterviewer=function(e){var i;return e.preventDefault(),i=new t.InterviewAttendantEditView({attendant:{},role:"interviewer",add:!1}),this.$("#interview-interviewers-container").append(i.render().el)},r.prototype.createQuickPad=function(e){var i,r,n,s;return e.preventDefault(),this.$("button[name=quick-pad-button]").attr("disabled",!0),r=this.$("input[name=quick-pad-title]").removeClass("error").val(),r?(i=new Date(moment().add("minutes",15)),s=moment(i).add("hours",1),n={quickpad:!0,title:r,from:i,to:s},this.model.save(n,{success:function(){return function(e){var i;return t.NotificationModel.push("new interview"),i={type:"QuickPad",step:"Finish"},t.util.track("Created Interview",i),t.util.trackTotango("Created Interview - Quickpad","Interviews"),Backbone.history.navigate("interviews/"+e.get("id"),!0)}}(this),error:function(){return function(){}}(this)})):(this.$("button[name=quick-pad-button]").attr("disabled",!1),this.$("input[name=quick-pad-title]").addClass("error"))},r.prototype.validate=function(){var t;return t=!0,this.$(".error.data").hide(),this.$(".date.start").removeClass("error"),_.each(this.$(".js-candidate-edit"),function(){return function(e){var i,r;return i=$(e).find("input[name=email]").removeClass("error").val(),i&&i.match(/^\S+@\S+?\.[a-zA-Z]{2,5}$/)||($(e).find("input[name=email]").addClass("error"),t=!1),r=$(e).find("input[name=name]").removeClass("error").val(),r?void 0:($(e).find("input[name=name]").addClass("error"),t=!1)}}(this)),_.each(this.$(".js-interviewer-edit"),function(){return function(e){var i,r;return i=$(e).find("input[name=email]").removeClass("error").val(),i&&i.match(/^\S+@\S+?\.[a-zA-Z]{2,5}$/)||($(e).find("input[name=email]").addClass("error"),t=!1),r=$(e).find("input[name=name]").removeClass("error").val(),r?void 0:($(e).find("input[name=name]").addClass("error"),t=!1)}}(this)),t},r.prototype.checkForResume=function(){var t,e,i,r;return this.$("input[name=resume]").val()?(i="/x/api/v1/users/upload_codepair_resume",t=this.$("form[name=schedule-interview-form]"),e=function(){var e;return e={type:"POST",files:t.find(":file"),iframe:!0,crossDomain:!0}},r=this,$.ajax(i,e()).complete(function(t){return function(e){return e=$.parseJSON(e.responseText),"Success"===e.message?t.saveInterview(e.upload_path):(t.$("button[name=schedule-interview-button]").attr("disabled",!1),t.$(".file-upload-error").html(e.message))}}(this))):this.model.get("resume")?this.saveInterview(this.model.get("resume")):this.saveInterview("")},r.prototype.scheduleInterview=function(t){return t.preventDefault(),this.$("button[name=schedule-interview-button]").attr("disabled",!0),this.validate()?this.checkForResume():(this.$("button[name=schedule-interview-button]").attr("disabled",!1),void 0)},r.prototype.saveInterview=function(e){var i,r,n,s,o,a;return i=[],_.each(this.$(".js-candidate-edit"),function(){return function(t){var e,r,n,s;return r=$(t).find("input[name=email]").val(),n=$(t).find("input[name=name]").val(),s=$(t).find("input[name=phone_number]").val(),e={name:n,email:r,phone:s},i.push(e)}}(this)),this.model.set("candidates",i),o=[],_.each(this.$(".js-interviewer-edit"),function(){return function(t){var e,i,r,n;return e=$(t).find("input[name=email]").val(),r=$(t).find("input[name=name]").val(),n=$(t).find("input[name=phone_number]").val(),i={name:r,email:e,phone:n},o.push(i)}}(this)),this.model.set("interviewers",o),a=new Date(moment.tz(moment($(".date.start").val()+" "+$(".time.start").val(),"M-D-YYYY HH:mm"),$("#timezones").val()).format()),r=this.$("select[name=interview-duration]").val(),n=moment(a)+6e4*parseInt(r),s=new Date(moment(n)),this.model.set("from",moment(a).tz($("#timezones").val()||t.currentUser.get("timezone")).format()),this.model.set("to",moment(s).tz($("#timezones").val()||t.currentUser.get("timezone")).format()),this.model.set("notes",this.$("textarea[name=interview-notes]").val()),this.model.set("resume",e),this.model.save(null,{success:function(){return function(){var e;return t.NotificationModel.push("new interview"),e={type:"Schedule",step:"Finish"},t.util.track("Created Interview",e),t.util.trackTotango("Created Interview - Scheduled","Interviews"),Backbone.history.navigate("interviews",!0)}}(this),error:function(t){return function(e,i){var r;return t.$("button[name=schedule-interview-button]").attr("disabled",!1),r=JSON.parse(i.responseText),r&&r.from?(t.$(".date.start").addClass("error"),t.$(".error.data").text("Interview cannot be scheduled for past time.").show()):t.$(".error.data").text("Some error occuered.").show()}}(this)})},r}(window.HR.GenericView),i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/interview-attendant-edit",r.prototype.className="block",r.prototype.tagName="div",r.prototype.initialize=function(t){return this.attendant=t.attendant,this.role=t.role,this.add=t.add},r.prototype.render=function(){var e;return e=t.appController.template(this.template,this)({throbber:t.appController.viewLoader(),attendant:this.attendant,add:this.add,role:this.role}),$(this.el).html(e),$(this.el).addClass("js-"+this.role+"-edit"),this},r}(window.HR.GenericView),t=null!=(n=window.HR)?n:{},t.NewInterviewView=r,t.InterviewAttendantEditView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n,s,o,a;return o=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.tagName="div",r.prototype.template="x/interview-thumbs",r.prototype.initialize=function(){return _.bindAll(this,"render"),this.model.on("change:thumbs",this.render)},r.prototype.events={"click .js-thumbs":"toggleThumbs"},r.prototype.toggleThumbs=function(e){var i;return e.preventDefault(),this.model.set("thumbs",$(e.currentTarget).attr("data-thumbs")),this.model.save(),i={action:1===$(e.currentTarget).attr("data-thumbs")?"Thumbs Up":"Thumbs Down"},t.util.track("Edited Interview Report",i)},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({model:this.model.toJSON()})),this},r}(window.HR.GenericView),r=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.tagName="div",r.prototype.template="x/interview-feedback",r.prototype.initialize=function(t){return _.bindAll(this),this.recordings=t.recordings,this.model.on("change:feedback",this.render)},r.prototype.events={"click .js-edit-feedback":"editFeedback","click .js-save-feedback":"saveFeedback","click .js-feedback-cancel":"cancelEdit"},r.prototype.cancelEdit=function(t){var e;return t.preventDefault(),e=this.model.get("feedback")||"",this.$("textarea[name=feedback]").val(e),this.$(".js-edit-feedback-section").addClass("hidden"),this.$(".js-show-feedback-section").removeClass("hidden"),this.$(".js-edit-feedback-buttons").addClass("hidden"),this.$(".js-show-feedback-buttons").removeClass("hidden")
},r.prototype.editFeedback=function(t){return t.preventDefault(),this.$(".js-show-feedback-section").addClass("hidden"),this.$(".js-edit-feedback-section").removeClass("hidden"),this.$(".js-show-feedback-buttons").addClass("hidden"),this.$(".js-edit-feedback-buttons").removeClass("hidden")},r.prototype.saveFeedback=function(){var e;return this.model.set("feedback",this.$("textarea[name=feedback]").val()),this.model.save(),e={action:"Edit Feedback"},t.util.track("Edited Interview Report",e)},r.prototype.render=function(){var e,i;return e="",1===this.recordings.models.length&&(i=this.recordings.models[0].recording,i.get("data")&&i.get("data").feedback&&(e=i.get("data").feedback)),$(this.el).html(t.appController.template(this.template,this)({model:this.model.toJSON(),feedback:e})),this},r}(window.HR.GenericView),n=function(n){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,n),a.prototype.template="x/interview-report",a.prototype.initialize=function(t){return _.bindAll(this),this.recordings=t.recordings,this.recordings.on("reset",this.onRecordings),this.recordings.on("change",this.renderRecordings),this._subviews=[]},a.prototype.events=function(){return{"click .js-share-report":"shareReport"}},a.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({model:this.model.toJSON(),recordings:this.recordings})),$(this.el).find(".js-feedback").append(new r({model:this.model,recordings:this.recordings}).render().el),$(this.el).find(".js-status").append(new o({model:this.model}).render().el),this.renderRecordings(),this},a.prototype.renderRecordings=function(){var e,r;return this.$(".cnt-recordings").empty(),1===this.recordings.models.length&&(r=this.recordings.models[0].recording,e=1,r.get("data")&&r.get("data").questions&&_.each(r.get("data").questions,function(t){return function(n){var s;return s=new i({question:n,model:r,index:e}),t.$(".js-recordings").append(s.render().el),t._subviews.push(s),e+=1}}(this))),t.util.fixedInfo("report",".interview-question-recording",0,!0)},a.prototype.shareReport=function(e){var i,r;return e.preventDefault(),r="https://www.hackerrank.com/x/interviews/"+this.model.get("id")+"/report?auth_key="+this.model.get("auth_key"),i=new s({link:t.InterviewModel.shareReportLink(this.model),model:this.model}),this.$(".modal-container").html(i.render().el)},a}(window.HR.GenericView),i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}var n;return e(r,i),r.prototype.template="x/interview-code-recording",r.prototype.lang_mapping={c:"C",cpp:"C++",java:"Java",python:"Python",php:"PHP",perl:"Perl",ruby:"Ruby",csharp:"C#",haskell:"Haskell",clojure:"Clojure",scala:"Scala",javascript:"Javascript",go:"Go",erlang:"Erlang",code:"Code"},n={c:"text/x-csrc",cpp:"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp",haskell:"text/x-haskell",php:"text/x-php",python:"text/x-python",perl:"text/x-perl",ruby:"text/x-ruby",bash:"text/x-bash",oracle:"text/x-plsql",mysql:"text/x-plsql",sql:"text/x-plsql",clojure:"text/x-scheme",scala:"text/plain",code:"text/plain",go:"text/x-go",javascript:"text/javascript",objectivec:"text/x-csrc"},r.prototype.initialize=function(t){return _.bindAll(this),this.question=t.question,this.index=t.index,this.model.on("change",this.render),this.recording={},"task"===this.question.qtype?$.ajax({type:"GET",url:"/x/api/v1/taskattempts/"+this.question.authkey,success:function(t){return function(e){return t.model.set(e.model)}}(this)}):void 0},r.prototype.events=function(){return{"slide .slider":"sliderChange","change select[name=code-versions]":"select2Change","click .js-showmoretoggle":"showMoreToggle","click .js-fs-open":"openFullScreen","click .js-fs-close":"closeFullScreen","click .js-auto-play":"autoPlayCode","click .js-auto-pause":"pause_autoPlayCode","click .js-auto-stop":"stop_autoPlayCode"}},r.prototype.render=function(){var e;return e=this,this.type=this.question.runs?"runs":this.question.ops?"ops":"",$(this.el).html(t.appController.template(this.template,this)({question:this.question,index:this.index,model:this.model.toJSON()})),this.question.qtype&&"task"===this.question.qtype,setTimeout(function(t){return function(){var e;return e||(e=require__("switchery")),t.$(".js-switch")[0]?(new e(t.$(".js-switch")[0]),t.$(".js-switch").on("change",t.switchMode)):void 0}}(this)),this.question.ops&&this.$("#report-codeshell").show(),"runs"===this.type?(this.setupOps(),this.setupRuns(),this.showRunVersion(this.question.runs.length-1)):(this.setupRuns(),this.setupOps(),this.showOpVersion(this.question.ops.length-1)),this},r.prototype.openFullScreen=function(t){return t&&t.preventDefault(),this.$(".answer-player-wrapper").attr("data-style",this.$(".answer-player-wrapper").attr("style")).removeAttr("style"),this.$(".js-fs-open").hide(),this.$(".js-fs-close").show(),this.$(".answer-player-wrapper").removeClass("fixed-hand"),this.$(".fs-toggle").addClass("open"),this.fullScreenOpened=!0},r.prototype.closeFullScreen=function(t){return t&&t.preventDefault(),this.$(".answer-player-wrapper").attr("style",this.$(".answer-player-wrapper").attr("data-style")).removeAttr("data-style"),this.$(".js-fs-open").show(),this.$(".js-fs-close").hide(),this.$(".answer-player-wrapper").addClass("fixed-hand"),this.$(".fs-toggle").removeClass("open"),this.fullScreenOpened=!1},r.prototype.setupRuns=function(){var t;return _.each(this.question.runs,function(t){return function(e,i){var r;return r="<option value='"+i+"'>"+moment(e.time).format("h:mm:ss a")+"</option>",t.$("select[name=code-versions]").append(r)}}(this)),this.question.runs&&0!==this.question.runs.length||(t="<option value='-1'>No versions were compiled</option>",this.$("select[name=code-versions]").append(t)),this.$("select[name=code-versions]").select2({width:"240px",formatNoMatches:function(){return"No versions were compiled"}}),this.showSelect2()},r.prototype.setupOps=function(){return this.recording=new t.InterviewCodeRecordingModel({interview_id:this.model.get("interview_id")}),this.recording.set("ops",this.question.ops),this.$(".slider").slider({max:this.question.ops.length,value:this.question.ops.length}),this.showSlider()},r.prototype.autoPlayCode=function(t){return t&&t.preventDefault(),this.$(".js-auto-play").hasClass("active")?void 0:(this.i||(this.i=0),this.player&&clearInterval(this.player),this.$(".js-auto-play i").addClass("icon-pause").removeClass("icon-play"),this.$(".js-auto-play").addClass("js-auto-pause").removeClass("js-auto-play"),this.$(".js-auto-stop").removeClass("disabled"),this.playing=!0,this.player=setInterval(function(t){return function(){return t.showOpVersion(++t.i),t.$(".slider").slider("value",t.i),t.i>=t.question.ops.length?t.stop_autoPlayCode():void 0}}(this),25))},r.prototype.pause_autoPlayCode=function(t){return t&&t.preventDefault(),this.player&&clearInterval(this.player),this.$(".js-auto-pause i").addClass("icon-play").removeClass("icon-pause"),this.$(".js-auto-pause").addClass("js-auto-play").removeClass("js-auto-pause")},r.prototype.stop_autoPlayCode=function(t){return t&&t.preventDefault(),this.pause_autoPlayCode(),this.i=!1,this.$(".js-auto-stop").addClass("disabled"),this.showOpVersion(this.question.ops.length),this.$(".slider").slider("value",this.question.ops.length)},r.prototype.showSelect2=function(){return this.$(".timeline-slider-wrapper").addClass("hidden"),this.$(".timeline-select2-wrapper").removeClass("hidden"),this.$(".switch-text").html("Compiled codes")},r.prototype.showSlider=function(){return this.$(".timeline-select2-wrapper").addClass("hidden"),this.$(".timeline-slider-wrapper").removeClass("hidden"),this.$(".switch-text").html("All code")},r.prototype.showRunVersion=function(e){var i,r,s;return 0>e?(i={code:"",lang:"code"},this.$(".code-lang").html(this.lang_mapping.code),this.$(".lang-container").removeClass("hidden"),this.$(".code-response-container").removeClass("hidden")):(this.$("select[name=code-versions]").val(e),i=this.question.runs[e],this.$(".code-lang").html(this.lang_mapping[i.lang]),this.$(".lang-container").removeClass("hidden"),this.$(".run-time").html(moment(i.time).format("MMMM Do YYYY, h:mm:ss a")),this.$(".run-input").html(i.input),s=this.cleanCodecheckerResponse(i),this.$(".run-output").html(s),this.$(".code-response-container").removeClass("hidden")),r=i.lang,"undefined"==typeof CodeMirror?t.appController.loadCodeMirrorMode(r,function(t){return function(){return t.showCodeEditor(i.code||"",n[r]||"code")}}(this)):this.showCodeEditor(i.code,n[r])},r.prototype.showOpVersion=function(e){var i;return this.i&&(this.i=e),this.$(".code-response-container").addClass("hidden"),this.recording?(this.question.language?(i=this.question.language,this.$(".code-lang").html(this.lang_mapping[this.question.language]),this.$(".lang-container").removeClass("hidden")):i="code","undefined"==typeof CodeMirror?"code"!==i?t.appController.loadCodeMirrorMode(i,function(t){return function(){return t.showCodeEditor(t.recording.gotoPosition(e),n[i],e)}}(this)):t.appController.loadCodeMirror(function(t){return function(){return t.showCodeEditor(t.recording.gotoPosition(e),n[i],e)}}(this)):this.showCodeEditor(this.recording.gotoPosition(e),n[i],e)):void 0},r.prototype.switchMode=function(t){var e;return e=t.target.checked,e?(this.type="ops",this.showSlider(),this.showOpVersion(this.question.ops.length-1)):(this.type="runs",this.showSelect2(),this.question.runs?this.showRunVersion(this.question.runs.length-1):this.showRunVersion(-1))},r.prototype.sliderChange=function(t,e){return this.playing=!0,this.showOpVersion(e.value),this.pause_autoPlayCode()},r.prototype.select2Change=function(t){return this.showRunVersion(t.val)},r.prototype.showMoreToggle=function(t){return t.preventDefault(),this.$(".js-question").hasClass("text-ellipsis-span")?(this.$(".js-question").removeClass("text-ellipsis-span"),this.$(t.currentTarget).html('show less <i class="icon-up-open"></i>')):(this.$(".js-question").addClass("text-ellipsis-span"),this.$(t.currentTarget).html('show more <i class="icon-down-open"></i>'))},r.prototype.cleanCodecheckerResponse=function(t){if(t.response&&0===t.response.result){if(t.response.signal&&0===t.response.signal[0]&&t.response.stdout&&t.response.stdout[0])return t.response.stdout[0];if(t.response.signal&&(62===t.response.signal[0]||24===t.response.signal[0]))return"Time Limit Exceeded";if(t.response.signal&&25===t.response.signal[0])return"Output size exceeded";if(t.response.stderr&&t.response.stderr[0])return t.response.stderr[0]}else if(t.response&&255===t.response.result)return t.response.compileMessage},r.prototype.showCodeEditor=function(t,e,i){var r,n,s,o,a,l,u,c,d;return l=0,this.playing&&this.recording.get("ops")[i]&&this.recording.get("ops")[i].op&&this.recording.get("ops")[i].op.length>0&&(c=this.recording.get("ops")[i].op[0].p,r=t.slice(0,c-1),l=r.split("\n").length),u=this.$("pre.outbox-temp"),u.empty(),$(u).append('<table style="width:100%;"><tr><td class="line-no" width="5%"></td><td class="code"></td></tr></table>'),s=$("<div></div>"),o=$("<div>1</div>"),$(u).find(".code").append(s),$(u).find(".line-no").append(o),n=0,d=CodeMirror.defaults.tabSize||4,a=2,CodeMirror.runMode(t,e,function(t,e){var r,c,p,h,m;if("\n"===t)return o.height(s.height()),a===l?(s=$('<div style="background-color:#EEE;"></div>'),o=$('<div><i class="icon icon-right"></i>'+a+"</div>")):(s=$("<div></div>"),o=$("<div>"+a+"</div>")),a++,$(u).find(".code").append(s),$(u).find(".line-no").append(o),n=0,void 0;for(r="",p=0;;){if(c=t.indexOf("	",p),-1===c){r+=t.slice(p),n+=t.length-p;break}for(n+=c-p,r+=t.slice(p,c),h=d-n%d,n+=h,i=0;h>i;)r+=" ",++i;p=c+1}return e?(m=$("<span></span>"),m.addClass("cm-"+e.replace(RegExp(" +","g")," cm-")),m.append(document.createTextNode(r)),s.append(m)):s.append(document.createTextNode(r))}),this.$("pre.outbox").html(u.html()).promise().done(function(t){return function(){var e,i,r,n;return l>0?(e=t.$(".line-no > div:contains("+l+")"),t.fullScreenOpened?(i=(t.$(".fs-toggle").height()-50)/2,t.$(".fs-toggle").stop(!0,!0).animate({scrollTop:e.position().top-i},50,"linear")):(r=$(".interview-feedback > div").height()+t.$(".question-wrapper-collapsed").height()+50,_.each(t.$(".interview-question-recording").parent().prevAll(),function(t){return r+=$(t).height()}),n=$("#control-overflow").height()/2-150,$("#control-overflow").stop(!0,!0).animate({scrollTop:e.position().top-n+r},50,"linear"))):void 0}}(this))},r}(window.HR.GenericView),s=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/interview-share-report-modal",r.prototype.className="interview-share-report-modal",r.prototype.initialize=function(t){return this.link=t.link,r.__super__.initialize.call(this,t)},r.prototype.events=function(){return{"click .js-copy-url":"copyURL"}},r.prototype.copyURL=function(){var e;return e={interview_id:this.model.get("id")},t.util.track("Shared Interview Report",e)},r.prototype.render=function(){var e;return e=t.appController.template(this.template,this)({link:this.link}),$(this.el).html(e),this.initializeCopy(),$("#global-zeroclipboard-html-bridge").css("position","fixed"),this.$("#copy-share-link-report").popover({content:"URL has been coppied",trigger:"none"}),this.$("#interview-share-report-modal").modal(),this},r.prototype.initializeCopy=function(){var t,e;return e=this,this.$("#copy-share-link-report").attr("data-clipboard-text",this.link),this.$("#report-link-inp").select(),t=new ZeroClipboard(this.$("#copy-share-link-report"),{container:$("div.modal.fade.interview-share-report-modal")}),t.on("complete",function(){var t;return $(this).popover("show"),t=$(this),setTimeout(function(){return function(){return t.popover("hide"),e.initializeCopy()}}(this),2e3)})},r}(window.HR.GenericView),t=null!=(a=window.HR)?a:{},t.InterviewReportView=n,t.InterviewShareReportModalView=s})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(t){var e;return e=this,this.active_nav_link=t.active_nav_link},r.prototype.template="x/interviews-navigation",r.prototype.className="interviews-navigation",r.prototype.updateData=function(t,e){return this.active_nav_link=e},r.prototype._render=function(){var e,i;return i=this,e=t.appController.template(this.template,this)({active_nav_link:this.active_nav_link,throbber:t.appController.viewLoader()}),$(this.el).html(e),t.currentUser.isLocked()&&this.disableNavigation(),this},r.prototype.disableNavigation=function(){return this.$(".hre-sidebar a").removeAttr("href")},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.InterviewsNavigationView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(t){var e;return e=this,this.active_nav_link=t.active_nav_link},r.prototype.template="x/library-navigation",r.prototype.className="library-navigation",r.prototype.updateData=function(t,e){return this.active_nav_link=e},r.prototype._render=function(){var e,i;return i=this,e=t.appController.template(this.template,this)({active_nav_link:this.active_nav_link,throbber:t.appController.viewLoader()}),$(this.el).html(e),t.currentUser.isLocked()&&this.disableNavigation(),this},r.prototype.disableNavigation=function(){return this.$(".hre-sidebar a").removeAttr("href")},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.LibraryNavigationView=i})}.call(this),function(){var t,e,i,r,n,s,o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};jQuery(function(){}),n=function(e){function i(){return this.loadLib=o(this.loadLib,this),this.createQuestion=o(this.createQuestion,this),this.editQuestion=o(this.editQuestion,this),i.__super__.constructor.apply(this,arguments)}return l(i,e),i.prototype.template="x/library",i.prototype.className="library-view",i.prototype.initialize=function(e){return this.library=e.library,this.access_type=e.access,this.filter=e.filter,this.search="",this.tags="",this._subviews=[],t.LibraryModel.setTid(null),this},i.prototype.events=function(){return{"click .js-searchclear":"clearQuery","keypress .js-search":"setQuery","click .js-tags":"filterTags","click .js-edit-question":"editQuestion","click .js-duplicate-question":"copyQuestion"}},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({filter:this.filter,library:this.library,access:this.access_type}),$(this.el).html(e),$(".js-create-question").off().on("click",this.createQuestion),setTimeout(this.loadLib,200),this},i.prototype.editQuestion=function(t){return t.preventDefault(),Backbone.history.navigate("library/questions/"+this.$(t.target).data("qid")+"/edit",!0)},i.prototype.createQuestion=function(e){var i;return e.preventDefault(),i=new t.CreateQuestionModalView({model:t.LibraryModel}),this._subviews.push(i),$("#modal-container").html(i.render().el)},i.prototype.setQuery=function(t){return 13===t.keyCode?(this.$(".js-searchclear").removeClass("hide"),this.search=this.$(".js-search").val(),this.loadLib()):void 0},i.prototype.clearQuery=function(t){return t.preventDefault(),this.$(t.currentTarget).addClass("hide"),this.$(".js-search").val(""),this.search="",this.loadLib()},i.prototype.filterTags=function(){var t;return t=this.$("input.js-tags").val(),t!==this.tags?(this.tags=t,this.loadLib()):void 0},i.prototype.loadLib=function(){var e;return e=new t.LoadingView,this.$(".libcontent").html(e.render().el),t.LibraryModel.fetch({data:$.param({library:null!=this.access_type?""+this.library+"_"+this.access_type:this.library,filter:this.filter,q:this.search,tags:this.tags}),silent:!0,success:function(t){return function(){return t.renderView()}}(this),error:function(t){return console.log("error",t)}})},i.prototype.renderView=function(){var e,i,r,n,s,o,a,l,u,c,d,p,h;for(n=t.LibraryModel.attributes,this.$(".libcontent").empty(),e=[],1===n.sets.length?e.push("1 set"):n.sets.length>1&&e.push(""+n.sets.length+" sets"),1===n.questions.length?e.push("1 question"):n.questions.length>1&&e.push(""+n.questions.length+" questions"),e.length?this.$(".js-count").html("Found: "+e.join(", ")):(this.$(".js-count").html("Found nothing here."),this.$(".js-nothingfound").removeClass("hide")),this.$(".js-tags").select2("destroy"),n.tags.length>0?(this.$(".js-tags").select2({width:"off",placeholder:"Filter tags",allowClear:!0,multiple:!0,query:function(e){var i,r,s,o,a;for(i={results:[]},a=n.tags,s=0,o=a.length;o>s;s++)r=a[s],i.results.push({id:r,text:t.util.capitalize(r)});return e.callback(i)},initSelection:function(e,i){var r,s,o,a,l;for(r=[],l=n.selected_tags,o=0,a=l.length;a>o;o++)s=l[o],r.push({id:s,text:t.util.capitalize(s)});return i(r)}}),this.$(".js-tags").removeClass("hide")):(this.$(".js-tags").addClass("hide"),this.$(".js-tags").css({display:""})),d=n.sets,a=0,u=d.length;u>a;a++)s=d[a],o=new t.LibrarySetView({set:s,parent:this}),this.$(".libcontent").append(o.render().el);for(p=n.questions,h=[],l=0,c=p.length;c>l;l++)i=p[l],r=new t.LibraryQuestionView({question:i,parent:this}),h.push(this.$(".libcontent").append(r.render().el));return h},i}(window.HR.GenericView),e=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return l(i,e),i.prototype.template="x/library-question",i.prototype.className="library-question-view",i.prototype.events=function(){return{"click .js-toggleHeight":"toggleHeight"}},i.prototype.initialize=function(t){return this.question=t.question,this.parent=t.parent,this.noexpand="noexpand"in t?t.noexpand:!1,this.actions="actions"in t?t.actions:!0},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({question:this.question,hrqn:window.istreet.cfg.hrqn,noexpand:this.noexpand,actions:this.actions}),$(this.el).html(e),this},i.prototype.toggleHeight=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget),"collapsed"===e.attr("data-state")?(e.html('collapse <i class="icon-up-open">'),e.attr("data-state","expanded"),$(this.el).find(".js-qcontent").removeClass("text-ellipsis-oneline")):(e.html('expand <i class="icon-down-open">'),e.attr("data-state","collapsed"),$(this.el).find(".js-qcontent").addClass("text-ellipsis-oneline"))},i}(window.HR.GenericView),r=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return l(i,e),i.prototype.template="x/library-set",i.prototype.className="library-set-view",i.prototype.events=function(){return{"click .js-showset":"showSetModal"}},i.prototype.initialize=function(t){return this.set=t.set,this.parent=t.parent},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({set:this.set,hrqn:window.istreet.cfg.hrqn}),$(this.el).html(e),this},i.prototype.showSetModal=function(e){var i,r,n;return e.preventDefault(),i=this.$(e.currentTarget),n=new t.LibrarySetModalView({set:this.set,parent:this}),this.$(".js-setdetails-wrapper").html(n.render().el),r={width:1e3,"margin-left":-(parseInt(1e3)/2),"min-height":600,height:"80%"},setTimeout(function(t){return function(){return t.$(".js-setdetails").modal().css(r)}}(this),100)},i}(window.HR.GenericView),i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return l(i,e),i.prototype.template="x/library-setmodal",i.prototype.className="library-setmodal",i.prototype.events=function(){return{"click .js-qview":"showQuestion","click .js-qnext":"nextQuestion","click .js-qprev":"prevQuestion"}},i.prototype.initialize=function(t){return this.set=t.set,this.parent=t.parent},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({set:this.set}),$(this.el).html(e),setTimeout(function(t){return function(){return t.$("a[qindex=0]").trigger("click")}}(this)),this},i.prototype.showQuestion=function(e){var i,r,n;return e.preventDefault(),r=this.$(e.currentTarget),r.parent().parent().find(".active").removeClass("active"),r.parent().addClass("active"),n=this.set.questions[r.attr("qindex")],i=new t.LibraryQuestionView({question:n,noexpand:!0,parent:this}),this.$(".setqcontents").html(i.render().el)},i.prototype.nextQuestion=function(t){var e,i;return t.preventDefault(),e=this.$(t.currentTarget),i=parseInt(e.parent().parent().find(".active").find("a").attr("qindex")),i===this.set.questions.length-1?i=0:i+=1,e.parent().parent().find("a[qindex="+i+"]").trigger("click")},i.prototype.prevQuestion=function(t){var e,i;return t.preventDefault(),e=this.$(t.currentTarget),i=parseInt(e.parent().parent().find(".active").find("a").attr("qindex")),0===i?i=this.set.questions.length-1:i-=1,e.parent().parent().find("a[qindex="+i+"]").trigger("click")},i}(window.HR.GenericView),t=null!=(s=window.HR)?s:{},t.LibraryView=n,t.LibraryQuestionView=e,t.LibrarySetView=r,t.LibrarySetModalView=i}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){},r.prototype.template="x/logo-upload",r.prototype.className="logo-upload",r.prototype.initialize=function(t){return this.parent=t.parent},r.prototype.render=function(){return $(this.el).empty(),this.$("#upload-logo-modal").html(""),$(this.el).html(t.appController.template(this.template,this)),this.$("#upload-logo-modal").modal({backdrop:!1}),this},r.prototype.events=function(){return{"click .upload-logo":"uploadLogo","change input":"enableUpload"}},r.prototype.enableUpload=function(){return $(".upload-logo").removeAttr("disabled").removeClass("disabled")},r.prototype.uploadLogo=function(e){var i,r,n,s,o;if(!$(".upload-logo").attr("disabled"))return $(".upload-logo").attr("data-throbber","show"),$("#logo-throbber").attr("style","display:block"),$(".upload-logo").attr("disabled","true"),$(".upload-logo").addClass("disabled"),e.preventDefault(),this.$(".error-msg").addClass("hidden"),s="/x/api/v1/users/upload_logo",i=this.$("#logo-upload-form"),r=i.find(":file"),n=function(){var t;return t={files:i.find(":file"),iframe:!0}},o=this,$("#company-logo").hide(),$.ajax({url:s,type:"POST",dataType:"json",files:i.find(":file"),iframe:!0,success:function(e){return t.currentUser.fetch({silent:!0,success:function(){return $("#company-logo").load(function(){return setTimeout(function(){return t.util.ajaxmsg(e.message,!1,!0,2)}),$("#company-logo").show(),$("#logo-throbber").remove()}).attr("src",e.url+"?"+(new Date).getTime()),t.currentUser.fetch(),o.$("#upload-logo-modal").modal("hide")}})},error:function(t){return t=$.parseJSON(t.responseText),o.$(".error-msg").removeClass("hidden").html(t.message)}})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.LogoUploadView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/new-team-modal",r.prototype.tagName="div",r.prototype.initialize=function(t){return this.parent=t.parent,this.userLabels=t.userLabels,this.users=t.users,this.callback=t.callback,this.addUsers=t.addUsers,this.team_id=t.team_id},r.prototype.teamMemberTemplate='<li data-user-label="<%= label%>">\n    <div class="team_email_cta psA msB">\n        <span class="fnt-sz-small"><%= label %></span>\n        <a href="" class="delete_email_from_team js-remove-new-team-member" data-user-label="<%= label %>"><i class="icon--single icon-cancel-small"></i></a>\n    </div>\n</li>',r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({team:this.team_id?this.collection.get(this.team_id):"",addUsers:this.addUsers})),this.$("#new-team-modal").modal(),this.team_id||setTimeout(function(t){return function(){return t.$("input[name=new-team-member]").select2({data:t.userLabels,width:354})}}(this)),this},r.prototype.events=function(){return{"click .js-add-existing-team-member":"addNewTeamMember","click .js-remove-new-team-member":"removeNewTeamMember","submit form[name=new-team-form]":"saveTeam"}},r.prototype.addNewTeamMember=function(t){var e,i;return t.preventDefault(),i=this.$("input[name=new-team-member]").val(),e=_.template(this.teamMemberTemplate)({label:i}),this.userLabels=_.reject(this.userLabels,function(){return function(t){return t.id===i?!0:void 0}}(this)),this.$("ul#team_members_list").append(e),this.$("input[name=new-team-member]").select2({data:this.userLabels,width:354})},r.prototype.removeNewTeamMember=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget).data("user-label"),this.userLabels[this.userLabels.length]={id:e,text:e},this.$(t.currentTarget).parent().parent().remove()},r.prototype.showError=function(t){return this.$(".alert-error").html(t).removeClass("hidden")},r.prototype.resetError=function(){return this.$(".alert-error").html("").addClass("hidden")},r.prototype.saveTeam=function(e){var i,r;return e.preventDefault(),this.resetError(),r=this.$("input[name=team-name]").removeClass("error").val(),_.isEmpty(r)?(this.$("input[name=team-name]").addClass("error"),void 0):(this.team_id?(this.model=this.collection.get(this.team_id),this.model.set("name",r,{silent:!0})):(this.model=new t.TeamModel({name:r}),i=_.map(this.$("ul#team_members_list li"),function(t){return function(e){var i;return i=$(e).attr("data-user-label"),t.users[i].user_id}}(this)),i.length>0&&this.model.set("users",i)),this.model.save(null,{silent:!0,success:function(e){return function(){return e.$(".close").click(),t.util.trackTotango("Added New Team","Account Settings"),e.collection.fetch({success:function(){return e.callback?e.callback():e.parent.render()}})}}(this),error:function(t){return function(e,i){var r;return r=$.parseJSON(i),t.showError(r.message)}}(this)}))},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.NewTeamView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/card-details",r.prototype.intialize=function(t){return null==t&&(t={}),this.model=t.model,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},r.prototype.events=function(){return{"submit form[name=credit-card-details]":"submitCard"}},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(e),this},r.prototype.submitCard=function(t){return t.preventDefault(),this.$(".response-message").addClass("hidden"),$(t.currentTarget).children("button").attr("disabled",!0).addClass("disabled"),this.getToken(t.currentTarget)},r.prototype.cardCheckResponseHandler=function(){var e;return e=this,function(i,r){var n,s,o;r.error?(n=r.error.message,this.$(".response-message").removeClass("hidden").addClass("error").html(n),$("#card-details-submit").attr("disabled",!1).removeClass("disabled"),t.util.inlineLoadingEnd({})):(o=r.id,s={hr_uid:t.currentUser.id,token:r.id,credit_card_number:r.card.last4},e.model.save(s,{success:function(){var i;return i={Page:"Credit card details"},t.util.track("Edited Account Settings",i),e.model.fetch({success:function(){return e.render(),$("#card-details-submit").attr("disabled",!1).removeClass("disabled"),n="Card details have been saved",t.util.inlineLoadingEnd({message:n})}})},error:function(e,i){return t.util.inlineLoadingEnd({}),i=$.parseJSON(i.responseText),n=i.message,this.$(".response-message").removeClass("hidden").addClass("error").html(n),$("#card-details-submit").attr("disabled",!1).removeClass("disabled")}}))}},r}(window.HR.CardDetailsView),t=null!=(r=window.HR)?r:{},t.PaymentCardDetailsView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.passwordConfirm=function(t,e){var i;return i=this,$.ajax({url:"/x/validate_password",type:"POST",dataType:"json",data:{password:t},success:function(){return e("success")},error:function(){return e("error")}})},i.prototype.gotoCardDetails=function(t){return t.preventDefault(),$("a.close").click(),setTimeout(function(){return Backbone.history.navigate("/payments/card_details",!0)},500)},i.prototype.goBack=function(t){return t.preventDefault(),window.history.back()},i}(window.HR.CardDetailsView),t=null!=(r=window.HR)?r:{},t.PaymentCheckoutView=i})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return this.passwordConfirmed=t(this.passwordConfirmed,this),n.__super__.constructor.apply(this,arguments)}return i(n,r),n.prototype.template="x/plan-payment-checkout",n.prototype.initialize=function(t){return this.plan=t.plan,this.model=t.model,this.model.bind("change",this.render)},n.prototype.events=function(){return{"submit form[name=checkout-form]":"pay","click .dev-edit-card-details":"editCardDetails","change select[name=payment-users]":"updateTotal","click .back":"goBack"}},n.prototype.render=function(){var t;return this.checkout=this.model.toJSON(),this.checkout.min_users&&(t=this.checkout.charge*this.checkout.min_users,this.checkout.prorated_deduction&&(t-=this.checkout.plan_details.min_users*this.checkout.prorated_deduction),this.checkout.carryover_credit&&(t-=this.checkout.carryover_credit),$(this.el).html(e.appController.template(this.template,this)({model:this.checkout,total:t,plan:this.plan}))),this.delegateEvents(),this
},n.prototype.pay=function(t){var e;return t.preventDefault(),this.$(".response-message").addClass("hidden"),this.$("button[type=submit]").attr("disabled",!0).addClass("disabled"),e=$("input[name=password]").val(),this.passwordConfirm(e,this.passwordConfirmed)},n.prototype.editCardDetails=function(t){return t.preventDefault(),this.checkout.credit_card_number=void 0,this.$(".credit-card-details-existing").addClass("hidden"),this.$(".new-credit-card-details").removeClass("hidden")},n.prototype.passwordConfirmed=function(t){var i;return"error"===t?(i="The password entered is incorrect",this.$(".response-message").removeClass("hidden").addClass("error").html(i),e.util.inlineLoadingEnd({}),this.$("button[type=submit]").attr("disabled",!1).removeClass("disabled"),void 0):this.checkNewCard()},n.prototype.checkNewCard=function(){var t,i;return $("#card-number").val()&&$("#cvv").val()&&$("#expiry-month").val()&&$("#expiry-year").val()?t=this.getToken("button[type=submit]"):this.checkout.credit_card_number?this.makePayment(null):(i="Please enter all the card details",this.$(".response-message").removeClass("hidden").addClass("error").html(i),e.util.inlineLoadingEnd({}),this.$("button[type=submit]").attr("disabled",!1).removeClass("disabled"),void 0)},n.prototype.makePayment=function(t){var i,r,n,s;return s=$("select[name=payment-users]").val()?parseInt($("select[name=payment-users]").val(),10):1,i={plan:this.plan,users:s},n=e.currentUser.id,r=new e.PaymentModel({plan:this.plan,users:s,hr_uid:n}),t&&(i.new_card_details=t),r.save(i,{silent:!0,suppressMessage:!0,override:!0,success:function(t){return function(i,r){return e.UserSettings.set("checkout",void 0,{silent:!0}),$.inArray(e.currentUser.get("stripe_plan"),["free","trial"])&&t.adrollConversion(),e.util.inlineLoadingEnd(r),e.currentUser.fetch(),Backbone.history.navigate("/payments/plans",!0)}}(this),error:function(t){return function(i,r){var n;return n=$.parseJSON(r.responseText),e.util.inlineLoadingEnd({}),t.$(".response-message").removeClass("hidden").addClass("error").html(n.message),t.$("button[type=submit]").attr("disabled",!1).removeClass("disabled")}}(this)})},n.prototype.adrollConversion=function(){return window.adroll_segments="paid_conversion","undefined"!=typeof __adroll?__adroll.render_pixel_code(window.adroll_adv_id,window.adroll_pix_id):void 0},n.prototype.updateTotal=function(){var t,e,i,r,n;return n=parseInt($("select[name=payment-users]").val(),10),t=parseInt(this.checkout.charge*n,10),r=t,$(".item-total").html(t),this.checkout.prorated_deduction&&this.$(".prorated-deduction").length>0&&(i=parseInt(n*this.checkout.prorated_deduction,10),r-=i,this.$(".prorated-deduction").html(i)),this.checkout.carryover_credit&&this.$(".credit").length>0&&(e=parseInt(this.checkout.carryover_credit,10),r-=e,this.$(".credit").html(e)),this.$("#final-amount").html(r)},n.prototype.cardCheckResponseHandler=function(){var t;return t=this,function(i,r){var n,s,o;return r.error?(s=r.error.message,e.util.inlineLoadingEnd({}),this.$(".response-message").removeClass("hidden").addClass("error").html(s),this.$("button[type=submit]").attr("disabled",!1).removeClass("disabled")):(o=r.id,n={token:r.id,last4:r.card.last4},t.makePayment(n))}},n}(window.HR.PaymentCheckoutView),e=null!=(n=window.HR)?n:{},e.PlanPaymentCheckoutView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/pricing-plans",r.prototype.initialize=function(t){return null==t&&(t={}),this.model=t.model,this.model.bind("change",this.render),this.model.bind("reset",this.render)},r.prototype.events=function(){return{"click  .payment-button":"changePlan"}},r.prototype.render=function(){var e;return e=t.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(e),this},r.prototype.changePlan=function(t){var e,i,r;return r=$(t.currentTarget).attr("data-plan"),e=$(t.currentTarget).attr("data-cost"),(i=this.model.get("current_plan"))?i.price>e?(alert("Please contact support@hackerrank.com to downgrade the plan"),void 0):this.checkout(r):this.checkout(r)},r.prototype.checkout=function(e){var i;return i={},i.payment_type="plan",i.plan=e,t.UserSettings.set("checkout",i),t.router.navigate("/payments/checkout",!0)},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.PricingPlansView=i})}.call(this),function(){var t,e,i,r={}.hasOwnProperty,n=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};jQuery(function(){}),e=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.template="x/remove-question-modal",i.prototype.className="remove-question-modal",i.prototype.initialize=function(t){return this.parent=t.parent,this.qid=t.qid,this.index=t.index,i.__super__.initialize.call(this,t)},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(e),this.$("#remove-question-modal").modal(),this},i.prototype.events=function(){return{"click a.js-remove-question":"removeQuestion"}},i.prototype.removeQuestion=function(e){var i;return e.preventDefault(),i=this,this.$(".close").click(),this.model.removeQuestion(i.qid,{success:function(){var e;return e={question_id:i.qid,test_id:i.parent.model.get("id")},t.util.track("Removed question",e),i.parent.showUndoMessage(i.qid,this.index),setTimeout(function(){return i.parent.hideUndoMessage(),i.parent.render()},1e4),i.parent.model.fetch()},error:function(){return console.log("error")}})},i}(window.HR.GenericView),t=null!=(i=window.HR)?i:{},t.RemoveQuestionModalView=e}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/settings-basic-info",r.prototype.class_name="basic-info",r.prototype.country_select_box="#user-country-select2",r.prototype.timezone_select_box="#usr-tz-select2",r.prototype.user_form="#settings-basic-info-form",r.prototype.initialize=function(){return this.model=t.currentUser},r.prototype.events=function(){return{"click #update-basic-info":"update","click #c-logo-upload-btn":"openLogoUploadDialog"}},r.prototype.render=function(){var e,i;return i=this.model.toJSON(),e=t.appController.template(this.template,this)({current_user:i}),$(this.el).html(e),this.initCountrySelect2(),this.initTimeZoneSelect2(),this.initializeCopy(),$("#global-zeroclipboard-html-bridge").css("position","fixed"),this.$("#copy-apikey").popover({content:"API Key has been coppied",trigger:"none"}),this},r.prototype.initCountrySelect2=function(){var e,i;return e=t.countryNames,i=[],_.each(e,function(){return function(t){return i.push({id:t,text:t})}}(this)),i.push({id:"N/A",text:"N/A"}),this.$(this.country_select_box).select2({width:"off",data:i})},r.prototype.initTimeZoneSelect2=function(){var t;return t=this,setTimeout(function(){return $.ajax({url:"/x/api/v1/users/timezones",type:"GET",success:function(e){return $(t.timezone_select_box).select2({width:"off",data:e.data})}})})},r.prototype.openLogoUploadDialog=function(){var e;return e=new t.LogoUploadView({parent:this}),$(this.el).find(".dialog-wrapper").html(e.render().el)},r.prototype.update=function(e){var i,r;return e.preventDefault(),r={},r.user={},r.user.firstname=this.$("#usr-fname").val(),r.user.lastname=this.$("#usr-lname").val(),r.user.phone=this.$("#usr-phone").val(),i=this.$(this.country_select_box).val(),"N/A"===i&&(i=""),r.user.country=i,r.user.timezone=this.$(this.timezone_select_box).val(),r.user.company=this.model.get("company"),r.user.company.name=this.$("#usr-cname").val(),r.user.company.email_from=this.$("#usr-cemailfrom").val(),this.model.save(r.user,{success:function(){var e;return e={Page:"Basic Settings"},t.util.track("Edited Account Settings",e)},error:function(t,e){return console.log(e)}})},r.prototype.initializeCopy=function(){var t,e;return e=this,this.$("#copy-apikey").attr("data-clipboard-text",this.model.get("personal_api_key")),this.$("#apikey-input").select(),t=new ZeroClipboard(this.$("#copy-apikey")),t.on("complete",function(){var t;return $(this).popover("show"),t=$(this),setTimeout(function(){return function(){return t.popover("hide"),e.initializeCopy()}}(this),2e3)})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.SettingsBasicInfoView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/settings-email",r.prototype.class_name="settings-email",r.prototype.initialize=function(){return this.model=t.currentUser},r.prototype.events=function(){return{"click #update-basic-info":"update"}},r.prototype.render=function(){var e,i;return i=this.model.toJSON(),e=t.appController.template(this.template,this)({current_user:i}),$(this.el).html(e),this},r.prototype.update=function(e){var i,r;return e.preventDefault(),r=this,i={},i.user={},i.user.notification=this.$("input[name=usr-email-noti]:checked").val(),console.log(i),this.model.save(i.user,{success:function(){var e;return e={Page:"Email Settings"},t.util.track("Edited Account Settings",e)},error:function(t,e){return console.log(e)}})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.SettingsEmailView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/settings-navigation",r.prototype.className="settings-navigation",r.prototype.initialize=function(e){return this.model=t.currentUser,this.active_nav_link=e.active_nav_link,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},r.prototype.updateData=function(t,e){return this.active_nav_link=e},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({active_nav_link:this.active_nav_link,model:this.model.toJSON(),throbber:t.appController.viewLoader()}),$(this.el).html(e),this},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.SettingsNavigationView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/settings-password",r.prototype.className="settings-password",r.prototype.initialize=function(){return this.model=t.currentUser},r.prototype.events=function(){return{"submit form[name=change-password-form]":"update"}},r.prototype.render=function(){var e,i;return i=this.model.toJSON(),e=t.appController.template(this.template,this)({current_user:i}),$(this.el).html(e),this},r.prototype.update=function(e){var i,r,n,s;return e.preventDefault(),this.$(".response").addClass("hidden"),this.$("#usr-old-pwd, #usr-new-pwd, #usr-cnfm-pwd").removeClass("error"),i={},i.user={},i.user.old_password=this.$("#usr-old-pwd").val(),i.user.new_password=this.$("#usr-new-pwd").val(),i.user.confirm_password=this.$("#usr-cnfm-pwd").val(),i.user.old_password?i.user.new_password?i.user.new_password.length<6?(r="Password should have atleast 6 characters",this.$(".response").html(r).removeClass("hidden"),this.$("#usr-new-pwd").addClass("error"),void 0):i.user.new_password!==i.user.confirm_password?(r="Passwords do not match",this.$(".response").html(r).removeClass("hidden"),this.$("#usr-new-pwd, #usr-cnfm-pwd").addClass("error"),void 0):(t.util.inlineLoadingStart($(e.currentTarget).find("button[type=submit]")),s=this,n=this.model.updatePassword(i.user),n.success(function(e){var i;return i={},t.util.track("Successfully Changed Password",i),t.util.inlineLoadingEnd({message:e.message})}),n.error(function(e){var i,n;return n={},t.util.track("Failed to Change Password",n),e=JSON.parse(e.responseText),i=e.error_fields,r=e.message,i=null!=i?i:[],s.$(".response").html(r).removeClass("hidden"),$.inArray("old_password",i)>-1&&s.$("#usr-old-pwd").addClass("error"),$.inArray("new_password",i)>-1&&s.$("#usr-new-pwd").addClass("error"),$.inArray("confirm_password",i)>-1&&s.$("#usr-cnfm-pwd").addClass("error"),t.util.inlineLoadingEnd({message:null})})):(r="Please Enter a new password",this.$(".response").html(r).removeClass("hidden"),this.$("#usr-new-pwd").addClass("error"),void 0):(r="Please Enter your current password",this.$(".response").html(r).removeClass("hidden"),this.$("#usr-old-pwd").addClass("error"),void 0)},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.SettingsPasswordView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/settings-report",r.prototype.initialize=function(){return this.model=t.currentUser},r.prototype.events=function(){return{"click #update-basic-info":"update"}},r.prototype.render=function(){var e,i,r;return i=this,r=this.model.toJSON(),e=t.appController.template(this.template,this)({current_user:r}),$(this.el).html(e),setTimeout(function(){var t;return t=require__("switchery"),$.map($(".js-switch"),function(e){return new t(e)})}),this},r.prototype.update=function(e){var i,r,n,s,o,a,l,u,c,d,p;for(e.preventDefault(),$(e.currentTarget).button("loading"),r=$("input[name=excel_prefs]"),n={},u=0,d=r.length;d>u;u++)i=r[u],n[i.value]=i.checked;for(a=$("input[name=pdf_prefs]"),l={},c=0,p=a.length;p>c;c++)o=a[c],l[o.value]=o.checked;return s={excel_prefs:n,pdf_prefs:l},this.model.save(s,{success:function(){return function(){var e;return e={Page:"Report Settings"},t.util.track("Edited Account Settings",e)}}(this),error:function(){return function(){}}(this)})},r}(Backbone.View),t=null!=(r=window.HR)?r:{},t.SettingsReportView=i})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t};jQuery(function(){var e,r,n,s,o,a;return s=function(e){function n(){return this.addUserCallback=t(this.addUserCallback,this),n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.template="x/settings-team-2",n.prototype.className="settings-team",n.prototype.initialize=function(t){return null==t&&(t={}),n.__super__.initialize.call(this,t),this.model=r.currentUser,this.collection=t.collection,this.subviews=[],this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"reset",this.render),this.search_view=new r.TeamsUserSearchView},n.prototype.events=function(){return{"click .teams-main-container .table-data header":"toggleTeamContainer","click .js-add-team":"addTeamEvent","click .js-add-user":"addUserEvent","click .js-user-spring-hide":"hideAdvancedOptions","click .js-user-spring-show":"showAdvancedOptions","submit form[name=teams-user-search-form]":"searchUser","click .js-search-user":"searchUser","change .teams-main-container .table-body .checkbox input[name=team-user]":"multiSelect","change .checkbox input[name=search-user]":"multiSelectSearch","click *[data-toggle='dropdown']":"toggleDropdown","click .js-team-users-action":"teamUsersAction","click .js-search-users-action":"searchUsersAction","click .js-edit-user":"editUser","click .js-add-team-member":"addTeamMember","click .js-remove-user-from-team":"removeUserFromTeam","click .js-team-settings-action":"teamSettings","click .js-team-settings":"toggleSettingsDropdown","click .js-show-all":"showAllTeams","click .js-collapse-all":"collapseAllTeams"}},n.prototype.render=function(){var t,e;return e=this.model.toJSON(),this.users={},this.userLabels=[],_.each(this.collection.models,function(t){return function(e){return e.get("is_owner_team")&&e.get("is_owner_team")===!0&&(t.company_owners_team_id=e.get("id")),_.each(e.get("users"),function(i){var r,n,s;return r=_.find(t.users,function(t){return t.email===i.get("email")}),s=i.get("firstname")+" "+i.get("lastname")+" - "+i.get("email"),_.isUndefined(r)?(t.userLabels.push({id:s,text:s}),n={email:i.get("email"),firstname:i.get("firstname"),lastname:i.get("lastname"),role:i.get("role"),user_id:i.get("user_id"),teams:[e.get("name")]},t.users[s]=n):(n=t.users[s],n.teams.push(e.get("name")),t.users[s]=n),i.get("company_owner")&&i.get("company_owner")===!0?t.company_owner_id=i.get("user_id"):void 0})}}(this)),t=r.appController.template(this.template,this)({current_user:e,collection:this.collection,userLabel:this.userLabel,users:this.users}),$(this.el).html(t),setTimeout(function(){var t;return t=require__("switchery"),$.map($(".js-switch"),function(e){return new t(e)})}),$(".dropdown-menu").mouseleave(function(t){return $(t.currentTarget).toggleClass("dropdown-open")}),this},n.prototype.toggleTeamContainer=function(t){return t.preventDefault(),$(t.currentTarget).closest(".table-wrap").find("header div:first-child .icon--single").hasClass("icon-up-open")?$(t.currentTarget).closest(".table-wrap").find("header div:first-child .icon--single").removeClass("icon-up-open").addClass("icon-down-open"):$(t.currentTarget).closest(".table-wrap").find("header div:first-child .icon--single").removeClass("icon-down-open").addClass("icon-up-open"),$(t.currentTarget).closest(".table-wrap").toggleClass("team-open")},n.prototype.addTeamEvent=function(t){return t.preventDefault(),t.stopPropagation(),this.addTeam()},n.prototype.addTeamAndUser=function(t){return t.remove(),this.addTeam(this.addUserCallback,!1)},n.prototype.addTeam=function(t,e){var i;return null==e&&(e=!0),i=new r.NewTeamView({parent:this,collection:this.collection,userLabels:this.userLabels,users:this.users,callback:t,addUsers:e}),this.subviews.push(i),this.$(".dialog-wrapper").html(i.render().el)},n.prototype.addUserEvent=function(t){return t.preventDefault(),this.addUser()},n.prototype.addUserWithData=function(){var t;return t=r.UserSettings.get("new_user_data"),r.UserSettings.set("new_user_data",void 0),setTimeout(function(e){return function(){return e.addUser(t)}}(this))},n.prototype.addUserCallback=function(){return this.addUserWithData()},n.prototype.addUser=function(t){var e;return e=new r.TeamUserView({parent:this,collection:this.collection,userLabels:this.userLabels,users:this.users,type:"add user",user_data:t}),this.subviews.push(e),this.$(".dialog-wrapper").html(e.render().el)},n.prototype.editUser=function(t){var e,i;return t.preventDefault(),i=this.$(t.currentTarget).data("mapping-id"),e=new r.TeamUserView({parent:this,collection:this.collection,userLabels:this.userLabels,users:this.users,type:"edit",mapping_id:i}),this.subviews.push(e),this.$(".dialog-wrapper").html(e.render().el)},n.prototype.addTeamMember=function(t){var e,i;return t.preventDefault(),t.stopPropagation(),i=this.$(t.currentTarget).data("team-id"),e=new r.TeamUserView({parent:this,collection:this.collection,userLabels:this.userLabels,users:this.users,type:"add to team",team_id:i}),this.subviews.push(e),this.$(".dialog-wrapper").html(e.render().el)},n.prototype.hideAdvancedOptions=function(t){return t.preventDefault(),this.$(t.currentTarget).addClass("hidden"),this.$(".js-user-spring-show").removeClass("hidden"),this.$(".user_spring").addClass("hidden")},n.prototype.showAdvancedOptions=function(t){return t.preventDefault(),this.$(t.currentTarget).addClass("hidden"),this.$(".js-user-spring-hide").removeClass("hidden"),this.$(".user_spring").removeClass("hidden")},n.prototype.searchUser=function(t){var e,i,r;return t.preventDefault(),i=this.$("input[name=search-user]").val(),i?(r=$.grep(this.userLabels,function(){return function(t){return t.id.search(new RegExp(i,"i"))>-1?!0:!1}}(this)),e={users:this.users,searched_users:r},this.search_view.setData(e,i),this.$(".js-search-container").html(this.search_view.render().el),this.$(".js-search-container").removeClass("hidden"),this.$(".js-teams-container").addClass("hidden"),this.$(".js-search-batch-ops-container").addClass("hidden"),this.$(".js-search-container").css("margin-top","0px")):(this.$(".js-search-container").addClass("hidden"),this.$(".js-teams-container").removeClass("hidden"),this.$(".js-search-batch-ops-container").addClass("hidden"),this.$(".js-search-container").css("margin-top","0px"))},n.prototype.multiSelect=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).closest(".table-data").find(".checkbox input:checked").length,this.$(t.currentTarget).is(":checked")&&e>0?this.$(".teams_main_cta").hasClass("invisible")&&(this.$(t.currentTarget).closest(".table-data").find(".teams_main_cta").removeClass("invisible"),this.$(t.currentTarget).closest(".table-data").find(".team-mem-selected").removeClass("hidden"),this.$(t.currentTarget).closest(".table-data").find(".team-mem-count").addClass("hidden")):1>e&&(this.$(t.currentTarget).closest(".table-data").find(".teams_main_cta").addClass("invisible"),this.$(t.currentTarget).closest(".table-data").find(".team-mem-selected").addClass("hidden"),this.$(t.currentTarget).closest(".table-data").find(".team-mem-count").removeClass("hidden")),this.$(t.currentTarget).closest(".table-data").find(".check_count").html(this.$(t.currentTarget).closest(".table-data").find(".table-body .checkbox input:checked").length)},n.prototype.multiSelectSearch=function(t){var e,i;return t.preventDefault(),e=this.$(t.currentTarget).closest(".table-data").find(".checkbox input:checked").length,i=this.$(t.currentTarget).closest(".table-data").find(".checkbox input").length,this.$(t.currentTarget).is(":checked")&&e>0?this.$(".js-search-batch-ops-container").hasClass("hidden")&&(this.$(".js-search-batch-ops-container").removeClass("hidden"),this.$(".js-search-container").css("margin-top","70px")):1>e&&(this.$(".js-search-batch-ops-container").addClass("hidden"),this.$(".js-search-container").css("margin-top","0px")),this.$(".js-search-batch-ops-container").find(".check_count").html(e),this.$(".js-search-batch-ops-container").find(".check_total_count").html(i)},n.prototype.toggleDropdown=function(t){return t.stopPropagation(),t.preventDefault(),$(t.currentTarget).next().toggleClass("dropdown-open")},n.prototype.toggleSettingsDropdown=function(t){return t.stopPropagation(),t.preventDefault(),$(t.currentTarget).next().find(".dropdown-menu").toggleClass("dropdown-open")},n.prototype.teamUsersAction=function(t){var e,i,r,n,s,o,a,l,u;return t.stopPropagation(),t.preventDefault(),e=this.$(t.currentTarget).data("action"),s=this.$(t.currentTarget).data("team-id"),n=this.collection.get(s),u=this.$("input[name=team-user][data-team-id="+s+"]:checked"),o=[],l=[],a=[],i=!1,_.each(u,function(t){return function(e){var r;return r=$(e).data("user-id"),o.push(r),r===t.company_owner_id&&(i=!0),_.each(n.get("users"),function(t){return t.get("user_id")===r?(l.push(t.get("firstname")+" "+t.get("lastname")),a.push(t.get("firstname")+" "+t.get("lastname")+" - "+t.get("email"))):void 0})}}(this)),r={user_ids:o,team_id:s,user_names:l,user_labels:a,action:e,company_owner_present:i},this.performAction(r)},n.prototype.searchUsersAction=function(t){var e,i,r,n,s,o,a;return t.stopPropagation(),t.preventDefault(),e=this.$(t.currentTarget).data("action"),n=this.collection.models[0].get("id"),a=this.$("input[name=search-user]:checked"),s=[],o=[],i=!1,_.each(a,function(t){return function(e){var r;return r=$(e).data("user-id"),s.push(r),r===t.company_owner_id?i=!0:void 0}}(this)),r={user_ids:s,team_id:n,action:e,company_owner_present:i},this.performAction(r)},n.prototype.performAction=function(t){var e,i,n,s,o,a,l,u,c;return l=t.user_ids,a=t.team_id,e=t.action,"add-to-team"===e?(i=new r.AddUsersToTeamView({parent:this,collection:this.collection,user_ids:l,team_id:a}),this.subviews.push(i),this.$(".dialog-wrapper").html(i.render().el)):"remove-from-team"===e?(n=t.company_owner_present,n&&a===this.company_owners_team_id?r.util.alert({title:"Not allowed",message:"You can't remove the company owner from owners team. Please contact support@hackerrank.com for more details"}):(c=t.user_names,u=t.user_labels,o="Are you sure you want to remove "+r.util.arrayToString(c)+" from the team "+this.collection.get(a).get("name")+"?",s=[],_.each(u,function(t){return function(e){return t.users[e].teams.length<=1?s.push(t.users[e].firstname+" "+t.users[e].lastname):void 0}}(this)),s.length>0&&(o+="<br/>",o+=1===s.length?"The account of "+r.util.arrayToString(s)+" will be locked":"The accounts of "+r.util.arrayToString(s)+" will be locked"),r.util.confirm({title:"Confirm removing user(s)",message:o,okButtonText:"Yes.",cancelButtonText:"No, go back.",okCallback:function(t){return function(){return $.ajax({url:"/x/api/v1/teams/"+a+"/users/batch_ops",dataType:"JSON",type:"POST",data:{user_ids:l,operation:"remove from team"},success:function(){return t.collection.fetch(),t.render()},error:function(){return console.log("error")}})}}(this)}))):void 0},n.prototype.removeUserFromTeam=function(t){var e,i;return t.preventDefault(),e=this.$(t.currentTarget).data("mapping-id"),i=new r.RemoveUserView({parent:this,collection:this.collection,userLabels:this.userLabels,users:this.users,mapping_id:e}),this.subviews.push(i),this.$(".dialog-wrapper").html(i.render().el)},n.prototype.showAllTeams=function(t){return t.preventDefault(),this.$(".js-team-div").addClass("team-open")},n.prototype.collapseAllTeams=function(t){return t.preventDefault(),this.$(".js-team-div").removeClass("team-open")},n.prototype.teamSettings=function(t){var e,i,n,s;return t.preventDefault(),t.stopPropagation(),e=this.$(t.currentTarget).data("action"),n=this.$(t.currentTarget).data("team-id"),"change-name"===e?(i=new r.NewTeamView({parent:this,collection:this.collection,team_id:n}),this.subviews.push(i),this.$(".dialog-wrapper").html(i.render().el)):"delete-team"===e?(s=this.collection.get(n),s.get("users").length>0?r.util.alert({title:"Not allowed",message:"Please remove all members from this team before deleting it"}):r.util.confirm({title:"Confirm team delete",message:"Are you sure you want to delete "+s.get("name")+" team?",okButtonText:"Yes, delete this team.",cancelButtonText:"No, go back.",okCallback:function(t){return function(){return s.destroy({success:function(){return t.collection.fetch(),t.render()},error:function(){return console.log("error")}})}}(this)})):void 0},n}(window.HR.GenericView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.template="x/teams-user-search-view",e.prototype.className="teams-user-search",e.prototype.setData=function(t,e){return this.data=t,this.search_str=e},e.prototype.render=function(){var t;return t=r.appController.template(this.template,this)({data:this.data,search_string:this.search_str}),$(this.el).html(t),this},e}(window.HR.GenericView),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.template="x/teams-remove-user",e.prototype.className="teams-remove-user",e.prototype.initialize=function(t){return this.parent=t.parent,this.userLabels=t.userLabels,this.users=t.users,this.mapping_id=t.mapping_id,e.__super__.initialize.call(this,t)},e.prototype.render=function(){return $(this.el).empty(),this.user_data={},_.each(this.collection.models,function(t){return function(e){return _.each(e.get("users"),function(i){return i.get("id")===t.mapping_id?(t.model=i,t.user_data=i.toJSON(),t.user_data.team={id:e.get("id"),name:e.get("name")}):void 0})}}(this)),$(this.el).html(r.appController.template(this.template,this)({user_data:this.user_data,users:this.users,userLabel:this.model.get("firstname")+" "+this.model.get("lastname")+" - "+this.model.get("email")})),this.$("#remove-user-modal").modal(),this},e.prototype.events=function(){return{"click .js-remove-user":"removeUser"}},e.prototype.removeUser=function(t){return t.preventDefault(),this.model.destroy({success:function(t){return function(){return t.$("button.close").click(),setTimeout(function(){return t.collection.fetch({success:function(){return t.parent.render()}})},1e3)}}(this),error:function(){return function(){return console.log("error")}}(this)})},e}(window.HR.GenericView),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.template="x/add-users-to-team",e.prototype.className="add-users-to-team",e.prototype.initialize=function(t){return this.parent=t.parent,this.user_ids=t.user_ids,this.team_id=t.team_id,e.__super__.initialize.call(this,t)},e.prototype.render=function(){var t;return $(this.el).empty(),t=_.map(this.collection.models,function(){return function(t){return{id:t.get("id"),text:t.get("name")}}}(this)),$(this.el).html(r.appController.template(this.template,this)),this.$("#remove-user-modal").modal(),setTimeout(function(e){return function(){return e.$("input[name=user-teams-select]").select2({data:t,multiple:!0})}}(this)),this},e.prototype.events=function(){return{"click .js-add-users-to-team":"addUsersToTeam"}},e.prototype.addUsersToTeam=function(t){var e;return t.preventDefault(),e=this.$("input[name=user-teams-select]").val().split(","),$.ajax({url:"/x/api/v1/teams/"+this.team_id+"/users/batch_ops",dataType:"JSON",type:"POST",data:{user_ids:this.user_ids,team_ids:e,operation:"add to other teams"},success:function(t){return function(){return t.$(".close").click(),t.collection.fetch(),t.parent.render()}}(this),error:function(){return function(){return console.log("error")}}(this)})},e}(window.HR.GenericView),r=null!=(a=window.HR)?a:{},r.SettingsTeamView=s,r.TeamsUserSearchView=o,r.RemoveUserView=n,r.AddUsersToTeamView=e})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-custom-acknowledgement",r.prototype.className="test-custom-acknowledgement",r.prototype.showSuccess=!1,r.prototype.formName=null,r.prototype.events=function(){return{"submit form[name=test-ack-form]":"setCustomAcknowledge","change input[name=enable-acknowledgement]":"showAckText"}},r.prototype.showAckText=function(){var t;return t=this.$("input[name=enable-acknowledgement]").attr("checked"),t?this.$(".js-ack-text").slideDown():this.$(".js-ack-text").slideUp()},r.prototype._render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e)),this.showSuccess&&(t.util.showInlineSuccess(this,this.$("button[type=submit]")),this.showSuccess=!1),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(t){return function(){return t.$(".switch").bootstrapSwitch()}}(this),200),this},r.prototype.setCustomAcknowledge=function(e){var i,r,n,s;if(e.preventDefault(),s=this,this.$(".validation-error").addClass("hidden"),i=this.$("textarea[name=test-acknowledgement]").removeClass("error").val(),n=this.$("input[name=enable-acknowledgement]").attr("checked"),r=n?{enable_acknowledgement:"True"}:{enable_acknowledgement:"False"},i)r.custom_acknowledge_text=i;else if("True"===r.enable_acknowledgement)return this.$("textarea[name=test-acknowledgement]").addClass("error"),t.util.inlineLoadingEnd({message:null}),void 0;return this.model.save(r,{success:function(){return s.showSuccess=!0,s.render()},error:function(t,e){var i;return i=$.parseJSON(e.responseText),s.$("input[name=test-acknowledgement]").addClass("error"),s.$(".validation-error").find(".error").html(i.message),s.$(".validation-error").removeClass("hidden")
},silent:!0})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestAcknowledgementTextView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-admin",r.prototype.className="test-admin",r.prototype.showSuccess=!1,r.prototype.events=function(){return{"submit form[name=test-admin-form]":"saveTestAdmin"}},r.prototype.render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e),this.showSuccess&&(t.util.showInlineSuccess(this,this.$("button[type=submit]")),this.showSuccess=!1)),this},r.prototype.saveTestAdmin=function(e){var i,r;return e.preventDefault(),r=this,this.$(".validation-error").addClass("hidden"),i=this.$("input[name=test-admins]").removeClass("error").val(),i?(this.model.set("test_admins",i,{silent:!0}),this.model.save(null,{success:function(){return function(){return r.showSuccess=!0,r.render()}}(this),error:function(t){return function(e,i){var r;return t.model.set("test_admins",t.model.previousAttributes().test_admins,{silent:!0}),r=$.parseJSON(i.responseText),t.$("input[name=test-admins]").addClass("error"),t.$(".validation-error").find(".error").html(r.message),t.$(".validation-error").removeClass("hidden")}}(this)})):(this.$("input[name=test-admins]").addClass("error"),t.util.inlineLoadingEnd({message:null}))},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestAdminView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-advanced-candidate-options",r.prototype.className="test-questions-shuffling",r.prototype.events=function(){return{"submit form[name=candidate-options-form]":"saveCandidateOptions"}},r.prototype._render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e)),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(t){return function(){return t.$(".switch").bootstrapSwitch()}}(this),200),this},r.prototype.saveCandidateOptions=function(t){var e,i,r,n;return t.preventDefault(),n=!this.$("input[name=hide_template]").attr("checked"),r=!this.$("input[name=hide_custom_testcase]").attr("checked"),i=!this.$("input[name=hide_compile_test]").attr("checked"),e={hide_template:n?"True":"False",hide_custom_testcase:r?"True":"False",hide_compile_test:i?"True":"False"},console.log(e),this.model.save(e,{silent:!0})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestAdvancedCandidateOptionsView=i})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return this.getFilter=t(this.getFilter,this),n.__super__.constructor.apply(this,arguments)}return i(n,r),n.prototype.initialize=function(t){return this.parent=t.parent,this.page=t.page,this.filter_groups={"question-name":"question","question-question":"question","test-user_name":"owner","test-user_email":"owner","test-name":"test","test-created_at":"created_at"},this.public_url_keywords={question:["question-question","question-name"],test:["test-name"],owner:["test-user_name","test-user_email"],created:["test-created_at"]},this.dataTypes={created_at:"date"},this.updateFiltersFromPath(t.filters),e.search.tests.setGroups(this.filter_groups),e.search.tests.setDataTypes(this.dataTypes),_.values(this.filters).length>=0&&""!==t.filters?this.updateResults():void 0},n.prototype.template="x/test-advanced-search",n.prototype.className="test-advanced-search",n.prototype.events=function(){return{"submit form[name=search]":"basicSearch","submit form[name=advanced-search]":"advancedSearch","click .js-dateclear":"clearDate","click .js-clearAll":"clearAll","click .js-clear":"clearFilter"}},n.prototype.clearFilter=function(t){return t.preventDefault(),$(t.target).parent().parent().find("input").val(""),this.advancedSearch()},n.prototype.clearAll=function(t){return t&&t.preventDefault(),this.filters={},this.render(),this.clearDate()},n.prototype.clearDate=function(t){return t&&t.preventDefault(),$(".js-daterange").val(""),this.date_filters={},$(".js-dateclear").hide(),this.advancedSearch()},n.prototype.basicSearch=function(t){return this.filters={},this.filters["test-name"]=t,this.page=1,this.updateResults()},n.prototype.updateFiltersFromPath=function(t){return this.filters={},this.date_filters={},t=t.replace("?",""),_.each(t.split("&"),function(t){return function(e){return""!==e?(e=e.split("|"),_.each(t.public_url_keywords[e[0]],function(i){return e[1]?t.filters[i]=e[1]:void 0})):void 0}}(this))},n.prototype.getFilter=function(t){return this.filters[t]||null},n.prototype.advancedSearch=function(t){return t&&t.preventDefault(),this.filters=_.clone(this.date_filters),""!==this.$("#test-name").val()&&(this.filters["test-name"]=this.$("#test-name").val()),""!==this.$("#question").val()&&(this.filters["question-name"]=this.$("#question").val(),this.filters["question-question"]=this.$("#question").val()),""!==this.$("#owner").val()&&(this.filters["test-user_name"]=this.$("#owner").val(),this.filters["test-user_email"]=this.$("#owner").val()),this.page=1,this.updateResults()},n.prototype.searchPath=function(){var t;return t=this.filterString().split("|").join("="),"/tests/search/"+t},n.prototype.filterString=function(t){var e,i;return null==t&&(t=!1),t?i=this.filters:(i={},_.each(this.filters,function(t){return function(e,r){return i[t.filter_groups[r]]=e}}(this))),e=_.map(i,function(){return function(t,e){return""+e+"|"+t}}(this)),t?e.join(","):(this.parent.filters="?"+e.join("&"),"?"+e.join("&"))},n.prototype.getTids=function(){return e.search.tests.search(this.filters)},n.prototype.updateResults=function(){return Backbone.history.navigate(this.searchPath()+("&page="+this.page)),this.parent.collection.setFilterString(this.filterString(!0)),this.parent.collection.setPage(this.page),this.parent.collection.fetch({reset:!0,success:function(){return function(t){return t.trigger("change")}}(this)})},n.prototype.render=function(){var t,i,r,n;return t=e.appController.template(this.template,this)({filters:this.filters}),$(this.el).html(t),this.filters["test-created_at"]?(i=this.filters["test-created_at"].split(".."),n=i[0],r=i[1],this.$(".js-daterange").val(this.filters["test-created_at"].replace(".."," to ")),$(".js-dateclear").show()):(n="1970-01-01",r=moment()),this.$(".js-daterange").daterangepicker({latestDate:"today",separator:" to ",format:"YYYY-MM-DD",ranges:{"Last week":[moment().add("days",-7),moment().format()],"Last 2 weeks":[moment().add("days",-14),moment().format()],"Last 30 days":[moment().add("days",-30),moment().format()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"Past year":[moment().add("days",-365),moment().format()]},startDate:n,endDate:r},function(t){return function(e,i){return t.$(".js-dateclear").removeClass("hide"),t.date_filters["test-created_at"]=e.format("YYYY-MM-DD")+".."+i.format("YYYY-MM-DD"),$(".js-dateclear").show(),t.advancedSearch()}}(this)),$(".input-icon").each(function(){return function(t,e){return""!==$(e).find("input").val()?$(e).find("a").show():$(e).find("a").hide()}}(this)),this},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.TestAdvancedSearchView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this,this._subviews=[],this.listenTo(this.model,"change",this.render)},r.prototype.template="x/test-advanced-settings",r.prototype.className="test-advanced-settings",r.prototype.render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e)),this.custom_link_view=new t.TestCustomLinkView({model:this.model}),this.custom_acknowledge_text=new t.TestAcknowledgementTextView({model:this.model}),this.test_admin_view=new t.TestAdminView({model:this.model}),this.cutoff_score_view=new t.TestCutoffScoreView({model:this.model}),this.master_password_view=new t.TestMasterPasswordView({model:this.model}),this.questions_shuffling_view=new t.TestQuestionsShufflingView({model:this.model}),this.candidate_options=new t.TestAdvancedCandidateOptionsView({model:this.model}),this.allowed_languages_view=new t.TestAllowedLanguagesView({model:this.model}),this.duplicate_test_view=new t.TestDuplicateView({model:this.model}),this.delete_test_view=new t.TestDeleteView({model:this.model}),this.mcq_score_view=new t.TestMcqScoreView({model:this.model}),this.time_settings_view=new t.TestTimeSettingsView({model:this.model}),this.assign({"div#custom_link":this.custom_link_view,"div#ack_text":this.custom_acknowledge_text,"div#time_settings":this.time_settings_view,"div#test_admin":this.test_admin_view,"div#cutoff_score":this.cutoff_score_view,"div#mcq_score":this.mcq_score_view,"div#master_password":this.master_password_view,"div#questions_shuffling":this.questions_shuffling_view,"div#allowed_languages":this.allowed_languages_view,"div#duplicate_test":this.duplicate_test_view,"div#delete_test":this.delete_test_view,"div#candidate_options":this.candidate_options}),this._subviews.push(this.custom_link_view,this.time_settings_view,this.test_admin_view,this.cutoff_score_view,this.mcq_score_view,this.master_password_view,this.questions_shuffling_view,this.allowed_languages_view,this.duplicate_test_view,this.delete_test_view,this.candidate_options),this},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestAdvancedSettingsView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-allowed-languages",r.prototype.className="test-allowed-languages",r.prototype.events=function(){return{"click #select_all":"toggleCheckbox","submit form[name=test-allowedLanguages-form]":"saveAllowedLanguages"}},r.prototype._render=function(){var e,i,r,n;return r=this,n=this.model.toJSON(),n&&(e=[],n.allowedLanguages&&(e=n.allowedLanguages.split(",")),i=t.appController.template(this.template,this)({model:n,allowedLanguages:e,throbber:t.appController.viewLoader()}),$(this.el).html(i)),this},r.prototype.toggleCheckbox=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).hasClass("active")?"":"checked","checked"===e?this.changeAllCheckboxes(e):void 0},r.prototype.changeAllCheckboxes=function(t){var e;return e=this.$("input[name='allowedLanguages']"),"checked"===t?_.each(e,function(t){return $(t).attr("checked","checked")}):_.each(e,function(t){return $(t).removeAttr("checked")})},r.prototype.saveAllowedLanguages=function(t){var e,i,r;return t.preventDefault(),e=[],r=$("input[name=allowedLanguages]:checked"),_.each(r,function(){return function(t){return e.push(t.value)}}(this)),i={allowedLanguages:e.join(",")},this.model.save(i,{silent:!0})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestAllowedLanguagesView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this,this.listenTo(this.model,"change",this.render)},r.prototype.template="x/test-candidate-settings",r.prototype.className="test-candidate-settings",r.prototype.events=function(){return{"submit form[name=test-candidate-settings-form]":"saveCandidateSettings","submit form[name=add-custom-detail-form]":"addCustomField","click .js-add-custom-field":"addCustomField"}},r.prototype.render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader(),candidateSettings:this.prepareCandidateDetails()}),$(this.el).html(e)),this},r.prototype.prepareCandidateDetails=function(){var e,i,r;return i=this.model.get("collect_data")?this.model.get("collect_data"):!1,e={},_.each(t.util.getCandidateDetailsMapping(),function(t,r){var n;return n={value:r,label:t,name:"collect_candidate_details"},i&&-1!==_.indexOf(i,r)&&(n.checked="checked"),e[r]=n}),this.model.get("collect_data_extra")&&(r=this.model.get("collect_data_extra"),_.each(r,function(i){var r,n;return r={value:i,label:i,name:"collect_candidate_details_extra",checked:"checked"},n=t.util.convertToSlug(i),e[n]=r})),e},r.prototype.addCustomField=function(t){var e;return t.preventDefault(),e=$("input[name=custom_field]").removeClass("error").bind("keyup",function(t){return $(t.currentTarget).unbind("keyup").removeClass("error")}).val(),_.isEmpty(e)?($("input[name=custom_field]").addClass("error").focus(),void 0):this.saveCandidateSettings(null)},r.prototype.saveCandidateSettings=function(e){var i,r,n,s,o,a,l,u,c,d,p;if($("input[name=custom_field]").removeClass("error"),e&&e.preventDefault(),l=$("input[name=collect_candidate_details]:checked")){for(s=[],u=0,d=l.length;d>u;u++)a=l[u],s.push(a.value);this.model.set("collect_data",s,{silent:!0})}if(r=$("input[name=collect_candidate_details_extra]:checked"),o=$("input[name=custom_field]").val(),r||o){if(n=[],r)for(c=0,p=r.length;p>c;c++)i=r[c],n.push(i.value);o&&n.push(o),this.model.set("collect_data_extra",n,{silent:!0})}return this.model.save(null,{success:function(e){return function(){var i;return i={Page:"Candidate Settings",test_id:e.model.get("id")},t.util.track("Edited Test Settings",i),e.model.fetch()}}(this)})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestCandidateSettingsView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t;return t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="x/test-create-saved-message-dialog",i.prototype.events=function(){return{"click a.cancel-dialog":this.closeDialog,"click a.create-saved-message":this.createSavedMessage,"blur input.error":this.removeError}},i.prototype.initialize=function(t){return null==t&&(t={}),this.message=t.message,this.parent=t.parent},i.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)),this.$("#test-create-saved-message-modal").modal(),this},i.prototype.removeError=function(t){return $(t.target).removeClass("error").closest(".error").removeClass("error")},i.prototype.setError=function(t,e){return null==t&&(t=null),null==e&&(e=""),setTimeout(function(){return HR.util.inlineLoadingEnd({message:e})}),t&&($("#create-saved-msg-name").addClass("error").parent().addClass("error"),this.$(".alert").removeClass("hidden").html(t)),this},i.prototype.createSavedMessage=function(t){var e,i,r,n,s;return t.preventDefault(),this.$(".alert").addClass("hidden"),$("#create-saved-msg-name").removeClass("error").parent().removeClass("error"),i=$("#create-saved-msg-name").val(),i.length>32?this.setError("Title cannot be more than 32 characters."):i?(r=null!=(s=this.model.get("saved_messages"))?s:{},r[i]=this.message,e={saved_messages:r},n=this,this.model.save(e,{success:function(){return setTimeout(function(){return n.$(".close").click(),n.parent.render(),HR.util.inlineLoadingEnd({message:"Template '"+i+"' has been saved"})},1500)}})):this.setError("Enter a Title for the message","Could not save template")},i.prototype.closeDialog=function(t){return t.preventDefault(),this.$(".close").click()},i}(window.HR.GenericView),HR.TestCreateSavedMessageDialogView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-custom-link",r.prototype.className="test-custom-link",r.prototype.showSuccess=!1,r.prototype.formName=null,r.prototype.events=function(){return{"submit form[name=short-test-url-form]":"createShortURL","submit form[name=public-test-url-form]":"createPublicURL"}},r.prototype.render=function(){var e,i,r,n;return r=this,n=this.model.toJSON(),n&&(e=t.appController.template(this.template,this)({model:n,throbber:t.appController.viewLoader()}),$(this.el).html(e),this.showSuccess&&this.formName&&(i=$("form[name="+this.formName+"]"),t.util.showInlineSuccess(this,i),this.showSuccess=this.formName=!1)),this},r.prototype.createPublicURL=function(t){var e,i;return t.preventDefault(),i=$("input[name=public-test-url]").removeClass("error").val(),e={short_url:i,type:"public"},i?this.sendAjaxRequest(t,e,"public-test-url-form"):$("input[name=public-test-url]").addClass("error").focus()},r.prototype.createShortURL=function(t){var e,i;return t.preventDefault(),i=$("input[name=short-test-url]").removeClass("error").val(),e={short_url:i,type:"short"},i?this.sendAjaxRequest(t,e,"short-test-url-form"):$("input[name=short-test-url]").addClass("error").focus()},r.prototype.sendAjaxRequest=function(e,i,r){var n;return n=this,t.util.inlineLoadingStart($(e.currentTarget)),$.ajax({url:"/x/api/v1/tests/"+n.model.get("id")+"/link",data:i,type:"POST",success:function(e){return function(i){return t.util.inlineLoadingEnd(i),"Success"===i.message?e.model.fetch({silent:!0,success:function(){return n.showSuccess=!0,n.formName=r,n.render()}}):void 0}}(this),error:function(e){var i;return i=JSON.parse(e.responseText),t.util.inlineLoadingEnd(i)}})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestCustomLinkView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-cutoff-score",r.prototype.className="test-cutoff-score",r.prototype.showSuccess=!1,r.prototype.events=function(){return{"submit form[name=test-cutoff-score-form]":"saveTestCutoff","keydown input[name=cutoff-score]":"checkInput"}},r.prototype.render=function(){var e,i;return i=this.model.toJSON(),i&&(e=t.appController.template(this.template,this)({model:i,throbber:t.appController.viewLoader()}),$(this.el).html(e),this.showSuccess&&(t.util.showInlineSuccess(this,this.$("button[type=submit]")),this.showSuccess=!1)),this},r.prototype.checkInput=function(t){return $(t.currentTarget).removeClass("error"),t.keyCode>=65&&!(t.keyCode>=96&&t.keyCode<=105)||t.shiftKey?($(t.currentTarget).addClass("error"),!1):void 0},r.prototype.saveTestCutoff=function(e){var i,r,n;return e.preventDefault(),n=this,r=$("input[name=cutoff-score]").removeClass("error").val(),r?(i={cutoff_score:parseInt(r,10)},this.model.save(i,{silent:!0,success:function(){return n.showSuccess=!0,n.render()}})):(this.$("input[name=cutoff-score]").addClass("error"),t.util.inlineLoadingEnd({message:null}))},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestCutoffScoreView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t;return t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="x/test-delete-saved-message-dialog",i.prototype.events=function(){return{"click a.cancel-dialog":this.closeDialog,"click a.delete-saved-message":this.deleteSavedMessage}},i.prototype.initialize=function(t){return null==t&&(t={}),this.name=t.name,this.parent=t.parent},i.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)),this.$("#test-delete-saved-message-modal").modal(),this},i.prototype.deleteSavedMessage=function(t){var e,i,r,n;return t.preventDefault(),i=null!=(n=this.model.get("saved_messages"))?n:{},i?(delete i[this.name],e={saved_messages:i},r=this,this.model.save(e,{success:function(){return setTimeout(function(){return r.$(".close").click(),r.parent.render(),HR.util.inlineLoadingEnd({message:"Template '"+r.name+"' has been deleted"})})}})):void 0},i.prototype.closeDialog=function(t){return t.preventDefault(),this.$(".close").click()},i}(window.HR.GenericView),HR.TestDeleteSavedMessageDialogView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-delete",r.prototype.className="test-delete",r.prototype.events=function(){return{"click #delete_test_confirmation":"deleteTestConfirmation","click .cancel-test-delete":"closeDialog","click .delete-test":"deleteTest"}},r.prototype._render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e)),this},r.prototype.deleteTestConfirmation=function(t){return t.preventDefault(),this.$("#test-delete-confirm-dialog").modal()},r.prototype.closeDialog=function(t){return t.preventDefault(),this.$(".close").click()},r.prototype.deleteTest=function(e){return e.preventDefault(),this.$(".close").click(),this.model.destroy({success:function(){return Backbone.history.navigate("tests",!0),setTimeout(function(){return t.util.ajaxmsg("Test has been deleted",!0,!1,2)})},error:function(){return function(t,i){var r;return r=$.parseJSON(i.responseText),$(e.currentTarget).html(r.message),$(e.currentTarget).removeAttr("id")}}(this)})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestDeleteView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-duplicate",r.prototype.className="test-duplicate",r.prototype.events=function(){return{"click #clone_test":"cloneTest"}},r.prototype.render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e)),this},r.prototype.cloneTest=function(e){var i;return i=new t.TestModel({tid:this.model.get("id")}),i.save(null,{success:function(t){return $(e.currentTarget).html("Test created. Click here to go to the test"),$(e.currentTarget).removeAttr("id"),$(e.currentTarget).addClass("js-backbone"),$(e.currentTarget).attr("href","/tests/"+t.get("id")+"/questions")}})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestDuplicateView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-general-settings",r.prototype.className="test-general-settings",r.prototype.events=function(){return{"submit form[name=test-general-settings-form]":"saveGeneralSettings"}},r.prototype.render=function(){var e,i,r,n;return r=this,n=this.model.toJSON(),n&&(i=t.appController.template(this.template,this)({model:n,throbber:t.appController.viewLoader()}),$(this.el).html(i)),e={skin:"moono",entities:!1,htmlEncodeOutput:!0,extraPlugins:"image",removeFormatTags:"input,button",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo","Image"],["Source"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,width:this.$("textarea[name=test-instructions]").width()||780,removePlugins:"elementspath,contextmenu,liststyle,tabletools",filebrowserUploadUrl:"/x/api/v1/editor_uploads",disableNativeSpellChecker:!1},r=this,setTimeout(function(){return CKEDITOR.instances["test-instructions"]&&delete CKEDITOR.instances["test-instructions"],e.width=this.$("textarea[name=test-instructions]").width()||780,this.$("textarea.texteditor").ckeditor(e)}),this},r.prototype.saveGeneralSettings=function(e){var i,r,n,s,o,a,l;return e.preventDefault(),r=CKEDITOR.instances["test-instructions"],r.setMode("wysiwyg"),o=this.$("input[name=test-name]").removeClass("error").val(),i=this.$("input[name=duration]").removeClass("error").val(),s=this.$("textarea[name=test-instructions]").removeClass("error").ckeditorGet().getData(),_.isEmpty(o)?(this.$("input[name=test-name]").addClass("error"),void 0):_.isEmpty(i)?(this.$("input[name=duration]").addClass("error"),void 0):(_.isEmpty(s)&&(n=!0),a={name:o,duration:i,instructions:s},l=this,this.model.save(a,{success:function(){var e;return e={Page:"General Settings",test_id:this.model.get("id")},t.util.track("Edited Test Settings",e),n?l.model.fetch({silent:!0,success:function(t){return s=t.get("instructions"),l.$("textarea[name=test-instructions]").ckeditorGet().insertHtml(s)}}):void 0}}))},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestGeneralSettingsView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(e){var i;return this.user=t.currentUser,this.emails=e.emails,i=this},r.prototype.template="x/test-invite",r.prototype.className="test-invite",r.prototype.events=function(){return{"click #preview":"previewMail","change #emails":"resize","cut #emails":"delayedResize","paste #emails":"delayedResize","drop #emails":"delayedResize","keydown #emails":"delayedResize","click #send_invites":"sendInvites"}},r.prototype.render=function(){var e,i,r,n,s;return n=this,s=this.model.toJSON(),s&&(i=t.appController.template(this.template,this)({model:s,user:this.user,throbber:t.appController.viewLoader(),emails:this.emails.join(", ")}),$(this.el).html(i)),e={skin:"moono",extraPlugins:"invite,image",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Link","Unlink"],["Format","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo","Image","Table"],["Source"],["Invite"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,pasteFromWordRemoveFontStyles:!1,pasteFromWordRemoveStyles:!1,removePlugins:"elementspath,contextmenu,liststyle,tabletools",disableNativeSpellChecker:!1,filebrowserUploadUrl:"/x/api/v1/editor_uploads",width:this.$("textarea[name=email-content]").width()||780},n=this,setTimeout(function(){return CKEDITOR.instances["email-content"]&&delete CKEDITOR.instances["email-content"],e.width=this.$("textarea[name=email-content]").width()||780,this.$("textarea.texteditor").ckeditor(e)}),r=new t.TestSavedResponse({model:t.currentUser,parent:this}),this.$("#saved-responses-container").html(r.render().el),this},r.prototype.resize=function(){var t;return t=this.$("#emails")[0],t.style.height="auto",t.style.height=t.scrollHeight+"px",t.style.maxHeight="250px"},r.prototype.delayedResize=function(){var t;return t=this,window.setTimeout(t.resize,0)},r.prototype.sendInvites=function(e){var i,r,n,s,o,a,l,u;return e.preventDefault(),u=this,this.$(".invite_message").addClass("hidden").removeClass("error"),this.$(".js-erroralert").addClass("hidden"),n=this.$("#emails").removeClass("error").val(),l=this.$("input[name=subject]").val(),r=this.$("textarea[name=email-content]").removeClass("error").ckeditorGet().getData(),_.isEmpty(n)?(this.$("#emails").addClass("error"),void 0):(s={},a=this.$("input[name=prefs-time]:checked").val(),s.time="0"===a?!1:!0,o=this.$("input[name=prefs-link]:checked").val(),s.link="0"===o?!1:!0,t.util.inlineLoadingStart(e.currentTarget),i={emails:n,subject:l,message:r,options:s},$.ajax({url:"/x/api/v1/tests/"+u.model.get("id")+"/invite",data:i,type:"POST",success:function(e){return function(i){var r;return t.util.inlineLoadingEnd(i),i.model&&i.model.invited&&i.model.invited.length>0&&(r={test_id:u.model.get("id"),candidates:i.model.invited.length},t.util.track("Invited candidate",r)),i.model.not_invited.length>0?(u.$(".js-erroralert").removeClass("hidden"),u.$(".js-alertmsg").html("Following emails are invalid, and were not invited: <ul><li>"+i.model.not_invited.join("</li><li>")+"</li></ul>")):e.$("#emails").val(""),u.user.fetch({success:function(t){return u.$(".user-invite-count").html("Invites Remaining: "+t.invites_count())}}),u.model.fetch({success:function(){return t.appView.updateSidebarView()}}),u.$(".invite_message").removeClass("hidden").html(i.message)}}(this),error:function(e){return e=JSON.parse(e.responseText),u.$(".invite_message").removeClass("hidden").addClass("error").html(e.message),t.util.inlineLoadingEnd(e)}}))},r.prototype.previewMail=function(){var t,e,i,r,n;return t=this.$("textarea[name=email-content]").ckeditorGet().getData(),e={},r=this.$("input[name=prefs-time]:checked").val(),e.time="0"===r?!1:!0,i=this.$("input[name=prefs-link]:checked").val(),e.link="0"===i?!1:!0,n=this.model.get("id"),$.post("/x/api/v1/tests/"+n+"/preview_invite",{message:t,options:e},function(t){return $("#preview-body").html(t.message),$("#preview-mail-modal").modal(),!0}),!0},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestInviteView=i})}.call(this),function(){var t,e,i,r,n,s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,u=function(t,e){function i(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};jQuery(function(){}),s=function(e){function i(){return this.loadLib=a(this.loadLib,this),i.__super__.constructor.apply(this,arguments)}return u(i,e),i.prototype.template="x/test-library",i.prototype.className="test-library-view",i.prototype.initialize=function(e){switch(e.library){case"personal":this.library="personal_mine";break;case"shared":this.library="personal_shared";break;default:this.library=e.library}return this.filter=e.filter,this.testmodel=e.testmodel,this.search="",this.tags="",t.tm=this.testmodel,t.LibraryModel.setTid(this.testmodel.get("id")),t.candidate={},this
},i.prototype.events=function(){return{"click .js-searchclear":"clearQuery","keypress .js-search":"setQuery","click .js-tags":"filterTags","click .js-minitest":"toggleSidebar","click .js-closesidebar":"toggleSidebar"}},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({test:this.testmodel.attributes,filter:this.filter,library:this.library}),$(this.el).html(e),setTimeout(this.loadLib,200),this},i.prototype.setQuery=function(t){return 13===t.keyCode?(this.$(".js-searchclear").removeClass("hide"),this.search=this.$(".js-search").val(),this.loadLib()):void 0},i.prototype.clearQuery=function(t){return t.preventDefault(),this.$(t.currentTarget).addClass("hide"),this.$(".js-search").val(""),this.search="",this.loadLib()},i.prototype.filterTags=function(){var t;return t=this.$("input.js-tags").val(),t!==this.tags?(this.tags=t,this.loadLib()):void 0},i.prototype.toggleSidebar=function(t){return t.preventDefault(),this.$(".js-minisidebar").hasClass("hidden")?(this.updateSidebar(),$(".js-minisidebar").removeClass("hidden")):this.$(".js-minisidebar").addClass("hidden")},i.prototype.updateSidebar=function(){var t;return t=new n({testmodel:this.testmodel,parent:this}),this.$(".js-minisidebar").html(t.render().el),this.$(".js-qcount").html(this.testmodel.get("questions_array").length),this.$(".js-points").html(this.testmodel.get("totalpoints")),this.$(".js-minitest").removeClass("hidden")},i.prototype.loadLib=function(){var e;return e=new t.LoadingView,this.$(".libcontent").html(e.render().el),t.LibraryModel.fetch({data:$.param({library:this.library,filter:this.filter,q:this.search,tags:this.tags}),success:function(t){return function(){return t.renderView()}}(this),error:function(t){return console.log("error",t)}})},i.prototype.renderView=function(){var e,i,r,n,s,o,a,l,u,c,d,p;for(n=t.LibraryModel.attributes,this.$(".libcontent").empty(),e=[],1===n.sets.length?e.push("1 set"):n.sets.length>1&&e.push(""+n.sets.length+" sets"),1===n.questions.length?e.push("1 question"):n.questions.length>1&&e.push(""+n.questions.length+" questions"),e.length?this.$(".js-count").html("Found: "+e.join(", ")):(this.$(".js-count").html("Found nothing here."),this.$(".js-nothingfound").removeClass("hide")),this.$(".js-tags").select2("destroy"),n.tags.length>0?(this.$(".js-tags").select2({width:"off",placeholder:"Filter tags",allowClear:!0,multiple:!0,query:function(e){var i,r,s,o,a;for(i={results:[]},a=n.tags,s=0,o=a.length;o>s;s++)r=a[s],i.results.push({id:r,text:t.util.capitalize(r)});return e.callback(i)},initSelection:function(e,i){var r,s,o,a,l;for(r=[],l=n.selected_tags,o=0,a=l.length;a>o;o++)s=l[o],r.push({id:s,text:t.util.capitalize(s)});return i(r)}}),this.$(".js-tags").removeClass("hide")):(this.$(".js-tags").addClass("hide"),this.$(".js-tags").css({display:""})),d=n.sets,a=0,u=d.length;u>a;a++)s=d[a],o=new t.TestLibrarySetView({set:s,test:this.testmodel,parent:this}),this.$(".libcontent").append(o.render().el);for(p=n.questions,l=0,c=p.length;c>l;l++)i=p[l],r=new t.TestLibraryQuestionView({question:i,test:this.testmodel,parent:this}),this.$(".libcontent").append(r.render().el);return this.updateSidebar()},i}(window.HR.GenericView),e=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return u(i,e),i.prototype.template="x/test-library-question",i.prototype.className="test-library-question-view",i.prototype.events=function(){return{"click .js-remove-question":"removeQuestion","click .js-add-question":"addQuestion","click .js-toggleHeight":"toggleHeight"}},i.prototype.initialize=function(t){return this.test=t.test,this.question=t.question,this.parent=t.parent,this.withAns=!0,t.withAns||(this.withAns=t.withAns),this.noexpand="noexpand"in t?t.noexpand:!1,this.actions="actions"in t?t.actions:!0},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({question:this.question,test:this.test.attributes,hrqn:window.istreet.cfg.hrqn,noexpand:this.noexpand,actions:this.actions,withAns:this.withAns}),$(this.el).html(e),this},i.prototype.removeQuestion=function(t){var e,i;return t.preventDefault(),e=this.$(t.currentTarget),i=this,this.test.removeQuestion(e.attr("data-qid"),{success:function(){return function(){return e.addClass("js-add-question btn-primary"),e.removeClass("js-remove-question btn-alert"),e.html("Add"),i.test.fetch({success:function(){return setTimeout(i.parent.updateSidebar())}})}}(this),error:function(){return function(t){return console.log(t)}}(this)})},i.prototype.addQuestion=function(e){var i,r;return e.preventDefault(),i=this.$(e.currentTarget),r=this,this.test.addQuestion(i.attr("data-qid"),null,{success:function(e){return function(){var n;return n={library:e.parent.library,step:"Finish",type:e.question.type,question_id:e.question.id,test_id:e.test.id},t.util.track("Added question from library",n),n={question_id:e.question.id,test_id:e.test.id},t.util.track("Added question",n),i.removeClass("js-add-question btn-primary"),i.addClass("js-remove-question btn-alert"),i.html("Remove"),r.parent.updateSidebar()}}(this),error:function(t){return console.log(t)}})},i.prototype.toggleHeight=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget),"collapsed"===e.attr("data-state")?(e.html('collapse <i class="icon-up-open">'),e.attr("data-state","expanded"),$(this.el).find(".js-qcontent").removeClass("text-ellipsis-oneline")):(e.html('expand <i class="icon-down-open">'),e.attr("data-state","collapsed"),$(this.el).find(".js-qcontent").addClass("text-ellipsis-oneline"))},i}(window.HR.GenericView),r=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return u(i,e),i.prototype.template="x/test-library-set",i.prototype.className="test-library-set-view",i.prototype.events=function(){return{"click .js-showset":"showSetModal"}},i.prototype.initialize=function(t){return this.test=t.test,this.set=t.set,this.parent=t.parent},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({set:this.set,test:this.test.attributes,hrqn:window.istreet.cfg.hrqn}),$(this.el).html(e),this},i.prototype.showSetModal=function(e){var i,r,n;return e.preventDefault(),i=this.$(e.currentTarget),n=new t.TestLibrarySetModalView({set:this.set,test:this.test,parent:this}),this.$(".js-setdetails-wrapper").html(n.render().el),r={width:1e3,"margin-left":-(parseInt(1e3)/2),"min-height":600,height:"80%"},setTimeout(function(t){return function(){return t.$(".js-setdetails").modal().css(r)}}(this),100)},i.prototype.updateSidebar=function(){return this.parent.updateSidebar()},i}(window.HR.GenericView),i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return u(i,e),i.prototype.template="x/test-library-setmodal",i.prototype.className="test-library-setmodal",i.prototype.events=function(){return{"click .js-qview":"showQuestion","click .js-qnext":"nextQuestion","click .js-qprev":"prevQuestion"}},i.prototype.initialize=function(t){return this.set=t.set,this.test=t.test,this.parent=t.parent},i.prototype.updateSidebar=function(){return this.parent.updateSidebar()},i.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({set:this.set,test:this.test.attributes}),$(this.el).html(e),setTimeout(function(t){return function(){return t.$("a[qindex=0]").trigger("click")}}(this)),this},i.prototype.showQuestion=function(e){var i,r,n;return e.preventDefault(),r=this.$(e.currentTarget),r.parent().parent().find(".active").removeClass("active"),r.parent().addClass("active"),n=this.set.questions[r.attr("qindex")],i=new t.TestLibraryQuestionView({question:n,test:this.test,noexpand:!0,parent:this}),this.$(".setqcontents").html(i.render().el)},i.prototype.nextQuestion=function(t){var e,i;return t.preventDefault(),e=this.$(t.currentTarget),i=parseInt(e.parent().parent().find(".active").find("a").attr("qindex")),i===this.set.questions.length-1?i=0:i+=1,e.parent().parent().find("a[qindex="+i+"]").trigger("click")},i.prototype.prevQuestion=function(t){var e,i;return t.preventDefault(),e=this.$(t.currentTarget),i=parseInt(e.parent().parent().find(".active").find("a").attr("qindex")),0===i?i=this.set.questions.length-1:i-=1,e.parent().parent().find("a[qindex="+i+"]").trigger("click")},i}(window.HR.GenericView),n=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return u(i,e),i.prototype.template="x/test-library-sidebar",i.prototype.tagName="div",i.prototype.events=function(){return{"click .js-remove-question":"removeQuestion"}},i.prototype.removeQuestion=function(t){var e,i,r;return t.preventDefault(),e=this.$(t.currentTarget),i=e.attr("data-qid"),r=this,this.testmodel.removeQuestion(i,{success:function(){return function(){return r.$("#q"+i).remove(),r.testmodel.fetch({success:function(){var t;return setTimeout(t=$("a.js-remove-question[data-qid="+i+"]"),t.addClass("js-add-question btn-primary"),t.removeClass("js-remove-question btn-alert"),t.html("Add"),r.parent.updateSidebar())}})}}(this),error:function(){return function(t){return console.log(t)}}(this)})},i.prototype.initialize=function(t){return this.testmodel=t.testmodel,this.test=this.testmodel.toJSON(),this.parent=t.parent,_.bindAll(this,"render")},i.prototype._render=function(){return $(this.el).empty(),$(this.el).html(t.appController.template(this.template,this)({questions:this.test.questions_data})),this},i}(window.HR.GenericView),t=null!=(o=window.HR)?o:{},t.TestLibraryView=s,t.TestLibraryQuestionView=e,t.TestLibrarySetView=r,t.TestLibrarySetModalView=i}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-master-password",r.prototype.className="test-master-password",r.prototype.showSuccess=!1,r.prototype.events=function(){return{"submit form[name=test-master-password-form]":"saveMasterPassword","click #deletePassword":"deleteMasterPassword"}},r.prototype._render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e),i=this,this.showSuccess&&(t.util.showInlineSuccess(this,this.$("button[type=submit]")),this.showSuccess=!1)),this},r.prototype.saveMasterPassword=function(e){var i,r,n;return e.preventDefault(),n=this,r=$("input[name=master-password]").removeClass("error").val(),r?(i={defPassword:r},this.model.save(i,{silent:!0,success:function(){return n.showSuccess=!0,n.render()}})):($("input[name=master-password]").addClass("error"),t.util.inlineLoadingEnd({message:null}))},r.prototype.deleteMasterPassword=function(t){var e,i;return t.preventDefault(),i=this,e={defPassword:""},this.model.save(e,{silent:!0,success:function(){return i.render()}}),this.$(".test-custom-link-wrap").innerHTML("")},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestMasterPasswordView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-mcq-score",r.prototype.className="test-mcq-score",r.prototype.events=function(){return{"submit form[name=test-mcq-score-form]":"saveMCQScore"}},r.prototype._render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e)),this},r.prototype.saveMCQScore=function(t){var e,i,r;return t.preventDefault(),r=parseFloat($("input[name=correct-answer-score]").val()),i=parseFloat($("input[name=wrong-answer-score]").val()),i>0&&(i=-1*i),e={mcq_score:r,mcq_negative_score:i},this.model.save(e,{silent:!0})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestMcqScoreView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(t){var e;return e=this,this.active_nav_link=t.active_nav_link,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},r.prototype.template="x/test-navigation",r.prototype.className="test-navigation",r.prototype.events={"click .js-try-test-btn":"tryTest"},r.prototype.updateData=function(t,e){return this.model=t,this.active_nav_link=e},r.prototype._render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,active_nav_link:this.active_nav_link,throbber:t.appController.viewLoader()}),$(this.el).html(e)),t.currentUser.isLocked()&&this.disableNavigation(),this},r.prototype.disableNavigation=function(){return this.$(".hre-sidebar-link").removeAttr("href")},r.prototype.tryTest=function(){var e;return e={test_id:this.model.get("id")},t.util.track("Tried Test",e)},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestNavigationView=i})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return this.startDlProcess=t(this.startDlProcess,this),this.modalClosed=t(this.modalClosed,this),n.__super__.constructor.apply(this,arguments)}return i(n,r),n.prototype.template="x/test-pdfdownload",n.prototype.className="test-pdfdownload",n.prototype.events=function(){return{"click .js-downloadbtn":"startDlProcess","hidden.bs.modal .js-pdfdlview":"modalClosed"}},n.prototype.initialize=function(t){return this.usecache=!0,this.testmodel=t.testmodel,t.singleaid?(this.single=!0,this.aid=t.singleaid,this.downloading=!1):(this.single=!1,this.batch=t.batch),this.testmodel.setAction("pdf"),this.pdfurl=this.testmodel.url(),this.testmodel.unsetAction(),this.handling_multiple=!1},n.prototype.render=function(){var t;return $(this.el).empty(),t=e.appController.template(this.template,this)({batch:this.batch,single:this.single}),$(this.el).html(t),this},n.prototype.handleDownload=function(){var t;return this.downloading?(e.util.ajaxmsg("Processing download.. please wait.",!1,!0,2),void 0):this.single?(t={aids:[this.aid],cmd:"download",usecache:this.usecache},e.util.ajaxmsg("Downloading.. please wait.",!1,!0,2),this.downloading=!0,$.fileDownload(this.pdfurl,{data:t,httpMethod:"POST",timeout:3e4,successCallback:function(t){return function(){return t.downloading=!1,t.usecache=!t.usecache}}(this),failCallback:function(t){return function(){return t.downloading=!1,e.util.ajaxmsg("Error downloading. Try again a little later.",!1,!0,2)}}(this)})):setTimeout(function(t){return function(){return t.$(".js-pdfdlview").removeClass("hidden").modal()}}(this),100)},n.prototype.modalClosed=function(){return this.handling_multiple=!1},n.prototype.startDlProcess=function(t){var e;if(t.preventDefault(),this.$(".js-batchview").addClass("hide"),this.$(".js-singlebatch").removeClass("hide"),this.batchkey=this.$(t.currentTarget).attr("data-key"),"_all"===this.batchkey){this.aids=[];for(e in this.batch)this.aids=this.aids.concat(this.batch[e])}else this.$(".js-dltitle").html("Downloading reports: <em>"+this.batchkey+"</em>"),this.aids=this.batch[this.batchkey];return 1===this.aids.length?(this.$(".js-pdfprogress").html("Downloading.."),$.fileDownload(this.pdfurl,{data:{aids:this.aids,cmd:"download",usecache:this.usecache},httpMethod:"POST",timeout:3e4,successCallback:function(t){return function(){return t.$(".js-pdfprogress").html("Downloaded.")}}(this),failCallback:function(t){return function(){return t.$(".js-pdfprogress").html("Error downloading. Please try again later.")}}(this)}),void 0):(this.$(".js-pdfprogress").html("Checking PDFs status.."),this.parallel_slots=1,this.aids_done=[],this.aids_notdone=[],this.aids_len=0,this.handling_multiple=!0,$.ajax({url:this.pdfurl,type:"POST",data:$.param({aids:this.aids,cmd:"status"}),traditional:!0,success:function(t){return function(e){var i;return t.aids_done=e.status.done,i=e.status.done.length,t.aids_notdone=e.status.notdone,t.aids_len=t.aids_done.length+t.aids_notdone.length,e.status.parallel_slots&&(t.parallel_slots=e.status.parallel_slots),t.$(".js-pdfprogress").html("Processing.."),t.processingLoop()}}(this),error:function(t){return function(){return t.$(".js-pdfprogress").html("Unable to check reports status.")}}(this)}))},n.prototype._getNotDoneAid=function(){var t;return this.aids_notdone.length>0?(t=this.aids_notdone.splice(this.aids_notdone.length-1),t[0]):null},n.prototype._addNotDoneAid=function(t){return this.aids_notdone.push(t)},n.prototype._addDoneAid=function(t){return this.aids_done.push(t)},n.prototype.processingLoop=function(){var t,e,i,r,n,s;if(this.handling_multiple)return r=this.aids_done.length===this.aids_len,e=this.aids_notdone.length>0,n=this.parallel_slots>0,s=!1,r&&(this.$(".js-pdfprogress").html("Creating zip archive.."),clearTimeout(window.pdftimer),s=!0,$.fileDownload(this.pdfurl,{httpMethod:"POST",timeout:3e4,data:{aids:this.aids_done,cmd:"download"},successCallback:function(t){return function(){return t.$(".js-pdfprogress").html("File should be downloaded shortly.")}}(this),failCallback:function(t){return function(){return t.$(".js-pdfprogress").html("Unable to prepare file for download. Try again later.")}}(this)})),e&&n&&(t=this._getNotDoneAid(),this.parallel_slots=this.parallel_slots-1,i={aids:[t],cmd:"status",usecache:!0},$.ajax({url:this.pdfurl,type:"POST",data:i,success:function(e){return function(){return e.parallel_slots=e.parallel_slots+1,e._addDoneAid(t),e.$(".js-pdfprogress").html("Processed "+e.aids_done.length+" of "+e.aids_len)}}(this),error:function(e){return function(){return e.parallel_slots=e.parallel_slots+1,e._addNotDoneAid(t)}}(this)})),window.pdftimer&&clearTimeout(window.pdftimer),s?void 0:window.pdftimer=setTimeout(function(t){return function(){return t.processingLoop()}}(this),500)},n}(window.HR.GenericView),e=null!=(n=window.HR)?n:{},e.TestReportsPDFView=r})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t};jQuery(function(){var e,r,n,s,o,a,l,u,c,d,p,h,m,f,v,g,y,w,b,T,C,k;return g=function(r){function n(){return this.createQuestion=t(this.createQuestion,this),n.__super__.constructor.apply(this,arguments)}return i(n,r),n.prototype.className="test-question-edit",n.prototype.initialize=function(t){return this._subviews=[],this.isLibrary=t.isLibrary?t.isLibrary:!1,this.isLibrary||(this.testmodel=t.testmodel),this.qid=t.qid,this.type=t.type,this.step=t.step,this.qid?(this.model=this.isLibrary?new e.QuestionModel({id:this.qid,type:this.type}):new e.QuestionModel({id:this.qid,tid:this.testmodel.get("id"),type:this.type}),this.listenTo(this.model,"change",this.render),this.model.fetch()):(this.model=this.isLibrary?new e.QuestionModel({type:this.type}):new e.QuestionModel({tid:this.testmodel.get("id"),type:this.type}),this.listenTo(this.model,"change",this.render))},n.prototype.events=function(){},n.prototype.render=function(){var t,e;switch(_.each(this._subviews,function(){return function(t){return t.destroy()}}(this)),this.isLibrary&&$(".js-create-question").off().on("click",this.createQuestion),this.model.get("type")){case"code":case"approx":t=new l({model:this.model,testmodel:this.testmodel,step:this.step,isLibrary:this.isLibrary}),this._subviews.push(t),$(this.el).html(t.render().el);break;case"design":t=new p({model:this.model,testmodel:this.testmodel,step:this.step,isLibrary:this.isLibrary}),this._subviews.push(t),$(this.el).html(t.render().el);break;case"mcq":case"multiple_mcq":t=new h({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(t),$(this.el).html(t.render().el);break;case"textAns":case"file_upload":case"uml":case"electrical":t=new m({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(t),$(this.el).html(t.render().el);break;case"task":e=new v({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(e),$(this.el).html(e.render().el);break;case"complete":t=new u({model:this.model,testModel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(t),$(this.el).html(t.render().el)}return this},n.prototype.createQuestion=function(t){var i;return t.preventDefault(),i=new e.CreateQuestionModalView({model:e.LibraryModel}),this._subviews.push(i),$("#modal-container").html(i.render().el)},n}(window.HR.GenericView),f=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.initialize=function(t){return this.useDirty=t.useDirty?t.useDirty:!1},r.prototype.template="x/question-tags",r.prototype.className="question-tags",r.prototype.events={"click #add-tag-link":"addTag","keydown #q-tag-inp":"processKey","click .remove-tag":"removeTag"},r.prototype.render=function(){var t,i;return this.tags=null!=(i=this.model.get("tags_array"))?i:[],t=e.appController.template(this.template,this)({tags:this.tags}),$(this.el).html(t),this},r.prototype.addTag=function(t){var e,i,r;return t.preventDefault(),r=this.$("#q-tag-inp"),e=r.val(),r.val(""),_.isEmpty(e)||this.tags.push(e),this.useDirty&&(window.HR.appView.dirty=!0),this.tags=_.uniq(this.tags),i="",_.each(this.tags,function(t){return i+='<span class="label removable q-tags pull-left msR"><span class="tag-val">',i+=t,i+='</span><a href="javascript:;" class="remove-tag">x</a>',i+="</span>&nbsp;"}),this.$(".tag-names-container").html(i)},r.prototype.removeTag=function(t){var e;return t.preventDefault(),this.$(t.currentTarget).parent().remove(),this.tags=[],e=this,this.useDirty&&(window.HR.appView.dirty=!0),this.$("span.q-tags").each(function(){return e.tags.push($(this).find(".tag-val").html())})},r.prototype.processKey=function(t){return 13===t.which?(this.addTag(t),this.$("#q-tag-inp").blur(),this.$("#q-tag-inp").focus()):void 0},r}(window.HR.GenericView),h=function(n){function s(){return this.toggleMultipleAnswers=t(this.toggleMultipleAnswers,this),s.__super__.constructor.apply(this,arguments)}return i(s,n),s.prototype.template="x/question-mcq",s.prototype.className="question-mcq",s.prototype.initialize=function(t){return this.isLibrary=t.isLibrary,this.testmodel=t.testmodel,this._subviews=[],this._choices_views=[],this.tags_view=new f({model:this.model,useDirty:!0}),this._subviews.push(this.tags_view),window.HR.appView.dirty=!1,window.HR.Vent.off("view:dirty").on("view:dirty",this.openDirtyModal)},s.prototype.events=function(){return{"click .js-toggle-richtext":"toggleRichtext","submit form[name=mcq-question-form]":"saveQuestion","click button.js-save-and-add":"saveAndAdd","click .js-add-choice":"addChoice","click #js-toggle-multiple-mcq":"toggleMultipleAnswers"}},s.prototype.render=function(){var t,i,r;return this.richtext=this.model.get("richtext")?this.model.get("richtext"):"False",i=e.appController.template(this.template,this)({model:this.model.toJSON(),edit:this.model.get("id")?!0:!1,test:this.isLibrary?null:this.testmodel.toJSON(),richtext:this.richtext}),$(this.el).html(i),this.$(".js-tags").html(this.tags_view.render().el),t={skin:"moono",extraPlugins:"image,widget,dialog,insertcode",filebrowserUploadUrl:"/x/api/v1/editor_uploads",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo","Image","Table"],["Source","InsertCode"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,allowedContent:!0,width:this.$("textarea[name=problem-description]").width()||780,removePlugins:"elementspath,liststyle",disableNativeSpellChecker:!1},r=this,setTimeout(function(){return CKEDITOR.instances["problem-description"]&&delete CKEDITOR.instances["problem-description"],t.width=this.$("textarea[name=problem-description]").width()||780,this.$("textarea.texteditor").ckeditor(function(){return this.on("change",function(){return window.HR.appView.dirty=!0})},t)}),this.renderChoices(),this},s.prototype.toggleMultipleAnswers=function(){switch(this.model.get("type")){case"mcq":this.model.set({type:"multiple_mcq"},{silent:!0});break;case"multiple_mcq":this.$("ul#choices-container li.active").length>1&&(this.$("ul#choices-container li").removeClass("active").find(".js-mark-answer").html("Mark as answer"),e.util.ajaxmsg("Please select only one option.",!1,!0,5)),this.model.set({type:"mcq"},{silent:!0})}return this},s.prototype.renderChoices=function(){var t,e,i;if(this._choices_views=[],this.model.get("options"))return _.each(this.model.get("options"),function(t){return function(e,i){var n;return n=new r({model:t.model,index:i,parent:t,richtext:t.richtext}),t._subviews.push(n),t._choices_views.push(n),t.$("#choices-container").append(n.render().el)}}(this));for(e=0,i=[];4>e;)t=new r({model:this.model,index:e,parent:this,richtext:this.richtext}),this._subviews.push(t),this._choices_views.push(t),this.$("#choices-container").append(t.render().el),i.push(e++);return i},s.prototype.toggleSelectOption=function(t){var e;return e=this.$(this.$("ul#choices-container li")[t]),"mcq"===this.model.get("type")?e.hasClass("active")?(e.removeClass("active"),e.find(".js-mark-answer").html("Mark as answer")):(this.$("ul#choices-container li").removeClass("active").find(".js-mark-answer").html("Mark as answer"),e.addClass("active"),e.find(".js-mark-answer").html("Unmark as answer")):e.hasClass("active")?(e.removeClass("active"),e.find(".js-mark-answer").html("Mark as answer")):(e.addClass("active"),e.find(".js-mark-answer").html("Unmark as answer")),window.HR.appView.dirty=!0},s.prototype.removeOption=function(t){return 2!==this._choices_views.length?(this._subviews=_.without(this._subviews,t),this._choices_views=_.without(this._choices_views,t),_.each(this._choices_views,function(t,e){return t.setIndex(e)}),window.HR.appView.dirty=!0,t.destroy()):void 0},s.prototype.toggleRichtext=function(t){var e;return t.preventDefault(),"True"!==this.richtext?(this.richtext="True",_.each(this._choices_views,function(t){return t.makeRichText()}),this.$(t.currentTarget).html("(edit as normal text)")):(e=confirm("Converting to plain text will lose some formatting and remove inserted items. Are you sure you want to continue?"))?(this.richtext="False",_.each(this._choices_views,function(t){return t.removeRichText()}),this.$(t.currentTarget).html("(edit as rich text)")):void 0},s.prototype.addChoice=function(t){var e,i;return t.preventDefault(),i=this._choices_views.length,e=new r({model:this.model,index:i,parent:this,richtext:this.richtext}),this._subviews.push(e),this._choices_views.push(e),window.HR.appView.dirty=!0,this.$("#choices-container").append(e.render().el)},s.prototype.saveAndAdd=function(t){return this.saveQuestion(t,!0)},s.prototype.openDirtyModal=function(t){return e.util.confirm({message:"You have unsaved changes. Are you sure you want to navigate from this page?",title:"Unsaved changes",okButtonText:"No, go back",cancelButtonText:"Yes, discard changes",okCallback:function(){return function(){return t.promise()}}(this),cancelCallback:function(){return function(){return window.HR.appView.dirty=!1,t.resolve()}}(this)})},s.prototype.saveQuestion=function(t,i){var r,n,s,o,a,l;return null==i&&(i=!1),t.preventDefault(),this.$("#error-container").hide(),n=[],r=[],_.each(this._choices_views,function(){return function(t){var e;return e=t.getData(),n.push(e.value),e.answer?r.push(parseInt(e.index,10)+1):void 0}}(this)),_.isEmpty(r)?(this.$(".text-error").html("Please select an option as the answer"),this.$("#error-container").show(),void 0):("mcq"===this.model.get("type")&&(r=r[0]),s=this.$("textarea[name=problem-description]").removeClass("error").ckeditorGet().getData(),a={options:n,answer:r,richtext:this.richtext,question:s,tags_array:this.tags_view.tags},this.model.get("id")?l={}:(l={type:this.model.get("type"),step:"Finish"},this.isLibrary||(l.test_id=this.testmodel.get("id"))),o=function(t){return function(){return t.model.save(a,{success:function(r){return _.isEmpty(l)||(e.util.track("Added new other question",l),t.isLibrary?e.util.trackTotango("Added Question - Other","Library"):e.util.trackTotango("Added Question - Other","Tests"),l={},l.question_id=r.get("id"),t.isLibrary||(l.test_id=t.testmodel.get("id")),e.util.track("Added question",l)),window.HR.appView.dirty=!1,i?(setTimeout(function(){return e.util.ajaxmsg("Question saved",!1,!0,5)},300),setTimeout(function(){return t.isLibrary?(Backbone.history.navigate("library/questions/new/"+r.get("type"),!0),e.router.createLibraryQuestion(r.get("type"))):(Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/new/"+r.get("type"),!0),e.router.createQuestion(t.testmodel.get("id"),r.get("type")))},1e3)):t.isLibrary?Backbone.history.navigate("library/questions/"+r.get("id")+"/edit",!0):Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/"+r.get("id")+"/edit",!0)},error:function(t,e){return e=JSON.parse(e.responseText),this.$(".text-error").html(e.message),this.$("#error-container").show()}})}}(this),"multiple_mcq"===this.model.get("type")&&1===r.length?e.util.confirm({message:"You've set one correct answer for this answer while allowing candidates to select multiple answers.  Are you sure you want to allow this?",cancelButtonText:"No, go back",okButtonText:"Yes, save",okCallback:function(){return o()}}):o())},s}(window.HR.GenericView),r=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-mcq-choice",r.prototype.className="question-mcq-choice",r.prototype.tagName="li",r.prototype.initialize=function(t){return this.index=t.index,this.parent=t.parent,this.richtext=t.richtext,this.config={skin:"moono",toolbar:[["Image","Superscript","Subscript","Link","Unlink","Table"]],toolbarCanCollapse:!1,autoUpdateElement:!0,height:100,htmlEncodeOutput:!1,removePlugins:"elementspath,contextmenu,liststyle,tabletools",disableNativeSpellChecker:!1,filebrowserUploadUrl:"/x/api/v1/editor_uploads"}},r.prototype.getData=function(){return"True"===this.richtext?{value:this.$("textarea").ckeditorGet().getData(),index:this.index,answer:$(this.el).hasClass("active")}:{value:this.$("textarea").val(),index:this.index,answer:$(this.el).hasClass("active")}},r.prototype.setIndex=function(t){return this.index=t,this.$(".option-title").html(String.fromCharCode(65+this.index))},r.prototype.events=function(){return{"click div.mcq-option":"toggleSelectOption","click .js-mark-answer":"toggleSelectOption","click .js-remove-option":"removeOption","change .choices":"choiceUpdated"}},r.prototype.render=function(){var t,i,r;return i="",t=!1,this.model.get("options")&&this.model.get("options")[this.index]&&(i=this.model.get("options")[this.index],"mcq"===this.model.get("type")?(this.model.get("answer")===this.index+1||this.model.get("answer")===(this.index+1).toString())&&(t=!0):(_.indexOf(this.model.get("answer"),this.index+1)>-1||_.indexOf(this.model.get("answer"),(this.index+1).toString())>-1)&&(t=!0)),r=e.appController.template(this.template,this)({model:this.model.toJSON(),index:this.index,choice:i,answer:t}),$(this.el).html(r),t&&$(this.el).addClass("active"),"True"===this.richtext&&setTimeout(function(t){return function(){return t.makeRichText()}}(this)),this},r.prototype.toggleSelectOption=function(t){return t.preventDefault(),this.parent.toggleSelectOption(this.index)},r.prototype.removeOption=function(t){return t.preventDefault(),this.parent.removeOption(this)},r.prototype.makeRichText=function(){return this.richtext="True",this.$("textarea").val(this.$("textarea").val()),this.$("textarea").ckeditor(function(){return this.on("change",function(){return window.HR.appView.dirty=!0}),this.container.addClass("mcq-rich-text")
},this.config)},r.prototype.removeRichText=function(){var t,i,r;return this.richtext="False",this.$("textarea").ckeditor(function(){return this.destroy()},this.config),t=this.$("textarea").val(),r=t.replace(/(<([^>]+)>)/gi,""),r=e.util.htmlDecode(r),r=$.trim(r),i=r,this.$("textarea").val(i)},r.prototype.choiceUpdated=function(){return window.HR.appView.dirty=!0},r}(window.HR.GenericView),u=function(r){function n(){return this.saveAndAdd=t(this.saveAndAdd,this),n.__super__.constructor.apply(this,arguments)}return i(n,r),n.prototype.template="x/question-complete",n.prototype.className="question-complete",n.prototype.newOption='<div class="new-choice"><input type="text" /><a href="javascript:;" class="delete-choice" class="txt-alt-grey msL"><i class="icon2-close fnt-sz-big"></i></a><br/></div>',n.prototype.newBlank='<div class="white-grid-block no-margin no-padding blank-container"><div class="mlA"><div class="choices-container"><div class="new-choice"><input type="text" /><a href="javascript:;" class="delete-choice" class="txt-alt-grey msL"><i class="icon2-close fnt-sz-big"></i></a><br/></div></div><button class="btn add-new-choice">Add one more Choice</button></div></div>',n.prototype.initialize=function(t){return this.isLibrary=t.isLibrary,this.testmodel=t.testModel,this._subviews=[],this.eventsSet=!1,this.tags_view=new f({model:this.model}),this._subviews.push(this.tags_view)},n.prototype.events=function(){return{"submit form[name=question-complete-form]":"submit","click button.js-save-and-add":"saveAndAdd"}},n.prototype.render=function(){var t,i;return i=e.appController.template(this.template,this)({model:this.model.toJSON(),edit:this.model.get("id")?!0:!1,test:this.isLibrary?null:this.testmodel.toJSON()}),$(this.el).html(i),this.$(".js-tags").html(this.tags_view.render().el),t={skin:"moono",extraPlugins:"widget,dialog,insertcode",filebrowserUploadUrl:"/x/api/v1/editor_uploads",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo","Table"],["Source","InsertCode"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,allowedContent:!0,width:this.$("textarea[name=problem-description]").width()||780,removePlugins:"elementspath,liststyle",disableNativeSpellChecker:!1},setTimeout(function(){return CKEDITOR.instances["problem-description"]&&delete CKEDITOR.instances["problem-description"],t.width=this.$("textarea[name=problem-description]").width()||780,this.$("textarea.texteditor").ckeditor(t)}),this.setEvents(),this},n.prototype.remove=function(){return $(".add-new-choice").die("click"),$(".add-new-blank").die("click"),$(".delete-choice").die("click"),n.__super__.remove.apply(this,arguments)},n.prototype.setEvents=function(){var t;return t=this,this.eventsSet?void 0:(this.eventsSet=!0,$(".add-new-choice").live("click",function(e){var i;return e.preventDefault(),i=$(e.currentTarget).prev(),i.append(t.newOption)}),$(".add-new-blank").live("click",function(e){var i;return e.preventDefault(),i=$(e.currentTarget).prev(),i.append(t.newBlank)}),$(".delete-choice").live("click",function(t){return t.preventDefault(),$(this).parent().parent().find("div").length>1?$(this).parent().remove():$(this).parent().parent().parent().parent().remove()}))},n.prototype.saveAndAdd=function(t){return this.submit(t,!0)},n.prototype.submit=function(t,i){var r,n,s,o,a,l,u,c,d,p,h,m,f,v,g,y,w,b,T,C;for(null==i&&(i=!1),t.preventDefault(),p=$("textarea[name=problem-statement]"),f=$("#complete-sentence-response-box"),m=$("#problem-text"),h=m.val(),d=p.ckeditorGet().getData(),f.addClass("hidden"),o=$(".blank-container"),c=new Array,w=0,T=o.length;T>w;w++){for(n=o[w],u=new Array,l=$(n).find(".new-choice"),b=0,C=l.length;C>b;b++)a=l[b],y=$(a).find("input").val(),_.isEmpty(y)||u.push(y);_.isEmpty(u)||c.push(u)}return _.isEmpty(h)?(m.addClass("error"),f.addClass("error").removeClass("hidden").html("Question String Cannot be empty"),void 0):_.isEmpty(c)?(f.addClass("error").removeClass("hidden").html("You need to have atleast one option"),void 0):(s=/\{blank\}/g,_.isNull(h.match(s))?(f.addClass("error").removeClass("hidden").html("Question Should have atleast one blank"),void 0):c.length!==h.match(s).length?(f.addClass("error").removeClass("hidden").html("There should be atleast one answer for every blank"),void 0):(p.html(d),r={question:d,complete_string:h,answer:c,tags_array:this.tags_view.tags},v=this,this.model.get("id")?g={}:(g={type:this.model.get("type"),step:"Finish"},this.isLibrary||(g.test_id=this.testmodel.get("id"))),this.model.save(r,{success:function(t){return function(r){return _.isEmpty(g)||(e.util.track("Added new other question",g),t.isLibrary?e.util.trackTotango("Added Question - Other","Library"):e.util.trackTotango("Added Question - Other","Tests"),g={},g.question_id=r.get("id"),t.isLibrary||(g.test_id=v.testmodel.get("id")),e.util.track("Added question",g)),i?(setTimeout(function(){return e.util.ajaxmsg("Question saved",!1,!0,5)},300),setTimeout(function(){return t.isLibrary?(Backbone.history.navigate("library/questions/new/"+v.model.get("type"),!0),e.router.createLibraryQuestion(v.model.get("type"))):(Backbone.history.navigate("tests/"+v.testmodel.get("id")+"/questions/new/"+v.model.get("type"),!0),e.router.createQuestion(v.testmodel.get("id"),v.model.get("type")))},1e3)):t.isLibrary?Backbone.history.navigate("library/questions/"+v.model.get("id")+"/edit",!0):Backbone.history.navigate("tests/"+v.testmodel.get("id")+"/questions/"+v.model.get("id")+"/edit",!0)}}(this),error:function(){return f.addClass("error").removeClass("hidden").html("Could not create question, Try again after some time.")}})))},n}(window.HR.GenericView),m=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-subjective",r.prototype.className="question-subjective",r.prototype.initialize=function(t){return this.isLibrary=t.isLibrary,this.testmodel=t.testmodel,this._subviews=[],this.tags_view=new f({model:this.model}),this._subviews.push(this.tags_view)},r.prototype.events=function(){return{"click button.js-save-and-add":"saveAndAdd","submit form[name=subjective-question-form]":"saveQuestion"}},r.prototype.render=function(){var t,i,r;return i=e.appController.template(this.template,this)({model:this.model.toJSON(),edit:this.model.get("id")?!0:!1,test:this.isLibrary?null:this.testmodel.toJSON()}),$(this.el).html(i),this.$(".js-tags").html(this.tags_view.render().el),t={skin:"moono",extraPlugins:"image,widget,dialog,insertcode",filebrowserUploadUrl:"/x/api/v1/editor_uploads",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo","Image","Table"],["Source","InsertCode"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,allowedContent:!0,width:this.$("textarea[name=problem-description]").width()||780,removePlugins:"elementspath,liststyle",disableNativeSpellChecker:!1},r=this,setTimeout(function(){return CKEDITOR.instances["problem-description"]&&delete CKEDITOR.instances["problem-description"],t.width=this.$("textarea[name=problem-description]").width()||780,this.$("textarea.texteditor").ckeditor(t)}),this},r.prototype.saveAndAdd=function(t){return this.saveQuestion(t,!0)},r.prototype.saveQuestion=function(t,i){var r,n,s,o,a;return null==i&&(i=!1),t.preventDefault(),n=this.$("textarea[name=problem-description]").removeClass("error").ckeditorGet().getData(),o=this.$("#score").val(),r=this.$("#problem-name").val(),this.$("#score").removeClass("error"),this.$("textarea[name=problem-description]").removeClass("error"),_.isEmpty(n)?(this.$("textarea[name=problem-description]").addClass("error"),e.util.ajaxmsg("Problem cannot be empty",!1,!0),void 0):/^\d+$/.test(o)?(s={name:r,question:n,score:parseInt(o),tags_array:this.tags_view.tags},this.model.get("id")?a={}:(a={type:this.model.get("type"),step:"Finish"},this.isLibrary||(a.test_id=this.testmodel.get("id"))),this.model.save(s,{silent:!0,success:function(t){return function(r){return _.isEmpty(a)||(e.util.track("Added new other question",a),t.isLibrary?e.util.trackTotango("Added Question - Other","Library"):e.util.trackTotango("Added Question - Other","Tests"),a={},a.question_id=r.get("id"),t.isLibrary||(a.test_id=t.testmodel.get("id")),e.util.track("Added question",a)),i?(setTimeout(function(){return e.util.ajaxmsg("Question saved",!1,!0,5)},300),setTimeout(function(){return t.isLibrary?(Backbone.history.navigate("library/questions/new/"+r.get("type"),!0),e.router.createLibraryQuestion(r.get("type"))):(Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/new/"+r.get("type"),!0),e.router.createQuestion(t.testmodel.get("id"),r.get("type")))},1e3)):t.isLibrary?Backbone.history.navigate("library/questions/"+r.get("id")+"/edit",!0):Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/"+r.get("id")+"/edit",!0)}}(this)})):(this.$("#score").addClass("error"),e.util.ajaxmsg("Invalid score.",!1,!0,2),void 0)},r}(window.HR.GenericView),v=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-task",r.prototype.className="question-task",r.prototype.events=function(){return{"submit form[name=task-form]":"saveTask"}},r.prototype.initialize=function(t){return this.isLibrary=t.isLibrary,this.isLibrary?void 0:this.testmodel=t.testmodel},r.prototype.render=function(){var t,i,r;return i=e.appController.template(this.template,this)({model:this.model.toJSON(),edit:this.model.get("id")?!0:!1,test:this.isLibrary?null:this.testmodel.toJSON()}),t={skin:"moono",extraPlugins:"image",filebrowserUploadUrl:"/x/api/v1/editor_uploads",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo","Image","Table"],["Source"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,allowedContent:!0,width:this.$("textarea[name=problem-description]").width()||780,removePlugins:"elementspath,liststyle",disableNativeSpellChecker:!1},r=this,setTimeout(function(){return CKEDITOR.instances["problem-description"]&&delete CKEDITOR.instances["problem-description"],t.width=this.$("textarea[name=problem-description]").width()||780,this.$("textarea.texteditor").ckeditor(t)}),$(this.el).html(i),this},r.prototype.saveTask=function(t){var e;return t.preventDefault(),e={},e.question=this.$("textarea[name=problem-description]").removeClass("error").ckeditorGet().getData(),e.task_script=this.$("textarea[name=script]").val(),e.task_duration=parseInt(this.$("#duration").val()),e.task_context=this.$("input[name=context]:checked").val(),e.score=parseInt(this.$("#score").val()),e.name=this.$("#problem-name").val(),console.log(e),this.model.save(e,{silent:!0,success:function(t){return function(e){return t.isLibrary?Backbone.history.navigate("library/questions/"+e.get("id")+"/edit",!0):Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/"+e.get("id")+"/edit",!0)}}(this)})},r}(window.HR.GenericView),p=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-design",r.prototype.className="question-design",r.prototype.initialize=function(t){return this._subviews=[],this.step=t.step,this.isLibrary=t.isLibrary,this.isLibrary?void 0:this.testmodel=t.testmodel},r.prototype.render=function(){var t;return t=e.appController.template(this.template,this)({model:this.model.toJSON(),edit:this.model.get("id")?!0:!1,step:this.step,test:this.isLibrary?null:this.testmodel.toJSON()}),$(this.el).html(t),this.renderStep(this.step),this},r.prototype.renderStep=function(t){var e;switch(t){case"step1":return e=new c({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(e),this.$("#control-overflow").html(e.render().el);case"step2":return e=new d({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(e),this.$("#control-overflow").html(e.render().el)}},r}(window.HR.GenericView),c=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-design-step1",r.prototype.className="question-design-step1",r.prototype.initialize=function(t){return this._subviews=[],this.isLibrary=t.isLibrary,this.testmodel=t.testmodel,this.edit=this.model.get("id")?!0:!1,this.tags_view=new f({model:this.model}),this._subviews.push(this.tags_view)},r.prototype.events=function(){return{"submit form[name=design-question-step1-form]":"saveQuestion","keyup input[name=name]":"validateName"}},r.prototype.render=function(){var t,i,r;return i=e.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(i),this.$(".js-tags").html(this.tags_view.render().el),t={skin:"moono",extraPlugins:"image,widget,dialog,insertcode",filebrowserUploadUrl:"/x/api/v1/editor_uploads",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo","Image","Table"],["Source","InsertCode"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,allowedContent:!0,width:this.$("textarea[name=problem-description]").width()||780,removePlugins:"elementspath,liststyle",disableNativeSpellChecker:!1},r=this,setTimeout(function(){return CKEDITOR.instances["problem-description"]&&delete CKEDITOR.instances["problem-description"],t.width=this.$("textarea[name=problem-description]").width()||780,this.$("textarea.texteditor").ckeditor(t)}),this},r.prototype.validateName=function(t){if($(t.currentTarget).val()){if($(t.currentTarget).hasClass("error"))return $(t.currentTarget).removeClass("error")}else if(!$(t.currentTarget).hasClass("error"))return $(t.currentTarget).addClass("error")},r.prototype.saveQuestion=function(t){var i,r,n,s,o;return t.preventDefault(),i=this.$("input[name=name]").removeClass("error").val(),r=this.$("textarea[name=problem-description]").removeClass("error").ckeditorGet().getData(),s=this.$("#score").val(),this.$("#score").removeClass("error"),/^\d+$/.test(s)?_.isEmpty(i)?(this.$("input[name=name]").addClass("error").focus(),void 0):_.isEmpty(r)?(this.$("textarea[name=problem-description]").addClass("error").focus(),void 0):(n={name:i,question:r,score:parseInt(s),tags_array:this.tags_view.tags},this.model.get("id")?o={}:(o={type:this.model.get("type"),step:"Finish"},this.isLibrary||(o.test_id=this.testmodel.get("id"))),this.model.save(n,{silent:!0,success:function(t){return function(i){return _.isEmpty(o)||(e.util.track("Added new design question",o),o={},o.question_id=i.get("id"),t.isLibrary||(o.test_id=t.testmodel.get("id")),e.util.track("Added question",o),t.isLibrary?e.util.trackTotango("Added Question - Other","Library"):e.util.trackTotango("Added Question - Other","Tests")),t.isLibrary?Backbone.history.navigate("library/questions/"+i.get("id")+"/edit/step2",!0):Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/"+i.get("id")+"/edit/step2",!0)}}(this)})):(this.$("#score").addClass("error"),e.util.ajaxmsg("Invalid score.",!1,!0,2),void 0)},r}(window.HR.GenericView),d=function(r){function n(){return this.toggleFileTree=t(this.toggleFileTree,this),n.__super__.constructor.apply(this,arguments)}return i(n,r),n.prototype.template="x/question-design-step2",n.prototype.className="question-design-step2",n.prototype.langTextMapping={javascript:"Javascript",html:"HTML",css:"CSS"},n.prototype.lang_mime_mapping={css:"text/css",javascript:"text/javascript",html:"text/html"},n.prototype.initialize=function(t){return this._subviews=[],this.isLibrary=t.isLibrary,this.testmodel=t.testmodel,this.language="html",null==this.model.get("multiple_files")?this.model.set("multiple_files","false",{silent:!0}):void 0},n.prototype.events=function(){return{"submit form[name=design-question-step2-form]":"saveQuestion","click .js-code-section-tab":"switchCodeSection","click button.js-save-and-add":"saveAndAdd","change input[name=multiple_files]:checked":"toggleFileTree"}},n.prototype.render=function(){var t,i;return i=e.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(i),this.editorOptions={lineNumbers:!0,lineWrapping:!1,mode:this.lang_mime_mapping[this.language]},t=this.$("textarea#template_html").get(0),e.appController.loadCodeMirrorMode(this.language,function(e){return function(){return t&&!e.tbody_editor?(e.tbody_editor=CodeMirror.fromTextArea(t,e.editorOptions),setTimeout(function(){return e.tbody_editor.refresh()},10)):void 0}}(this)),this},n.prototype.toggleFileTree=function(t){var e;return e=$(t.currentTarget).val(),"true"===e?(this.$(".js-code-stubs-section").slideUp(),this.$(".js-file-structure-section").slideDown()):(this.$(".js-code-stubs-section").slideDown(),this.$(".js-file-structure-section").slideUp()),this.model.set("multiple_files",e,{silent:!0})},n.prototype.switchCodeSection=function(t){var e,i,r;return t.preventDefault(),this.$(t.currentTarget).parent().hasClass("active")?void 0:(r=this.$(".js-code-section-tabs-list li.active").find(".js-code-section-tab").data("lang"),this.model.get(""+r+"_template")!==this.tbody_editor.getValue()&&this.model.set(""+r+"_template",this.tbody_editor.getValue(),{silent:!0}),i=this.$(t.currentTarget).data("id"),r=this.$(t.currentTarget).data("lang"),e=this.$("textarea#"+i).get(0),e&&(this.language=r,this.tbody_editor.setOption("mode",this.lang_mime_mapping[r]),this.tbody_editor.setValue(this.model.get(""+r+"_template")),setTimeout(function(t){return function(){return t.tbody_editor.refresh()}}(this),10)),this.$(".js-code-section-tabs-list li").removeClass("active"),this.$(t.currentTarget).parent().addClass("active"))},n.prototype.saveAndAdd=function(t){return this.saveQuestion(t,!0)},n.prototype.saveQuestion=function(t,i){var r,n,s;if(null==i&&(i=!1),t.preventDefault(),r=this.$(".js-error").addClass("hidden"),s={silent:!0,success:function(t){return function(r){return i?(setTimeout(function(){return e.util.ajaxmsg("Question saved",!1,!0,5)},300),setTimeout(function(){return t.isLibrary?(Backbone.history.navigate("library/questions/new/"+r.get("type"),!0),e.router.createLibraryQuestion(r.get("type"))):(Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/new/"+r.get("type"),!0),e.router.createQuestion(t.testmodel.get("id"),r.get("type")))},1e3)):t.isLibrary?Backbone.history.navigate("library/personal/",!0):Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/",!0)}}(this)},"true"!==this.model.get("multiple_files"))n=this.$(".js-code-section-tabs-list li.active").find(".js-code-section-tab").data("lang"),this.model.get(""+n+"_template")!==this.tbody_editor.getValue()&&this.model.set(""+n+"_template",this.tbody_editor.getValue(),{silent:!0});else if(this.$("input[name=filetree_upload]").val())s.iframe=!0,s.processData=!1,s.files=this.$("input[name=filetree_upload]"),s.dataType="json",s.data=this.model.toJSON(),s.url=this.model.url()+"/upload";else if(!this.model.get("file_url"))return r.removeClass("hidden").find("header").html("There is no file structure provided. Please provide initial files in a zip format for the candidate."),void 0;return this.model.save(null,s)},n}(window.HR.GenericView),l=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-coding",r.prototype.className="question-coding",r.prototype.initialize=function(t){return this._subviews=[],this.step=t.step,this.isLibrary=t.isLibrary,this.isLibrary?void 0:this.testmodel=t.testmodel},r.prototype.render=function(){var t;return t=e.appController.template(this.template,this)({model:this.model.toJSON(),edit:this.model.get("id")?!0:!1,step:this.step,test:this.isLibrary?null:this.testmodel.toJSON()}),$(this.el).html(t),this.renderStep(this.step),this},r.prototype.renderStep=function(t){var e;switch(t){case"step1":return e=new n({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(e),this.$("#control-overflow").html(e.render().el);case"step2":return e=new s({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(e),this.$("#control-overflow").html(e.render().el);case"step3":return e=new o({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(e),this.$("#control-overflow").html(e.render().el);case"step4":return e=new a({model:this.model,testmodel:this.testmodel,isLibrary:this.isLibrary}),this._subviews.push(e),this.$("#control-overflow").html(e.render().el)}},r}(window.HR.GenericView),n=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-coding-step1",r.prototype.className="question-coding-step1",r.prototype.initialize=function(t){return this.isLibrary=t.isLibrary,this.testmodel=t.testmodel,this._subviews=[],this.edit=this.model.get("id")?!0:!1,this.tags_view=new f({model:this.model}),this._subviews.push(this.tags_view)},r.prototype.events=function(){return{"submit form[name=coding-question-step1-form]":"saveQuestion","keyup input[name=name]":"validateName"}},r.prototype.render=function(){var t,i,r;return i=e.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(i),this.$(".js-tags").html(this.tags_view.render().el),t={skin:"moono",extraPlugins:"image,widget,dialog,insertcode",filebrowserUploadUrl:"/x/api/v1/editor_uploads",toolbar:[["Bold","Italic","Underline","Strike","Subscript","Superscript","-","NumberedList","BulletedList","-","Indent","Outdent","-","Link","Unlink"],["Styles","Format","Font","FontSize","TextColor"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo","Image","Table"],["Source","InsertCode"]],toolbarCanCollapse:!1,autoGrow_onStartup:!0,allowedContent:!0,width:this.$("textarea[name=problem-description]").width()||780,removePlugins:"elementspath,liststyle",disableNativeSpellChecker:!1},r=this,setTimeout(function(){return CKEDITOR.instances["problem-description"]&&delete CKEDITOR.instances["problem-description"],t.width=this.$("textarea[name=problem-description]").width()||780,this.$("textarea.texteditor").ckeditor(t)}),this},r.prototype.validateName=function(t){if($(t.currentTarget).val()){if($(t.currentTarget).hasClass("error"))return $(t.currentTarget).removeClass("error")}else if(!$(t.currentTarget).hasClass("error"))return $(t.currentTarget).addClass("error")},r.prototype.saveQuestion=function(t){var i,r,n,s;return t.preventDefault(),i=this.$("input[name=name]").removeClass("error").val(),r=this.$("textarea[name=problem-description]").removeClass("error").ckeditorGet().getData(),_.isEmpty(i)?(this.$("input[name=name]").addClass("error").focus(),void 0):_.isEmpty(r)?(this.$("textarea[name=problem-description]").addClass("error").focus(),void 0):(n={name:i,question:r,tags_array:this.tags_view.tags},this.model.get("id")?s={}:(s={type:this.model.get("type"),step:"Finish"},this.isLibrary||(s.test_id=this.testmodel.get("id"))),this.model.save(n,{silent:!0,success:function(t){return function(i){return _.isEmpty(s)||(e.util.track("Added new coding question",s),t.isLibrary?e.util.trackTotango("Added Question - Coding","Library"):e.util.trackTotango("Added Question - Coding","Tests"),s={},s.question_id=i.get("id"),t.isLibrary||(s.test_id=t.testmodel.get("id")),e.util.track("Added question",s)),t.isLibrary?Backbone.history.navigate("library/questions/"+i.get("id")+"/edit/step2",!0):Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/"+i.get("id")+"/edit/step2",!0)}}(this)}))},r}(window.HR.GenericView),s=function(r){function n(){return this.generateTemplates=t(this.generateTemplates,this),n.__super__.constructor.apply(this,arguments)}return i(n,r),n.prototype.template="x/question-coding-step2",n.prototype.className="question-coding-step2",n.prototype.returnTypes=[{id:"INTEGER",text:"INTEGER"},{id:"STRING",text:"STRING"},{id:"FLOAT",text:"FLOAT"},{id:"LONG_INTEGER",text:"LONG INTEGER"},{id:"INTEGER_ARRAY",text:"INTEGER ARRAY"},{id:"STRING_ARRAY",text:"STRING ARRAY"},{id:"INTEGER_SINGLY_LINKED_LIST",text:"INTEGER SINGLY LINKED LIST"},{id:"FLOAT_SINGLY_LINKED_LIST",text:"FLOAT SINGLY LINKED LIST"},{id:"CHARACTER_SINGLY_LINKED_LIST",text:"CHARACTER SINGLY LINKED LIST"},{id:"STRING_SINGLY_LINKED_LIST",text:"STRING SINGLY LINKED LIST"},{id:"INTEGER_DOUBLY_LINKED_LIST",text:"INTEGER DOUBLY LINKED LIST"},{id:"FLOAT_DOUBLY_LINKED_LIST",text:"FLOAT DOUBLY LINKED LIST"},{id:"CHARACTER_DOUBLY_LINKED_LIST",text:"CHARACTER DOUBLY LINKED LIST"},{id:"STRING_DOUBLY_LINKED_LIST",text:"STRING DOUBLY LINKED LIST"},{id:"VOID",text:"VOID"},{id:"BOOLEAN",text:"BOOLEAN"}],n.prototype.parameterTypes=[{id:"INTEGER",text:"INTEGER"},{id:"STRING",text:"STRING"},{id:"FLOAT",text:"FLOAT"},{id:"LONG_INTEGER",text:"LONG INTEGER"},{id:"INTEGER_ARRAY",text:"INTEGER ARRAY"},{id:"STRING_ARRAY",text:"STRING ARRAY"},{id:"INTEGER_SINGLY_LINKED_LIST",text:"INTEGER SINGLY LINKED LIST"},{id:"FLOAT_SINGLY_LINKED_LIST",text:"FLOAT SINGLY LINKED LIST"},{id:"CHARACTER_SINGLY_LINKED_LIST",text:"CHARACTER SINGLY LINKED LIST"},{id:"STRING_SINGLY_LINKED_LIST",text:"STRING SINGLY LINKED LIST"},{id:"INTEGER_DOUBLY_LINKED_LIST",text:"INTEGER DOUBLY LINKED LIST"},{id:"FLOAT_DOUBLY_LINKED_LIST",text:"FLOAT DOUBLY LINKED LIST"},{id:"CHARACTER_DOUBLY_LINKED_LIST",text:"CHARACTER DOUBLY LINKED LIST"},{id:"STRING_DOUBLY_LINKED_LIST",text:"STRING DOUBLY LINKED LIST"},{id:"BOOLEAN",text:"BOOLEAN"}],n.prototype.langTextMapping={c:"C",cpp:"C++",java:"Java",csharp:"C#",python:"Python 2",php:"PHP",ruby:"Ruby",perl:"Perl",javascript:"Javascript",haskell:"Haskell",clojure:"Clojure",scala:"Scala",go:"Go",objectivec:"Objective C",erlang:"Erlang",groovy:"Groovy",code:"Code",oracle:"Oracle",r:"R",cobol:"Cobol",visualbasic:"VB.NET",java8:"Java 8",r:"R",octave:"Octave"},n.prototype.lang_mime_mapping={c:"text/x-csrc",cpp:"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp",haskell:"text/x-haskell",php:"text/x-php",python:"text/x-python",perl:"text/x-perl",ruby:"text/x-ruby",bash:"text/x-bash",oracle:"text/x-plsql",mysql:"text/x-plsql",sql:"text/x-plsql",clojure:"text/x-scheme",scala:"text/plain",code:"text/plain",go:"text/x-go",javascript:"text/javascript",objectivec:"text/x-csrc",cobol:"text/x-cobol",visualbasic:"text/x-vb",java8:"text/x-java",octave:"text/x-octave",r:"text/x-rsrc"},n.prototype.language_validation_mapping={c:/^[a-z_][a-z0-9_]*$/i,cpp:/^[a-z_][a-z0-9_]*$/i,java:/^[a-z_$][a-z0-9_$]*$/i,csharp:/^[a-z_@][a-z0-9_@]*$/i,haskell:/^[a-z][a-z0-9_']*$/,php:/^[a-z_][a-z0-9_]*$/i,python:/^[a-z_][a-z0-9_]*$/i,perl:/./,ruby:/^[a-z_][a-z0-9_]*$/i,bash:/./,oracle:/./,mysql:/./,sql:/./,clojure:/^[a-z][a-z-]*$/,scala:/^[a-z][a-z0-9_]*$/,code:/./,go:/^[a-z][a-z0-9_]*$/i,erlang:/^[a-z_][a-z0-9_]*$/i,javascript:/^[a-z_$][a-z0-9_$]*$/i,groovy:/./,objectivec:/^[a-z_][a-z0-9_]*$/i,cobol:/./,visualbasic:/./,java8:/^[a-z_$][a-z0-9_$]*$/i,octave:/./,r:/./},n.prototype.initialize=function(t){return this._subviews=[],this.isLibrary=t.isLibrary,this.testmodel=t.testmodel,window.HR.appView.dirty=!1,e.Vent.off("view:dirty").on("view:dirty",function(t){return e.util.confirm({message:"You have unsaved changes. Are you sure you want to navigate from this page?",title:"Unsaved changes",okButtonText:"No, go back",cancelButtonText:"Yes, discard changes",okCallback:function(){return function(){return t.promise()}}(this),cancelCallback:function(){return function(){return window.HR.appView.dirty=!1,t.resolve()}}(this)})})},n.prototype.events=function(){return{"submit form[name=coding-question-step2-form]":"saveQuestion","click label.hr-checkbox":"toggleCheckbox","click a.js-clear-all":"clearAllCheckbox","click a.js-select-all":"checkAllCheckbox","change input[name=template_type]:checked":"toggleCodeStubs","change #code-editor-lang-select2":"changeLanguage","click .js-code-section-tab":"switchCodeSection","click .js-add-parameter":"addParameter","click .js-remove-parameter":"removeParameter","click .js-generate-templates":"confirmAndGenerate"}},n.prototype.render=function(){var t,i,r,n;return i=[],n=this.model.toJSON(),n.allowedLanguages&&(this.allowedLanguages=n.allowedLanguages.split(",")),this.language=_.first(this.allowedLanguages)||"c",r=e.appController.template(this.template,this)({model:this.model.toJSON(),allowedLanguages:this.allowedLanguages}),$(this.el).html(r),this.editorOptions={lineNumbers:!0,lineWrapping:!1,mode:this.lang_mime_mapping[this.language]},t=this.$("textarea#template").get(0),e.appController.loadCodeMirrorMode(this.language,function(e){return function(){var i;return t&&!e.tbody_editor?(e.tbody_editor=CodeMirror.fromTextArea(t,e.editorOptions),setTimeout(function(){return e.tbody_editor.refresh()},10),e.initCodeEditorLanguageSelect2(),e.initReturnTypeSelect2(),e.model.get("functionParams")?(i=e.model.get("functionParams").split(","),_.each(i,function(t,i){return e.initParametersSelect2("#brahma-parameter-select2-"+i)})):e.initParametersSelect2("#brahma-parameter-select2-0")):void 0}}(this)),this},n.prototype.initCodeEditorLanguageSelect2=function(){var t;return t=[],_.each(this.allowedLanguages,function(e){return function(i){return t.push({id:i,text:e.langTextMapping[i]})}}(this)),this.$("#code-editor-lang-select2").select2({width:"200",data:t})},n.prototype.initReturnTypeSelect2=function(){return this.$("#brahma-return-type").select2({width:"off",data:this.returnTypes})},n.prototype.initParametersSelect2=function(t){return this.$(t).select2({width:"220px",data:this.parameterTypes})},n.prototype.changeLanguage=function(t){var i,r;return t.preventDefault(),i=this.$(".js-code-section-tabs-list li.active").find(".js-code-section-tab").data("id"),this.model.get(""+this.language+"_"+i)!==this.tbody_editor.getValue()&&(this.model.set("template_type","2",{silent:!0}),this.model.set(""+this.language+"_"+i,this.tbody_editor.getValue(),{silent:!0}),window.HR.appView.dirty=!0),this.$(".js-code-section-tabs-list li").removeClass("active"),this.$(".js-code-section-tab[data-id=template]").parent().addClass("active"),r=this.$(t.currentTarget).val(),e.appController.loadCodeMirrorMode(r,function(t){return function(){var e;return t.editorOptions.mode=t.lang_mime_mapping[r],e=t.$("textarea#template").get(0),e?(t.language=r,t.tbody_editor.setOption("mode",t.lang_mime_mapping[r]),t.tbody_editor.setValue(t.model.get(""+r+"_template")),setTimeout(function(){return t.tbody_editor.refresh()},10)):void 0}}(this))},n.prototype.switchCodeSection=function(t){var e,i,r;return t.preventDefault(),this.$(t.currentTarget).parent().hasClass("active")?void 0:(i=this.$(".js-code-section-tabs-list li.active").find(".js-code-section-tab").data("id"),this.model.get(""+this.language+"_"+i)!==this.tbody_editor.getValue()&&(this.model.set("template_type","2",{silent:!0}),this.model.set(""+this.language+"_"+i,this.tbody_editor.getValue(),{silent:!0}),window.HR.appView.dirty=!0),i=this.$(t.currentTarget).data("id"),r=this.$("#code-editor-lang-select2").val(),e=this.$("textarea#"+i).get(0),e&&(this.language=r,this.tbody_editor.setOption("mode",this.lang_mime_mapping[r]),this.tbody_editor.setValue(this.model.get(""+r+"_"+i)),setTimeout(function(t){return function(){return t.tbody_editor.refresh()}}(this),10)),this.$(".js-code-section-tabs-list li").removeClass("active"),this.$(t.currentTarget).parent().addClass("active"))},n.prototype.isValidName=function(t){var e,i,r;return r=this,i=this.$(t).removeClass("error").val(),e=[],i.trim()?$("input[name=allowedLanguages]:checked").each(function(){return r.language_validation_mapping[$(this).val()].test(i)?void 0:e.push(r.langTextMapping[r.$(this).val()])}):e.push("ALL languages."),e.length>0?(this.$(t).addClass("error"),this.$("#js-brahma-parameter-error").removeClass("hidden").children("ul").append("<li><b>"+(i.trim()?i:"empty string")+"</b> is not a valid name in "+e.join(", ")+"</li>"),!1):!0},n.prototype.clearAllValidationErrors=function(){return this.$("#js-brahma-parameter-error").addClass("hidden").children("ul").empty()},n.prototype.validateParameter=function(){var t,e;return t=this.$("#brahma-parameters-container .js-brahma-parameter"),this.clearAllValidationErrors(),e=!0,_.each(t.children('[name="functionParameterName"]'),function(t){return function(i){return t.isValidName($(i))?void 0:e=!1
}}(this)),e},n.prototype.addParameter=function(t){var e,i,r,n;return t.preventDefault(),this.validateParameter()?(window.HR.appView.dirty=!0,e=_.last(this.$("#brahma-parameters-container .js-brahma-parameter")),r=1,e&&(i=$(e).find("input.js-parameter-type")[0].getAttribute("data-id"),r=parseInt(i)+1),n="<div class='block js-brahma-parameter'> <input type='hidden' id='brahma-parameter-select2-"+r+"' class=' js-parameter-type' value='INTEGER' data-id='"+r+"' name='functionParameterType'> <input style='width:70px;' type='text' name='functionParameterName' value='' class='msA mmR'></input> <a href='#' class='txt-alt-grey psA js-remove-parameter'><i class='icon2-delete'></i></a> </div>",this.$("#brahma-parameters-container").append(n),this.$(t.target).html('<i class="icon-plus"></i>Add Another'),this.initParametersSelect2("#brahma-parameter-select2-"+r)):void 0},n.prototype.removeParameter=function(t){var e;return t.preventDefault(),window.HR.appView.dirty=!0,(e=this.$(t.currentTarget).parent()).remove(),e.siblings().length<1?this.$("button.btn.js-add-parameter").html('<i class="icon-plus"></i>Add Parameter'):void 0},n.prototype.confirmAndGenerate=function(t){var i,r,n,s,o,a,l;return t.preventDefault(),this.clearAllValidationErrors(),r=this.$("input[name=functionName]").val().trim(),o=this.$("input[name=functionReturn]").val(),(null!=r?r.length:void 0)>0?(i=0,a=null,s=[],l=this,_.each($(".js-brahma-parameter"),function(t){return function(e){var r,n,o,l;return n=null!=(l=a=t.$(e).find("input[name=functionParameterName]"))?l.val():void 0,o=t.$(e).find("input[name=functionParameterType]").val(),o&&t.isValidName(a)?(r=""+o+" "+n,s.push(r)):i+=1}}(this)),i>0?void 0:(n={functionParams:s.join(","),functionName:r,functionReturn:o},this.model.get("template_type")>1?e.util.confirm({okButtonText:"Yes, Generate Code",okCallback:function(){return l.generateTemplates(n,lang)},message:"You have previously edited our auto-generated templates; they will be overwritten if you continue."}):this.generateTemplates(n,lang))):(this.$("#js-brahma-parameter-error").removeClass("hidden").children("ul").append("<li>Function Name cannot be empty.</li>"),void 0)},n.prototype.generateTemplates=function(t,i){var r,n;return this.model.set("functionParams",t.functionParams,{silent:!0}),this.model.set("functionReturn",t.functionReturn,{silent:!0}),this.model.set("functionName",t.functionName,{silent:!0}),this.model.set("allowedLanguages",this.$("input[name=allowedLanguages]:checked").map(function(t,e){return e.value}).toArray().join(","),{silent:!0}),n=this,r=this.model.clone(),r.save(null,{silent:!0,url:this.model.url()+"/generate",success:function(t){var s,o,a,l;return a=t.get("unsupportedLanguages"),o=a.summary,l=function(e){var s;return null==e&&(e=!1),n.model=r,i=n.$("#code-editor-lang-select2").val(),s=n.$(".js-code-section-tabs-list li.active").find(".js-code-section-tab").data("id"),setTimeout(function(){return n.tbody_editor.setValue(t.get(""+i+"_"+s)),n.tbody_editor.refresh()},10),"checked"===$("input.disabledLanguages").attr("checked")&&(e=!0),e?(o.forEach(function(t){return $(t).addClass("active"),n.$("input[name=allowedLanguages][value="+t+"]").removeAttr("checked").closest(".hr-checkbox").removeClass("active")}),n.allowedLanguages=_.difference(n.model.get("languages"),o),n.model.set("allowedLanguages",n.allowedLanguages.join(","),{silent:!0}),n.initCodeEditorLanguageSelect2(),n.$("#code-editor-lang-select2").val(i)):void 0},o&&o.length>0?(s=o.map(function(t){return this.lang_display_mapping[t]}).join(", "),e.util.confirm({title:"Unsupported languages detected.",okButtonText:"Yes, Generate Code",closebutton:!0,okCallback:l,message:"The template generator does not support the following languages you have selected: "+s+". If you continue without deselecting these languages, you should manually enter stubs for them, otherwise your candidates will be confused..<br /> <br /> <label><input class='disabledLanguages' type='checkbox' />Deselect "+s+"</label>"})):l()}})},n.prototype.openLanguageChangeModal=function(t){return e.util.alert({title:"New Languages Added",message:"<p>You have enabled new languages ("+t.join(", ")+") but have not regenerated the function stubs.\n<br/>Please fix this by either deselecting those languages, or generating stubs by clicking on the\n<br/>'Generate Code' link.</p>",okButtonText:"Okay, I'll fix This"})},n.prototype.saveQuestion=function(t){var e,i,r,n;return t.preventDefault(),e=[],r=$("input[name=allowedLanguages]:checked"),_.each(r,function(){return function(t){return e.push(t.value)}}(this)),i=this.$(".js-code-section-tabs-list li.active").find(".js-code-section-tab").data("id"),"0"===this.$("input[name=template_type]:checked").val()?this.model.set("template_type","0",{silent:!0}):this.model.get(""+this.language+"_"+i)!==this.tbody_editor.getValue()&&(this.model.set("template_type","2",{silent:!0}),this.model.set(""+this.language+"_"+i,this.tbody_editor.getValue(),{silent:!0})),n=_.difference(e,this.model.get("languages")).map(function(t){return function(e){return t.langTextMapping[e]}}(this)),"1"===this.model.get("template_type")&&n.length>0?(this.openLanguageChangeModal(n),void 0):(this.model.set("allowedLanguages",e.join(",")),this.model.save(null,{silent:!0,success:function(t){return function(e){return window.HR.appView.dirty=!1,t.isLibrary?Backbone.history.navigate("library/questions/"+e.get("id")+"/edit/step3",!0):Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/"+e.get("id")+"/edit/step3",!0)}}(this)}))},n.prototype.toggleCheckbox=function(t){return t.preventDefault(),window.HR.appView.dirty=!0,$(t.currentTarget).hasClass("active")?($(t.currentTarget).removeClass("active").removeClass("active"),$(t.currentTarget).find("input").removeAttr("checked")):($(t.currentTarget).addClass("active").addClass("active"),$(t.currentTarget).find("input").attr("checked","checked"))},n.prototype.checkAllCheckbox=function(t){var e;return t.preventDefault(),window.HR.appView.dirty=!0,e=this.$("input[name='allowedLanguages']"),_.each(e,function(){return function(t){return $(t).attr("checked","checked")}}(this))},n.prototype.clearAllCheckbox=function(t){var e;return t.preventDefault(),window.HR.appView.dirty=!0,e=this.$("input[name='allowedLanguages']"),_.each(e,function(){return function(t){return $(t).removeAttr("checked")}}(this))},n.prototype.toggleCodeStubs=function(t){var e;return e=$(t.currentTarget).val(),window.HR.appView.dirty=!0,"0"===e?this.$(".js-code-stubs-section").slideUp():(this.$(".js-code-stubs-section").slideDown(),setTimeout(function(t){return function(){return t.tbody_editor.refresh()}}(this),10))},n}(window.HR.GenericView),o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-coding-step3",r.prototype.className="question-coding-step3",r.prototype.initialize=function(t){return this._subviews=[],this.isLibrary=t.isLibrary,this.testmodel=t.testmodel,this.testcases=new e.TestCasesCollection,this.listenTo(this.testcases,"add",this.render),this.listenTo(this.testcases,"remove",this.render),this.listenTo(this.testcases,"reset",this.render),this.testCasesFetched=!1,this.fetchTestcases()},r.prototype.fetchTestcases=function(){var t;return t=this,this.testcases.reset(),this.isLibrary||this.testcases.setTid(this.testmodel.get("id")),this.testcases.setQid(this.model.get("id")),this.testcases.fetch({silent:!0,success:function(){return t.testCasesFetched=!0,t.render(),e.util.ajaxmsg("",!1,!0,0)},error:function(){return t.testCasesFetched=!0,t.render()}})},r.prototype.events=function(){return{"click .js-edit-testcase":"editTestcase","click .js-add-testcase":"addTestcase","click .js-upload-testcases":"uploadTestcases","click .save-question":"saveQuestion","click .js-save-and-add":"saveAndAdd","click .js-select-all":"selectAll","click .js-select-tc":"showHideBatchOperations","click .js-download":"downloadTestcases","click .js-change-difficulty":"changeDifficulty","click .js-change-score":"changeScore","click .js-mark-sample":"markSample","click .js-delete":"deleteSelected","submit form[name=score-change]":"changeScore"}},r.prototype.selectAll=function(){return this.$(".js-select-all:checked").length>0?(this.$(".js-select-tc").prop("checked",!0),this.$(".batch-operations").show()):(this.$(".js-select-tc").prop("checked",!1),this.$(".batch-operations").hide()),this.updateTcids()},r.prototype.showHideBatchOperations=function(){return this.$(".js-select-tc:checked").length>0?(this.$(".js-select-tc:checked").length<this.$(".js-select-tc").length?this.$(".js-select-all").prop("indeterminate",!0):this.$(".js-select-tc:checked").length===this.$(".js-select-tc").length&&(this.$(".js-select-all").prop("indeterminate",!1),this.$(".js-select-all").prop("checked",!0)),this.$(".batch-operations").show()):(this.$(".js-select-all").prop("checked",!1),this.$(".js-select-all").prop("indeterminate",!1),this.$(".batch-operations").hide()),this.updateTcids()},r.prototype.updateTcids=function(){var t,e;return e=this.$(".js-select-tc:checked"),t=_.map(e,function(){return function(t){return $(t).val()}}(this)),this.testcases.setTcids(t)},r.prototype.updateSelected=function(){var t;return"delete"!==this.testcases.getOperation()?(t=this.testcases.getTcids(),this.$(".js-select-tc").prop("checked",!1),_.each(t,function(t){return function(e){return $(t.$(".js-select-tc")[e]).prop("checked",!0)}}(this)),this.showHideBatchOperations()):void 0},r.prototype.performOperation=function(t){return this.$(".operation-loader").show(),this.testcases.batchOperation(t),this.$(".testcase-operations").find("input, .btn, .dropdown").addClass("disabled").attr("disabled","true"),this.$(".js-testcase-row-operation a").addClass("disabled")},r.prototype.changeDifficulty=function(t){var e;return e=$(t.target).text().trim(),_.include(["Easy","Medium","Hard"],e)?(this.testcases.setOperation("changedifficulty"),this.performOperation({type:e})):void 0},r.prototype.changeScore=function(){var t;return this.$(".score-grp").find("input, button").removeClass("error"),t=this.$("input.score").val().trim(),""===t||isNaN(t)?(this.$(".score-grp").find("input, button").addClass("error"),this.$(".score-grp").find("input").focus(),void 0):(this.testcases.setOperation("changescore"),this.performOperation({score:t}))},r.prototype.markSample=function(){return this.testcases.setOperation("marksample"),this.performOperation({sample:!0})},r.prototype.downloadTestcases=function(t){return t&&t.preventDefault(),this.testcases.setOperation("download"),this.testcases.batchOperation()},r.prototype.deleteSelected=function(){var t;return t={title:"Confirm Delete",body:"<div class='row'> Are you sure you want to delete "+this.testcases.getTcids().length+" test case(s)? </div>",buttons:[{name:"Yes","class":"confirm-yes btn-green btn-small",callback:function(t){return function(){return t.testcases.setOperation("delete"),t.performOperation(),t.dialog.destroy()}}(this)},{name:"No","class":"confirm-no btn-default btn-small msL",callback:function(t){return function(){return t.dialog.destroy()}}(this)}]},this.dialog=new e.util.ShowConfirmationDialog(t),this.dialog.render()},r.prototype.render=function(){var t;return t=e.appController.template(this.template,this)({model:this.model.toJSON(),testcases:this.testcases.toJSON(),testCasesFetched:this.testCasesFetched}),$(this.el).html(t),this.$(".batch-operations").find("input, .btn, .dropdown").removeClass("disabled").removeAttr("disabled"),this.testcases.models.length>0&&(this.$("tbody").empty(),_.each(this.testcases.models,function(t){return function(e,i){var r;return e.set("qid",t.model.get("id")),t.isLibrary||e.set("tid",t.testmodel.get("id")),r=new T({model:e,index:i,parent:t}),t._subviews.push(r),t.$("tbody").append(r.render().el)}}(this))),this.updateSelected(),this},r.prototype.fetchTestcaseView=function(){return this.$("tbody").find("tr").addClass("hidden"),this.$("tbody").append('<tr><td colspan="6" class="fnt-wt-600 m">Fetching Test Cases</td></tr>')},r.prototype.saveAndAdd=function(t){return this.saveQuestion(t,!0)},r.prototype.saveQuestion=function(t,i){var r,n,s;return null==i&&(i=!1),t.preventDefault(),n=this,this.testCasesFetched?(r=this.model.get("id"),this.isLibrary||(s=this.testmodel.get("id")),0===this.testcases.models.length?this.openTestCaseAlertModal("no_test_cases",i):-1===_.indexOf(_.map(this.testcases.models,function(t){return t.get("sample")}),!0)?this.openTestCaseAlertModal("no_sample_test_case"):"approx"===this.model.get("type")?this.isLibrary?e.router.navigate("library/questions/"+r+"/edit/step4",!0):e.router.navigate("/tests/"+s+"/questions/"+r+"/edit/step4",!0):i?(setTimeout(function(){return function(){return e.util.ajaxmsg("Question saved",!1,!0,5)}}(this),300),setTimeout(function(t){return function(){return t.isLibrary?(Backbone.history.navigate("library/questions/new/"+t.model.get("type"),!0),e.router.createLibraryQuestion(model.get("type"))):(Backbone.history.navigate("tests/"+s+"/questions/new/"+t.model.get("type"),!0),e.router.createQuestion(s,model.get("type")))}}(this),1e3)):this.isLibrary?e.router.navigate("library/personal/mine",!0):e.router.navigate("/tests/"+s+"/questions",!0)):setTimeout(n.saveQuestion(t),600)},r.prototype.openTestCaseAlertModal=function(t,e){var i;return null==e&&(e=!1),i=new y({model:this.model,qid:this.model.get("id"),tid:this.isLibrary?null:this.testmodel.get("id"),"case":t,isLibrary:this.isLibrary,add_another:e}),this._subviews.push(i),this.$("#testcase-alert-modal-container").html(i.render().el)},r.prototype.editTestcase=function(t){var e,i;return t.preventDefault(),$(t.currentTarget).hasClass("disabled")?void 0:(e=parseInt($(t.currentTarget).data("tcid")),i=this.testcases.at(e),i.fetch({success:function(t){return function(i){var r;return r=new b({model:i,index:e,collection:t.testcases}),t._subviews.push(r),t.$("#testcase-modal-container").html(r.render().el)}}(this)}))},r.prototype.addTestcase=function(t){var i,r,n;return t.preventDefault(),r=this.testcases.models.length,n=new e.TestCaseModel({qid:this.model.get("id"),tid:this.isLibrary?null:this.testmodel.get("id")}),i=new b({model:n,index:r,collection:this.testcases}),this._subviews.push(i),this.$("#testcase-modal-container").html(i.render().el)},r.prototype.uploadTestcases=function(t){var e;return t.preventDefault(),e=new C({collection:this.testcases}),this._subviews.push(e),this.$("#testcase-modal-container").html(e.render().el)},r}(window.HR.GenericView),y=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/testcase-alert-modal",r.prototype.className="testcase-alert",r.prototype.initialize=function(t){return this.isLibrary=t.isLibrary,this.tid=t.tid,this.qid=t.qid,this["case"]=t["case"],this.add_another=t.add_another},r.prototype.events=function(){return{"click .continue-navigation":"continueNavigation"}},r.prototype._render=function(){var t;return t=e.appController.template(this.template,this),$(this.el).html(t),"no_test_cases"===this["case"]?this.$("#testcase-no-cases-alert-modal").modal():"no_sample_test_case"===this["case"]&&this.$("#testcase-no-sample-alert-modal").modal(),this},r.prototype.continueNavigation=function(t){return t.preventDefault(),this.$(".close").click(),"approx"===this.model.get("type")?this.isLibrary?e.router.navigate("/library/questions/"+this.qid+"/edit/step4",!0):e.router.navigate("/tests/"+this.tid+"/questions/"+this.qid+"/edit/step4",!0):(this.add_another&&(setTimeout(function(){return function(){return e.util.ajaxmsg("Question saved",!1,!0,5)}}(this),300),setTimeout(function(t){return function(){return t.isLibrary?(Backbone.history.navigate("library/questions/new/"+t.model.get("type"),!0),e.router.createLibraryQuestion(t.model.get("type"))):(Backbone.history.navigate("tests/"+t.tid+"/questions/new/"+t.model.get("type"),!0),e.router.createQuestion(t.tid,t.model.get("type")))}}(this),1e3)),this.isLibrary?e.router.navigate("/library/personal",!0):e.router.navigate("/tests/"+this.tid+"/questions",!0))},r}(window.HR.GenericView),T=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/testcase-row",r.prototype.className="testcase-row",r.prototype.tagName="tr",r.prototype.initialize=function(t){return this.index=t.index,this.parent=t.parent,this.listenTo(this.model,"change",this.render)},r.prototype.events=function(){return{"click .js-remove-testcase":"removeTestcase","click .js-download-testcase":"downloadTestcase"}},r.prototype.render=function(){var t;return t=e.appController.template(this.template,this)({testcase:this.model.toJSON(),index:this.index}),$(this.el).html(t),this},r.prototype.removeTestcase=function(t){var e;return t.preventDefault(),$(t.currentTarget).hasClass("disabled")?void 0:(e=new w({model:this.model,parent:this}),this.parent.$("#testcase-modal-container").html(e.render().el))},r.prototype.downloadTestcase=function(t){return t.preventDefault(),$(t.currentTarget).hasClass("disabled")?void 0:$.getJSON(this.model.downloadURL(),function(){return function(t){var e;return t.status===!0?(e=t.model,$.fileDownload(e.input),$.fileDownload(e.output)):console.log("error")}}(this))},r}(window.HR.GenericView),b=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/testcase-edit-modal",r.prototype.className="testcase-edit-modal",r.prototype.initialize=function(t){return this.index=t.index},r.prototype.events=function(){return{"submit form[name=edit-testcase-form]":"saveTestcase"}},r.prototype.render=function(){var t;return t=e.appController.template(this.template,this)({model:this.model.toJSON(),index:this.index}),$(this.el).html(t),this.$("#edit-testcase-modal").modal(),this},r.prototype.saveTestcase=function(t){var e;return t.preventDefault(),e={name:this.$("input[name=name]").val()||"Testcase "+this.index,type:this.$("select[name=type]").val()||"Easy",score:parseInt(this.$("input[name=score]").val()),input:this.$("textarea[name=input]").val(),output:this.$("textarea[name=output]").val(),sample:this.$("input[name=sample]:checked").length>0?!0:!1},this.model.save(e,{success:function(t){return function(e){return e.collection?t.$(".close").click():(t.$(".close").click(),t.collection.add(e))}}(this)})},r}(window.HR.GenericView),C=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/testcases-upload-modal",r.prototype.className="testcases-upload-modal",r.prototype.events=function(){return{"submit form[name=upload-testcases-form]":"uploadTestcases"}},r.prototype.render=function(){var t;return t=e.appController.template(this.template,this),$(this.el).html(t),this.$("#upload-testcases-modal").modal(),this},r.prototype.uploadTestcases=function(t){var e;return t.preventDefault(),this.$(".alert").addClass("hidden"),e={url:this.collection.url(),type:"POST",dataType:"json",success:function(t){return function(e){return"Success"===e.message?(t.$(".close").click(),t.collection.fetch()):(t.$(".alert").html(e.message),t.$(".alert").removeClass("hidden"))}}(this),error:function(){return function(){return console.log("error")}}(this)},$(":file").length>0&&(e.iframe=!0,e.processData=!1,e.files=$(":file")),$.ajax(e)},r}(window.HR.GenericView),w=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/testcase-delete-modal",r.prototype.className="testcase-delete-modal",r.prototype.initialize=function(t){return this.parent=t.parent,r.__super__.initialize.call(this,t)},r.prototype.events=function(){return{"click .js-delete-testcase":"deleteTestcase"}},r.prototype.render=function(){var t;return t=e.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(t),this.$("#delete-testcase-modal").modal(),this},r.prototype.deleteTestcase=function(){return this.$(".close").click(),e.util.ajaxmsg("Loading...",!1,!0,1e3),this.model.destroy({success:function(t){return function(){return t.parent.parent.fetchTestcaseView(),t.parent.parent.fetchTestcases()}}(this),error:function(){return function(){return console.log("error")}}(this)})},r}(window.HR.GenericView),a=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.template="x/question-coding-step4",r.prototype.className="question-coding-step4",r.prototype.langTextMapping={c:"C",cpp:"C++",java:"Java",csharp:"C#",python:"Python",php:"PHP",ruby:"Ruby",perl:"Perl",javascript:"Javascript",haskell:"Haskell",clojure:"Clojure",scala:"Scala",go:"Go",objectivec:"Objective C",erlang:"Erlang",groovy:"Groovy",code:"Code",oracle:"Oracle",r:"R",java8:"Java 8"},r.prototype.lang_mime_mapping={c:"text/x-csrc",cpp:"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp",haskell:"text/x-haskell",php:"text/x-php",python:"text/x-python",perl:"text/x-perl",ruby:"text/x-ruby",bash:"text/x-bash",oracle:"text/x-plsql",mysql:"text/x-plsql",sql:"text/x-plsql",clojure:"text/x-scheme",scala:"text/plain",code:"text/plain",go:"text/x-go",javascript:"text/javascript",objectivec:"text/x-csrc",java8:"text/x-java"},r.prototype.initialize=function(t){return this.isLibrary=t.isLibrary,this.testmodel=t.testmodel,this.savedCodes={}},r.prototype.events=function(){return{"submit form[name=coding-question-step4-form]":"saveQuestion","change #code-editor-lang-select2":"changeLanguage","click button.js-save-and-add":"saveAndAdd"}},r.prototype.render=function(){var t,i;return i=e.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(i),this.language=this.model.get("evaluator_language")?this.model.get("evaluator_language"):"cpp",this.editorOptions={lineNumbers:!0,lineWrapping:!1,mode:this.lang_mime_mapping[this.language]},t=this.$("textarea#evaluator_code").get(0),e.appController.loadCodeMirrorMode(this.language,function(e){return function(){return t&&!e.tbody_editor&&(e.tbody_editor=CodeMirror.fromTextArea(t,e.editorOptions),setTimeout(function(){return e.tbody_editor.refresh()},10)),e.initCodeEditorLanguageSelect2()}}(this)),this},r.prototype.initCodeEditorLanguageSelect2=function(){var t;return t=[],_.each(this.langTextMapping,function(){return function(e,i){return t.push({id:i,text:e})}}(this)),this.$("#code-editor-lang-select2").select2({width:"off",data:t})},r.prototype.changeLanguage=function(t){var i;return t.preventDefault(),this.savedCodes[this.language]=this.tbody_editor.getValue(),i=this.$(t.currentTarget).val(),e.appController.loadCodeMirrorMode(i,function(t){return function(){var e;return t.editorOptions.mode=t.lang_mime_mapping[i],e=t.$("textarea#evaluator_code").get(0),e?(t.language=i,t.tbody_editor.setOption("mode",t.lang_mime_mapping[i]),t.savedCodes[t.language]?t.tbody_editor.setValue(t.savedCodes[t.language]):t.tbody_editor.setValue(""),setTimeout(function(){return t.tbody_editor.refresh()},10)):void 0}}(this))},r.prototype.saveAndAdd=function(t){return this.saveQuestion(t,!0)},r.prototype.saveQuestion=function(t,i){return null==i&&(i=!1),t.preventDefault(),this.model.set("evaluator_language",this.language,{silent:!0}),this.model.set("evaluator_code",this.tbody_editor.getValue(),{silent:!0}),this.model.save(null,{silent:!0,success:function(t){return function(r){return i?(setTimeout(function(){return e.util.ajaxmsg("Question saved",!1,!0,5)},300),setTimeout(function(){return t.isLibrary?(Backbone.history.navigate("library/questions/new/"+r.get("type"),!0),e.router.createLibraryQuestion(r.get("type"))):(Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions/new/"+r.get("type"),!0),e.router.createQuestion(t.testmodel.get("id"),r.get("type")))},1e3)):t.isLibrary?Backbone.history.navigate("library/personal",!0):Backbone.history.navigate("tests/"+t.testmodel.get("id")+"/questions",!0)}}(this)})},r}(window.HR.GenericView),e=null!=(k=window.HR)?k:{},e.TestQuestionEditView=g})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-questions-shuffling",r.prototype.className="test-questions-shuffling",r.prototype.events=function(){return{"submit form[name=questions-shuffling-form]":"saveQuestionsShuffling"}},r.prototype._render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e)),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(t){return function(){return t.$(".switch").bootstrapSwitch()}}(this),200),this},r.prototype.saveQuestionsShuffling=function(t){var e,i;return t.preventDefault(),i=this.$("input[name=questions-shuffling]").attr("checked"),e=i?{shuffle_questions:"True"}:{shuffle_questions:"False"},this.model.save(e,{silent:!0})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestQuestionsShufflingView=i})}.call(this),function(){var t,e,i,r=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};jQuery(function(){}),e=function(e){function i(){return this.downloadPDF=r(this.downloadPDF,this),i.__super__.constructor.apply(this,arguments)}return s(i,e),i.prototype.initialize=function(t){var e;return e=this,"download"===t.action?(this.action="download",this.withAns=!0):"downloadnoans"===t.action?(this.action="download",this.withAns=!1):this.action=t.action,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.removeQuestionId=null},i.prototype.template="x/test-questions",i.prototype.className="test-questions-view",i.prototype.events=function(){return{"click .js-toggle-question-desc":"toggleQuestionDesc","click .js-createnew":"createNew","click .js-create-question":"createQuestion","click .js-question-remove":"removeQuestion","click #undo-remove-question":"undoRemoveQuestion","click #test-download-btn":"downloadPDF"}},i.prototype.render=function(){var e,i,r;return i=this,$(".tooltip").hide(),r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,removeQuestionId:this.removeQuestionId,throbber:t.appController.viewLoader(),h:window.istreet.cfg.permissions,action:this.action}),$(this.el).html(e),this.$(".tip").tooltip()),"download"===this.action&&this.downloadQuestions(this.withAns),this.makeButtonsResponsive(),setTimeout(function(e){return function(){return e.$("#questions-sortable").sortable({revert:!0,handle:".draggable",stop:function(){var i;return i=[],e.$("#questions-sortable tr").not(".q-desc").each(function(){return $(this).data("qid")?i.push($(this).data("qid")+""):void 0}),t.util.compareArrays(i,e.model.get("questions_array"))||0!==_.difference(e.model.get("questions_array"),i).length?void 0:(e.model.set("questions_array",i,{silent:!0}),e.model.save(null,{success:function(){var i;return i={Page:"Questions",test_id:e.model.get("id")},t.util.track("Edited Test Settings",i),e.model.fetch()}}))}})}}(this),300),"new"===this.action&&this.$(".js-create-question").trigger("click"),this},i.prototype.remove=function(){return $(".tooltip").hide(),i.__super__.remove.apply(this,arguments)},i.prototype.downloadQuestions=function(e){var i,r,n,s,o,a,l,u;for(null==e&&(e=!0),i=this.$("#questions-download"),n=1,l=this.model.get("questions_data"),u=[],o=0,a=l.length;a>o;o++)r=l[o],r.question_index=n++,s=new t.TestLibraryQuestionView({question:r,test:this.model,noexpand:!0,actions:"download",withAns:e}),u.push(i.append(s.render().el));return u},i.prototype.downloadPDF=function(e){var i;return e.preventDefault(),i=function(e){return function(i){return t.util.ajaxmsg("Generating question list as PDF... please wait.",!1,!1),$.fileDownload("/x/api/v1/tests/"+e.model.get("id")+"/download?authkey="+e.model.get("authkey")+"&withAns="+i,{httpMethod:"GET",timeout:1e4,successCallback:function(){return t.util.ajaxmsg("Downloading question list as PDF... please wait.",!1,!0,2)},failCallback:function(){return t.util.ajaxmsg("Error downloading. Try again a little later.",!1,!0,2)}})}}(this),t.util.confirm({title:"Save Test as PDF",width:600,closebutton:!0,okButtonText:"Save Recruiter View",cancelButtonText:"Save Candidate View",message:"In the Recruiter View, the saved PDF will include answers to certain question types, like multiple-choice questions.<br/>In the Candidate view the saved PDF will only include the questions.",okCallback:function(){return i(!0)},cancelCallback:function(){return i(!1)}})},i.prototype.toggleQuestionDesc=function(e){var i,r,n,s,o,a,l,u;if(e.preventDefault(),n=$(e.currentTarget).data("qid"),this.$("#q-"+n+"-desc").hasClass("hidden")?(this.$("#q-"+n+"-desc").removeClass("hidden"),$(e.currentTarget).find("i").removeClass("icon-down-open").addClass("icon-up-open")):(this.$("#q-"+n+"-desc").addClass("hidden"),$(e.currentTarget).find("i").removeClass("icon-up-open").addClass("icon-down-open")),i=this.$(".js-question-desc[data-qid="+n+"]"),"0"===i.attr("data-rendered")){for(i.attr("data-rendered","1"),r=null,u=this.model.get("questions_data"),a=0,l=u.length;l>a;a++)if(s=u[a],s.id===n){r=s;break}if(!r)return i.html("<em>Question info unavailable.</em>"),void 0;o=new t.TestLibraryQuestionView({question:r,test:this.model,noexpand:!0,actions:!1}),i.html(o.render().el)}return this.makeButtonsResponsive()},i.prototype.createQuestion=function(e){var i;return e.preventDefault(),i=new t.CreateQuestionModalView({model:this.model}),this.$("#modal-container").html(i.render().el)},i.prototype.removeQuestion=function(e){var i,r,n;return e.preventDefault(),r=$(e.currentTarget).data("question-id"),i=parseInt($(e.currentTarget).data("index"),10),n=new t.RemoveQuestionModalView({model:this.model,parent:this,qid:r,index:i}),this.$("#modal-container").html(n.render().el)},i.prototype.showUndoMessage=function(t,e){return this.removeQuestionId={id:t,index:e},this.render()},i.prototype.hideUndoMessage=function(){return this.removeQuestionId=null},i.prototype.undoRemoveQuestion=function(t){var e,i,r;return t.preventDefault(),r=this,i=$(t.currentTarget).data("qid"),e=parseInt($(t.currentTarget).data("index"),10),this.hideUndoMessage(),this.model.addQuestion(i,e,{success:function(){return console.log("success"),r.model.fetch()},error:function(){return console.log("error")}})},i.prototype.makeButtonsResponsive=function(){var t,e,i;if(e=$("#control-overflow")[0],i=$("#responsive-bottom-holder")[0],t=$("#responsive-bottom-holder").html(),e)if(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth){if($(".overflow-content").addClass("support-reponsive-bottom-holder"),$("#responsive-bottom-holder").length>0)return $("#responsive-bottom-holder").addClass("hidden"),$("#responsive-bottom-placeholder").html(t),$("#responsive-bottom-placeholder").addClass("float-bottom")}else if($(".overflow-content").removeClass("support-reponsive-bottom-holder"),$("#responsive-bottom-holder").length>0)return $("#responsive-bottom-holder").removeClass("hidden"),$("#responsive-bottom-placeholder").html(""),$("#responsive-bottom-placeholder").removeClass("float-bottom")},i}(window.HR.GenericView),t=null!=(i=window.HR)?i:{},t.TestQuestionsView=e}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e},i=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){return function(){return t.apply(e,arguments)}};jQuery(function(){var t,n,s,o,a,l,u,c,d,p,h,m,f,v,g;return v=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report",r.prototype.className="test-report",r.prototype.initialize=function(e){return this._subviews=[],this.testmodel=e.testmodel,this.aid=e.aid,this.tid=e.tid,this.qid=e.qid,this.user=t.currentUser,this.tab=e.tab,this.auth_pass=e.auth_pass?e.auth_pass:null,this.tq_split={},this.anonymize=!1,ZeroClipboard.config({debug:!1}),this.model=new t.TestAttemptModel({id:this.aid,tid:this.tid,auth_pass:this.auth_pass}),this.summary_view=new t.ReportSummaryView({model:this.model,testmodel:this.testmodel,tq_split:this.tq_split,parent:this,tab:this.tab}),this._subviews.push(this.summary_view),this.detailed_view=new t.ReportDetailedView({model:this.model,testmodel:this.testmodel,qid:this.qid,parent:this,tab:this.tab}),this._subviews.push(this.detailed_view),this.timeline_view=new t.ReportTimelineView({model:this.model,testmodel:this.testmodel,parent:this}),this._subviews.push(this.timeline_view),this.listenTo(this.model,"change",this.render),this.model.fetch({data:{auth_pass:this.auth_pass},error:function(t,e){return 403===e.status?bootbox.alert("Bad password.",function(){return Backbone.history.loadUrl(Backbone.history.fragment)
}):void 0}})},r.prototype.events=function(){return{"click .js-report-tab":"changeTab","click .js-share":"shareReport","click .js-pdf":"downloadPDF","click .js-set-ats":"setAts","click .js-reportlink":"shareReportTrack"}},r.prototype._render=function(){var e;return this.timeline_view.buildGoogleDatatable(),this.model.get("questions")&&this.getQuestionTime(),this.checkAnonymize(),e=t.appController.template(this.template,this)({test:this.testmodel.toJSON(),user:this.user.toJSON(),tab:this.tab,model:this.model.toJSON(),anonymize:this.anonymize}),$(this.el).html(e),this.renderTab(this.tab,this.qid),this},r.prototype.checkAnonymize=function(){return this.testmodel.get("authkey_used")?this.anonymize=this.testmodel.get("anonymize")?!0:this.model.get("anonymize")?"developer"===t.currentUser.get("role")?!0:t.currentUser.get("role")?t.currentUser.get("company_id")!==this.testmodel.get("company_id")?!0:!1:!0:!1:t.currentUser&&t.currentUser.get("email")?this.anonymize=this.model.get("anonymize")&&"developer"===t.currentUser.get("role")?!0:!t.currentUser.canViewCandidateDetails():void 0},r.prototype.shareReportTrack=function(){var e;return e={attempt_id:this.model.get("id"),test_id:this.testmodel.get("id")},t.util.track("Shared Test Report",e)},r.prototype.setAts=function(e){var i,r;return e.preventDefault(),r=this.$(e.currentTarget),i=parseInt(r.attr("data-attribute-ats")),this.testmodel.setAction("set_attempts_ats"),this.$(".js-dropdowntxt").html("Saving new status.."),this.testmodel.save({aids:[this.model.get("id")],set_ats:i},{success:function(e){return function(){return e.testmodel.unsetAction(),e.model.fetch(),e.testmodel.fetch({success:function(){var r;return t.appView.updateSidebarView(),r={candidate_id:e.model.get("id"),action:"ATS State change",value:i},t.util.track("Edited Test Report",r)}})}}(this),error:function(t){return function(){return t.testmodel.unsetAction(),t.$(".js-dropdowntxt").html("Status: "+window.istreet.cfg.ats[t.model.get("ats_state")])}}(this)})},r.prototype.changeTab=function(t){var e,i,r;return t.preventDefault(),r=$(t.currentTarget).data("tab"),i=$(t.currentTarget).data("qid"),this.$(".sub-topbar-tabs li").removeClass("active"),this.$(".sub-topbar-tabs li a[data-tab="+r+"]").parent().addClass("active"),e="/x/tests/"+this.tid+"/candidates/"+this.aid+"/report/"+r,i&&(e+="/"+i),window.history&&history.pushState&&window.history.pushState(null,null,e),this.renderTab(r,i)},r.prototype.renderTab=function(e,i){return null==i&&(i=null),this.model.get("test")?(this.pdfview=new t.TestReportsPDFView({singleaid:this.model.get("id"),testmodel:this.testmodel}),"summary"===e?this.$("#report-tab-content-container").html(this.summary_view.render().el):"detailed"===e?this.$("#report-tab-content-container").html(this.detailed_view.render(i).el):"timeline"===e?this.$("#report-tab-content-container").html(this.timeline_view.render().el):"pdf"===e?(this.$("#report-tab-content-container").html(this.summary_view.render().el),this.$("#report-tab-content-container").append(this.detailed_view.render(i).el),this.$("#report-tab").css({overflow:"initial"}),setTimeout(function(t){return function(){return $("body").attr("style","font-family:sans-serif !important;font-weight:normal;font-style:normal"),t.$(".text-ellipsis-span").removeClass("text-ellipsis-span"),t.$("p").attr("style","font-family:sans-serif !important;"),t.$("button").attr("style","font-family:sans-serif !important;")}}(this),100)):void 0):void 0},r.prototype.getQuestionTime=function(){var t,e,i,r,n,s,o,a,l,u,c,d;for(i=this.model.get("questions_time_split"),u=this.model.get("questions"),d=[],t=s=0,a=u.length;a>s;t=++s)if(r=u[t],this.tq_split[t+1]=null,this.timeline_view.qarray&&this.timeline_view.qarray[t+1]){for(n=0,c=this.timeline_view.qarray[t+1],o=0,l=c.length;l>o;o++)e=c[o],n+=e[1]-e[0];d.push(this.tq_split[t+1]=n)}else i?d.push(this.tq_split[t+1]=i[r.id]):d.push(void 0);return d},r.prototype.shareReport=function(t){return t.preventDefault(),this.$(".sharereport-modal").modal(),this.$("#copy-share-link-report").popover({content:"Link has been copied",trigger:"none"}),$("#global-zeroclipboard-html-bridge").css("position","fixed"),this.initializeCopy()},r.prototype.initializeCopy=function(){var t,e,i;return e=this,i=""+document.location.host+"/x/tests/"+this.testmodel.get("id")+"/candidates/"+this.model.get("id")+"/report?authkey="+this.testmodel.get("authkey"),this.$(".js-reportlink").val(i),this.$("#copy-share-link-report").attr("data-clipboard-text",i),this.$("#report-link-inp").select(),t=new ZeroClipboard(this.$("#copy-share-link-report"),{container:$("div.modal.fade.sharereport-modal")}),t.on("complete",function(){var t;return $(this).popover("show"),t=$(this),e.shareReportTrack(),setTimeout(function(){return function(){return t.popover("hide"),e.initializeCopy()}}(this),2e3)})},r.prototype.downloadPDF=function(t){return t.preventDefault(),this.pdfview.handleDownload()},r}(window.HR.GenericView),m=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-summary",r.prototype.className="test-report-summary",r.prototype.initialize=function(t){return this.testmodel=t.testmodel,this.parent=t.parent,this.tq_split=t.tq_split,this.tab=t.tab},r.prototype.events=function(){return{"keyup #add_new_report_comment":"addReportComment"}},r.prototype.addReportComment=function(e){var i,r,n,s;return 13===e.which||13===e.keyCode?(e.preventDefault(),n=this,i=this.$("#add_new_report_comment").val(),i?(r={comment:i,qid:0},s="/x/api/v1/tests/"+this.model.get("tid")+"/attempts/"+this.model.get("id")+"/report_comment",$.post(s,r,function(e){return function(i){var r,s;return i.status===!0?(r='<div class="msT msB"> <p>'+_.escape(i.model.comment)+'</p> <p class="txt-alt-grey">- '+i.model.name+" ("+t.util.formatDateTime(i.model.inserttime)+")</p> </div>",e.$(".comments_container").append(r),e.$("#add_new_report_comment").val(""),n.model.fetch({silent:!0}),s={candidate_id:e.model.get("id"),action:"Feedback"},t.util.track("Edited Test Report",s)):void 0}}(this))):alert("Please type a comment, and press enter.")):!0},r.prototype._render=function(){var e,i,r,n;return r=[],this.model.get("test")&&(this.parent.anonymize===!1&&_.each(this.model.get("candidate_details"),function(t){if("gender"!==t.field_name)return r.push(t);switch(t.value){case"m":return r.push({title:"GENDER",value:"Male"});case"f":return r.push({title:"GENDER",value:"Female"})}}),this.model.get("ip_address")&&r.push({title:"IP ADDRESS",value:this.model.get("ip_address")}),this.model.get("inviter")&&r.push({title:"INVITED BY",value:this.model.get("inviter")}),this.model.get("scores_tags_split")&&(i="",_.each(this.model.get("scores_tags_split"),function(){return function(t,e){return i+='<span class="label q-tags">'+e+"</span> "+t+"<br/>"}}(this)),r.push({title:"TAG SCORE",value:i}))),e=t.appController.template(this.template,this)({test:this.testmodel.toJSON(),tab:this.tab,model:this.model.toJSON(),hasDisconnect:!1,more_details:r,tq_split:this.tq_split,anonymize:this.parent.anonymize,pdfmode:"pdf"===this.tab}),$(this.el).html(e),this.model.get("test")&&(n=this.model.get("test").max_score,n<this.model.get("score")&&(n=this.model.get("score")),this.makeDonut(this.model.get("score"),n-this.model.get("score"))),this},r.prototype.makeDonut=function(t,e){var i,r;if(this.model.get("test"))return google?(i=google.visualization.arrayToDataTable([["A","B"],["Right",parseInt(t)],["Wrong",parseInt(e)]]),r={pieHole:.7,pieSliceText:"none",width:"260",height:"260",tooltip:{trigger:"none",showColorCode:!1},legend:{position:"none"},colors:["#4dd486","#f1f1f1"]},setTimeout(function(t){return function(){return t.$("#donut").length>0?new google.visualization.PieChart(t.$("#donut")[0]).draw(i,r):void 0}}(this),300)):void 0},r}(window.HR.GenericView),h=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-detailed",r.prototype.className="test-report-detailed",r.prototype.initialize=function(t){return this.testmodel=t.testmodel,this.tab=t.tab,this._subviews=[]},r.prototype.events=function(){},r.prototype.render=function(e){var i,r;return null==e&&(e=null),r=this,i=t.appController.template(this.template,this),$(this.el).html(i),this.renderQuestions(),setTimeout(function(){return function(){return e?r.scrollToQuestion(e):void 0}}(this),500),this},r.prototype.renderQuestions=function(){var e;return e=$('<div id="report-questions-container"></div>'),_.each(this.model.get("questions"),function(t){return function(i,r){var n;return n=new c({model:t.model,question:i,index:r+1,test:t.testmodel,showcomment:"pdf"!==t.tab,tab:t.tab}),e.append(n.render().el)}}(this)),this.$("#detailed-report").append(e),t.util.fixedInfo("report",".report_container_timeline",0)},r.prototype.scrollToQuestion=function(t){var e;return e=$("#report-q-"+t).position().top,setTimeout(function(){return function(){return $("#report-tab").animate({scrollTop:e},500)}}(this))},r}(window.HR.GenericView),c=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-detailed-question",r.prototype.className="test-report-detailed-question",r.prototype.status={correct:{"class":"icon2-status_correct txt-green",text:"Correct Answer",color:"green"},wrong:{"class":"icon2-status_wrong txt-orange",text:"Wrong Answer",color:"red"},review:{"class":"icon2-generalsettings txt-yellow",text:"Needs Review",color:"Yellow"},unattempted:{"class":"icon2-status_no_ans txt-alt-grey",text:"Not Submitted",color:"grey"},neutral:{"class":"icon2-status_no_ans txt-alt-grey",text:"Self Evaluation",color:"grey"}},r.prototype.initialize=function(t){var e,i;return i=[],this.question=t.question,this.index=t.index,this.test=t.test,this.showcomment=t.showcomment,this.tab=t.tab,e=this.model.get("plagiarism"),this.plagiarism=e&&e.plagiarism.questions[this.question.id],this.status_icon=this.plagiarism?"review":this.status[this.question.status]?this.status[this.question.status]:this.status.neutral},r.prototype.events=function(){return{"click .js-btn-copy":"copyCode","keyup #add_new_comment":"addComment","click #scoreedit.editable":"editScore","keyup .score-input":"setScoreOnEnter","keydown .score-input":"checkInput","focusout .score-input":"setScoreOnFocus"}},r.prototype.copyCode=function(t){return t.preventDefault()},r.prototype.addComment=function(e){var i,r,n,s;return 13===e.which||13===e.keyCode?(e.preventDefault(),n=this,i=this.$("#add_new_comment").val(),i?(r={comment:i,qid:this.question.id},s="/x/api/v1/tests/"+this.model.get("tid")+"/attempts/"+this.model.get("id")+"/report_comment",$.post(s,r,function(e){return function(i){var r,s;return i.status===!0?(r='<div class="msT msB"> <p>'+_.escape(i.model.comment)+'</p> <p class="txt-alt-grey">- '+i.model.name+" ("+t.util.formatDateTime(i.model.inserttime)+")</p> </div>",e.$(".comments_container").append(r),e.$("#add_new_comment").val(""),n.model.fetch({silent:!0}),s={candidate_id:e.model.get("id"),action:"Question Comment",question_no:e.question.id},t.util.track("Edited Test Report",s)):void 0}}(this))):alert("Please type a comment, and press enter.")):!0},r.prototype.setScoreOnEnter=function(t){return 13===t.keyCode?(t.preventDefault(),this.setScore()):void 0},r.prototype.setScoreOnFocus=function(t){return t.preventDefault(),this.setScore()},r.prototype.setScore=function(){var e,i;return e=this.$(".score-input").removeClass("error").val(),e===!this.question.score?(this.cancelEditScore(),void 0):(e=parseInt(e,10),i=this,isNaN(e)?void 0:$.ajax({url:"/x/api/v1/tests/"+this.test.get("id")+"/attempts/"+this.model.id+"/update_score",type:"PUT",data:{authkey:this.test.get("authkey"),qid:this.question.id,score:e},success:function(){return i.model.fetch({silent:!0,success:function(){var r;return i.$(".score-changer").removeClass("hidden").html("Score "+e),i.$(".score-input").addClass("hidden"),i.question.score=e,r={candidate_id:i.model.get("id"),action:"Edit Score",question_no:i.question.id},t.util.track("Edited Test Report",r)},error:function(){return i.$(".score-input").addClass("error")}})},error:function(){return i.$(".score-input").addClass("error")}}))},r.prototype.checkInput=function(t){return $(t.currentTarget).removeClass("error"),t.keyCode>=65&&!(t.keyCode>=96&&t.keyCode<=105)||t.shiftKey?($(t.currentTarget).addClass("error"),!1):void 0},r.prototype.editScore=function(t){return t.preventDefault(),this.$(".score-changer").addClass("hidden"),this.$(".score-input").removeClass("hidden"),this.$(".score-input").val(this.question.score),this.$(".score-input").focus()},r.prototype.cancelEditScore=function(){return this.$(".score-changer").removeClass("hidden"),this.$(".score-input").css("display","none")},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({model:this.model.toJSON(),question:this.question,index:this.index,time:0,status:this.status_icon,plagiarism:this.plagiarism,showcomment:this.showcomment}),$(this.el).html(e),this.displayAnswer(),this},r.prototype.displayAnswer=function(){var t;switch(this.question.type){case"mcq":case"multiple_mcq":return t=new u({question:this.question}),this.$("#question_answer").html(t.render().el);case"textAns":case"unscramble":case"file_upload":return t=new p({question:this.question}),this.$("#question_answer").html(t.render().el);case"rewrite":case"complete":return t=new d({question:this.question}),this.$("#question_answer").html(t.render().el);case"correct_errors":return t=new o({question:this.question}),this.$("#question_answer").html(t.render().el);case"uml":case"electrical":return t=new l({question:this.question}),this.$("#question_answer").html(t.render().el);case"code":case"approx":return t=new s({question:this.question,model:this.model,test:this.test,tab:this.tab}),this.$("#question_answer").html(t.render().el);case"design":return t=new a({question:this.question,model:this.model,testmodel:this.test,tab:this.tab}),this.$("#question_answer").html(t.render().el);case"code_upload":return t=new n({question:this.question}),this.$("#question_answer").html(t.render().el)}},r}(window.HR.GenericView),u=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="x/test-report-detailed-mcq",n.prototype.className="test-report-detailed-mcq",n.prototype.initialize=function(t){return this.question=t.question},n.prototype._render=function(){var e,r,n,s,o,a,l,u,c,d,p,h,m,f;if("mcq"===this.question.type?(a=[this.question.my_answer],r=[this.question.answer]):(a=this.question.my_answer,r=this.question.answer),e=t.appController.template(this.template,this)({question:this.question,my_ans:a,exp_ans:r}),$(this.el).html(e),l=1,this.question.answered){for(n="",h=this.question.options,d=0,p=h.length;p>d;d++)u=h[d],m=l.toString(),c=i.call(a,m)>=0||i.call(a,l)>=0,f=l.toString(),o=i.call(r,f)>=0||i.call(r,l)>=0,s=o&&c?"cy":o&&!c?"cn":!o&&c?"ny":"nn",n+="<li><img class='mcq-opt-img' src = '/assets/mcq_options/img_mcq_"+s+".png' /><span class='mcq-opt'>"+u+"</span><div class='clear' /></li>",l++;this.$(".mcq-reports-answer").html(n)}return this},n}(window.HR.GenericView),l=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-detailed-draw",r.prototype.className="test-report-detailed-draw",r.prototype.initialize=function(t){return this.question=t.question},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({question:this.question}),$(this.el).html(e),this},r}(window.HR.GenericView),o=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-detailed-correct-errors",r.prototype.className="test-report-detailed-correct-errors",r.prototype.initialize=function(t){return this.question=t.question},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({question:this.question}),$(this.el).html(e),this},r}(window.HR.GenericView),d=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-detailed-rewrite-complete",r.prototype.className="test-report-detailed-rewrite-complete",r.prototype.initialize=function(t){return this.question=t.question},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({question:this.question}),$(this.el).html(e),this},r}(window.HR.GenericView),p=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-detailed-subjective",r.prototype.className="test-report-detailed-subjective",r.prototype.initialize=function(t){return this.question=t.question},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({question:this.question}),$(this.el).html(e),this},r}(window.HR.GenericView),n=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-detailed-code-upload",r.prototype.className="test-report-detailed-code-upload",r.prototype.initialize=function(t){return this.question=t.question},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({question:this.question}),$(this.el).html(e),this},r}(window.HR.GenericView),s=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-report-detailed-coding",r.prototype.className="test-report-detailed-code",r.prototype.initialize=function(t){var e,i,r;return this.question=t.question,this.test=t.test,this.tab=t.tab,e=this.model.get("plagiarism"),this.plagiarism=e&&e.plagiarism.questions&&e.plagiarism.questions[this.question.id],r=null,i={},this.plagiarism?(_.map(e.plagiarism.questions[this.question.id],function(t,e){return r=e,_.map(t.occurances,function(t,e){return i[e]=t})}),this.plagiarismList=i,this.sid=r):(this.plagiarismList={},this.sid=null)},r.prototype.events=function(){return{"click .code-player":"togglePlayer","slide .slider":"playcode","click #toggle_output":"toggleOutput","click .js-review":"showDiff","click .js-showoutputs":"showOutputs","click .js-fs-open":"openFullScreen","click .js-fs-close":"closeFullScreen"}},r.prototype.openFullScreen=function(t){return t&&t.preventDefault(),t&&t.stopPropagation(),this.$(".js-fs-open").hide(),this.$(".js-fs-close").show(),setTimeout(function(t){return function(){return t.$(".fs-toggle").addClass("open")}}(this),200),this.fullScreenOpened=!0},r.prototype.closeFullScreen=function(t){return t&&t.preventDefault(),t&&t.stopPropagation(),this.$(".js-fs-open").show(),this.$(".js-fs-close").hide(),setTimeout(function(t){return function(){return t.$(".fs-toggle").removeClass("open")}}(this),200),this.fullScreenOpened=!1},r.prototype._render=function(){var e,i;return e=t.appController.template(this.template,this)({question:this.question,sid:this.sid,plagiarism:this.plagiarismList,test:this.test.toJSON(),anysubmissions:this.question.submissions&&this.question.submissions.length>0}),$(this.el).html(e),this.question.submissions&&("undefined"==typeof CodeMirror?t.appController.loadCodeMirror(function(t){return function(){return t.viewCode(t.question.submissions,t.question.my_lang,t.question.submissions.length-1)}}(this)):this.viewCode(this.question.submissions,this.question.my_lang,this.question.submissions.length-1)),this.$(".slider").slider({min:1,max:this.question.submissions.length,value:this.question.submissions.length}),i=this,setTimeout(function(){var t,e,r;return t=".js-btn-copy-"+i.question.id,r=$(t),i.question.submissions&&i.question.submissions.length>0&&(r.attr("data-clipboard-text",i.question.submissions[i.question.submissions.length-1].answer),r.length&&(r.popover({content:"Code has been copied",trigger:"none",placement:"top"}),e=new ZeroClipboard(r,{container:$("div.right_cont div.rt_content_wrap").get(0)}),e.on("complete",function(){var t;return $(this).popover("show"),t=$(this),setTimeout(function(){return t.popover("hide")},2e3)}))),"pdf"===i.tab&&i.question.outputs&&i.$(".js-showoutputs")?i.$(".js-showoutputs").trigger("click"):void 0}),this},r.prototype.showDiff=function(t){var e,i,r,n,s,o,a,l,u;return t.preventDefault(),i=this.$(t.currentTarget),a=i.attr("data-similarity"),s=a>90?"high":a>80?"medium":"low",this.$(".js-possibility").html(s),this.$(".js-similarity").html(parseFloat(a).toFixed(2)),u=this.model.get("plagiarism").solves,r=difflib.stringAsLines(u[i.attr("data-current")].answer.code),o=difflib.stringAsLines(u[i.attr("data-review")].answer.code),l=new difflib.SequenceMatcher(r,o),n=l.get_opcodes(),e=diffview.buildView({baseTextLines:r,newTextLines:o,opcodes:n,baseTextName:"Current Solution",newTextName:"Solution by "+i.attr("data-email"),viewType:0}),this.$(".js-code-diff").html(e),this.$(".js-plagiarism-modal").modal()},r.prototype.showOutputs=function(t){var e,i,r,n,s,o,a,l,u,c,d,p;for(t.preventDefault(),this.$(t.currentTarget).addClass("hide"),this.$(".js-output").empty(),d=this.question.outputs,p=[],i=u=0,c=d.length;c>u;i=++u)s=d[i],l=this.question.submission_testcases[i].name||"Testcase "+i,this.$(".js-output").append("<p class='mdL'><strong>"+l+"</strong></p>"),s.too_large?p.push(this.$(".js-output").append("<p class='mdL'><em>Too large to include here.</em></p>")):(r=difflib.stringAsLines(s.expected),o=difflib.stringAsLines(s.actual),a=new difflib.SequenceMatcher(r,o),n=a.get_opcodes(),e=diffview.buildView({baseTextLines:r,newTextLines:o,opcodes:n,baseTextName:"Expected output",newTextName:"Candidate output",viewType:0}),p.push(this.$(".js-output").append(e)));return p},r.prototype.togglePlayer=function(t){return t.preventDefault(),430!==this.$("#code-player").width()?(this.$(".code_play_slide_wrap").hide(),this.$("#code-player").animate({width:"430px"}).parent().css("z-index",100),this.$(".playcode_txt").html(this.codeTime),setTimeout(function(t){return function(){return t.$(".code_play_slide_wrap").fadeIn()}}(this),300)):(this.$(".code_play_slide_wrap").hide(),this.$(".playcode_txt").html("PLAY CODE"),this.$("#code-player").animate({width:"140px"}).parent().css("z-index",1))},r.prototype.toggleOutput=function(t){var e;return t.preventDefault(),e=this.$(".code-output"),e.hasClass("hidden")?(e.removeClass("hidden"),this.$(t.currentTarget).html("[-] Click here to hide the output")):(e.addClass("hidden"),this.$(t.currentTarget).html("[+] Click here to see the output"))},r.prototype.playcode=function(e,i){var r,n;return r=this.question.submissions[parseInt(i.value,10)-1].answer,this.$(".outbox").html(_.escape(r)),"undefined"==typeof CodeMirror?t.appController.loadCodeMirrorMode(this.question.my_lang,function(t){return function(){return t.viewCode(t.question.submissions,t.question.my_lang,parseInt(i.value,10)-1)}}(this)):this.viewCode(this.question.submissions,this.question.my_lang,parseInt(i.value,10)-1),430===this.$("#code-player").width()&&this.$(".playcode_txt").html(this.codeTime),n=".js-btn-copy-"+this.question.id,e=$(n),e.attr("data-clipboard-text",r)},r.prototype.viewCode=function(e,i,r){var n,s,o,a,l;if(e){if(l=this,a=e[r],n=r,!a)return;return this.codeTime="At "+a.timespan,s="code"===a.lang||""===a.lang?i||"code":a.lang,o=lang_mime_mapping[s],this.$(".langused").html(s.toUpperCase()),t.appController.loadCodeMirrorMode(s,function(t){return function(){var e,i,n,s,l,u;return l=t.$("pre.outbox-temp"),l.empty(),$(l).append('<table><tr><td class="line-no" width="5%"></td><td class="code"></td></tr></table>'),i=$("<div></div>"),n=$("<div>1</div>"),$(l).find(".code").append(i),$(l).find(".line-no").append(n),e=0,u=CodeMirror.defaults.tabSize||4,s=2,CodeMirror.runMode(a.answer,o,function(t,o){var a,c,d,p,h;if("\n"===t)return n.height(i.height()),i=$("<div></div>"),n=$("<div>"+s+"</div>"),s++,$(l).find(".code").append(i),$(l).find(".line-no").append(n),e=0,void 0;for(a="",d=0;;){if(c=t.indexOf("	",d),-1===c){a+=t.slice(d),e+=t.length-d;break}for(e+=c-d,a+=t.slice(d,c),p=u-e%u,e+=p,r=0;p>r;)a+=" ",++r;d=c+1}return o?(h=$("<span></span>"),h.addClass("cm-"+o.replace(RegExp(" +","g")," cm-")),h.append(document.createTextNode(a)),i.append(h)):i.append(document.createTextNode(a))}),t.$("pre.outbox").html(t.$("pre.outbox-temp").html())}}(this))}},r}(window.HR.GenericView),a=function(i){function n(){return this.toggleAlert=r(this.toggleAlert,this),this.renderIframe=r(this.renderIframe,this),this.showLoading=r(this.showLoading,this),this.hideLoading=r(this.hideLoading,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="x/test-report-detailed-design",n.prototype.className="test-report-detailed-design",n.prototype.initialize=function(t){var e;return this.question=t.question,this.testmodel=t.testmodel,this.tab=t.tab,this.suburl=null,this.lastView="html",this.showAlert=!1,this.currentAnswer={},e=this,this.mime_lang_mapping={},"true"===this.question.multiple_files?_.each(lang_mime_mapping,function(t,i){return e.mime_lang_mapping[t]=i}):void 0},n.prototype.events=function(){return{"click .code-player":"togglePlayer","slide .slider":"playcode","click ul.nav-tabs li a":"updateLastView"}},n.prototype.updateLastView=function(t){return this.lastView=this.$(t.currentTarget).data("lang")},n.prototype.hideLoading=function(){return this.$(".js-rendered-data-loading").addClass("hidden"),this.$(".js-rendered-data").removeClass("hidden")},n.prototype.showLoading=function(){return this.$(".js-rendered-data-loading").removeClass("hidden"),this.$(".js-rendered-data").addClass("hidden")},n.prototype.renderIframe=function(){var e;return this.$(".rendered-output-title").removeClass("hidden"),this.showLoading(),this.$(".js-rendered-data").ready(this.hideLoading),e=t.development?""+window.location.protocol+"//design."+window.location.host:""+window.location.protocol+"//design.hackerrank.com",this.$(".js-rendered-data").attr("src",""+e+this.suburl+"/?showAlert="+this.showAlert)},n.prototype.toggleAlert=function(){return this.showAlert=!this.showAlert},n.prototype._render=function(){var e,i;return i=this.question.submissions.length,e=t.appController.template(this.template,this)({question:this.question,tab:this.tab,anysubmissions:this.question.submissions&&i>0}),$(this.el).html(e),setTimeout(function(t){return function(){return $(".js-btn-render-"+t.question.id).off("click",t.renderIframe).click(t.renderIframe),$("[for=js-render-"+t.question.id+"-alert]").off("click",t.toggleAlert).on("click",t.toggleAlert)}}(this),2e3),this.question.submissions&&("undefined"==typeof CodeMirror?t.appController.loadCodeMirror(function(t){return function(){return t.viewCode(t.question.submissions,i-1)}}(this)):this.viewCode(this.question.submissions,i-1)),this.$(".slider").slider({min:1,max:i,value:i}),this},n.prototype.togglePlayer=function(t){return t.preventDefault(),430!==this.$("#code-player").width()?(this.$(".code_play_slide_wrap").hide(),this.$("#code-player").animate({width:"430px"}).parent().css("z-index",100),this.$(".playcode_txt").html(this.codeTime),setTimeout(function(t){return function(){return t.$(".code_play_slide_wrap").fadeIn()}}(this),300)):(this.$(".code_play_slide_wrap").hide(),this.$(".playcode_txt").html("PLAY CODE"),this.$("#code-player").animate({width:"140px"}).parent().css("z-index",1))},n.prototype.playcode=function(e,i){var r;return r=this.question.submissions[parseInt(i.value,10)-1].answer,"string"==typeof r&&(r=this.question.submissions[parseInt(i.value,10)-1].answer=$.parseJSON(this.question.submissions[parseInt(i.value,10)-1].answer)),this.$(".outbox").html(_.escape(r)),"undefined"==typeof CodeMirror?t.appController.loadCodeMirrorMode(this.question.my_lang,function(t){return function(){return t.viewCode(t.question.submissions,parseInt(i.value,10)-1)}}(this)):this.viewCode(this.question.submissions,parseInt(i.value,10)-1),430===this.$("#code-player").width()?this.$(".playcode_txt").html(this.codeTime):void 0},n.prototype.loadAnswer=function(e,i){var r,n;return r=e.language,n=lang_mime_mapping[r],t.appController.loadCodeMirrorMode(r,function(){return function(){var t,r,s,o,a;return i.empty(),$(i).append('<table><tr><td class="line-no" width="5%"></td><td class="code"></td></tr></table>'),r=$("<div></div>"),s=$("<div>1</div>"),$(i).find(".code").append(r),$(i).find(".line-no").append(s),t=0,a=CodeMirror.defaults.tabSize||4,o=2,CodeMirror.runMode(e.code,n,function(e,n){var l,u,c,d,p,h;if("\n"===e)return s.height(r.height()),r=$("<div></div>"),s=$("<div>"+o+"</div>"),o++,$(i).find(".code").append(r),$(i).find(".line-no").append(s),t=0,void 0;for(l="",d=0;;){if(c=e.indexOf("	",d),-1===c){l+=e.slice(d),t+=e.length-d;break}for(t+=c-d,l+=e.slice(d,c),p=a-t%a,t+=p,u=0;p>u;)l+=" ",++u;d=c+1}return n?(h=$("<span></span>"),h.addClass("cm-"+n.replace(RegExp(" +","g")," cm-")),h.append(document.createTextNode(l)),r.append(h)):r.append(document.createTextNode(l))})}}(this))},n.prototype.viewOldStructure=function(t){var e,i,r;return this.$(".js-design-code"),i=this.$(".js-code-tab").empty(),e="pdf"!==this.tab?this.$(".js-code-content").empty():this.$(".js-code-pdf").empty(),r=this,"string"==typeof t.answer&&(t.answer=$.parseJSON(t.answer)),_.each(t.answer,function(n){var s,o,a,l,u,c;return c="sub-"+t.id+"-"+n.language,a=lang_display_mapping[n.language],s="",o="","pdf"!==r.tab?(r.currentAnswer[n.language]===n.code&&(o="hidden"),r.lastView===n.language&&(s="active"),r.currentAnswer[n.language]=n.code,i.append("<li class='"+s+"'><a href='#"+c+"' data-lang='"+n.language+"' data-toggle='tab'><i class='tab-notification icon--single icon-circle txt-green "+o+"'></i>"+a+"</a></li>"),u="<div class='tab-pane "+s+"' id='"+c+'\'><pre class="outbox cm-s-default no-padding" style="border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;">\n  Fetching Code...\n</pre>\n</div>'):u='<ul class="nav nav-tabs ungroup"><li class="active"><a href=\'#'+c+"' data-lang='"+n.language+"' data-toggle='tab'>"+a+"</a></li></ul>\n<div class=\"tab-content\">\n<div class='tab-pane active' id='"+c+'\'>\n  <pre class="outbox cm-s-default no-padding" style="border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;">\n    Fetching Code...\n  </pre>\n</div>\n</div>',l=$(u),e.append(l),setTimeout(function(){return r.loadAnswer(n,l.find("pre.outbox"),0)})}),i.find('a[data-toggle="tab"]').on("shown.bs.tab",function(t){return function(e){return t.$(e.target).find("i").addClass("hidden")}}(this))},n.prototype.viewFileTree=function(){var t;return t=this,this.$(".js-file-tree").jstree({core:{data:this.question.file_tree,multiple:!1},types:{file:{icon:"jstree-file"}},plugins:["wholerow","types"]}).on("activate_node.jstree",function(e,i){return e.preventDefault(),i.node.children.length>0?void 0:$.ajax({url:""+t.model.url()+"/files",type:"POST",data:{node:t.$(".js-file-tree").jstree("get_path",i.node).join("/"),question:t.question.id},success:function(e){return e.fileContents.language=t.mime_lang_mapping[e.fileContents.mime_type],t.loadAnswer(e.fileContents,t.$("#editor-with-tree .cm-s-default"),!0)},error:function(){return t.loadAnswer({code:"File not supported.",language:"text"},t.$("#editor-with-tree .cm-s-default"),!0)}})})},n.prototype.viewCode=function(t,e,i){var r,n,s;if(null==i&&(i=!1),t){if(s=this,n=t[e],!n)return;return r="undefined"==typeof n.id?"saved-"+this.question.id:n.id,this.suburl=""+this.model.url()+"/render/"+r+"/"+this.testmodel.get("authkey"),i&&this.renderIframe(),this.codeTime="At "+n.timespan,"true"===this.question.multiple_files?this.viewFileTree():this.viewOldStructure(n)}},n}(window.HR.GenericView),f=function(i){function n(){return this.checkForIframeError=r(this.checkForIframeError,this),this.setIframeData=r(this.setIframeData,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="x/test-report-timeline",n.prototype.className="test-report-timeline",n.prototype.events=function(){return{"click .showEvents":"showDetails"}},n.prototype.initialize=function(t){return this.model=t.model,this.testmodel=t.testmodel,this.timeline=this.model.get("timeline")?this.model.get("timeline"):[],this.qarray={},this.lastqno=null,this.hasDisconnect=!1,this.offlineTime=0,this.dt=null,this.timeline.length>1?this.buildGoogleDatatable():void 0},n.prototype.showDetails=function(t){return this.$(".js-full-details").removeClass("hide"),this.$(t.currentTarget).hide()},n.prototype.getTimeline=function(){return this.timeline=this.model.get("timeline")?this.model.get("timeline"):[],this.timeline.length>1?this.buildGoogleDatatable():void 0},n.prototype._render=function(){var e,i;return this.getTimeline(),i=this.timeline.length,e=t.appController.template(this.template,this)({test:this.testmodel.toJSON(),timeline:this.timeline,tab:this.tab,starttime:this.model.get("starttime"),total_time_taken:this.model.get("total_time_taken"),tllen:i,hasDisconnect:this.hasDisconnect,offlineTime:t.util.prettyPrintSeconds(this.offlineTime),model:this.model.toJSON()}),$(this.el).html(e),i>1&&setTimeout(this.setIframeData,500),this
},n.prototype.setIframeData=function(){return 0!==this.$("#tl-frame").length&&this.$("#tl-frame")[0].contentWindow&&"notset"===this.$("#tl-frame")[0].contentWindow.s?(this.$("#tl-frame").height(this.height+30),this.$("#tl-frame")[0].contentWindow.opts=this.dtopts,this.$("#tl-frame")[0].contentWindow.s=this.dt,setTimeout(this.checkForIframeError,1e3),this.$("ul.tnc").removeClass("hide"),this.hasDisconnect?this.$("li.new-tl").removeClass("hide"):this.trackingListing?void 0:this.$("li.old-tl").removeClass("hide")):setTimeout(this.setIframeData,500)},n.prototype.checkForIframeError=function(){return 2===this.$("#tl-frame")[0].contentWindow.errcount?(this.$("#tl-frame").css("min-width",""),this.$("#tl-frame")[0].contentWindow.drawChart()):void 0},n.prototype.buildGoogleDatatable=function(){var t,e,i,r,n,s,o,a,l,u,c,d,p,h,m,f,v,g,y,w,b,$,T,C,k,x,q,S,j,D,R,L,N,O,A;if(this.timeline=this.model.get("timeline")?this.model.get("timeline"):[],null===this.dt&&0!==this.timeline.length){for(d={LOGIN:"1",VIEW_LIST:"2",QUES_VIEW:"3",QUES_SUBMIT:"4",QUES_COMPILE:"5",PING:"6"},this.timetaken={},e="Question list",t="Offline",i="No ping",r=70,b=this.timeline.length>2&&(this.timeline[0].id===d.VIEW_LIST||this.timeline[1].id===d.VIEW_LIST)?!0:!1,u=this.timeline.length,L=this.timeline,p=$=0,x=L.length;x>$;p=++$)l=L[p],f=p===u-1?0:this.timeline[p+1].inserttime-l.inserttime,l.id===d.VIEW_LIST||l.id===d.LOGIN?this.streamevent(e,l.inserttime):l.qno&&this.streamevent(l.qno,l.inserttime),null!==f&&f>r&&b&&this.streamevent(t,l.inserttime+10);if(this.streamevent("finish",l.inserttime+10),o=new google.visualization.DataTable,o.addColumn({type:"string",id:"Question"}),o.addColumn({type:"string",id:"Name"}),o.addColumn({type:"date",id:"Start"}),o.addColumn({type:"date",id:"End"}),a=b?"No ping received in this time (maybe due to network disconnection).":"No other events tracked in this timeslot.",s=_.keys(this.qarray).length+1,w=[],c=[],_.has(this.qarray,t)){for(N=this.qarray[t],T=0,q=N.length;q>T;T++)h=N[T],c.push(["Offline",a,new Date(1e3*h[0]),new Date(1e3*h[1])]),this.offlineTime+=h[1]-h[0];delete this.qarray[t]}if(_.has(this.qarray,e)){for(O=this.qarray[e],C=0,S=O.length;S>C;C++)h=O[C],w.push(["Main listing","Viewed question listing",new Date(1e3*h[0]),new Date(1e3*h[1])]);delete this.qarray[e]}for(y=_.keys(this.qarray).sort(function(t,e){return t-e}),k=0,j=y.length;j>k;k++)for(g=y[k],A=this.qarray[g],R=0,D=A.length;D>R;R++)h=A[R],w.push(["Question "+g,"q."+g,new Date(1e3*h[0]),new Date(1e3*h[1])]);return o.addRows(w),b?o.addRows(c):s-=1,v={width:700},this.height=45*(s+1),b&&0!==c.length?(m=w.length,n=function(){var t,e;for(e=[],p=t=1;m>=1?m>=t:t>=m;p=m>=1?++t:--t)e.push("#4dd486");return e}(),m=c.length,n=n.concat(function(){var t,e;for(e=[],p=t=1;m>=1?m>=t:t>=m;p=m>=1?++t:--t)e.push("#f00");return e}()),v.colors=n,this.hasDisconnect=!0):(v.timeline={singleColor:"#4dd486"},this.hasDisconnect=!1),this.dt=o.toJSON(),this.dtopts=v,this.trackingListing=b}},n.prototype.streamevent=function(t,e){var i;return null===this.lastqno?(_.has(this.qarray,t)||(this.qarray[t]=[]),this.qarray[t].push([e,null])):"finish"===t?(i=this.qarray[this.lastqno].length-1,this.qarray[this.lastqno][i][1]=e):this.lastqno===t?(i=this.qarray[t].length-1,this.qarray[t][i][1]=e):(i=this.qarray[this.lastqno].length-1,this.qarray[this.lastqno][i][1]=e,_.has(this.qarray,t)||(this.qarray[t]=[]),this.qarray[t].push([e,null])),this.lastqno=t},n}(window.HR.GenericView),t=null!=(g=window.HR)?g:{},t.TestReportView=v,t.ReportSummaryView=m,t.ReportDetailedView=h,t.ReportTimelineView=f})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="x/test-reports",n.prototype.className="test-reports",n.prototype.events=function(){return{"click .js-filterats":"atsFilter","keypress .js-search":"filterSummary","click .js-dateclear":"clearDate","click .js-emailclear":"clearEmail","click #qtype_check":"toggleQuestionType","click #qtags_check":"toggleQuestionTags","click .js-pdfdl":"pdfDownload","click .js-refresh":"refresh","click .js-csvdl":"excelDownload"}},n.prototype.initialize=function(e){return this._subviews=[],this.testmodel=e.testmodel,this.type=e.type,this.subtype=e.subtype,this.showTags=t.UserSettings.get("showTags",!1),this.showQuesTypes=t.UserSettings.get("showQuesTypes",!1),document.timestring||(document.timestring={}),this.testmodel.get("id")in document.timestring?void 0:document.timestring[this.testmodel.get("id")]=moment().subtract("days",6).format("YYYY-MM-DD")+" to "+moment().add("days",1).format("YYYY-MM-DD")},n.prototype._render=function(){var e,i;return i=this,e=t.appController.template(this.template,this)({test:this.testmodel.toJSON(),throbber:t.appController.viewLoader(),hideElements:"in-progress"===this.type||"invited"===this.type,showQuesTypes:this.showQuesTypes,showTags:this.showTags}),$(this.el).html(e),this.$(".js-daterange").val(document.timestring[this.testmodel.get("id")]),this.$(".js-daterange").daterangepicker({latestDate:"today",separator:" to ",format:"YYYY-MM-DD",ranges:{"Last week":[moment().add("days",-7),moment().format()],"Last 2 weeks":[moment().add("days",-14),moment().format()],"Last 30 days":[moment().add("days",-30),moment().format()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"Past year":[moment().add("days",-365),moment().format()]}},function(t){return function(e,i){return t.$(".js-dateclear").removeClass("hide"),t.datatable_view.daterange=[e.format("YYYY-MM-DD"),i.format("YYYY-MM-DD")],document.timestring[t.testmodel.get("id")]=e.format("YYYY-MM-DD")+" to "+i.format("YYYY-MM-DD"),t.datatable_view.makeDT()}}(this)),null===document.timestring[this.testmodel.get("id")]&&this.$(".js-dateclear").addClass("hide"),this.$(".js-emailclear").addClass("hide"),this.renderDataTable(),this.updateTitle(),this},n.prototype.refresh=function(t){return t.preventDefault(),this.render()},n.prototype.toggleQuestionType=function(){return this.showQuesTypes=this.$("#qtype_check").attr("checked")?!0:!1,t.UserSettings.set("showQuesTypes",this.showQuesTypes),this.render()},n.prototype.toggleQuestionTags=function(){return this.showTags=this.$("#qtags_check").attr("checked")?!0:!1,t.UserSettings.set("showTags",this.showTags),this.render()},n.prototype.renderDataTable=function(){return clearTimeout(t.dttimeout),t.dttimeout=setTimeout(function(t){return function(){return t.datatable_view=new i({testmodel:t.testmodel,type:t.type,subtype:t.subtype,showTags:t.showTags,showQuesTypes:t.showQuesTypes,parent:t}),t.$("#datatable_container").html(t.datatable_view.render().el)}}(this),500)},n.prototype.clearDate=function(t){return this.$(".js-daterange").val(""),document.timestring[this.testmodel.get("id")]=null,this.$(t.currentTarget).addClass("hide"),this.datatable_view.daterange=null,this.datatable_view.makeDT()},n.prototype.atsFilter=function(e){var i;return e.preventDefault(),i=this.$(e.currentTarget),this.subtype=i.attr("data-attribute-ats"),this.datatable_view.ats=this.subtype,window.history&&history.pushState&&window.history.pushState(null,null,"/x/tests/"+this.testmodel.get("id")+"/candidates/completed/"+this.subtype),this.datatable_view.makeDT(),t.appView.updateSidebarView(),this.updateTitle()},n.prototype.clearEmail=function(){var t;return this.$(".js-search").val(""),t=$.Event("keypress"),t.keyCode=13,this.$(".js-search").trigger(t)},n.prototype.filterSummary=function(t){return 13===t.keyCode?(this.datatable_view.search=this.$(t.currentTarget).val(),this.datatable_view.makeDT(),""===this.$(t.currentTarget).val()?this.$(".js-emailclear").addClass("hide"):this.$(".js-emailclear").removeClass("hide")):void 0},n.prototype.updateTitle=function(){var t;return"completed"===this.type?""!==this.subtype?(this.$(".js-dropdowntxt").html(window.istreet.cfg.ats[this.subtype]),t=window.istreet.cfg.ats[this.subtype]):t="Completed":t="in-progress"===this.type?"In progress":null,t?this.$(".js-subtype").html("("+t+")"):void 0},n.prototype.excelDownload=function(){var t,e,i,r,n;return t=this.datatable_view.getCheckedIds(),0===t.length&&(this.datatable_view.daterange?(r=moment(this.datatable_view.daterange[0],"YYYY-MM-DD").unix(),e=moment(this.datatable_view.daterange[1],"YYYY-MM-DD").unix()):(r=moment("2000-01-01","YYYY-MM-DD").unix(),e=moment("2020-01-01","YYYY-MM-DD").unix())),i="localhost"===(n=window.location.hostname)||"localhost.com"===n||"127.0.0.1"===n?window.location.hostname:"istreetapi.hackerrank.com",0===t.length?window.open("http://"+i+"/recruit2/report/downloadcsvreport/"+this.testmodel.get("id")+"/?authkey="+this.testmodel.get("authkey")+"&starttime="+r+"&endtime="+e,"_blank"):window.open("http://"+i+"/recruit2/report/downloadcsvreport/"+this.testmodel.get("id")+"/?authkey="+this.testmodel.get("authkey")+"&attempt_id="+t.join(","),"_blank")},n.prototype.pdfDownload=function(){var e,i,r,n;return i=this.datatable_view.getCheckedIds(),0===i.length&&(e=this.datatable_view.all_ids,1===_.keys(e).length&&1===_.values(e)[0].length&&(i=_.values(e)[0])),1===i.length&&(n=new t.TestReportsPDFView({singleaid:i[0],testmodel:this.testmodel})),i.length>1&&(n=new t.TestReportsPDFView({batch:{"Selected candidates":i},testmodel:this.testmodel})),0===i.length&&(n=new t.TestReportsPDFView({batch:e,testmodel:this.testmodel})),1!==i.length&&(r=n.render().el,this.$(".js-modalholder").html(r)),n.handleDownload()},n}(window.HR.GenericView),i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-reports-datatable",r.prototype.className="test-reports-datatable",r.prototype.events=function(){return{"click .js-addtime":"addTime","click #all_checkbox":"allCheckbox","click .candidate_checkbox":"candidateCheckboxAction","click .js-action":"atsAction","click .js-invaction":"invAction","click .js-setats":"atsAction","click .js-delete":"deleteAction"}},r.prototype.initialize=function(t){switch(this.testmodel=t.testmodel,this.parent=t.parent,this.type=t.type,this.subtype=t.subtype,this.search="",this.daterange=this.testmodel.get("id")in document.timestring&&null!==document.timestring[this.testmodel.get("id")]?document.timestring[this.testmodel.get("id")].split(" to "):null,this.state=-1,this.ats=-1,this.all_ids=null,this.showTags=t.showTags,this.showQuesTypes=t.showQuesTypes,this.type){case"all":return this.state=-1;case"invited":return this.state=0;case"in-progress":return this.state=1;case"completed":if(this.state=2,""!==this.subtype)return this.ats=this.subtype}},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({invite_mode:"invited"===this.type,test:this.testmodel.attributes,showTags:this.showTags,showQuesTypes:this.showQuesTypes,hideElements:"in-progress"===this.type||"invited"===this.type}),$(this.el).html(e),setTimeout(function(t){return function(){return t.makeDT()}}(this),100),this},r.prototype.allCheckbox=function(){var t;return t=this.$("#all_checkbox").attr("checked")?!0:!1,t?this.$(".candidate_checkbox").attr("checked",""):this.$(".candidate_checkbox").removeAttr("checked",""),this.candidateCheckboxAction()},r.prototype.candidateCheckboxAction=function(){return this.sel_ids=this.$("input.candidate_checkbox:checked").map(function(){return $(this).attr("data-id")}).get(),this.sel_ids.length>0&&"in-progress"!==this.type?(this.$(".js-acount").html(" "+this.sel_ids.length+" "),this.$(".js-reports-actions").show(200)):this.$(".js-reports-actions").hide(200)},r.prototype.getCheckedIds=function(){return this.$("input.candidate_checkbox:checked").map(function(){return parseInt($(this).attr("data-id"))}).get()},r.prototype.getCheckedEmails=function(){return this.$("input.candidate_checkbox:checked").map(function(){return $(this).attr("data-email")}).get()},r.prototype.deleteAction=function(e){var i,r,n,s;return i=this.$(e.currentTarget).attr("data-action"),s=this.getCheckedIds(),"delete"===i?(n=s.length>1?"s":"",r=new t.util.confirmDialog({message:"Are you sure you want to delete "+s.length+" report"+n+"?",confirmBtnText:"Yes",callback:function(t){return function(){return t.atsAction(e)}}(this)})):void 0},r.prototype.atsAction=function(e){var i,r,n;return e.preventDefault(),r=this.$(e.currentTarget).attr("data-action"),n=this.getCheckedIds(),this.testmodel.setAction("set_attempts_ats"),i="qualify"===r?2:"fail"===r?3:"delete"===r?-1:parseInt(this.$(e.currentTarget).attr("data-attribute-ats")),this.testmodel.save({aids:n,set_ats:i},{success:function(e){return function(){return e.testmodel.unsetAction(),e.testmodel.fetch({success:function(){return t.appView.updateSidebarView()}}),e.parent.render()}}(this),error:function(t){return function(e){return console.log("success",e),t.testmodel.unsetAction()}}(this)})},r.prototype.invAction=function(e){var i,r;return e.preventDefault(),i=this.$(e.currentTarget).attr("data-action"),"cancel"===i||"cancelmany"===i?(r="cancel"===i?[parseInt(this.$(e.currentTarget).attr("data-id"))]:this.getCheckedIds(),this.testmodel.setAction("cancel_invites"),this.testmodel.save({tuids:r},{success:function(e){return function(){return e.testmodel.unsetAction(),e.makeDT(),e.$("#all_checkbox").prop("checked",!1),t.util.ajaxmsg("Successfully cancelled invites.",!1,!0,2),e.testmodel.fetch({success:function(){return t.appView.updateSidebarView(),e.$(".js-reports-actions").hide(200)}})}}(this),error:function(t){return function(){return t.testmodel.unsetAction()}}(this)})):(t.emailqueue="reinvitemany"===i?this.getCheckedEmails():[this.$(e.currentTarget).attr("data-email")],t.router.navigate("/tests/"+this.testmodel.id+"/invite",!0))},r.prototype.addTime=function(t){var e,i,r;return t.preventDefault(),i=this.$(t.currentTarget),e=i.attr("aid"),r=this.$("input[aid="+e+"]").val(),isNaN(r)?(alert("Invalid time. Enter number of minutes to add."),this.$("input[aid="+e+"]").val(""),void 0):(r=parseInt(r),$.ajax({type:"put",url:"/x/api/v1/tests/"+this.testmodel.get("id")+"/attempts/"+e,data:{action_type:"addtime",time:r},success:function(t){return function(){return t.makeDT()}}(this),error:function(){return console.log("There was an issue trying to add time.")}}))},r.prototype.makeDT=function(){var e,i,r,n,s,o,a,l,u,c,d,p,h,m,f,v;if(a=this,this.columns=["index","full_name","email","score","endtime","rating","time_left","link"],this.showQuesTypes)for(h=this.testmodel.get("questions_types"),u=0,d=h.length;d>u;u++)l=h[u],this.columns.push("type_score_"+l);if(this.showTags)for(m=this.testmodel.get("questions_tags"),c=0,p=m.length;p>c;c++)o=m[c],this.columns.push("tag_score_"+o);return this.columns.push("invited_by"),i=this.$("#reports-datatable").find("th").length,s=""!==this.search?"&q="+this.search:"",r=this.daterange?"&date_start="+this.daterange[0]+"&date_end="+this.daterange[1]:"","invited"===this.type?(n=_.difference(function(){f=[];for(var t=0;i>=0?i>t:t>i;i>=0?t++:t--)f.push(t);return f}.apply(this),[2,4,8]),e=[[4,"desc"]]):(n=_.difference(function(){v=[];for(var t=0;i>=0?i>t:t>i;i>=0?t++:t--)v.push(t);return v}.apply(this),[1,2,3,8]),e=[[3,"desc"]]),setTimeout(function(i){return function(){return t.dt=i.$("#reports-datatable").dataTable({sDom:"<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",iDisplayStart:0,iDisplayLength:25,bProcessing:!1,bFilter:!1,bServerSide:!0,bDestroy:!0,bAutoWidth:!1,aaSorting:e,oLanguage:{sProcessing:"Loading data..",sLoadingRecords:"Loading data.."},aoColumnDefs:[{sClass:"table-leftalign",aTargets:[1,2,3,4,5]},{bSortable:!1,aTargets:n}],sAjaxSource:"/x/api/v1/tests/"+i.testmodel.get("id")+"/attempts?state="+i.state+"&ats="+i.ats+s+r,fnServerData:function(e,i,r){return t.util.ajaxmsg("Loading reports data..",!0),$.getJSON(e,i,function(t){return _.isFunction(a.afterRequest)&&(t=a.afterRequest(t)),a.data=t,r(t),$(".tip").tooltip()})}})}}(this))},r.prototype.afterRequest=function(e){var i;return t.util.ajaxmsg("Done.",!1,!0,.5),i={aaData:[],iTotalDisplayRecords:0,iTotalRecords:0,models:[]},this.all_ids=e.all_ids,_.isObject(e)&&_.isArray(e.models)&&(i.iTotalDisplayRecords=e.total_visible,i.iTotalRecords=e.total,i.aaData=_.map(e.models,function(e){return function(i,r){return i.plagiarism&&i.plagiarism.length>0&&(i.rating="<i data-original-title='Possible plagiarism. Needs review' data-placement='bottom' class='tip icon2-generalsettings txt-yellow'></i>"+i.rating),t.currentUser.canViewCandidateDetails()===!1&&(i.email="candidate - "+i.id,i.full_name&&(i.full_name="Candidate - "+i.id)),e.mapColumns(i,r)}}(this))),i},r.prototype.mapColumns=function(t,e){var i;return i=[],_.each(this.columns,function(r){return function(n){var s,o,a,l,u;return"invited"===r.type?"index"===n?(i.push("<input id='candidate_"+e+"' data-id='"+t.id+"' data-email='"+t.email+"' name='candidate_"+e+"' type='checkbox' class='candidate_checkbox hr-sleek-input'> <label for='candidate_"+e+"'><span></span></label>"),void 0):("email"===n?i.push(t.email):"link"===n?i.push("<div class='btn-group'><a style='min-width:80px; padding:8px;' class='btn btn-mini mdL js-invaction' data-id='"+t.id+"' data-action='cancel'>Cancel invite</a><a style='min-width:80px; padding:8px;' class='btn btn-mini mdL js-invaction' data-action='reinvite' data-id='"+t.id+"' data-email='"+t.email+"'>Reinvite</a></div>"):"invited_by"===n?i.push(t.invited_by):"endtime"===n?i.push(moment(t[n]).format("D MMM, YYYY - HH:mm")):i.push(""),void 0):n.startsWith("type_score_")?(u=n.slice(11),t.question_types_score&&t.question_types_score[u]?i.push(t.question_types_score[u]):i.push("-"),void 0):n.startsWith("tag_score_")?(a=n.slice(10),t.tags_score&&t.tags_score[a]?i.push(t.tags_score[a]):i.push("-"),void 0):"invited_by"===n?(i.push(t.invited_by),void 0):"endtime"===n?(i.push(moment(t[n]).format("D MMM, YYYY - HH:mm")),void 0):"index"===n?i.push("<input id='candidate_"+e+"' data-id='"+t.id+"' name='candidate_"+e+"' type='checkbox' class='candidate_checkbox hr-sleek-input'> <label for='candidate_"+e+"'><span></span></label>"):"link"===n?i.push("<a style='min-width:100px; padding:8px;' class='js-backbone btn btn-line mdL' href=\"/tests/"+r.testmodel.get("id")+"/candidates/"+t.id+'/report">View</a>'):"email"===n?i.push("<a class='js-backbone' href=\"tests/"+r.testmodel.get("id")+"/candidates/"+t.id+'/report">'+t.email+"</a>"):"time_left"===n?(s=t.id,l=0===t[n]?"None":Math.ceil(t[n]/60)+" min",t.added_time_buffer&&"0"!==t.added_time_buffer&&(l+="<span style='color:#979faf'> + "+t.added_time_buffer+"min :</span>"),o=r.testmodel.get("time_slots")?"":"<input placeholder='(min)' class='span1 no-margin fnt-sz-mid' type='text' aid='"+s+"' style='padding: 4px 7px 3px;' name='add_"+s+"''><a style='position:relative; top:0px; padding: 7px 7px 6px 7px;' class='btn js-addtime' aid='"+s+"'>Add</a>",i.push("<div class='input-btn-group' style='min-width:160px;'>"+l+" "+o+"</div>")):t[n]?i.push(t[n]):i.push("-")}}(this)),i},r}(window.HR.GenericView),t=null!=(n=window.HR)?n:{},t.TestReportsView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/test-saved-response",r.prototype.className="saved-responses",r.prototype.initialize=function(t){return null==t&&(t={}),this.parent=t.parent,this.subviews=[]},r.prototype.events=function(){return{"change #saved-messages":"changeMessage"}},r.prototype._render=function(){return $(this.el).html(t.appController.template(this.template,this)({user:this.model.toJSON()})),this},r.prototype.changeMessage=function(t){var e,i,r,n,s;switch(s=$(t.currentTarget).val(),n=this.$("option:selected"),e=n.data("action"),r=n.html(),i=$("textarea[name=email-content]").ckeditorGet().getData(),i&&(i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),e){case"create":this.createMessage(i);break;case"update":this.updateMessage(r,i);break;case"insert":this.insertMessage(r,s);break;case"delete":this.deleteMessage(r)}return $(t.currentTarget).val("")},r.prototype.createMessage=function(e){var i;return e?(i=new t.TestCreateSavedMessageDialogView({parent:this,message:e,model:this.model}),this.subviews.push(i),this.$("#test-saved-respose-modal-container").html(i.render().el)):void 0},r.prototype.insertMessage=function(e,i){return $("#email_content").val(i),t.util.ajaxmsg("Template '"+e+"' has been inserted",!1,!0,2)},r.prototype.updateMessage=function(e,i){var r;return i?(r=new t.TestUpdateSavedMessageDialogView({parent:this,message:i,model:this.model,name:e}),this.subviews.push(r),this.$("#test-saved-respose-modal-container").html(r.render().el)):void 0},r.prototype.deleteMessage=function(e){var i;return i=new t.TestDeleteSavedMessageDialogView({parent:this,model:this.model,name:e}),this.subviews.push(i),this.$("#test-saved-respose-modal-container").html(i.render().el)},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestSavedResponse=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(t){var e;return e=this,this.testmodel=t.testmodel,this.listenTo(this.model,"change",this.render),this},r.prototype.template="x/test-share",r.prototype.className="test-share",r.prototype.permissionMappings={owner:"Owner",ALLOW_ALL:"Has full access",ALLOW_INVITE_CANDIDATES:"Can send invites only",ALLOW_ADD_QUESTIONS:"Can edit tests only"},r.prototype.events=function(){return{"submit form[name=share-with-team-form]":"shareWithTeam","submit form[name=share-with-user-form]":"shareWithUser","click .js-remove-team":"removeTeam","click .js-remove-user":"removeUser","click .js-change-view":"changeView"}},r.prototype.render=function(){var e,i,r,n;return r=this,n=this.model.toJSON(),n&&(i=t.currentUser&&t.currentUser.get("company")&&"user"===t.currentUser.get("company").pricing_model,this.activeTab||(this.activeTab=i?"share-teams":"share-users"),e=t.appController.template(this.template,this)({model:n,testmodel:this.testmodel.toJSON(),throbber:t.appController.viewLoader(),permissionMappings:this.permissionMappings,show_teams:i,active_tab:this.activeTab}),$(this.el).html(e)),this},r.prototype.shareWithUser=function(e){var i,r;return e.preventDefault(),$(".js-share-error").addClass("hidden"),(r=this.$("input[name=share-permissions]:checked").val())?(i=this.$("input[name=user-email]").removeClass("error").val())?(t.util.inlineLoadingStart($(e.currentTarget).find("button[type=submit]")),$.ajax({url:"/x/api/v1/tests/"+this.testmodel.get("id")+"/share",type:"POST",dataType:"json",data:{type:"user",email:i,permissions:r},success:function(t){return function(){return t.model.fetch()}}(this),error:function(){return function(e){var i;return i=JSON.parse(e.responseText),t.util.inlineLoadingEnd(i),"The user should have an account"===i.message?(t.currentUser&&t.currentUser.get("company")&&"user"===t.currentUser.get("company").pricing_model?$(".js-share-error").html("The user should have an account. You can add users on the <a href='settings/team' target='_blank'>teams page</a>"):$(".js-share-error").html(i.message),$(".js-share-error").removeClass("hidden")):i.message?($(".js-share-error").html(i.message),$(".js-share-error").removeClass("hidden")):void 0}}(this)})):(this.$("input[name=user-email]").addClass("error"),void 0):void 0},r.prototype.shareWithTeam=function(t){var e;return t.preventDefault(),$(".js-share-error").addClass("hidden"),e=this.$("select[name=team]").val(),$.post("/x/api/v1/tests/"+this.testmodel.get("id")+"/share",{type:"team",team_id:e},function(t){return function(e){return e.status===!0?t.model.fetch():void 0}}(this))},r.prototype.removeUser=function(t){var e;return t.preventDefault(),$(".js-share-error").addClass("hidden"),e=this.$(t.currentTarget).data("id"),$.ajax({url:"/x/api/v1/tests/"+this.testmodel.get("id")+"/share",type:"DELETE",data:{type:"user",user_id:e},error:function(){return function(){}}(this),success:function(t){return function(){return t.model.fetch()}}(this)})},r.prototype.removeTeam=function(t){var e;return t.preventDefault(),$(".js-share-error").addClass("hidden"),e=this.$(t.currentTarget).data("id"),$.ajax({url:"/x/api/v1/tests/"+this.testmodel.get("id")+"/share",type:"DELETE",data:{type:"team",team_id:e},error:function(){return function(){}}(this),success:function(t){return function(){return t.model.fetch()}}(this)})},r.prototype.changeView=function(t){var e,i;return t.preventDefault(),i=this.$(t.currentTarget).attr("data-view"),(e=this.$("#"+i).hasClass("active"))?void 0:(this.$(".js-change-view").removeClass("btn-primary"),this.$(t.currentTarget).addClass("btn-primary"),this.$(".js-share-views").removeClass("active").addClass("hidden"),this.$("#"+i).addClass("active").removeClass("hidden"),this.activeTab=i)},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestShareView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(){var t;return t=this},r.prototype.template="x/test-time-settings",r.prototype.className="test-time-settings",r.prototype.events=function(){return{"submit form[name=time-settings-form]":"saveTest","click #clear-time":"resetTime"}},r.prototype.render=function(){var e,i,r;return i=this,r=this.model.toJSON(),r&&(e=t.appController.template(this.template,this)({model:r,throbber:t.appController.viewLoader()}),$(this.el).html(e),this.$("input#date-from, input#date-to").datepicker({format:"yyyy/m/d",autoclose:!0,orientation:"bottom"}),this.$("input.time").timepicker({showDuration:!0,timeFormat:"H:i",scrollDefaultNow:!0})),this},r.prototype.resetTime=function(t){return t.preventDefault(),this.$("input.date").attr("value",null).datepicker("update"),this.$("input.time").attr("value",null)},r.prototype.saveTest=function(t){var e,i,r,n,s,o,a;return t.preventDefault(),o=$("#date-from").val(),o&&(""===$.trim($(".time.start").val())?(a="00:00",$(".time.start").val(a)):a=$.trim($(".time.start").val()),a+=":00",s=o+" "+a),r=$("#date-to").val(),r&&(""===$.trim($(".time.end").val())?(n="00:00",$(".time.end").val(n)):n=$.trim($(".time.end").val()),n+=":00",i=r+" "+n),e={starttime:s,endtime:i},this.model.save(e,{silent:!0})},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TestTimeSettingsView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e},i=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};jQuery(function(){var t,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="x/test-tryquestion",n.prototype.className="test-tryquestion",n.prototype.events={"click .js-ans-submit":"submitAnswer"},n.prototype.initialize=function(e){return this.test=e.test,this.qid=e.qid,t.candidate={}},n.prototype.render=function(){var e;return e=t.appController.template(this.template,this)({test:this.test.attributes}),$(this.el).html(e),this.question=new t.QuestionModel({id:this.qid,tid:this.test.get("id")}),this.question.fetch({success:function(t){return function(e){return t.question=e.attributes,t.loadSubView()}}(this),error:function(t){return function(){return t.$(".js-questiontext").html("Unable to get question.")}}(this)}),this},n.prototype.loadSubView=function(){var e,i,r,n;switch(n=!0,this.question.type){case"code":case"approx":this.view=new t.RecruitCandidateCodingView({question:this.question,test:this.test,disableLocalStorage:!0});break;case"design":"true"===this.question.multiple_files?(this.$(".js-tryview").html("<center>This question type is not available to try at this time.</center>"),this.$(".js-ans-submit").hide()):(this.view=new t.RecruitCandidateDesignView({question:this.question,test:this.test}),this.$("#runstatus").remove(),this.$(".bb-compile").remove());break;case"mcq":case"multiple_mcq":this.view=new t.RecruitCandidateMcqView({question:this.question});break;case"textAns":this.view=new t.RecruitCandidateSubjectiveView({question:this.question});break;case"file_upload":this.view=new t.RecruitCandidateFileUploadView({question:this.question});break;case"complete":for(r=this.question.complete_string,e=0,i="<h4>Complete the blanks in the following question with the appropriate answer.</h4><br/>",i+=_.isEmpty(this.question.question)?"":this.question.question;-1!==r.search("{blank}");)r=r.replace("{blank}","<input type='text' class='complete-question' name='blank"+e+"'/>"),e+=1;i+=r,this.view=new t.RecruitCandidateCompleteView({question:this.question});break;default:n=!1}return n?("complete"===this.question.type?this.$(".js-questiontext").html(i):this.$(".js-questiontext").html(this.question.question),this.$(".js-tryview").html(this.view.render().el)):(this.$(".js-tryview").html("<center>This question type is not available to try at this time.</center>"),this.$(".js-ans-submit").hide())},n.prototype.submitAnswer=function(t){var e,r,n,s,o,a,l,u,c,d;if(t.preventDefault(),"mcq"===this.question.type)return r=this.view.answer(),_.isObject(r)&&(r=r.answer),parseInt(r)!==parseInt(this.question.answer)?this.$(".js-trymsg").html("Incorrect. The correct answer is option "+this.question.answer):this.$(".js-trymsg").html("Correct answer."),this.$(".js-tryalert").removeClass("hide");if("multiple_mcq"===this.question.type)return e=_.map(this.view.answer(),function(t){return parseInt(t)}),o=_.map(this.question.answer,function(t){return parseInt(t)}),e.length>0&&0===_.difference(e,o).length?this.$(".js-trymsg").html("Correct answer."):(s=this.question.answer.join(", "),this.$(".js-trymsg").html("Incorrect. The correct options :["+s+"]")),this.$(".js-tryalert").removeClass("hide");if("textAns"===this.question.type||"file_upload"===this.question.type)return this.$(".js-trymsg").html("This answer is subjective, and evaluated later."),this.$(".js-tryalert").removeClass("hide");if("complete"===this.question.type){for(this.$(".js-trymsg").empty(),n=this.view.answer(),o=JSON.parse(this.question.answer),l=u=0,c=n.length;c>u;l=++u)a=n[l],i.call(o[l],a)>=0?this.$(".js-trymsg").append("<p>Correct: <strong>"+a+"</strong>.</p>"):this.$(".js-trymsg").append("<p>Incorrect: <strong>"+a+"</strong>. Not in ["+o[l].join(", ")+"]</p>");return this.$(".js-tryalert").removeClass("hide")}return"code"===(d=this.question.type)||"approx"===d?this.submitCodeAnswer(this.view.answer()):void 0},n.prototype.submitCodeAnswer=function(e){return this.$(".js-tryalert").addClass("hide"),e.code?this.$(".bb-compile").hasClass("disabled")?void 0:(this.$("#customtestcase")&&this.$("#customtestcase").attr("checked")&&(e.custominput=this.$("#custominput").val(),e.customtestcase=!0),this.$(".bb-compile").addClass("disabled"),t.candidate.ctmodel=new t.RecruitCompileTestModel,t.candidate.ctmodel.setTid(this.test.get("id")),t.candidate.ctmodel.setQid(this.question.id),t.candidate.ctview=new t.RecruitCandidateCompileTestView,this.$("#runstatus").html(t.candidate.ctview.render().el),t.util.scrollToBottom(1e3),t.candidate.ctmodel.save(e,{success:function(i){return function(){return t.candidate.ctview.setStatus("Uploaded. Waiting for results.."),t.candidate.ctloop=setTimeout(function(){return i.checkForResult(i,e)},2e3)}}(this),error:function(e){return function(){return t.candidate.ctmodel=null,t.candidate.ctview.setStatus("Could not compile as server is unreachable."),e.$(".bb-compile").removeClass("disabled")}}(this)})):(this.$(".js-trymsg").html("Please enter an answer."),this.$(".js-tryalert").removeClass("hide"),void 0)},n.prototype.checkForResult=function(e,i,r){return null==r&&(r=null),t.candidate.ctloop?(t.candidate.ctview.setStatus(r?r:"Processing.."),t.candidate.ctmodel.fetch({success:function(){return function(n){var s,o,a,l,u,c,d,p,h,m,f;
if(0===n.get("status"))return r=n.get("status_string")?n.get("status_string"):null,t.candidate.ctloop=setTimeout(function(){return e.checkForResult(e,i,r)},2e3),void 0;if(0!==n.get("status")){if($(".bb-compile").removeClass("disabled"),clearTimeout(t.candidate.ctloop),t.candidate.ctloop=null,n.get("result")>0)return t.candidate.ctview.setStatus("Error.","red"),t.candidate.ctview.setCompileStatus("Compilation failed.",n.get("compilemessage"));if(d=0,n.get("customtestcase"))return t.candidate.ctview.setStatus("Compiled successfully.","orange"),a=n.get("stdin")[0],u=n.get("stdout")[0],c=n.get("stdout_debug")?n.get("stdout_debug")[0]:null,p="green",t.candidate.ctview.addTestCase(1,a,u,c,null,"",p);for(f=n.get("testcase_status"),o=h=0,m=f.length;m>h;o=++h)a=f[o],u=n.get("stdout")[o],s=n.get("expected_output")[o],c=n.get("stdout_debug")?n.get("stdout_debug")[o]:null,l=n.get("testcase_message")[o],1===n.get("testcase_status")[o]?(p="green",d++):p="red",t.candidate.ctview.addTestCase(o+1,a,u,c,s,l,p);return 0===d?t.candidate.ctview.setStatus("No test cases passed.","red"):o>d?t.candidate.ctview.setStatus("Compiled successfully. "+d+"/"+o+" sample test cases passed.","orange"):t.candidate.ctview.setStatus("Compiled successfully. All sample test cases passed!","green")}}}(this),error:function(){return function(){return $(".bb-compile").removeClass("disabled"),clearTimeout(t.candidate.ctloop),t.candidate.ctview.setStatus("Unable to fetch compile information from server."),t.candidate.ctmodel=null,t.candidate.ctview=null}}(this)})):void 0},n}(window.HR.GenericView),t=null!=(n=window.HR)?n:{},t.TestTryQuestionView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t;return t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template="x/test-update-saved-message-dialog",i.prototype.events=function(){return{"click a.cancel-dialog":this.closeDialog,"click a.update-saved-message":this.updateSavedMessage}},i.prototype.initialize=function(t){return null==t&&(t={}),this.message=t.message,this.name=t.name,this.parent=t.parent},i.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)),this.$("#test-update-saved-message-modal").modal(),this},i.prototype.updateSavedMessage=function(t){var e,i,r,n;return t.preventDefault(),i=null!=(n=this.model.get("saved_messages"))?n:{},i[this.name]=this.message,e={saved_messages:i},r=this,this.model.save(e,{success:function(){return setTimeout(function(){return r.$(".close").click(),r.parent.render(),HR.util.inlineLoadingEnd({message:"Template '"+r.name+"' has been updated"})})}})},i.prototype.closeDialog=function(t){return t.preventDefault(),this.$(".close").click()},i}(window.HR.GenericView),HR.TestUpdateSavedMessageDialogView=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n;return r=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.initialize=function(t){var e;return e=this,this.filters=t.filters,this.page=t.page,this.advanced_search_open=t.advanced_search_open,this._subviews=[],this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"sort",this.render)},n.prototype.template="x/tests",n.prototype.className="tests-list-view",n.prototype.events=function(){return{"click .launch-wizard":"showWizardPopup","click .open-test":"openTest","click a#new-test-popup-link":"showCreateTestPopup","click a#wizard-modal-link":"showWizardPopup","click a#create-test":"showWizardPopup","click a#new-test-popup-cancel":"closeCreateTestPopup","submit form[name=new-test-form]":"createTest","click .create-test":"createTest","keydown #new-test-duration":"checkInput","submit form[name=search]":"searchTests","click .showAdvanceSearch":"showAdvanceSearch","click .hideAdvanceSearch":"hideAdvanceSearch","click .js-clear-title":"clearTestTitle","click a#csharp-test":"createWizardTest","click a#java-test":"createWizardTest","click a#cpp-test":"createWizardTest","click a#close-wizard-modal":"closeModal","click a#close-welcome-modal":"closeModal","click a#close-first-test-modal":"closeModal","click a#close-activation-modal":"closeModal"}},n.prototype.openTest=function(t){return t.preventDefault(),Backbone.history.navigate($("button[name=open-test]").attr("value"),!0)},n.prototype.clearTestTitle=function(t){return t&&t.preventDefault(),this.$("#test-search-input").val(""),this.searchTests()},n.prototype.searchTests=function(e){return e&&e.preventDefault(),this.test_name=this.$("#test-search-input").val(),""===this.test_name?t.router.navigate("/tests",!0):this.advacned_search.basicSearch(this.test_name)},n.prototype.hideAdvanceSearch=function(t){return t&&t.preventDefault(),$("#advanced-search").slideUp(),$(".hideAdvanceSearch").hide(),this.$("#basic-search").show(),this.$(".showAdvanceSearch").fadeIn(200),this.advanced_search_open=!1},n.prototype.showAdvanceSearch=function(t){return t&&t.preventDefault(),$("#advanced-search").slideDown(),$("#basic-search").hide(),this.$(".showAdvanceSearch").hide(),setTimeout(function(t){return function(){return t.$(".hideAdvanceSearch").fadeIn(200)}}(this),200),this.$(".overflow-content").animate({scrollTop:0}),this.advanced_search_open=!0},n.prototype.paginationPath=function(){return""===this.filters.replace("?","")?"tests/page/":this.advacned_search?this.advacned_search.searchPath()+"&page=":"/tests/search/"+this.filters+"&page="},n.prototype._render=function(e){var i,r,n,s;return null==e&&(e=!1),n=this,s=this.collection.toJSON(),i=t.currentUser&&t.currentUser.get("permissions")&&0===parseInt(t.currentUser.get("permissions").tests_permission,10)?!1:!0,s&&(r=t.appController.template(this.template,this)({collection:s,searchOn:""!==this.filters.replace("?",""),throbber:t.appController.viewLoader(),advanced_search_open:this.advanced_search_open,search_test_name:this.advacned_search?this.advacned_search.getFilter("test-name"):"",pagination:t.util.pagination($("<div></div>"),this.collection.getTotal(),this.paginationPath(),this.collection.getPage(),null,10,5,"js-backbone",!0),can_create_tests:i}),$(this.el).html(r)),0===s.length&&this.$("#basic-search").addClass("hidden"),setTimeout(function(){return $("body").click(function(t){return"new-test-popup-link"===t.target.id||"icon2-createtest"===t.target.className||"icon-down-open msL"===t.target.className||$(t.target).closest("#new-test-popup").length||n.closeCreateTestPopup(),"create-test"===t.target.id||"launch-wizard"===t.target.id||"wizard-modal-link"===t.target.id||"icon2-createtest"===t.target.className||$(t.target).closest(".wizard-modal").length?void 0:n.closeWizardPopup()}),e?this.$(".first-test-modal").removeClass("hidden"):void 0}),t.currentUser.isLocked()&&this.$(".account-locked").removeClass("hidden"),this.renderTests(),this.renderAdvancedSearch(),""===this.$("#test-search-input").val()?this.$(".js-clear-title").hide():this.$(".js-clear-title").show(),1===parseInt(t.currentUser.get("sign_in_count"),10)&&0===parseInt(t.currentUser.get("created_tests_count"),10)&&this.$(".welcome-modal").removeClass("hidden"),this},n.prototype.renderAdvancedSearch=function(){return this.advacned_search?this.advacned_search.setElement($(this.el).find("#advanced-search")).render():(this.advacned_search||(this.advacned_search=new t.TestAdvancedSearchView({parent:this,filters:this.filters,page:this.page})),this.advacned_search.setElement($(this.el).find("#advanced-search")).render()),this.$("#search-loading").hide(),""!==this.advacned_search.filterString().replace("?","")?this.$("#tests-title").text("Tests matching search"):(this.$("#tests-title").text("All Tests"),this.$(".0-tests-message").text("")),this.advanced_search_open?this.showAdvanceSearch():this.hideAdvanceSearch()},n.prototype.renderTests=function(){return this.collection.models.length>0?(this.$("#tests-container").empty(),_.each(this.collection.models,function(t){return function(e){var r;return r=new i({model:e,parent:t}),t._subviews.push(r),t.$("#tests-container").append(r.render().el)}}(this))):void 0},n.prototype.createTest=function(e){var i;return e.preventDefault(),this.$(".response-message").removeClass("error").addClass("hidden"),i={name:this.$("#new-test-name").val(),duration:this.$("#new-test-duration").val()},_.isEmpty(i.name)?(this.$("#new-test-name").addClass("error"),this.$(".response-message").removeClass("hidden").addClass("error").html("Test Name Cannot be Empty"),!1):this.collection.create(i,{success:function(e){var i;return this.$(".welcome-modal").addClass("hidden"),i={step:"Finish"},t.util.track("Created test",i),t.util.trackTotango("Created Test","Tests"),Backbone.history.navigate("tests/"+e.id+"/questions",!0)},error:function(){return this.$(".response-message").removeClass("hidden").addClass("error").html("Could not Save Test")}})},n.prototype.checkInput=function(t){return $(t.currentTarget).removeClass("error"),$(".response-message").removeClass("error").addClass("hidden"),t.keyCode>=65&&!(t.keyCode>=96&&t.keyCode<=105)||t.shiftKey?($(t.currentTarget).addClass("error"),$(".response-message").removeClass("hidden").addClass("error").html("Test Duration can only be a number"),!1):void 0},n.prototype.showCreateTestPopup=function(e){var i;return e.preventDefault(),i={step:"Start"},t.util.track("Created test",i),this.$(".welcome-modal").addClass("hidden"),this.$(".first-test-modal").addClass("hidden"),this.$(".wizard-modal").addClass("hidden"),this.$("#new-test-popup").removeClass("hidden")},n.prototype.showWizardPopup=function(e){var i;return e.preventDefault(),i={},(e.target.id="wizard-modal-link")?t.util.track("Launched Test Wizard - New",i):t.util.track("Launched Test Wizard - Welcome",i),this.$(".welcome-modal").addClass("hidden"),this.$(".first-test-modal").addClass("hidden"),this.$("#new-test-popup").addClass("hidden"),this.$(".wizard-modal").removeClass("hidden")},n.prototype.closeCreateTestPopup=function(t){return t&&t.preventDefault(),this.$("#new-test-name").val(""),this.$("#new-test-duration").val(""),this.$("#new-test-popup").addClass("hidden")},n.prototype.closeWizardPopup=function(t){return t&&t.preventDefault(),this.$(".wizard-modal").addClass("hidden")},n.prototype.createWizardTest=function(e){var i,r,n;return e.preventDefault(),t.util.ajaxmsg("Creating Test...",!1,!0,1e3),r=t.currentUser.get("company").name,this.lang="","java-test"===e.currentTarget.id?(this.lang="Java",i={name:r+" Java Test",tid:24974}):"csharp-test"===e.currentTarget.id?(this.lang="C#",i={name:r+" C# Test",tid:28764}):"cpp-test"===e.currentTarget.id&&(this.lang="C++",i={name:r+" C++ Test",tid:24975}),n=this,this.collection.create(i,{silent:!0,success:function(e){return function(i){var r;return e.$(".welcome-modal").addClass("hidden"),t.util.ajaxmsg("Successfully created test...",!1,!0,1e3),t.currentUser.fetch({success:function(){return 1===parseInt(t.currentUser.get("created_tests_count"),10)?e._render(!0):(t.util.ajaxmsg("Taking you to the test...",!1,!0,1e3),Backbone.history.navigate("tests/"+i.id+"/questions",!0))}}),r={lang:n.lang},t.util.track("New Wizard Test",r),t.util.trackTotango("New Wizard Test","Tests")}}(this),error:function(){return this.$(".response-message").removeClass("hidden").addClass("error").html("Could not Save Test")}})},n.prototype.closeModal=function(t){return t.preventDefault(),this.$(".sub-guide-1").addClass("hidden")},n}(window.HR.GenericView),i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/tests-list-item",r.prototype.className="tests-list-item",r.prototype.tagName="li",r.prototype.initialize=function(t){return this.parent=t.parent},r.prototype.events=function(){return{"click .js-toggle-star":"toggleStar"}},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this)({model:this.model.toJSON()}),$(this.el).html(e),this.model.get("starred")&&$(this.el).addClass("starred"),this},r.prototype.toggleStar=function(e){var i,r;return e.preventDefault(),r=t.currentUser.get("starred_test_ids_array"),r||(r=[]),$(this.el).hasClass("starred")?(i=r.indexOf(this.model.get("id")),r.splice(i,1)):r.push(this.model.get("id")),t.currentUser.set("starred_test_ids_array",r),t.currentUser.save(null,{success:function(t){return function(){return t.parent.collection.fetch({success:function(t){return t.sort()}})}}(this)})},r}(window.HR.GenericView),t=null!=(n=window.HR)?n:{},t.TestsView=r,t.TestListItemView=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="x/top-nav-bar",r.prototype.class_name="hr-nav",r.prototype.activeSection="",r.prototype.initialize=function(t){return this.model=t.model,this.listenTo(this.model,"change",this.render)},r.prototype.events=function(){return{"click a.js-nav-link":"navigateAnchor","keydown input#candidate-search-box-gl":"goToCandidateSearch"}},r.prototype.render=function(){var e;return this.activeSection=this.getActiveSection(),e=t.appController.template(this.template,this)({model:this.model.toJSON(),_model:this.model,term:this.term,activeSection:this.activeSection}),$(this.el).html(e),this.highlightActiveSection(),this},r.prototype.setTerm=function(t){return this.term=t,this.render()},r.prototype.navigateAnchor=function(e){var i;return e.ctrlKey||e.metaKey?!0:(e.preventDefault(),i=$(e.currentTarget).attr("href"),i&&"#"!==i?(t.router.navigate(i,!0),this.highlightActiveSection()):void 0)},r.prototype.highlightActiveSection=function(){return this.activeSection=this.getActiveSection(),this.$(".js-nav-sections").removeClass("active"),"tests"===this.activeSection?this.$(".js-tests-section").addClass("active"):"interviews"===this.activeSection?this.$(".js-codepair-section").addClass("active"):"library"===this.activeSection?this.$(".js-library-section").addClass("active"):void 0},r.prototype.getActiveSection=function(){return Backbone.history.fragment?Backbone.history.fragment.split("/")[0]:void 0},r.prototype.goToCandidateSearch=function(e){var i;return i=$(e.currentTarget).val(),13===e.keyCode&&i?t.router.navigate("search/"+i,!0):void 0},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.TopNavigationBarView=i})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t};jQuery(function(){var e,r,n;return r=function(r){function n(){return this.passwordConfirmed=t(this.passwordConfirmed,this),n.__super__.constructor.apply(this,arguments)}return i(n,r),n.prototype.template="x/user-payment-checkout",n.prototype.initialize=function(t){return this.user_data=t.user_data,this.listenTo(this.model,"change",this.render),n.__super__.initialize.call(this,t)},n.prototype.events=function(){return{"submit form[name=checkout-form]":"pay","click .dev-edit-card-details":"gotoCardDetails","click .back":"goBack"}},n.prototype.render=function(){var t,i;return this.checkout=this.model.toJSON(),this.checkout.charge?(i=this.checkout.charge,this.checkout.prorated_deduction&&(i-=this.checkout.prorated_deduction),this.checkout.credit&&(i-=credit)):i=518,t=e.appController.template(this.template,this)({model:this.checkout,user_data:this.user_data,total:i}),$(this.el).html(t),this},n.prototype.pay=function(t){var e;return t.preventDefault(),this.$(".response-message").addClass("hidden"),this.$("button[type=submit]").attr("disabled",!0).addClass("disabled"),e=$("input[name=password]").val(),this.passwordConfirm(e,this.passwordConfirmed)},n.prototype.passwordConfirmed=function(t){var i;return"error"===t?(i="The password entered is incorrect",this.$(".response-message").removeClass("hidden").addClass("error").html(i),e.util.inlineLoadingEnd({}),this.$("button[type=submit]").attr("disabled",!1).removeClass("disabled"),void 0):this.makePayment()},n.prototype.makePayment=function(){var t,i,r,n;return r=this,t={plan:"user",user_data:this.user_data,hr_uid:e.currentUser.id},this.model.get("credit_card_number")||Backbone.history.navigate("payments/card_details",!0),n=e.currentUser.id,i=new e.PaymentModel({plan:this.plan,uid:n}),i.save(t,{override:!0,success:function(){return r.model.fetch(),e.UserSettings.set("checkout",void 0,{silent:!0}),Backbone.history.navigate("settings/team",!0)},error:function(t,i){var r;return r=$.parseJSON(i.responseText),this.$(".response-message").removeClass("hidden").addClass("error").html(r.message),e.util.inlineLoadingEnd({}),this.$("button[type=submit]").attr("disabled",!1).removeClass("disabled")}})},n}(window.HR.PaymentCheckoutView),e=null!=(n=window.HR)?n:{},e.UserPaymentCheckoutView=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="dashboard/e404",r.prototype.initialize=function(){},r.prototype._render=function(){var e;return e=t.appController.template(this.template,this),$(this.el).html(e)},r}(window.HR.GenericView),t=null!=(r=window.HR)?r:{},t.X404View=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){return this.on("error",function(t){return function(e,r){var n;return n=r&&r.responseText?JSON.parse(r.responseText):{message:""},void 0!==t.disableThrobber&&t.disableThrobber===!0||(i.util&&i.util.ajaxmsg&&i.util.ajaxmsg(n.message,!1,!0,1e4),!i.loadingButton)?void 0:i.util.inlineLoadingEnd(n)}}(this)),r.__super__.initialize.call(this,t)},r.prototype.save=function(t,e,n){return void 0===this.disableThrobber||this.disableThrobber!==!0?i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,r.__super__.save.call(this,t,e,n)},r.prototype.destroy=function(t){return void 0===this.disableThrobber||this.disableThrobber!==!0?i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,r.__super__.destroy.call(this,t)},r.prototype.parse=function(t,e){var n;return this.sync_status=!0,void 0===this.disableThrobber||this.disableThrobber!==!0?(i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("",!1,!0,0),i.loadingButton&&i.util.inlineLoadingEnd(t)):this.disableThrobber=!1,n=t&&t.model?t.model:t,r.__super__.parse.call(this,n,e)},r.prototype.fetch=function(){return this.trigger("initreset"),void 0===this.disableThrobber||this.disableThrobber!==!0?i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,Backbone.Model.prototype.fetch.apply(this,arguments)},r.prototype.setCaching=function(t){this.caching=t},r}(Backbone.Model),i=null!=(r=window.HR)?r:{},i.GenericModel=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),i.__super__.initialize.call(this,t,e)},i.prototype.setTid=function(t){this.tid=t},i.prototype.setQid=function(t){this.qid=t},i.prototype.url=function(){return this.get("id")?"/x/api/v1/tests/"+this.tid+"/questions/"+this.qid+"/compile_tests/"+this.get("id"):"/x/api/v1/tests/"+this.tid+"/questions/"+this.qid+"/compile_tests"},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.RecruitCompileTestModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t,e){return null==t&&(t={}),null==e&&(e={}),i.__super__.initialize.call(this,t,e)},i.prototype.setTid=function(t){this.tid=t},i.prototype.setQid=function(t){this.qid=t},i.prototype.url=function(){return this.get("id")?"/x/api/v1/tests/"+this.tid+"/questions/"+this.qid+"/render/"+this.get("id"):"/x/api/v1/tests/"+this.tid+"/questions/"+this.qid+"/render"},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.RecruitDesignTestModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.url=function(){var e;return e=""+t.INTERVIEWS_DOMAIN+"/api/interviews",this.get("id")&&(e+="/"+this.get("id")),e+="?auth_v2="+t.currentUser.get("auth_v2")+"&api_key="+t.currentUser.get("apiKey")+"&_="+1e7*Math.random()},r.shareReportLink=function(t){var e,i,r,n;if(t)return e="",r="",_.isFunction(t.get)?(r=t.get("id"),e=t.get("auth_key")):(r=t.id,e=t.auth_key),n=window.location,i=n.protocol+"//"+n.host+"/x/interviews/"+r+"/report?auth_key="+e},r.prototype.parse=function(e){var i,n,s,o,a,l,u;if(e){for(o=[],n=[],s=function(){var i;return e.access_code&&"interviewer"===this.role?(i=_.clone(this),i.access_code=e.access_code,e.paperurl+"?b="+t.util.Base64.encode(JSON.stringify(i),!1)):e.paperurl+"?b="+t.util.Base64.encode(JSON.stringify(this),!1)},u=e.interview_attendants,a=0,l=u.length;l>a;a++)i=u[a],i.url=s,"interviewer"===i.role?o.push(i):"candidate"===i.role&&n.push(i);e.interviewers=o,e.candidates=n,e.from=new Date(e.from),e.to=new Date(e.to)}return r.__super__.parse.call(this,e)},r.prototype.interviewer=function(){return this.get("interviewers")&&this.get("interviewers").length?this.get("interviewers")[0]:null},r.prototype.interviewersName=function(){return this.get("interviewers")&&this.get("interviewers").length?_.pluck(this.get("interviewers"),"name").join(", "):null},r.prototype.owner=function(){return this.get("user")?this.get("user"):null},r.prototype.createdOn=function(){var e;return e=new Date(this.get("created_at")),moment(e).tz(t.currentUser.get("timezone")).format("D MMM, YYYY HH:mm")},r.prototype.ownerName=function(){return this.get("user")?this.get("user").firstname+" "+this.get("user").lastname:null},r.prototype.candidate=function(){return this.get("candidates")&&this.get("candidates").length?this.get("candidates")[0]:null},r.prototype.when=function(){return t.util.beautifyDates(this.get("from"),this.get("to"))},r.prototype.get=function(t){return t.match(/interviewers|candidates/)&&!this.attributes[t]?(t=t.substr(0,t.length-1),_.filter(this.attributes.interview_attendants,function(e){return e.role===t})):t.match(/interviewer|candidate/)&&!this.attributes[t]?_.find(this.attributes.interview_attendants,function(e){return e.role===t}):r.__super__.get.call(this,t)},r.prototype.save=function(t,e){var i,n,s,o,a,l,u,c,d,p,h;if(n=[],a=this,a.get("candidates")&&a.get("interviewers")){for(p=a.get("candidates"),l=0,c=p.length;c>l;l++)s=p[l],i=s,i.role="candidate",n.push(i);for(h=a.get("interviewers"),u=0,d=h.length;d>u;u++)o=h[u],i=o,i.role="interviewer",n.push(i);a.set("interview_attendants",n)}return r.__super__.save.call(this,t,e)},r.prototype.sync=function(t,e,i){return null==i&&(i={}),i.crossDomain=!0,r.__super__.sync.call(this,t,e,i)},r}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.InterviewModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n,s,o;return r=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(){return this.on("reset",this.register),this.register()},r.prototype.register=function(){return this.recording=new i({interview_id:this.collection.interview_id}),this.recording.fetch({success:function(t){return function(e){return e.get("runs")?t.set("type","runs"):e.get("ops")?t.set("type","ops"):t.set("type","none")}}(this),error:function(t){return function(){return t.recording.set("ops",null)}}(this)})},r.prototype.get=function(t){return this.recording&&"ops"===t?this.recording.get("ops"):this.recording&&"runs"===t?this.recording.get("runs"):r.__super__.get.apply(this,arguments)},r}(window.HR.GenericModel),n=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.defaults=function(){return{ops:[],ob:[],ix:-1}},i.prototype.clone=function(t){var e;if(_.isArray(t))e=[];else{if(!_.isObject(t))return t;e={}}return _.each(t,function(t){return function(i,r){return e[r]=t.clone(i)}}(this)),e},i.prototype.apply=function(){},i.prototype.undo=function(){},i.prototype.next=function(){return this.get("ix")<this.get("ops").length-1?(this.set("ix",this.get("ix")+1),this.apply(this.get("ops")[this.get("ix")])):void 0},i.prototype.prev=function(){var t;return this.get("ix")>-1?(t=this.undo(this.get("ops")[this.get("ix")]),this.set("ix",this.get("ix")-1),t):void 0},i}(window.HR.GenericModel),s=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(t){return null==t&&(t={}),i.__super__.initialize.apply(this,arguments)},i.prototype.apply=function(t){return _.each(t.op,function(t){return function(e){var i,r;return void 0!==e.i?(r=t.get("ob").length?e.p:e.p-1,i=e.i.split(""),i.unshift(r,0),t.get("ob").splice.apply(t.get("ob"),i)):void 0!==e.d?(r=t.get("ob").length-e.d.length?e.p:0,t.get("ob").splice(r,e.d.length)):console.log("no idea")}}(this)),this.get("ob").join("")},i.prototype.undo=function(t){var e;return e=this.clone(t),e.op=_.map(e.op.reverse(),function(t){var e;return e={p:t.p},void 0!==t.i?e.d=t.i:e.i=t.d,e}),this.apply(e)},i.prototype.gotoPosition=function(t){var e,i;for(e=t-this.get("ix"),i=Math.abs(e);i>0;)e>0?this.next():this.prev(),i--;return this.get("ob").join("")},i}(n),i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(t){return this.interview_id=t.interview_id},r.prototype.url=function(){var e;return e=""+t.INTERVIEWS_DOMAIN+"/api/interviews/"+this.interview_id+"/recordings/code?auth_v2="+t.currentUser.get("auth_v2")+"&api_key="+t.currentUser.get("apiKey")},r.prototype.get=function(t){return"ops"===t?this.attributes.ops||[]:r.__super__.get.apply(this,arguments)},r.prototype.sync=function(t,e,i){return null==i&&(i={}),i.crossDomain=!0,r.__super__.sync.call(this,t,e,i)},r}(s),t=null!=(o=window.HR)?o:{},t.InterviewRecordingsModel=r,t.InterviewCodeRecordingModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.setTid=function(t){this.tid=t},i.prototype.url=function(){var t;return t="/x/api/v1/tests/"+this.tid+"/library"},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.LibraryModel=new i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){return this.notifications=[]},i.prototype.push=function(t){return this.notifications.push(t)},i.prototype.pop=function(t){return this.notifications.pop(t)},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.NotificationModel=new i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(t){return null==t&&(t={}),this.plan=t.plan,this.hr_uid=t.uid},r.prototype.url=function(){var e;return this.plan?(e=""+t.RECRUIT2_DOMAIN+"/recruit2/billing/?plan="+this.plan,this.hr_uid&&(e+="&hr_uid="+this.hr_uid)):(e=""+t.RECRUIT2_DOMAIN+"/recruit2/billing",this.hr_uid&&(e+="?hr_uid="+this.hr_uid)),e},r}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.PaymentModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.urlRoot=function(){var t;return this.tid=this.get("tid"),t=this.tid?"/x/api/v1/tests/"+this.tid+"/questions":"/x/api/v1/questions"},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.QuestionModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.url=function(){var t;return this.id&&this.tid?t="/x/tests/"+this.tid+"/attempts/{@id}":void 0},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.TestAttemptModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.SearchCandidateModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.urlRoot=function(){return"x/api/v1/tests/"},i}(Backbone.Model),t=null!=(r=window.HR)?r:{},t.SearchItemModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.url=function(){return"/x/api/v1/tests/"+this.get("id")+"/share"},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.TestShareModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.urlRoot="/x/api/v1/teams",i.prototype.parse=function(t){var e;return t.users&&(e=[],_.each(t.users,function(t){var i;return i=new window.HR.UserTeamModel(t),e.push(i)}),t.users=e),t},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.TeamModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e
}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.url=function(){var t;return this.tid=this.get("tid"),this.id&&this.tid&&(t="/x/api/v1/tests/"+this.tid+"/attempts/"+this.id),t},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.TestAttemptModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n;return r=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.action=null,i.prototype.url=function(){var t;return t="/x/api/v1/tests",this.get("id")&&(t+="/"+this.get("id"),this.action&&(t+="/"+this.action)),t},i.prototype.setAction=function(t){this.action=t},i.prototype.unsetAction=function(){return this.action=null},i.prototype.removeQuestion=function(t,e){return $.ajax({url:"/x/api/v1/tests/"+this.id+"/questions/"+t,type:"DELETE",success:e.success,error:e.error}),this.fetch()},i.prototype.addQuestion=function(t,e,i){var r,n,s;return s=this.get("questions_array"),e?(n=s.splice(0,e),r=s,s=n.concat([t]),s=s.concat(r)):s.push(t),this.save({questions_array:s},{success:i.success,error:i.error})},i}(window.HR.GenericModel),i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.url=function(){return"/x/api/v1/tests/"+this.get("id")+"/candidate"},i}(window.HR.GenericModel),t=null!=(n=window.HR)?n:{},t.TestModel=r,t.RecruitTestModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.urlRoot=function(){var t;return this.tid=this.get("tid"),this.qid=this.get("qid"),t=this.tid?"/x/api/v1/tests/"+this.tid+"/questions/"+this.qid+"/testcases":"/x/api/v1/questions/"+this.qid+"/testcases"},i.prototype.downloadURL=function(){return this.get("tid")?"/x/api/v1/tests/"+this.get("tid")+"/questions/"+this.get("qid")+"/testcases/"+this.get("id")+"/download":"/x/api/v1/questions/"+this.get("qid")+"/testcases/"+this.get("id")+"/download"},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.TestCaseModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.url=function(){return this.id?"/x/api/v1/teams/"+this.get("team_id")+"/users/"+this.id:"/x/api/v1/teams/"+this.get("team_id")+"/users"},i}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.UserTeamModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.urlRoot="/x/api/v1/users",r.prototype.parse=function(e,i){var n,s;return e.model&&(e.model.timezone||""===e.model.timezone)&&(s=jstz.determine_timezone().timezone.olson_tz,e.model.timezone!==s&&(n=new t.util.changeTimeZoneDialog({model:this,userTimeZone:e.model.timezone,currentTimeZone:s})),""===e.model.timezone&&(e.model.timezone=s,e.model.timezone_local=!0)),r.__super__.parse.call(this,e,i)},r.prototype.updatePassword=function(t){var e;return e=$.ajax({url:"/x/api/v1/users/change_password",type:"PUT",data:t})},r.prototype.invites_count=function(){var t,e;return t=this.get("company"),"unlimited"===t.type?e="unlimited":(e=0,t.invites&&(e+=t.invites),t.subscription_invites&&(e+=t.subscription_invites)),e},r.prototype.isLocked=function(){return"locked"===this.get("type")||this.get("company")&&"locked"===this.get("company").type?!0:!1},r.prototype.canCreateInterviews=function(){return this.get("permissions")&&0===parseInt(this.get("permissions").interviews_permission,10)?!1:"developer"!==this.get("role")?!0:this.get("company")&&this.get("company").developers_create_interviews&&"False"===this.get("company").developers_create_interviews?!1:!0},r.prototype.canViewCandidateDetails=function(){return this.get("company")&&this.get("company").developers_see_candidate_details&&"False"===this.get("company").developers_see_candidate_details&&"developer"===this.get("role")?!1:!0},r}(window.HR.GenericModel),t=null!=(r=window.HR)?r:{},t.UserModel=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.initialize=function(t){return this.sync_status=!1,this.render_once=!1,this.on("error",function(t){return function(e,r){var n;return n=JSON.parse(r.responseText),void 0!==t.disableThrobber&&t.disableThrobber===!0||(i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("",!1,!0,0),!i.loadingButton)?void 0:i.util.inlineLoadingEnd(n)}}(this)),r.__super__.initialize.call(this,t)},r.prototype.fetch=function(t){return null==t&&(t={}),this.trigger("initreset"),void 0===this.disableThrobber||this.disableThrobber!==!0?i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("Loading...",!1,!0,1e3):this.disableThrobber=!1,Backbone.Collection.prototype.fetch.apply(this,arguments)},r.prototype.parse=function(t){return this.sync_status=!0,this.render_once=!1,t.metamodel&&(this.metamodel=t.metamodel),"number"==typeof t.total&&(this.total=t.total),"number"==typeof t.page&&(this.page=t.page),void 0===this.disableThrobber||this.disableThrobber!==!0?(i.util&&i.util.ajaxmsg&&i.util.ajaxmsg("",!1,!0,0),i.loadingButton&&i.util.inlineLoadingEnd(t)):this.disableThrobber=!1,t.models},r.prototype.setCurrentPage=function(t){this.page=t},r.prototype.getCurrentPage=function(){return this.page},r.prototype.getTotal=function(){return this.total},r}(Backbone.Collection),i=null!=(r=window.HR)?r:{},i.GenericCollection=t})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.model=window.HR.TestAttemptModel,i.prototype.url=function(){var t;return this.tid&&(t=this.type?"/x/api/v1/tests/"+this.tid+"/attempts?type="+this.type:"/x/api/v1/tests/"+this.tid+"/attempts"),t},i.prototype.setTid=function(t){this.tid=t},i.prototype.setType=function(t){this.type=t},i}(window.HR.GenericCollection),t=null!=(r=window.HR)?r:{},t.TestCandidatesCollection=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.initialize=function(t){return this.interview_id=t.id},r.prototype.model=window.HR.InterviewRecordingsModel,r.prototype.url=function(){var e;return e=""+t.INTERVIEWS_DOMAIN+"/api/interviews/"+this.interview_id+"/recordings?auth_v2="+t.currentUser.get("auth_v2")+"&api_key="+t.currentUser.get("apiKey")},r.prototype.parse=function(t){return t},r.prototype.sync=function(t,e,i){return null==i&&(i={}),i.crossDomain=!0,r.__super__.sync.call(this,t,e,i)},r}(window.HR.GenericCollection),t=null!=(r=window.HR)?r:{},t.InterviewRecordingsCollection=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.model=window.HR.InterviewModel,r.prototype.initialize=function(t){return r.__super__.initialize.call(this,t),this.filters={}},r.prototype.url=function(){var e;return e=""+t.INTERVIEWS_DOMAIN+"/api/interviews?auth_v2="+t.currentUser.get("auth_v2")+"&api_key="+t.currentUser.get("apiKey"),_.isEmpty(this.filters===!1)&&_.each(this.filters,function(t,i){return e+=encodeURIComponent(i)+"="+encodeURIComponent(t)+"&"}),e},r.prototype.setFilter=function(t,e){return this.filters[t]=e},r.prototype.parse=function(t){return t.results},r.prototype.sync=function(t,e,i){return null==i&&(i={}),i.crossDomain=!0,r.__super__.sync.call(this,t,e,i)},r}(window.HR.GenericCollection),t=null!=(r=window.HR)?r:{},t.InterviewsCollection=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.url=function(){var t;return t="/x/api/v1/candidates"},i.prototype.model=window.HR.SearchCandidateModel,i}(window.HR.GenericCollection),t=null!=(r=window.HR)?r:{},t.SearchCandidatesCollection=i})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t};jQuery(function(){var e,r,n;return r=function(e){function r(){return this.initialize=t(this.initialize,this),r.__super__.constructor.apply(this,arguments)}return i(r,e),r.prototype.initialize=function(t){return r.__super__.initialize.call(this,t),this.data_type_map=[]},r.prototype.url=function(){var t;return t="/x/api/v1/tests/search"},r.prototype.setType=function(t){this.type=t},r.prototype.setDataTypes=function(t){this.dataTypes=t},r.prototype.setGroups=function(t){this.groups=t},r.prototype.search=function(t,e,i){var r;return null==t&&(t={}),null==e&&(e="contains"),null==i&&(i="intersection"),r={},_.each(t,function(t){return function(i,n){var s,o,a;return s=t.groups[n]?t.groups[n]:n,r[s]||(r[s]=[]),a=_.select(t.models,function(r){var s,o,a,l,u;if(a=r.get("model")+"-"+r.get("field"),a===n){if(t.dataTypes[r.get("field")]&&"date"===t.dataTypes[r.get("field")])return s=i.split("..")[0],l=i.split("..")[1],o=""===s?!0:t.dateCompare(s,r.get("key"))<=0,u=""===l?!0:t.dateCompare(l,r.get("key"))>=0,o&&u;if("contains"===e)return r.get("key").toLowerCase().indexOf(i.toLowerCase())>=0;if("contains case"===e)return r.get("key").indexOf(i)>=0;if("match"===e)return r.get("key").toLowerCase()===i.toLowerCase();if("match case"===e)return r.get("key")===i}}),o=_.map(a,function(t){return t.get("value")}),r[s]=_.union(r[s],_.unique(_.flatten(o)))}}(this)),_.values(r).length>0?"union"===i?_.union.apply(this,_.values(r)):_.intersection.apply(this,_.values(r)):[]},r.prototype.dateCompare=function(t,e){var i,r;return i=moment(t),r=moment(e),i.diff(r)<0?-1:i.diff(r)>0?1:0},r.prototype.model=window.HR.SearchItemModel,r}(window.HR.GenericCollection),e=null!=(n=window.HR)?n:{},e.SearchItemsCollection=r})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.url="/x/api/v1/teams",i.prototype.model=window.HR.TeamModel,i.prototype.parse=function(t){return this.permission=t.permission,this.new_user_permissions=t.new_user_permissions,i.__super__.parse.call(this,t)},i}(window.HR.GenericCollection),t=null!=(r=window.HR)?r:{},t.TeamsCollection=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.model=window.HR.TestCaseModel,i.prototype.setTid=function(t){this.tid=t},i.prototype.setQid=function(t){this.qid=t},i.prototype.url=function(){return this.tid?"/x/api/v1/tests/"+this.tid+"/questions/"+this.qid+"/testcases":"/x/api/v1/questions/"+this.qid+"/testcases"},i.prototype.setOperation=function(t){this.operation=t},i.prototype.getOperation=function(){return this.operation},i.prototype.setTcids=function(t){this.tcids=t},i.prototype.getTcids=function(){return this.tcids},i.prototype.batchOperation=function(t){var e;return null==t&&(t={}),this.operation&&0!==this.tcids.length?(e=this.tcids.join("-"),"download"===this.operation?document.location="/x/api/v1/questions/"+this.qid+"/testcases/batch_ops?tcids="+e+"&operation="+this.operation:_.include(["changescore","changedifficulty","marksample","delete"],this.operation)?$.ajax({type:"POST",url:"/x/api/v1/questions/"+this.qid+"/testcases/batch_ops?tcids="+e+"&operation="+this.operation,data:t,success:function(t){return function(){return t.fetch({reset:!0})}}(this)}):void 0):void 0},i}(window.HR.GenericCollection),t=null!=(r=window.HR)?r:{},t.TestCasesCollection=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.model=window.HR.TestModel,i.prototype.initialize=function(){return this.page=1},i.prototype.url=function(){var t;return t=this.filterString?"/x/api/v1/tests/search?type=advanced&filters="+this.filterString:this.tids||""===this.tids?"/x/api/v1/tests/?tids="+this.tids:"/x/api/v1/tests/?",this.page&&(t+="&page="+this.page),t},i.prototype.getTotal=function(){return this.total},i.prototype.getPage=function(){return this.page},i.prototype.setPage=function(t){this.page=t},i.prototype.setTids=function(t){this.tids=t},i.prototype.setFilterString=function(t){this.filterString=t},i.prototype.getTids=function(){return this.tids},i.prototype.comparator=function(t,e){return t.get("starred")&&e.get("starred")?t.get("id")>e.get("id")?-1:1:t.get("starred")?-1:e.get("starred")?1:t.get("id")>e.get("id")?-1:1},i}(window.HR.GenericCollection),t=null!=(r=window.HR)?r:{},t.TestsCollection=i})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e},i=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};jQuery(function(){var t,n,s,o,a,l,u,c,d,p,h,m,f,v,g,y,w,b;return d=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/instructions",r.prototype.className="candidate-instructions",r.prototype.initialize=function(t){return this.model=t.model},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({instructions:this.model.get("instructions")})),this},r}(window.HR.GenericView),p=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/question-list",r.prototype.className="candidate-qlist",r.prototype.events={"click .test-done":"testDone","click .next-section":"sectionNext","click .js-solvelink":"handleNav"},r.prototype.initialize=function(){return this.model=t.candidate.candidateAttemptModel,this.tid=t.candidate.candidateTestModel.get("unique_id"),this.aid=this.model.get("id")},r.prototype.render=function(){var e,i,r,n,s,o;return r=this.model.get("questions"),s=this.model.get("solve_mapping"),n=this.model.get("sections_mapping"),e=this.model.get("section"),$(this.el).html(t.appController.template(this.template,this)({section_count:n?n.length:1,current_section:e?e:1,footer_copyright:!!t.candidate.candidateTestModel.get("footer_copyright")})),n?(i=0,_.each(n,function(t){return function(n,o){var a;return a=t.getTable(r.slice(i,i+parseInt(n.questions)),i+1,s,o+1!==e),t.$("table.section"+(o+1)).html(a),i+=parseInt(n.questions)}}(this)),n.length>1&&e<n.length&&this.$("button.section-finish-"+e).removeClass("hidden")):(o=this.getTable(r,1,s),this.$("table.section1").html(o)),t.candidate.lastQuestionViewed&&setTimeout(function(e){return function(){return e.$(".qlist-"+t.candidate.lastQuestionViewed)[0]&&e.$(".qlist-"+t.candidate.lastQuestionViewed)[0].scrollIntoView()}}(this)),this},r.prototype.getTable=function(t,e,i,r){var n,s,o;return null==r&&(r=!1),o=this.tid,s=e,n="",_.each(t,function(t){var e,a;return a="",a+=1===s?"<tr class='border qlist-"+s+"''>":"<tr class='qlist-"+s+"'>",a+="<td width='5%' class='grey right'><span class='mdR'>Q"+s+"</span></td>",a+='<td width="46%"><a class="js-solvelink question-name" ',a+=r?">":"href='"+o+"/questions/"+t.unique_id+"'>",a+=t.name?t.name:"Question <em class='fnt-sz-small grey' style='font-weight: 500;'> &nbsp;&nbsp; "+_.escape(t.preview)+"..</em>",a+="</a></td>",a+="<td width='12%' class='fnt-sz-mid'>"+window.istreet.cfg.hrqn[t.type]+"</td>",e=r?"":"href='"+o+"/questions/"+t.unique_id+"'",a+=_.has(i,t.unique_id)?"<td width='12%' class='fnt-sz-mid'><span class='green customer-green-alternative'>submitted</span></td><td width='19%' class='right'><a "+e+" class='normal-underline display-inline-block margin-right-15 fnt-sz-mid js-solvelink' style='margin: 9px 11px 9px 0;''>Modify Submission</a></td>":"<td width='12%' class='fnt-sz-mid'>not answered</td><td width='19%' class='right'><a "+e+" class='btn btn-line margin-right-15 fnt-sz-mid js-solvelink'>Solve Question</a></td>",a+="</tr>",s++,n+=a}),n},r.prototype.handleNav=function(e){var i;return e.preventDefault(),i=this.$(e.currentTarget),i.attr("href")&&!t.candidate.ongoingQuestionNavigation?(t.candidate.ongoingQuestionNavigation=!0,setTimeout(function(){return t.candidate.ongoingQuestionNavigation=!1},1e4),t.candidate.attemptRefreshNeeded=!0,t.router.navigate(i.attr("href"),{trigger:!0,replace:!0})):void 0},r.prototype.testDone=function(){return t.util.confirm({title:"Confirm test close",message:"Once closed, you can no longer view or modify this test.\n\nAre you sure you are done, and want to close the test?",okButtonText:"Yes, close this test.",cancelButtonText:"No, go back.",okCallback:function(){return function(){return t.candidate.candidateTestModel.setAction("logout"),t.candidate.pingTimer&&clearInterval(t.candidate.pingTimer),t.candidate.candidateTestModel.save({how:"userclick"},{success:function(e){return t.router.navigate(""+e.get("unique_id")+"/redirect",{trigger:!0,replace:!0})}})}}(this)})},r.prototype.sectionNext=function(e){return t.util.confirm({title:"Confirm section close",message:"You will not be able access this section again.<br><br>Are you sure?",okButtonText:"Yes, move to next section.",cancelButtonText:"No, stay.",okCallback:function(i){return function(){return t.candidate.candidateAttemptModel.set("section_close",i.$(e.currentTarget).attr("data-section")),t.candidate.candidateAttemptModel.save(null,{success:function(){return t.router.navigate(""+t.candidate.candidateTestModel.get("unique_id")+"/redirect",{trigger:!0,replace:!0})},error:function(){return t.router.navigate(""+t.candidate.candidateTestModel.get("unique_id")+"/redirect",{trigger:!0,replace:!0})}})}}(this)})},r}(window.HR.GenericView),m=function(r){function n(){return this.getAnswerToSave=i(this.getAnswerToSave,this),n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="recruit/question-base",n.prototype.className="question-base",n.prototype.initialize=function(e){return this.model=e.model,this.tid=t.candidate.candidateTestModel.get("unique_id")},n.prototype.events={"click .ans-submit":"submitAnswer"},n.prototype.getAnswerToSave=function(){var t,e;return e=this.model.get("type"),_.contains(["code","approx","textAns","design"],e)?this.view?(t={type:e,answer:this.view.answer()},t.answer?t:null):null:null},n.prototype.submitAnswer=function(e){var i,r,n;return e.preventDefault(),i={type:this.model.attributes.type,answer:this.view.answer()},i.answer?(this.$(e.currentTarget).html("Submitting.."),this.$(e.currentTarget).attr("disabled","disabled"),r={qid:this.model.get("unique_id"),answer:i},n={url:"/recruit/attempts/"+t.candidate.candidateAttemptModel.get("id")+"/solves",data:r,dataType:"json",type:"POST",success:function(i){return function(r){var n;return i.$(e.currentTarget).html("Done, redirecting.."),r.error?i.showError(r.error):(n=i.model.get("nextqid")?""+i.tid+"/questions/"+i.model.get("nextqid"):""+i.tid+"/questions",t.candidate.attemptRefreshNeeded=!0,t.router.navigate(""+n,{trigger:!0,replace:!0}))}}(this),error:function(t){return function(i){t.$(e.currentTarget).html("Submit answer & continue"),t.$(e.currentTarget).removeAttr("disabled");try{return r=JSON.parse(i.responseText),r.error?t.showError(r.error):t.showError()}catch(n){return t.showError()}}}(this)},_.contains(["file_upload","code_upload"],this.model.get("type"))!==!0||_.isString(this.view.answer())||(r={qid:this.model.get("unique_id")},n.iframe=!0,n.processData=!1,n.data=r,n.files=this.view.answer()),$.ajax(n)):t.util.alert({title:"Submit error",message:"Please answer the question before submitting."})},n.prototype.showError=function(e){return null==e&&(e="Unable to save your answer."),t.util.candidatemsg(""+e+"<br><br>Click continue to refresh question listing.<br><br><a href='"+this.tid+"/questions' class='backbone btn'>Continue</a>",!1)},n.prototype._render=function(){var e,i,r,n;switch(this.question=this.model.attributes,$(this.el).html(t.appController.template(this.template,this)({tid:this.tid,question:this.question})),n=!0,this.question.type){case"code":case"approx":this.view=new t.RecruitCandidateCodingView({question:this.question});break;case"design":this.view=new t.RecruitCandidateDesignView({question:this.question,model:this.model});break;case"mcq":case"multiple_mcq":this.view=new t.RecruitCandidateMcqView({question:this.question});break;case"textAns":this.view=new t.RecruitCandidateSubjectiveView({question:this.question});break;case"complete":for(r=this.question.complete_string,e=0,i="<h4>Complete the blanks in the following question with the appropriate answer.</h4><br/>",i+=_.isEmpty(this.question.question)?"":this.question.question;-1!==r.search("{blank}");)r=r.replace("{blank}","<input type='text' class='complete-question' name='blank"+e+"'/>"),e+=1;i+=r,this.view=new t.RecruitCandidateCompleteView({question:this.question});break;case"file_upload":this.view=new t.RecruitCandidateFileUploadView({question:this.question});break;case"code_upload":this.view=new t.RecruitCandidateCodeUploadView({question:this.question});break;case"uml":case"electrical":this.view=new t.RecruitCandidateUMLView({question:this.question});break;default:n=!1}return this.question.name?this.$(".qtitle").html(""+this.question.name+" ("+window.istreet.cfg.hrqn[this.question.type]+")"):this.$(".qtitle").html(window.istreet.cfg.hrqn[this.question.type]),"complete"===this.question.type?this.$(".challenge-text").html(i):this.$(".challenge-text").html(this.question.question),n?this.$(".qcontent").html(this.view.render().el):(this.$(".qcontent").html("<center>This question type is not available.</center>"),this.$(".ans-submit").addClass("disabled")),t.candidate.lastQuestionViewed=this.model.get("qno"),"True"!==t.candidate.candidateTestModel.get("enable_copy_paste")&&$(document).on("cut copy paste contextmenu",function(t){return $(t.target).parents("#editor").length?void 0:t.preventDefault()}),setTimeout(function(){return t.util.scrollToTop()},200),this},n}(window.HR.GenericView),s=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/question-coding",r.prototype.className="question-coding",r.prototype.initialize=function(e){return this.question=e.question,this.test=t.candidate.candidateTestModel||e.test,this.codeshell=null,window.error_marker_widgets=[],t.candidate&&t.candidate.candidateAttemptModel?(this.aid=t.candidate.candidateAttemptModel.get("id"),t.appView.saveCodeOnNavigate=!0):this.aid="testing",this.autoSaveNamespace=e.disableLocalStorage&&e.disableLocalStorage===!0?null:""+this.aid+"-"+this.question.unique_id,this.compilingLock=!1,this},r.prototype.events={"codeshellcompile #editor":"compileAnswer","click #testcase-dl":"testcaseDownload"},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.show_template=!0,this.question.hide_template&&"true"===this.question.hide_template.toLowerCase()&&(this.show_template=!1),this.test.get("hide_template")&&"true"===this.test.get("hide_template").toLowerCase()&&(this.show_template=!1),t.appController.loadCodeMirror(function(t){return function(){return t.applyCodeshell()}}(this),function(){return function(){return t.util.candidatemsg("Unable to load code editor.<br><br> Check your internet connection, and refresh the page to fix this.",!1)}}(this)),this},r.prototype.testcaseDownload=function(){var e;return e="/recruit/attempts/"+t.candidate.candidateAttemptModel.id+"/questions/"+this.question.unique_id+"/testcases",t.util.downloadURL(e)},r.prototype.applyCodeshell=function(){var e;return e={languages:this.question.languages,language:"c",showFileTree:!1,autoSaveNamespace:this.autoSaveNamespace,lang_template:this.getLangDefaults(),showNonEditableHeadTail:this.show_template,lang_head_template:this.getLangHeads(),lang_tail_template:this.getLangTails(),compile_button_text:"Run Code",submit_button_text:"Submit code & Continue",showSubmit:!0,showCustomInput:this.showCustomInput(),dynamicMode:!0,lang_line_nos:this.question.line_nos,enableIntellisense:!0,loadmode:function(){return function(e,i){return t.appController.loadCodeMirrorMode(i.lang,function(){return i.callback()})}}(this)},("True"===this.test.get("hide_compile_test")||"True"===this.question.hide_compile_test)&&(e.showCompileTest=!1),"testing"===this.aid&&(e.showSubmit=!1,e.showCompileTest=!1),e.showCompileTest!==!1&&(e.showCompileTest=!0),this.$("#editor").codeshell(e),this.$("#editor").codeshell("refresh"),this.$("#editor").codeshell("onChange",function(t){return function(e,i){return t.deleteMarkersOnSource(e,i)}}(this)),this.set_answer(),setTimeout(function(t){return function(){return t.setDefaultText=!0}}(this),3e3)},r.prototype.getLangDefaults=function(){var t,e,i,r,n;for(e={},n=this.question.languages,i=0,r=n.length;r>i;i++)t=n[i],this.question[t+"_template"]&&(e[t]=this.question[t+"_template"]);return e},r.prototype.getLangHeads=function(){var t,e,i,r,n;if(e={},this.show_template)for(n=this.question.languages,i=0,r=n.length;r>i;i++)t=n[i],this.question[t+"_template_head"]&&(e[t]=this.question[t+"_template_head"]);return e},r.prototype.getLangTails=function(){var t,e,i,r,n;if(e={},this.show_template)for(n=this.question.languages,i=0,r=n.length;r>i;i++)t=n[i],this.question[t+"_template_tail"]&&(e[t]=this.question[t+"_template_tail"]);return e},r.prototype.showCustomInput=function(){return this.question.custom_testcase_allowed&&"False"===this.question.custom_testcase_allowed?!1:!0},r.prototype.compileAnswer=function(e,i){return i.code&&!$(".bb-compile").hasClass("disabled")?(i.custominput&&(i.customtestcase=!0),$(".bb-compile").addClass("disabled"),this.deleteMarkersOnSource(),t.candidate.ctmodel=new t.CandidateCompileTestModel,t.candidate.ctmodel.setAid(this.aid),t.candidate.ctmodel.setQid(this.question.unique_id),"runalltestcases"===e&&t.candidate.ctmodel.setAllCases(!0),t.candidate.ctview=new t.RecruitCandidateCompileTestView,this.$("#runstatus").html(t.candidate.ctview.render().el),t.util.scrollToBottom(1e3),t.candidate.ctmodel.save(i,{success:function(r){return function(){return t.candidate.ctview.setStatus("Uploaded. Waiting for results.."),t.candidate.ctloop=setTimeout(function(){return r.checkForResult(r,i,e)},2e3)}}(this),error:function(){return function(){return $(".bb-compile").removeClass("disabled"),t.candidate.ctmodel=null,t.candidate.ctview.setStatus("Could not compile as server is unreachable.")}}(this)})):void 0},r.prototype.checkForResult=function(e,i,r,n){return null==n&&(n=null),t.candidate.ctloop?(t.candidate.ctview.setStatus(n?n:"Processing.."),t.candidate.ctmodel.fetch({success:function(s){return function(o){var a,l,u,c,d,p,h,m,f,v,g,y;if(0===o.get("status"))return n=o.get("status_string")?o.get("status_string"):null,t.candidate.ctloop=setTimeout(function(){return e.checkForResult(e,i,r,n)},2e3),void 0;if(0!==o.get("status"))if($(".bb-compile").removeClass("disabled"),clearTimeout(t.candidate.ctloop),t.candidate.ctloop=null,o.get("result")>0)t.candidate.ctview.setStatus("Error.","red"),t.candidate.ctview.setCompileStatus("Compilation failed.",o.get("compilemessage")),e.addMarkersOnSource(o);else if(h=0,o.get("customtestcase"))t.candidate.ctview.setStatus("Compiled successfully.","orange"),u=o.get("stdin")[0],d=o.get("stdout")[0],p=o.get("stdout_debug")?o.get("stdout_debug")[0]:null,f="txt-green",t.candidate.ctview.addTestCase(1,u,d,p,null,"",f,m);else{for(y=o.get("testcase_status"),l=v=0,g=y.length;g>v;l=++v)u=y[l],d=o.get("stdout")[l],a=o.get("expected_output")[l],p=o.get("stdout_debug")?o.get("stdout_debug")[l]:null,c=o.get("testcase_message")[l],1===o.get("testcase_status")[l]?(f="txt-green",h++):f="txt-orange",o.get("score")&&_.isNumber(o.get("score")[l])&&(m=o.get("score")[l]),t.candidate.ctview.addTestCase(l+1,u,d,p,a,c,f,m);0===o.get("testcase_status").length?t.candidate.ctview.setStatus("Compiled successfully.","orange"):0===h?t.candidate.ctview.setStatus("No test cases passed.","red"):l>h?"runalltestcases"===r?t.candidate.ctview.setStatus("Compiled successfully. "+h+"/"+l+" test cases passed.","orange"):t.candidate.ctview.setStatus("Compiled successfully. "+h+"/"+l+" sample test cases passed.","orange"):"runalltestcases"!==r?(t.candidate.ctview.setStatus("Compiled successfully. All sample test cases passed!","green"),s.$(".bb-runall").show(),e.compileAnswer("runalltestcases",i)):t.candidate.ctview.setStatus("Compiled successfully. All test cases passed!","green")}return t.util.scrollToBottom(1e3)}}(this),error:function(){return function(){return t.candidate.ctmodel=null,$(".bb-compile").removeClass("disabled"),t.candidate.ctview.setStatus("Unable to fetch compile information from server.")}}(this)})):void 0},r.prototype.answer=function(){return this.$("#editor").codeshell("value")},r.prototype.set_answer=function(){return this.question.solve?this.$("#editor").codeshell("setValue",this.question.solve.answer):void 0},r.prototype.checkCopyPaste=function(e){var i;if(this.setDefaultText&&(i=e.text.join(""),i!==this.lastAddedText))return this.lastAddedText=i,"paste"===e.origin&&i.length>100?t.candidate.secureActivity.add({action:"paste",eid:9,qid:this.question.unique_id,insertTime:new Date}):void 0},r.prototype.addMarkersOnSource=function(t){var e,i,r,n,s,o,a,l,u;if(t.get("error_markers")){e=window.codeEditor,i=t.get("error_markers"),u=e.lineCount(),o=i.head_code_lines,l=i.markers;for(n in l)r=l[n].message,s=l[n].line_number,s-=o,u>=s&&(a=$("<div class='error-marker'><span class='error-marker-icon'>!</span>"+r+"</div>"),window.error_marker_widgets.push(e.addLineWidget(s-1,a[0],{above:!0})));return this.$("#editor").codeshell("refresh")}},r.prototype.deleteMarkersOnSource=function(e,i){var r,n;if(e&&i&&t.candidate&&t.candidate.candidateAttemptModel&&"True"===t.candidate.candidateAttemptModel.get("secure")&&this.checkCopyPaste(i),0!==window.error_marker_widgets.length){r=window.codeEditor;for(n in window.error_marker_widgets)r.removeLineWidget(window.error_marker_widgets[n]);return this.$("#editor").codeshell("refresh"),window.error_marker_widgets=[]}},r}(window.HR.GenericView),l=function(r){function n(){return this.hideLoading=i(this.hideLoading,this),n.__super__.constructor.apply(this,arguments)
}return e(n,r),n.prototype.template="recruit/question-design",n.prototype.className="question-design",n.prototype.initialize=function(e){return this.question=e.question,this.test=t.candidate.candidateTestModel||e.test,this.codeshell=null,this.aid=t.candidate&&t.candidate.candidateAttemptModel?t.candidate.candidateAttemptModel.get("id"):"testing",this.autoSaveNamespace="testing"===this.aid?""+this.aid+"-"+this.test.id+"-"+this.question.id:""+this.aid+"-"+this.question.unique_id,"true"===this.question.multiple_files?this.initFileTree():this.multipleFiles=!1,this},n.prototype.events={"click .bb-compile":"renderAnswer"},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.$("#runstatus").load(this.hideLoading),this.show_template=!1,t.appController.loadCodeMirror(function(t){return function(){return t.applyCodeshell()}}(this),function(){return function(){return t.util.alert({message:"There was an error loading the code editor. Please refresh the page."})}}(this)),this},n.prototype.initFileTree=function(){var t,e;return e=this,t=function(t){var i;return i=null,i=t.node_path?t.node_path:$.jstree.reference("#filetree").get_path(t.node).join("/"),$.ajax({url:""+e.model.url()+"/files",type:"POST",data:{node:t.node,operation:t.operation,node_path:i,new_path:t.new_name?t.new_name:void 0},success:t.success,error:t.error})},this.multipleFiles={data:this.question.file_tree,onSave:function(e){return e.original&&e.original.readOnly?"":t({node:e,operation:"save",success:function(){},error:function(){return console.log("error")}})},fetch:function(e,i){return t({node:e.node,operation:"fetch",success:function(t){return e.node.original.fileContents=t.fileContents,i(e)},error:function(){return e.node.original.fileContents={code:"File not supported.",mime_type:"text/plain"},e.node.original.readOnly=!0,i(e)}})},onCreate:function(e,i){return"file"===e.type?t({node:e,node_path:$.jstree.reference("#filetree").get_path(i).join("/")+("/"+e.text),operation:"create",success:function(){},error:function(){return console.log("error")}}):void 0},onRename:function(e,i,r){return"file"===e.type||e.children.length>0?t({node:e,operation:"rename",new_name:r,success:function(){},error:function(){return console.log("error")}}):void 0},onDelete:function(e){return"file"===e.type||e.children.length>0?t({node:e,operation:"delete",success:function(){},error:function(){return console.log("error")}}):void 0}}},n.prototype.applyCodeshell=function(){var e,i,r;return e={showFileTree:this.multipleFiles,autoSaveNamespace:this.autoSaveNamespace,lang_template:this.getLangDefaults(),compile_button_text:"Render",submit_button_text:"Submit code & Continue",showSubmit:!0,languageChangeStyle:"tabs",showCustomInput:!1,dynamicMode:!0,enableIntellisense:!1,loadmode:function(){return function(e,i){return t.appController.loadCodeMirrorMode(i.lang,function(){return i.callback()})}}(this)},this.multipleFiles||(e.languages=this.question.languages,e.language="html",e.showNonEditableHeadTail=this.show_template),"testing"===this.aid&&(e.showSubmit=!1,e.showCompileTest=!0),e.showCompileTest!==!1&&(e.showCompileTest=!0),this.$("#editor").codeshell(e),this.multipleFiles||(this.$("#select-lang").addClass("hidden"),this.$("#select-lang-tabs").remove(),i="<div id='select-lang-tabs'> <div class='pull-left btn-group'>",this.question.languages.forEach(function(t){return i+="<a class='cursor btn btn-white "+(t===e.language?"active":void 0)+"' data-lang='"+t+"'>"+lang_display_mapping[t]+"</a>"}),i+="</div> </div>",r=$("<span class=' pull-left icon-help-circled txt-blue psT psB psL' data-toggle='tooltip' data-placement='right' title='The tabs on the left help you view the corresponding code segment.'></span>").tooltip(),i=$(i),i.find("a").on({click:function(t){return function(e){return e.preventDefault(),i.find("a").removeClass("active"),t.$("#editor").codeshell("saveLangCode"),t.$("#editor").codeshell("changeLanguage",t.$(e.currentTarget).addClass("active").data("lang"))}}(this)}),this.$("#editor > div.grey-header").prepend(i.append(r))),$("#render-help").remove(),this.$("#editor .bb-compile").parent().prepend($("<span id='render-help' class='pull-left icon-help-circled txt-blue psT psB psR' data-toggle='tooltip' data-placement='left' title='Press \"Render\" Button to view the visual output of your code. Press \"Submit code & Continue\" to submit your answer. '></span>").tooltip()),this.$("#editor").codeshell("refresh"),this.set_answer(),setTimeout(function(t){return function(){return t.setDefaultText=!0}}(this),3e3)},n.prototype.getLangDefaults=function(){var t,e,i,r,n;for(e={},n=this.question.languages,i=0,r=n.length;r>i;i++)t=n[i],this.question[t+"_template"]&&(e[t]=this.question[t+"_template"]);return e},n.prototype.hideLoading=function(){return this.$(".bb-compile").length?(this.setStatus("Document prepared successfully.","green"),this.$(".bb-compile").removeClass("disabled"),this.$("#runstatus-load").addClass("hidden"),this.$("#runstatus").removeClass("hidden")):void 0},n.prototype.renderAnswer=function(e,i){var r;if(!$(".bb-compile").hasClass("disabled"))return this.$(".bb-compile").addClass("disabled").data("status","sending"),"testing"!==this.aid?(t.candidate.dtmodel=new t.CandidateDesignTestModel,t.candidate.dtmodel.setAid(this.aid),t.candidate.dtmodel.setQid(this.question.unique_id)):(t.candidate.dtmodel=new t.RecruitDesignTestModel,t.candidate.dtmodel.setQid(this.question.id),t.candidate.dtmodel.setTid(this.test.id)),this.$("#runstatus").addClass("hidden"),this.$("#runstatus-load").removeClass("hidden"),i=this.answer(),this.setStatus("Preparing the document...","black"),"testing"!==this.aid?t.candidate.dtmodel.save(i,{success:function(e){return function(i){var r;return e.setStatus("Loading document.."),r=t.development?""+window.location.protocol+"//design."+window.location.host:""+window.location.protocol+"//design.hackerrank.com",e.$("#runstatus").attr("src",""+r+i.url()+"/"+i.get("id")),t.util.scrollToBottom(1e3)}}(this),error:function(e){return function(){return t.candidate.dtmodel=null,e.setStatus("There was an issue with rendering this code.","red")}}(this)}):(r=$('<form target="runstatus" action="'+t.candidate.dtmodel.url()+'" method="post">\n<input type="hidden" name="testing_design" />\n</form>'),r.find('input[name="testing_design"]').val(JSON.stringify(i)),r.submit())},n.prototype.answer=function(){return this.$("#editor").codeshell("value",!0)},n.prototype.setStatus=function(t,e){return null==e&&(e=""),this.$(".output-area-wrap").removeClass("hidden"),this.$(".status-msg").html(t),""!==e?this.$(".status-msg").addClass(e):void 0},n.prototype.set_answer=function(){var t;return!this.multipleFiles&&this.question.solve?(t={},_.each(this.question.solve.answer,function(e){return t[e.language]=e.code}),this.$("#editor").codeshell("setOption","lang_template",t),this.$("#editor").codeshell("setValue",{language:"html",code:t.html})):void 0},n.prototype.checkCopyPaste=function(e){var i;if(this.setDefaultText&&(i=e.text.join(""),i!==this.lastAddedText))return this.lastAddedText=i,"paste"===e.origin&&i.length>100?t.candidate.secureActivity.add({action:"paste",eid:9,qid:this.question.unique_id,insertTime:new Date}):void 0},n}(window.HR.GenericView),h=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/question-mcq",r.prototype.className="question-mcq",r.prototype.events={"click .clearall":"clearAll"},r.prototype.initialize=function(t){return this.question=t.question},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.set_answer(),this},r.prototype.clearAll=function(t){return t.preventDefault(),this.$('input[name="mcqopts"]').attr("checked",!1)},r.prototype.answer=function(){var t,e;return"mcq"===this.question.type?(e=this.$("input[name=mcqopts]:checked").val(),t=e?e:this.question.solve?-1:null,this.question.explanation_box&&"true"===this.question.explanation_box?{explanation:this.$("textarea[name=explanation]").val(),answer:t}:t):(e=[],_.each(this.$("input[name=mcqopts]:checked"),function(t){return function(i){return e.push(t.$(i).val())}}(this)),e.length?e:this.question.solve?-1:null)},r.prototype.set_answer=function(){var t,e,i,r,n,s;if(this.question.solve){if("mcq"!==this.question.type){for(n=this.question.solve.answer.answer,s=[],i=0,r=n.length;r>i;i++)t=n[i],s.push(this.$("input#mcqopts"+t).prop("checked",!0));return s}return this.$("input#mcqopts"+this.question.solve.answer.answer).prop("checked",!0),this.question.explanation_box&&"true"===this.question.explanation_box&&this.question.solve.metadata?(e=JSON.parse(this.question.solve.metadata),this.$("textarea[name=explanation]").val(e.explanation)):void 0}},r}(window.HR.GenericView),v=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/question-subjective",r.prototype.className="question-subjective",r.prototype.initialize=function(e){return this.question=e.question,t.candidate&&t.candidate.candidateAttemptModel?(this.aid=t.candidate.candidateAttemptModel.get("id"),this.autoSaveNamespace=""+this.aid+"-"+this.question.unique_id,t.appView.saveCodeOnNavigate=!0):(this.aid="testing",this.autoSaveNamespace=null)},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),t.appController.loadCodeMirror(function(t){return function(){return t.applyCodeshell(),t.set_answer()}}(this)),this},r.prototype.applyCodeshell=function(){var t;return t={languages:["text"],language:"text",autoSaveNamespace:this.autoSaveNamespace,showSubmit:!1,showCompileTest:!1,dynamicMode:!0,showCustomInput:!1,lang_line_nos:this.question.line_nos,loadmode:function(){return function(t,e){return e.callback()}}(this)},this.$("#editor").codeshell(t),this.$("#editor").codeshell("refresh")},r.prototype.answer=function(){return this.$("#editor").codeshell("value")},r.prototype.set_answer=function(){return this.question.solve?this.$("#editor").codeshell("setValue",{code:this.question.solve.answer.answer,language:"text"}):void 0},r}(window.HR.GenericView),u=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/question-fileupload",r.prototype.className="question-fileupload",r.prototype.initialize=function(t){return this.question=t.question},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.set_answer(),window.view=this,this},r.prototype.answer=function(){return $(":file").val()?$(":file"):this.question.solve&&this.question.solve.answer?this.question.solve.answer:!1},r.prototype.set_answer=function(){return this.question.solve?this.show_answer(this.question.solve):void 0},r.prototype.show_answer=function(e){var i,r,n,s;return r="",i=e.answer,e.metadata&&(s=JSON.parse(e.metadata),s.filename&&(r=s.filename)),n=t.util.getFileAnchor(i,r),this.$("#current_answer").html(n),this.$(".current-answer-section").removeClass("hidden")},r}(window.HR.GenericView),n=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/question-code-upload",r.prototype.className="question-code-upload",r.prototype.initialize=function(t){return this.question=t.question},r.prototype.events=function(){return{"click button[name=run-code]":"runCode"}},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this.set_answer(),window.view=this,this},r.prototype.enableRunCode=function(){return this.$("button[name=run-code]").removeClass("disabled").removeAttr("disabled")},r.prototype.disableRunCode=function(){return this.$("button[name=run-code]").addClass("disabled").attr("disabled",!0)},r.prototype.showError=function(e){return t.candidate.ctview.setStatus(e)},r.prototype.runCode=function(e){var i,r,n;return this.$("#runstatus").empty(),this.disableRunCode(),i=this.answer(),r={},r.customtestcase=!1,r.kind="project",r.language="maven",t.candidate.ctview=new t.RecruitCandidateCompileTestView,i?(this.$("#runstatus").html(t.candidate.ctview.render().el),t.util.scrollToBottom(1e3),n={url:"/recruit/attempts/"+this.aid+"/questions/"+this.question.unique_id+"/compile_tests?allcases="+!0,data:r,dataType:"json",type:"POST",success:function(i){return function(n){return n.error?(i.enableRunCode(),i.showError(n.error)):(t.candidate.ctmodel=new t.CandidateCompileTestModel,t.candidate.ctmodel.setAid(i.aid),t.candidate.ctmodel.setQid(i.question.unique_id),t.candidate.ctmodel.set("id",n.model.id),t.candidate.ctview.setStatus("Uploaded. Waiting for results.."),t.candidate.ctloop=setTimeout(function(){return i.checkForResult(i,r,e)},2e3))}}(this),error:function(e){return function(i){return e.enableRunCode(),t.candidate.ctview.setStatus(i.error)}}(this)},_.isString(i)?n.data.answer=i:(n.iframe=!0,n.processData=!1,n.files=i),$.ajax(n)):(this.showError("Please upload a file"),void 0)},r.prototype.checkForResult=function(e,i,r){return t.candidate.ctloop?(t.candidate.ctview.setStatus("Processing.."),t.candidate.ctmodel.fetch({success:function(n){return function(s){var o;return 0===s.get("status")?(t.candidate.ctloop=setTimeout(function(){return e.checkForResult(e,i,r)},2e3),void 0):(0!==s.get("status")&&(n.enableRunCode(),s.get("upload_url")&&(n.show_answer(s.get("upload_url")),n.uploaded_answer=s.get("upload_url")),clearTimeout(t.candidate.ctloop),t.candidate.ctloop=null,s.get("result")>0?(t.candidate.ctview.setStatus("Error.","red"),t.candidate.ctview.setCompileStatus("Compilation failed.",s.get("compilemessage"))):(o=0,s.get("signal")&&0===s.get("signal")[0]?(t.candidate.ctview.setStatus("Build successful","green"),t.candidate.ctview.setSuccessfulCompileStatus("Build successful.",s.get("compilemessage"))):(t.candidate.ctview.setStatus("Error.","red"),t.candidate.ctview.setCompileStatus("Build failed.",s.get("compilemessage"))))),t.util.scrollToBottom(1e3))}}(this),error:function(e){return function(){return t.candidate.ctmodel=null,e.enableRunCode(),t.candidate.ctview.setStatus("Unable to fetch compile information from server.")}}(this)})):void 0},r.prototype.answer=function(){return $(":file").val()?$(":file"):this.question.solve&&this.question.solve.answer?this.question.solve.answer:this.uploaded_answer?this.uploaded_answer:!1},r.prototype.set_answer=function(){return this.question.solve?this.show_answer(this.question.solve.answer):void 0},r.prototype.show_answer=function(e){var i;return i=t.util.getFileAnchor(e),this.$("#current_answer").html(i),this.$(".current-answer-section").removeClass("hidden")},r}(window.HR.GenericView),a=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/question-completesentence",r.prototype.className="question-complete",r.prototype.initialize=function(t){return this.question=t.question},r.prototype._render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),this},r.prototype.postrender=function(){return setTimeout(function(t){return function(){return t.set_answer()}}(this))},r.prototype.answer=function(){return _.map($('input[name^="blank"]'),function(t){return $(t).val()})},r.prototype.set_answer=function(){var t;return this.question.solve?(t=0,_.each(this.question.solve.answer,function(e){return $('input[name="blank'+t+'"]').val(e),t+=1})):void 0},r}(window.HR.GenericView),w=function(r){function n(){return this.saveUml=i(this.saveUml,this),n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.template="recruit/question-uml",n.prototype.className="question-uml",n.prototype.initialize=function(e){return this.question=e.question,t.candidate&&t.candidate.candidateAttemptModel?(this.aid=t.candidate.candidateAttemptModel.get("id"),this.autoSaveNamespace=""+this.aid+"-"+this.question.unique_id,t.appView.saveCodeOnNavigate=!0):(this.aid="testing",this.autoSaveNamespace=null),this.umlStorageKey=this.autoSaveNamespace+"-"+this.question.hash,t.appController.loadGraphLibraries(function(t){return function(){return t.editor=new Editor}}(this),function(){return console.log("error")})},n.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({question:this.question})),t.appController.loadCodeMirror(function(t){return function(){return t.applyCodeshell(),t.set_answer()}}(this)),t.appController.loadGraphLibraries(function(t){return function(){return t.initializeUMLView()}}(this),function(){return console.log("error")}),this},n.prototype.initializeUMLView=function(){var t;if(this.localSubmissionData=$.jStorage.get(this.umlStorageKey),this.xml="",this.xml=this.localSubmissionData?this.localSubmissionData.xml:null,this.question.custom_draw_menus)t=this.question.custom_draw_menus;else switch(this.question.type){case"uml":t=["uml"];break;case"electrical":t=["electrical"];break;default:t=[]}return this.ui=new EditorUi(this.editor,t,this.$("#geEditor")[0]),this.xml&&this.ui&&mxGraphFiles.load_xml(this.ui,this.xml),this.ui?setTimeout(this.saveUml,3e3):void 0},n.prototype.saveUml=function(){return this.saveUmlTimeout&&($.jStorage.set(this.umlStorageKey,mxGraphFiles.save(this.ui)),clearTimeout(this.saveUmlTimeout)),this.saveUmlTimeout=setTimeout(function(t){return function(){return t.saveUml()}}(this),3e3)},n.prototype.applyCodeshell=function(){var t;return t={languages:["text"],language:"text",autoSaveNamespace:this.autoSaveNamespace,showSubmit:!1,showCompileTest:!1,dynamicMode:!0,showCustomInput:!1,lang_line_nos:this.question.line_nos,loadmode:function(){return function(t,e){return e.callback()}}(this)},this.$("#editor").codeshell(t),this.$("#editor").codeshell("refresh")},n.prototype.answer=function(){var t;return t=mxGraphFiles.save(this.ui),{description:this.$("#editor").codeshell("value").code,svg:t.svg,xml:t.xml}},n.prototype.set_answer=function(){return this.question.solve?this.$("#editor").codeshell("setValue",{code:this.question.solve.answer.answer,language:"text"}):void 0},n}(window.HR.GenericView),c=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/footer",r.prototype.className="footer",r.prototype.initialize=function(){},r.prototype.render=function(){var e;return $("footer").show(),e=t.candidate.candidateTestModel.get("footer_copyright"),$(this.el).html(t.appController.template(this.template,this)({test:t.candidate.candidateTestModel.toJSON()})),this},r}(window.HR.GenericView),y=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}var n;return e(r,i),r.prototype.template="recruit/topbar",r.prototype.className="topbar",n=300,r.prototype.fullScreeenMode=function(){return screenfull&&!(t.candidate.candidateAttemptModel.get("attempt_done")&&t.candidate.candidateAttemptModel.get("attempt_done")===!0||(clearTimeout(this.fullscreenTimer),this.fullscreenTimer=setTimeout(function(t){return function(){return screenfull.isFullscreen||0!==$(".hr-dialog").length||(t.renderedDialog=!1),t.fullScreeenMode()}}(this),2e3),this.renderedDialog))?("undefined"==typeof this.renderedDialog&&document.addEventListener(screenfull.raw.fullscreenchange,function(e){return function(){return screenfull.isFullscreen||"logout"===t.candidate.candidateTestModel.action?void 0:(e.renderedDialog=!1,e.fullScreeenMode())}}(this)),this.renderedDialog=!0,t.util.alert({title:"Switch to full screen mode",message:"Please switch to full screen mode to proceed to test",callback:function(){return screenfull.enabled?(Backbone.History.started&&Backbone.history.stop(),Backbone.history.start({pushState:!1,root:"/tests"}),Backbone.history.navigate(""+t.candidate.candidateTestModel.get("unique_id")+"/questions",!0),screenfull.request()):void 0}})):void 0},r.prototype.secureMonitoring=function(){var e;if(!this.secureMonitoringActive&&t.candidate.candidateAttemptModel)return this.secureMonitoringActive=!0,e=function(e){return e.insertTime=new Date,t.candidate.secureActivity.add(e)},window.onblur=function(){return e({action:"blur",eid:7})},window.onfocus=function(){return e({action:"focus",eid:8})}},r.prototype.initialize=function(){return Offline.options={reconnect:{initialDelay:3},requests:!1,game:!1}},r.prototype.getTimeLeft=function(){var e;return e=t.candidate.candidateTestModel.get("sectional")?t.candidate.candidateAttemptModel.get("section_time_left"):t.candidate.candidateAttemptModel.get("time_left")},r.prototype.timerForSection=function(){return t.candidate.candidateTestModel.get("sectional")&&t.candidate.candidateAttemptModel.get("section_time_left")!==t.candidate.candidateAttemptModel.get("time_left")},r.prototype.setAlertClass=function(t){return t<this.TIME_LEFT_FOR_ALERT?$(".timerspan").addClass("alerttimer"):$(".timerspan").removeClass("alerttimer")},r.prototype.updateTimer=function(){var t;return t=this.getTimeLeft(),setTimeout(function(e){return function(){return $("#countdown-timer").countdown("destroy").countdown({until:t,layout:"{d<}{dn}{dl} {d>} {hnn}:{mnn}:{snn}",compact:!0}),$("#countdown-timer").countdown("option","onExpiry",e.testTimeUp),$("#countdown-timer").countdown("option","tickInterval",5),$("#countdown-timer").countdown("option","onTick",function(i){return 0===i[0]&&0===i[1]&&0===i[2]&&0===i[3]&&0===i[4]?(t=60*i[5]+i[6],e.setAlertClass(t)):void 0}),e.setAlertClass(t),e.timerForSection()?$("#timertag").html("to section end"):$("#timertag").html("to test end")}}(this))},r.prototype.render=function(){var e,i,r,n,s;return $(this.el).html(t.appController.template(this.template,this)({test:t.candidate.candidateTestModel,attempt:t.candidate.candidateAttemptModel,showalert:this.getTimeLeft<this.TIME_LEFT_FOR_ALERT})),t.candidate.candidateAttemptModel.get("secure")&&"True"===t.candidate.candidateAttemptModel.get("secure")?(this.secureMonitoring(),t.requires(["screenfull/dist/screenfull"],function(t){return function(){return t.fullScreeenMode()}}(this))):t.candidate.windowFocushookPresent||(t.candidate.windowFocushookPresent=!0,window.onfocus=function(){return function(){return t.candidate.windowBlurred=!1,t.candidate.showFocusMessage?(t.candidate.showFocusMessage=!1,t.util.alert({title:"Refresh needed",message:"The test state changed while you were away, and will be refreshed shortly.",timeout:15,callback:function(){var e;if(t.candidate&&t.candidate.candidateTestModel)return e=t.candidate.candidateTestModel.get("unique_id"),t.router.navigate(""+e+"/redirect",{trigger:!0,replace:!0})}})):void 0}}(this),window.onblur=function(){return function(){return t.candidate.windowBlurred=!0}}(this)),this.updateTimer(),t.candidate.pingTimer&&clearInterval(t.candidate.pingTimer),t.candidate.candidateAttemptModel.get("attempt_done")?t.appView.setTopbarView():(s=_.keys(t.candidate.candidateAttemptModel.get("solve_mapping")||{}).length,n=t.candidate.candidateAttemptModel.get("questions").length,this.$(".qdone").html(s),this.$(".qcount").html(n),this.$(".progress-done").css({width:Math.floor(100*s/n)}),e=6e4,i=1e4,r=this.getTimeLeft()<100?i:e,t.candidate.pingTimer=setInterval(function(e){return function(){var i,r,n,s,o;return r={pong:!0},t.candidate.currentQuestion&&(i=t.candidate.questionView.getAnswerToSave(),s=!1,i&&(s=!0,r.to_save_code=i,r.qid=t.candidate.questionView.model.get("unique_id"))),s&&t.candidate.questionView.view.$("#editor").codeshell("setStatusText","Saving draft.."),t.candidate.candidateTestModel?(o=t.candidate.candidateTestModel.get("sectional"),o&&(n=t.candidate.candidateAttemptModel.get("section")),t.candidate.candidateAttemptModel.save({data:r},{success:function(i){return s&&t.candidate.questionView.view.$("#editor").codeshell("setStatusText","Draft saved "+moment().format("hh:mm a")),t.candidate.windowBlurred&&(o&&i.get("section")!==n||i.get("attempt_done"))?t.candidate.showFocusMessage=!0:t.candidate.showFocusMessage?void 0:e.updateTimer()},error:function(){return s?t.candidate.questionView.view.$("#editor").codeshell("setStatusText","Unable to save draft."):void 0}})):void 0}}(this),r)),this},r.prototype.testTimeUp=function(){return t.candidate.pingTimer&&clearInterval(t.candidate.pingTimer),t.candidate.candidateTestModel.get("sectional")&&t.candidate.candidateAttemptModel.get("time_left")>30?($("#countdown-timer").countdown("destroy").html("Section done."),$(".timerspan").removeClass("alerttimer"),$("#timertag").empty(),t.candidate.showFocusMessage=!1,t.util.alert({title:"Section closed",message:"You have exceeded the time limit set for this section.<br><br>All answers you submitted before the time limit have been saved. You will automatically be moved to the next section shortly.",timeout:15,callback:function(){var e;return e=t.candidate.candidateTestModel.get("unique_id"),t.candidate.attemptRefreshNeeded=!0,t.router.navigate(""+e+"/redirect",{trigger:!0,replace:!0})}})):($("#countdown-timer").countdown("destroy").html("Test done."),$(".timerspan").removeClass("alerttimer"),$("#timertag").empty(),t.candidate.showFocusMessage=!1,t.util.alert({title:"Test finished",message:"Thank you for taking this test. You have exceeded the time limit set for this test.<br><br>All answers you submitted before the time limit have been saved.<br><br>You will shortly be redirected to the feedback page.",timeout:60,callback:function(){return t.candidate.candidateTestModel.setAction("logout"),t.candidate.candidateTestModel.save({how:"forced"},{success:function(){return function(e){return t.router.navigate(""+e.get("unique_id")+"/redirect",{trigger:!0,replace:!0})}}(this)})}}))},r}(window.HR.GenericView),f=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template="recruit/sidebar",n.prototype.className="sbar",n.prototype.icon_types={QUESTION_ANSWERED:"nav",QUESTION_UNANSWERED:1,QUESTION_LIST:2},n.prototype.events={"click .js-navlink":"handleNav"},n.prototype.render=function(){var e;return t.candidate.ongoingQuestionNavigation=!1,e=Backbone.history.fragment,$(this.el).html(t.appController.template(this.template,this)),this.$(".fixed-nav").html(this.getTopIcons()),e.endsWith("questions")||e.endsWith("questions/")||(this.$(".questions-nav").html(this.getQuestionIcons()),t.candidate.lastQuestionViewed&&setTimeout(function(e){return function(){return e.$(".qnav-"+t.candidate.lastQuestionViewed)[0]&&e.$(".qnav-"+t.candidate.lastQuestionViewed)[0].scrollIntoView(),e.delegateEvents()}}(this))),this},n.prototype.handleNav=function(e){var i,r;return e.preventDefault(),i=this.$(e.currentTarget),i.hasClass("disabled")||t.candidate.ongoingQuestionNavigation?void 0:(r=i.attr("href"),this.$(".js-navlink").removeAttr("href"),this.$(".js-navlink").addClass("disabled"),i.removeClass("disabled"),t.candidate.attemptRefreshNeeded=!0,t.candidate.ongoingQuestionNavigation=!0,setTimeout(function(){return t.candidate.ongoingQuestionNavigation=!1},1e4),t.router.navigate(r,{trigger:!0,replace:!0}))},n.prototype.getTopIcons=function(){var e,i,r;return i="",r=Backbone.history.fragment,e="",(r.endsWith("questions")||r.endsWith("questions/"))&&(e="active"),i+='<li class="'+e+'"><a href="'+t.candidate.candidateTestModel.get("unique_id")+'/questions" class="backbone js-navlink"><i class="nav-icon icon-list-bullet-large"></i></a></li>',e="",(r.endsWith("instructions")||r.endsWith("instructions/"))&&(e="active"),i+='<li class="'+e+'"><a href="'+t.candidate.candidateTestModel.get("unique_id")+'/instructions" class="backbone js-navlink"><i class="nav-icon icon-help-circled"></i></a></li>'},n.prototype.getQuestionIcons=function(){var e,i,n,s,o,a,l,u,c,d,p;for(s="",a=function(t,e,i,r,n){var s,o,a,l,u;return o=t?"answered":"not-answered",l=e?"disabled":"",s=i?"active":"",a=e||i?"":"js-navlink",u=e||i?"":"href='"+r+"'",'<li class="qnav-'+n+" "+o+" "+l+" "+s+'">\n  <a '+u+' class="'+a+'">\n      <span class="quest-number">'+n+"</span>\n  </a>\n</li>"},u=t.candidate.candidateAttemptModel.get("questions"),n=_.keys(t.candidate.candidateAttemptModel.get("solve_mapping")),o=1,c=0,d=u.length;d>c;c++)l=u[c],p=l.unique_id.toString(),i=r.call(n,p)>=0,e=l.unique_id===t.candidate.currentQuestion,s+=l.disabled?a(i,!0,e,"",o):a(i,!1,e,""+t.candidate.candidateTestModel.get("unique_id")+"/questions/"+l.unique_id,o),o+=1;return s},n}(window.HR.GenericView),o=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/compiletest-base",r.prototype.className="ct-base",r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)),this},r.prototype.setStatus=function(t,e){return null==e&&(e=""),this.$(".status-msg").html(t),""!==e?this.$(".status-msg").addClass(e):void 0},r.prototype.setCompileStatus=function(t,e){return this.$(".compile-header").html(t),this.$(".compile-message").html(e),this.$("#error-message").removeClass("hide")},r.prototype.setSuccessfulCompileStatus=function(t,e){return this.$(".compile-header").html(t),this.$(".compile-message").html(e),this.$("#success-message").removeClass("hide")},r.prototype.addTestCase=function(e,i,r,n,s,o,a,l){var u;return u=new t.RecruitCandidateTestCaseView({tno:e,input:i,output:r,exp_output:s,st_class:a,compiler_msg:o,output_debug:n,score:l}),this.$(".testcases").append(u.render().el)},r}(window.HR.GenericView),g=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/compiletest-testcase",r.prototype.classname="test-case-wrap",r.prototype.initialize=function(t){return this.tno=t.tno,this.input=t.input,this.output=t.output,this.exp_output=t.exp_output,this.compiler_msg=t.compiler_msg,this.st_class=t.st_class,this.output_debug=t.output_debug,this.score=t.score},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({tno:this.tno,input:this.input,output:this.output,exp_output:this.exp_output,compiler_msg:this.compiler_msg,st_class:this.st_class,output_debug:this.output_debug,score:this.score})),this},r}(window.HR.GenericView),t=null!=(b=window.HR)?b:{},t.RecruitCandidateListView=p,t.RecruitCandidateQuestionView=m,t.RecruitCandidateCodingView=s,t.RecruitCandidateDesignView=l,t.RecruitCandidateMcqView=h,t.RecruitCandidateSubjectiveView=v,t.RecruitCandidateCompleteView=a,t.RecruitCandidateFileUploadView=u,t.RecruitCandidateUMLView=w,t.RecruitCandidateTopBarView=new y,t.RecruitCandidateFooterView=new c,t.RecruitCandidateSideBarView=new f,t.RecruitCandidateCompileTestView=o,t.RecruitCandidateTestCaseView=g,t.RecruitCandidateInstructionsView=d,t.RecruitCandidateCodeUploadView=n})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function r(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};jQuery(function(){var t,i,r,n,s,o,a;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/login",r.prototype.className="candidate-login",r.prototype.events={"click .test-submit":"loginAction","click .test-submit-feedback":"submitFeedback","click .test-logout":"logoutTest","click .fblogin":"loginToFB","blur input.error":"removeError"},r.prototype.initialize=function(){},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({test:this.model.attributes})),this.model.get("facebook_login")&&!window.fbAdded&&(window.fbAdded=!0,$.getScript("/assets/fb.js")),this.model.get("logged_in")&&this.model.get("attempt_done")&&setTimeout(function(t){return function(){return t.$(".main-content").addClass("customer-feedback-box")}}(this)),$(this.el).find("div.gray").length>0&&setTimeout(function(t){return function(){return t.render()}}(this)),this},r.prototype.removeError=function(t){return $(t.target).removeClass("error").closest(".error").removeClass("error")},r.prototype.resetError=function(){var t;return t=this.$("#error-message"),t.find("header").html(""),t.find("p").html(""),this.$(".formgroup").removeClass("error").find("[name]").removeClass("error"),t.hide()},r.prototype.setError=function(t,e,i,r){var n,s,o;return null==i&&(i=null),null==r&&(r=null),n=this.$("#error-message"),n.find("header").html(t),n.find("p").html(e),i&&this.$("#error-message").addClass(i),r&&this.$("[name="+r+"]").addClass("error").closest(".formgroup").addClass("error"),n.show(),o=n.position().top,s=parseInt(o,10)/2,setTimeout(function(){return $("html,body").animate({scrollTop:o},s)},0)},r.prototype.loginAction=function(e){var i,r,n,s,o,a,l;if(this.disableButton("test-submit"),a=this,e.preventDefault(),this.resetError(),i=this.$("input[name=username]").val(),n=this.$("input[name=password]").val(),null==this.model.get("enable_acknowledgement")||"True"===this.model.get("enable_acknowledgement")){if(!this.$("#acknowledge").is(":checked"))return this.enableButton("test-submit"),!this.$("#acknowledge-alert").length>0&&this.$("#login-form").before('<div class="text-center alert error error-message" id="acknowledge-alert"> You cannot take this test without agreeing to the specified conditions. </div>'),void 0;
this.$("#acknowledge-alert").remove()}return r=$("#test-login-form").serializeArray(),s={},_.each(r,function(t){return"gender"!==t.name?s[t.name]=t.value:("on"===$("input#gender-m:checked").val()&&(s.gender="m"),"on"===$("input#gender-f:checked").val()?s.gender="f":void 0)}),s.tauth_key=this.model.auth,$("#acknowledge").is(":checked")&&(s.acknowledge="on"),l=this.model.get("unique_id"),o={url:"/recruit/tests/"+l+"/login",data:s,type:"POST",success:function(e){return function(i){var r;return r="string"==typeof i?$.parseJSON($(i).text()):i,t.candidate.candidateTestModel.set(r.model),r.status?(t.util.trackTotango("Candidate Attempted","Tests"),r.model.attempt_done?t.router.navigate(""+l):t.router.navigate(""+l+"/questions",{trigger:!0,replace:!0}),void 0):(e.enableButton("test-submit"),a.setError(r.message.title,r.message.body,null,r.message.field_name))}}(this),error:function(t){return function(e){var i;return t.enableButton("test-submit"),i="string"==typeof e.responseText?$.parseJSON($(e.responseText).text()):e.responseText,i&&i.message?a.setError(i.message.title,i.message.body,i.message.alertclass,i.message.field_name):a.setError("Login error","There was an issue logging into the test")}}(this)},$(":file").length>0&&(o.iframe=!0,o.processData=!1,o.data=s,o.files=$(":file")),$.ajax(o),this},r.prototype.submitFeedback=function(){return this.disableButton("test-submit-feedback"),t.candidate.candidateAttemptModel.set("feedback_text",this.$(".feedback-text").val()),t.candidate.candidateAttemptModel.save(null,{success:function(t){return function(){return $.removeCookie("email",{path:"/"}),$.removeCookie("tid",{path:"/"}),t.enableButton("test-submit-feedback"),t.logoutTest()}}(this),error:function(){return this.enableButton("test-submit-feedback"),console.log("Could not submit feedback.")}})},r.prototype.logoutTest=function(){return t.clearCookies(),window.candidate={},this.$(".main-content").html("<h3>Thank you!</h3><br/><br/><p>The test is done. You may close this window, or head on to  <a href='//www.hackerrank.com'>hackerrank.com</a> and solve challenges.</p>")},r.prototype.disableButton=function(t){return this.$("button."+t).attr("disabled",!0).addClass("disabled")},r.prototype.enableButton=function(t){return this.$("button."+t).attr("disabled",!1).removeClass("disabled")},r.prototype.loginToFB=function(){return window.location=this.model.get("facebook_login_url")},r}(window.HR.GenericView),n=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/instructiontabs",r.prototype.className="ins-tabs",r.prototype.initialize=function(t){return this.subpage=t.subpage,this.public_url=t.public_url},r.prototype.events={"click .js-tablink":"tabClick","click .js-anchor":"anchorClick","click .js-gototop":"gotoTop"},r.prototype.gotoTop=function(t){return t.preventDefault(),$("html, body").animate({scrollTop:0},"slow")},r.prototype.anchorClick=function(t){var e;return t.preventDefault(),e=this.$(t.currentTarget).attr("name"),console.log(e,"a[name="+e+"]"),this.$("a[name="+e+"]")[1].scrollIntoView()},r.prototype.tabClick=function(e){var i,r,n;return e.preventDefault(),i=this.$(e.currentTarget),n=i.attr("id"),r=i.attr("href"),i.parent().parent().find("li").removeClass("active"),this.$("li#"+n).addClass("active"),this.$(".js-content").addClass("hidden"),this.$(".js-content-"+n).removeClass("hidden"),this.public_url?t.router.navigate(r,{replace:!0,trigger:!1}):void 0},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({subpage:this.subpage,public_url:this.public_url,test:t.candidate.candidateTestModel})),this},r}(window.HR.GenericView),r=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/fbresume",r.prototype.className="candidate-fb",r.prototype.events={"click .starttest":"startTest"},r.prototype.initialize=function(t){return this.model=t.model,this.data=t.data},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({test:this.model.attributes,data:this.data})),this},r.prototype.startTest=function(){var e,i;return e=this.$(".userprofile").val(),e?(i={type:"put",url:"/recruit/tests/"+this.model.get("unique_id")+"/fb_login",data:{profile:e},success:function(e){return function(){return t.router.navigate(""+e.model.get("unique_id")+"/questions",{trigger:!0,replace:!0})}}(this),error:function(e){return function(i){return window.candidatemessage=JSON.parse(i.responseText).message,t.router.navigate(""+e.model.get("unique_id")+"/message",{trigger:!0,replace:!0})}}(this)},$.ajax(i)):new t.util.ShowConfirmationDialog({body:"Please enter a short profile about yourself.",title:"Empty profile.",buttons:[{name:"OK",callback:function(t){return t.destroy()}}]}).render()},r}(window.HR.GenericView),s=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/candidatemessage",r.prototype.className="candidate-message",r.prototype.initialize=function(t){return this.model=t.model,this.message=t.message},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({test:this.model&&this.model.attributes||{},message:this.message})),this},r}(window.HR.GenericView),o=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.template="recruit/candidatemismatch",r.prototype.className="candidate-mismatch",r.prototype.events={"click .js-gotoother":"logoutGotoOther"},r.prototype.logoutGotoOther=function(e){return e.preventDefault(),t.clearCookies(),t.candidate.candidateTestModel=null,t.candidate.candidateAttemptModel=null,t.candidate.attemptRefreshNeeded=!1,t.router.navigate(this.$(e.currentTarget).attr("href"),{trigger:!0,replace:!0})},r.prototype.render=function(){return $(this.el).html(t.appController.template(this.template,this)({test:t.candidate.candidateTestModel.toJSON()})),this},r}(window.HR.GenericView),t=null!=(a=window.HR)?a:{},t.RecruitCandidateLoginView=i,t.RecruitFacebookResumeView=r,t.RecruitMessageView=s,t.RecruitMismatchView=o,t.RecruitInfoView=n})}.call(this);
//# sourceMappingURL=recruit-basic-cf54d0f64a9d8207ea39c58de7953066.js.map