var Markdown;if(Markdown="object"==typeof exports&&"function"==typeof require?exports:{},function(){function e(e){return e}function n(){return!1}function r(){}function t(){}r.prototype={chain:function(n,r){var t=this[n];if(!t)throw new Error("unknown hook "+n);this[n]=t===e?r:function(){var e=Array.prototype.slice.call(arguments,0);return e[0]=t.apply(null,e),r.apply(null,e)}},set:function(e,n){if(!this[e])throw new Error("unknown hook "+e);this[e]=n},addNoop:function(n){this[n]=e},addFalse:function(e){this[e]=n}},Markdown.HookCollection=r,t.prototype={set:function(e,n){this["s_"+e]=n},get:function(e){return this["s_"+e]}},Markdown.Converter=function(){function e(e){return e=e.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(e,n,r,t,o,a){return n=n.toLowerCase(),G.set(n,b(r)),o?t:(a&&K.set(n,a.replace(/"/g,"&quot;")),"")})}function n(e){return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,o),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,o),e=e.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,o),e=e.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,o),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,o)}function o(e,n){var r=n;return r=r.replace(/^\n+/,""),r=r.replace(/\n+$/g,""),r="\n\n~K"+(L.push(r)-1)+"K\n\n"}function a(e,r){e=z.preBlockGamut(e,R),e=g(e);var t="<hr />\n";return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,t),e=d(e),e=v(e),e=_(e),e=z.postBlockGamut(e,R),e=n(e),e=C(e,r)}function c(e){return e=z.preSpanGamut(e),e=w(e),e=i(e),e=S(e),e=l(e),e=u(e),e=D(e),e=e.replace(/~P/g,"://"),e=b(e),e=k(e),e=e.replace(/  +\n/g," <br>\n"),e=z.postSpanGamut(e)}function i(e){var n=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return e=e.replace(n,function(e){var n=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return n=q(n,"!"==e.charAt(1)?"\\`*_/":"\\`*_")})}function u(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,p)}function p(e,n,r,t,o,a,c,i){void 0==i&&(i="");var u=n,p=r.replace(/:\/\//g,"~P"),l=t.toLowerCase(),f=o,g=i;if(""==f)if(""==l&&(l=p.toLowerCase().replace(/ ?\n/g," ")),f="#"+l,void 0!=G.get(l))f=G.get(l),void 0!=K.get(l)&&(g=K.get(l));else{if(!(u.search(/\(\s*\)$/m)>-1))return u;f=""}f=A(f),f=q(f,"*_");var d='<a href="'+f+'"';return""!=g&&(g=s(g),g=q(g,"*_"),d+=' title="'+g+'"'),d+=">"+p+"</a>"}function l(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,f),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,f)}function s(e){return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function f(e,n,r,t,o,a,c,i){var u=n,p=r,l=t.toLowerCase(),f=o,g=i;if(g||(g=""),""==f){if(""==l&&(l=p.toLowerCase().replace(/ ?\n/g," ")),f="#"+l,void 0==G.get(l))return u;f=G.get(l),void 0!=K.get(l)&&(g=K.get(l))}p=q(s(p),"*_[]()"),f=q(f,"*_");var d='<img src="'+f+'" alt="'+p+'"';return g=s(g),g=q(g,"*_"),d+=' title="'+g+'"',d+=" />"}function g(e){return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,n){return"<h1>"+c(n)+"</h1>\n\n"}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,n){return"<h2>"+c(n)+"</h2>\n\n"}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,n,r){var t=n.length;return"<h"+t+">"+c(r)+"</h"+t+">\n\n"})}function d(e,n){e+="~0";var r=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return M?e=e.replace(r,function(e,r,t){var o=r,a=t.search(/[*+-]/g)>-1?"ul":"ol",c=h(o,a,n);return c=c.replace(/\s+$/,""),c="<"+a+">"+c+"</"+a+">\n"}):(r=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(r,function(e,n,r,t){var o=n,a=r,c=t.search(/[*+-]/g)>-1?"ul":"ol",i=h(a,c);return i=o+"<"+c+">\n"+i+"</"+c+">\n"})),e=e.replace(/~0/,"")}function h(e,n,r){M++,e=e.replace(/\n{2,}$/,"\n"),e+="~0";var t=W[n],o=new RegExp("(^[ \\t]*)("+t+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+t+")[ \\t]+))","gm"),i=!1;return e=e.replace(o,function(e,n,t,o){var u=o,p=/\n\n$/.test(u),l=p||u.search(/\n{2,}/)>-1;return l||i?u=a(N(u),!0):(u=d(N(u),!0),u=u.replace(/\n$/,""),r||(u=c(u))),i=p,"<li>"+u+"</li>\n"}),e=e.replace(/~0/g,""),M--,e}function v(e){return e+="~0",e=e.replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,n,r){var t=n,o=r;return t=$(N(t)),t=y(t),t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,""),t="<pre><code>"+t+"\n</code></pre>","\n\n"+t+"\n\n"+o}),e=e.replace(/~0/,"")}function m(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(L.push(e)-1)+"K\n\n"}function w(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,n,r,t){var o=t;return o=o.replace(/^([ \t]*)/g,""),o=o.replace(/[ \t]*$/g,""),o=$(o),o=o.replace(/:\/\//g,"~P"),n+"<code>"+o+"</code>"})}function $(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=q(e,"*_{}[]\\",!1)}function k(e){return e=e.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4"),e=e.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4")}function _(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,n){var r=n;return r=r.replace(/^[ \t]*>[ \t]?/gm,"~0"),r=r.replace(/~0/g,""),r=r.replace(/^[ \t]+$/gm,""),r=a(r),r=r.replace(/(^|\n)/g,"$1  "),r=r.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,n){var r=n;return r=r.replace(/^  /gm,"~0"),r=r.replace(/~0/g,"")}),m("<blockquote>\n"+r+"\n</blockquote>")})}function C(e,n){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");for(var r=e.split(/\n{2,}/g),t=[],o=/~K(\d+)K/,a=r.length,i=0;a>i;i++){var u=r[i];o.test(u)?t.push(u):/\S/.test(u)&&(u=c(u),u=u.replace(/^([ \t]*)/g,"<p>"),u+="</p>",t.push(u))}if(!n){a=t.length;for(var i=0;a>i;i++)for(var p=!0;p;)p=!1,t[i]=t[i].replace(/~K(\d+)K/g,function(e,n){return p=!0,L[n]})}return t.join("\n\n")}function b(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function S(e){return e=e.replace(/\\(\\)/g,H),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,H)}function E(e,n,r,t){if(n)return e;if(")"!==t.charAt(t.length-1))return"<"+r+t+">";for(var o=t.match(/[()]/g),a=0,c=0;c<o.length;c++)"("===o[c]?0>=a?a=1:a++:a--;var i="";if(0>a){var u=new RegExp("\\){1,"+-a+"}$");t=t.replace(u,function(e){return i=e,""})}if(i){var p=t.charAt(t.length-1);j.test(p)||(i=p+i,t=t.substr(0,t.length-1))}return"<"+r+t+">"+i}function D(e){e=e.replace(Z,E);var n=function(e,n){return'<a href="'+n+'">'+z.plainLinkText(n)+"</a>"};return e=e.replace(/<((https?|ftp):[^'">\s]+)>/gi,n)}function x(e){return e=e.replace(/~E(\d+)E/g,function(e,n){var r=parseInt(n);return String.fromCharCode(r)})}function N(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,"")}function y(e){if(!/\t/.test(e))return e;var n,r=["    ","   ","  "," "],t=0;return e.replace(/[\n\t]/g,function(e,o){return"\n"===e?(t=o+1,e):(n=(o-t)%4,t=o+1,r[n])})}function A(e){if(!e)return"";var n=e.length;return e.replace(P,function(r,t){return"~D"==r?"%24":":"!=r||t!=n-1&&!/[0-9\/]/.test(e.charAt(t+1))?"%"+r.charCodeAt(0).toString(16):":"})}function q(e,n,r){var t="(["+n.replace(/([\[\]\\])/g,"\\$1")+"])";r&&(t="\\\\"+t);var o=new RegExp(t,"g");return e=e.replace(o,H)}function H(e,n){var r=n.charCodeAt(0);return"~E"+r+"E"}var z=this.hooks=new r;z.addNoop("plainLinkText"),z.addNoop("preConversion"),z.addNoop("postNormalization"),z.addNoop("preBlockGamut"),z.addNoop("postBlockGamut"),z.addNoop("preSpanGamut"),z.addNoop("postSpanGamut"),z.addNoop("postConversion");var G,K,L,M;this.makeHtml=function(r){if(G)throw new Error("Recursive call to converter.makeHtml");return G=new t,K=new t,L=[],M=0,r=z.preConversion(r),r=r.replace(/~/g,"~T"),r=r.replace(/\$/g,"~D"),r=r.replace(/\r\n/g,"\n"),r=r.replace(/\r/g,"\n"),r="\n\n"+r+"\n\n",r=y(r),r=r.replace(/^[ \t]+$/gm,""),r=z.postNormalization(r),r=n(r),r=e(r),r=a(r),r=x(r),r=r.replace(/~D/g,"$$"),r=r.replace(/~T/g,"~"),r=z.postConversion(r),L=K=G=null,r};var R=function(e){return a(e)},W={ol:"\\d+[.]",ul:"[*+-]"},B="[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]",T="[-A-Z0-9+&@#/%=~_|[\\])]",Z=new RegExp('(="|<)?\\b(https?|ftp)(://'+B+"*"+T+")(?=$|\\W)","gi"),j=new RegExp(T,"i"),P=/(?:["'*()[\]:]|~D)/g}}(),function(){function e(e){return e.replace(/<[^>]*>?/gi,n)}function n(e){return e.match(a)||e.match(c)||e.match(i)?e:""}function r(e){if(""==e)return"";var n=/<\/?\w+[^>]*(\s|$|>)/g,r=e.toLowerCase().match(n),t=(r||[]).length;if(0==t)return e;for(var o,a,c,i="<p><img><br><li><hr>",u=[],p=[],l=!1,s=0;t>s;s++)if(o=r[s].replace(/<\/?(\w+).*/,"$1"),!(u[s]||i.search("<"+o+">")>-1)){if(a=r[s],c=-1,!/^<\//.test(a))for(var f=s+1;t>f;f++)if(!u[f]&&r[f]=="</"+o+">"){c=f;break}-1==c?l=p[s]=!0:u[c]=!0}if(!l)return e;var s=0;return e=e.replace(n,function(e){var n=p[s]?"":e;return s++,n})}var t,o;"object"==typeof exports&&"function"==typeof require?(t=exports,o=require("./Markdown.Converter").Converter):(t=window.Markdown,o=t.Converter),t.getSanitizingConverter=function(){var n=new o;return n.hooks.chain("postConversion",e),n.hooks.chain("postConversion",r),n};var a=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,c=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,i=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i}(),NODEJS="undefined"!=typeof module&&module.exports){var pagedown=require("pagedown");process.stdin.resume(),process.stdin.setEncoding("utf8"),_input="",process.stdin.on("data",function(e){_input+=e}),process.stdin.on("end",function(){process.stdout.write(module.HackDown.processData(_input))})}else var pagedown=Markdown;!function(e){function n(e){var n=pagedown.getSanitizingConverter();n.hooks.chain("preConversion",function(e){var n=e,r=/([\$]{1,2}.*?[\$]{1,2})/g;return n=n.replace(r,"`$1`")}),n.hooks.chain("postConversion",function(e){var n=e,r=/<code>([\$]{1,2}.*?[\$]{1,2})<\/code>/g;return n=n.replace(r,"$1")});var r=n.makeHtml(e);return r}e.HackDown=e.HackDown||{},e.HackDown.processData=n,"undefined"!=typeof define&&define([],function(){return e.HackDown})}(NODEJS?module:window);
//# sourceMappingURL=sanitize-c4b8e0dbaf5746480b3fde5688cedc39.js.map